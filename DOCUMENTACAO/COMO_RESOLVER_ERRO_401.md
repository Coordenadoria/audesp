# ğŸ”§ COMO RESOLVER: Erro 401 na TransmissÃ£o

## â±ï¸ Resposta RÃ¡pida (5 minutos)

### O Problema
```
âŒ Erro 401: "A credencial fornecida nÃ£o Ã© vÃ¡lida."
```

### A SoluÃ§Ã£o em 3 Passos

**Passo 1:** Na modal de erro, clique em **"ğŸ”„ Fazer Login Novamente"**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   âŒ Erro na TransmissÃ£o         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   401 Unauthorized               â”‚
â”‚   A credencial fornecida nÃ£o...  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ”„ Fazer Login Novamente]      â”‚  â† CLIQUE AQUI
â”‚  [Fechar]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Passo 2:** Sistema farÃ¡:
- âœ… Limpar tokens antigos
- âœ… Fazer logout automÃ¡tico
- âœ… Retornar Ã  tela de login

**Passo 3:** Tente novamente com CPF diferente:
- Insira CPF que vocÃª sabe que funciona
- Se nÃ£o sabe nenhum, contate sua organizaÃ§Ã£o
- PeÃ§a um CPF que jÃ¡ fez transmissÃ£o antes

---

## ğŸ¯ Objetivo Final
```
CPF Autorizado â†’ Login â†’ Token Novo â†’ TransmissÃ£o âœ…
```

---

## â“ FAQ - Perguntas Frequentes

### **P: Por que "A credencial fornecida nÃ£o Ã© vÃ¡lida"?**
**R:** Seu CPF (22586034805) nÃ£o tem permissÃ£o para transmitir PrestaÃ§Ã£o de Contas na Audesp.

### **P: Posso usar CPF de outro usuÃ¡rio?**
**R:** SIM! Se tiver autorizaÃ§Ã£o, outro CPF com permissÃ£o funcionarÃ¡.

### **P: Meus dados vÃ£o ser perdidos?**
**R:** NÃƒO! Seus dados ficam salvos. Apenas faÃ§a login novamente.

### **P: Quanto tempo demora para ter permissÃ£o?**
**R:** Depende de quem autoriza (gestÃ£o, Audesp). Pode ser instantÃ¢neo ou levar dias.

### **P: E se nenhum CPF na minha organizaÃ§Ã£o funcionar?**
**R:** Contate Audesp: suporte@audesp.tce.sp.gov.br

### **P: O arquivo JSON estÃ¡ correto?**
**R:** SIM! 100% correto conforme schema. O problema Ã© apenas autorizaÃ§Ã£o.

### **P: Preciso fazer tudo de novo?**
**R:** NÃƒO! Seus dados estÃ£o salvos. Apenas login novamente + transmit.

---

## ğŸ”‘ Como Conseguir PermissÃ£o

### OpÃ§Ã£o A: Contatar Sua OrganizaÃ§Ã£o
1. Procure seu gestor/supervisor
2. Diga: "Preciso de um CPF que tenha permissÃ£o para transmitir PrestaÃ§Ã£o de Contas no Audesp"
3. Eles podem:
   - Fornecer um CPF existente
   - Solicitar nova permissÃ£o
   - Orientar prÃ³ximos passos

### OpÃ§Ã£o B: Contatar Audesp Diretamente
**Email:** suporte@audesp.tce.sp.gov.br

**Mensagem:**
```
Assunto: Solicitar PermissÃ£o de TransmissÃ£o

Corpo:
OlÃ¡,

Sou representante da entidade 10048 (municÃ­pio 7107).
Gostaria de solicitar permissÃ£o para transmitir PrestaÃ§Ã£o de Contas de ConvÃªnio.

CPF: [seu CPF]
Nome: [seu nome]
FunÃ§Ã£o: [sua funÃ§Ã£o]

Por favor, informar como proceder.

Obrigado.
```

---

## ğŸ“± Interface de ResoluÃ§Ã£o

### Antes (âŒ Erro 401)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ Erro na TransmissÃ£o     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  401 Unauthorized           â”‚
â”‚  A credencial fornecida...  â”‚
â”‚                             â”‚
â”‚  â³ ProcessandoProcessando...â”‚
â”‚  ğŸ“Š ValidaÃ§Ã£o Local OK!     â”‚
â”‚  ğŸŒ Enviando para Audesp... â”‚
â”‚  âŒ ERRO: 401 Unauthorized  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”´ Campos com Problemas:   â”‚
â”‚  â€¢ AutenticaÃ§Ã£o: Token      â”‚
â”‚    nÃ£o autorizado           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ”„ Fazer Login Novamente]  â”‚
â”‚ [Fechar]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Depois (âœ… Autorizado)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… TransmissÃ£o Completa    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SUCESSO: Documento Recebidoâ”‚
â”‚                             â”‚
â”‚  âœ… ValidaÃ§Ã£o Local OK!     â”‚
â”‚  âœ… Enviando para Audesp... â”‚
â”‚  âœ… Documento Recebido!     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“„ Protocolo:              â”‚
â”‚  F5ABC71071004801           â”‚
â”‚                             â”‚
â”‚  ğŸ“… Data/Hora:              â”‚
â”‚  19/01/2026 12:30           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Fechar]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Se Tiver DÃºvidas TÃ©cnicas

### Verificar Estrutura do JSON
```bash
# Ver tamanho
du -h arquivo.json

# Validar JSON
jq . arquivo.json

# Ver primeiras linhas
head -20 arquivo.json
```

### Verificar Token
O sistema automaticamente:
- âœ… Valida token
- âœ… Adiciona prefix "Bearer"
- âœ… Envia com credenciais
- âœ… Mostra erros detalhados

---

## âš¡ Checklist RÃ¡pido

- [ ] Clicou "Fazer Login Novamente"?
- [ ] Sistema limpou tokens?
- [ ] Fez login com novo CPF?
- [ ] Voltou para transmitir?
- [ ] TransmissÃ£o funcionou?

---

## ğŸ“ Precisa de Ajuda?

| SituaÃ§Ã£o | AÃ§Ã£o |
|----------|------|
| **JSON estÃ¡ errado** | Veja validaÃ§Ã£o em `TESTE_TRANSMISSAO_RESULTADO.md` |
| **CPF sem permissÃ£o** | Contate sua organizaÃ§Ã£o ou Audesp |
| **Token expirou** | Clique "Fazer Login Novamente" |
| **Erro 400** | JSON nÃ£o conforme schema |
| **Erro 403** | Acesso proibido (entidade/municÃ­pio) |
| **Erro 500** | Servidor Audesp indisponÃ­vel |

---

## ğŸ“ Educativo: Por que 401?

```
HTTP 401 = Unauthorized
Significa: "VocÃª nÃ£o tem permissÃ£o para isto"

Diferente de:
- 400 Bad Request: JSON invÃ¡lido
- 403 Forbidden: Acesso bloqueado
- 404 Not Found: Endpoint nÃ£o existe
- 500 Server Error: Servidor quebrado
```

---

**Ãšltima AtualizaÃ§Ã£o:** 19/01/2026  
**Status:** âœ… Pronto para produÃ§Ã£o  
**PrÃ³xima AÃ§Ã£o:** Use CPF autorizado
