{"version":3,"file":"static/js/18.6d47918f.chunk.js","mappings":"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","sources":["components/ui/BlockBase.tsx","services/ocrService.ts","services/dataSanitizer.ts","services/geminiService.ts","components/FullReportImporter.tsx","components/GeminiUploader.tsx"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport { GeminiUploader } from '../GeminiUploader';\n\n// --- Shared Styles ---\nexport const CLS = {\n    INPUT: \"w-full h-10 px-3 rounded-md border border-slate-300 text-sm text-slate-700 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-all placeholder:text-slate-400 disabled:bg-slate-50 disabled:text-slate-500\",\n    CHECKBOX: \"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer transition-colors\",\n    LABEL: \"block text-xs font-bold text-slate-500 uppercase mb-1.5 tracking-wider\",\n    SECTION: \"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-6 animate-in fade-in slide-in-from-bottom-2 duration-500\",\n    BTN_ADD: \"h-9 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium shadow-sm transition-colors flex items-center gap-2 cursor-pointer\",\n    BTN_REMOVE: \"text-red-500 hover:text-red-700 text-xs font-bold uppercase tracking-wide transition-colors px-2 py-1 rounded hover:bg-red-50 cursor-pointer\",\n    BTN_SUB: \"h-7 px-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-xs font-bold\",\n    HEADER_TITLE: \"text-xl font-bold text-slate-800\",\n    HEADER_DIVIDER: \"flex justify-between items-center mb-6 pb-4 border-b border-slate-100\",\n    GRID_CONTAINER: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\",\n    FLEX_ROW_CENTER: \"flex items-center gap-3\",\n};\n\nexport const SectionHeader = ({ title, children }: { title: string, children?: React.ReactNode }) => (\n    <div className={CLS.HEADER_DIVIDER}>\n        <h2 className={CLS.HEADER_TITLE}>{title}</h2>\n        <div className=\"flex gap-2\">{children}</div>\n    </div>\n);\n\nexport const InputGroup = ({ label, error, children }: { label: string, error?: string, children?: React.ReactNode }) => (\n    <div className=\"mb-1\">\n        <label className={CLS.LABEL}>{label}</label>\n        {children}\n        {error && <div className=\"text-red-600 text-[10px] font-bold uppercase mt-1 animate-pulse\">{error}</div>}\n    </div>\n);\n\n// --- Block Factory Props ---\ninterface ArrayBlockProps<T> {\n    title: string;\n    items: T[];\n    newItemTemplate: T;\n    onAdd: (item: T) => void;\n    onRemove: (index: number) => void;\n    onUpdate: (index: number, field: string, value: any) => void;\n    renderItem: (item: T, index: number, update: (field: string, val: any) => void) => React.ReactNode;\n    ocrSection?: string;\n    onOcrData?: (data: any) => void;\n    errors?: string[]; // Errors passed from parent validation logic\n}\n\nexport function ArrayBlock<T>({ \n    title, \n    items, \n    newItemTemplate, \n    onAdd, \n    onRemove, \n    onUpdate, \n    renderItem, \n    ocrSection,\n    onOcrData\n}: ArrayBlockProps<T>) {\n\n    const handleOcr = (data: any) => {\n        if (!data) return;\n        \n        // Strategy: if data is array, add all. if object, add one.\n        if (ocrSection === 'relacao_empregados' && data.empregados && Array.isArray(data.empregados)) {\n            data.empregados.forEach((emp: any) => onAdd(emp));\n        } else if (onOcrData) {\n            onOcrData(data); // Custom handler\n        } else {\n            // Default generic merge\n            onAdd({ ...newItemTemplate, ...data });\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <SectionHeader title={title}>\n                <button onClick={() => onAdd(newItemTemplate)} className={CLS.BTN_ADD}>+ Adicionar Item</button>\n            </SectionHeader>\n            \n            {ocrSection && <GeminiUploader section={ocrSection as any} onDataExtracted={handleOcr} />}\n            \n            {items && items.length > 0 ? (\n                items.map((item, idx) => (\n                    <div key={idx} className={CLS.SECTION + \" relative border-l-4 border-l-slate-400\"}>\n                        <div className=\"absolute top-4 right-4 z-10\">\n                            <button onClick={() => onRemove(idx)} className={CLS.BTN_REMOVE}>üóë Remover</button>\n                        </div>\n                        <div className=\"pt-2\">\n                             {renderItem(item, idx, (field, val) => onUpdate(idx, field, val))}\n                        </div>\n                    </div>\n                ))\n            ) : (\n                <div className=\"text-center p-8 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50\">\n                    <p className=\"text-slate-400 text-sm font-medium\">Nenhum registro adicionado.</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n// --- Simple Field Wrapper ---\nexport const Field = ({ label, value, onChange, type = \"text\", error, options }: any) => (\n    <InputGroup label={label} error={error}>\n        {options ? (\n            <select className={CLS.INPUT} value={value} onChange={e => onChange(e.target.value)}>\n                {options.map((opt: any) => (\n                    <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n            </select>\n        ) : (\n            <input \n                type={type} \n                className={CLS.INPUT} \n                value={value} \n                onChange={e => onChange(type === 'number' ? Number(e.target.value) : e.target.value)} \n                step={type === 'number' ? \"0.01\" : undefined}\n            />\n        )}\n    </InputGroup>\n);\n","\n/**\n * OCR SERVICE - VERS√ÉO 2.0\n * Extrai texto de PDFs usando Tesseract.js com detec√ß√£o avan√ßada\n * Identifica padr√µes de dados (CNPJ, CPF, datas, valores monet√°rios, etc)\n */\n\nimport * as pdfjsLib from 'pdfjs-dist';\nimport Tesseract from 'tesseract.js';\n\n// Configurar worker do PDF.js\nif (typeof window !== 'undefined') {\n  pdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n}\n\nexport interface ExtractedData {\n  cnpj?: string;\n  razao_social?: string;\n  municipio?: number;\n  entidade?: number;\n  ano?: number;\n  mes?: number;\n  \n  // Valores monet√°rios\n  valores?: {\n    repasses?: number;\n    receitas?: number;\n    despesas?: number;\n    disponibilidades?: number;\n  };\n  \n  // Pessoas\n  responsaveis?: string[];\n  cpfs?: string[];\n  \n  // Datas\n  datas?: string[];\n  \n  // Documentos\n  documentos_fiscais?: string[];\n  contratos?: string[];\n  \n  // Confian√ßa da extra√ß√£o (0-1)\n  confidence: number;\n  \n  // Raw text extra√≠do\n  rawText: string;\n}\n\n/**\n * Extrai texto de um PDF usando OCR\n */\nexport async function extractTextFromPDF(file: File): Promise<string> {\n  console.log('[OCR] Iniciando extra√ß√£o de PDF:', file.name);\n  \n  const arrayBuffer = await file.arrayBuffer();\n  const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\n  \n  let fullText = '';\n  \n  for (let pageNum = 1; pageNum <= Math.min(pdf.numPages, 10); pageNum++) {\n    const page = await pdf.getPage(pageNum);\n    \n    // Renderizar p√°gina como imagem para OCR\n    const viewport = page.getViewport({ scale: 2 });\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    \n    if (!context) continue;\n    \n    canvas.width = viewport.width;\n    canvas.height = viewport.height;\n    \n    // Renderizar p√°gina no canvas\n    await page.render({\n      canvasContext: context,\n      viewport: viewport\n    }).promise;\n    \n    // Usar OCR no canvas\n    console.log(`[OCR] Processando p√°gina ${pageNum}/${pdf.numPages}...`);\n    const result = await Tesseract.recognize(canvas, 'por+eng', {\n      logger: m => {\n        if (m.status === 'recognizing') {\n          console.log(`[OCR] P√°gina ${pageNum}: ${Math.round(m.progress * 100)}%`);\n        }\n      }\n    });\n    \n    fullText += result.data.text + '\\n';\n  }\n  \n  console.log('[OCR] Extra√ß√£o completa, tamanho:', fullText.length);\n  return fullText;\n}\n\n/**\n * Detecta e extrai padr√µes de dados do texto\n */\nexport function detectPatterns(text: string): ExtractedData {\n  const data: ExtractedData = {\n    confidence: 0.5,\n    rawText: text,\n    valores: {},\n    responsaveis: [],\n    cpfs: [],\n    datas: [],\n    documentos_fiscais: [],\n    contratos: []\n  };\n  \n  // Padr√£o: CNPJ (14 d√≠gitos)\n  const cnpjMatch = text.match(/(\\d{2}\\.?\\d{3}\\.?\\d{3}\\/?\\d{4}-?\\d{2})/);\n  if (cnpjMatch) {\n    data.cnpj = cleanCNPJ(cnpjMatch[1]);\n    console.log('[OCR] CNPJ detectado:', data.cnpj);\n  }\n  \n  // Padr√£o: CPF (11 d√≠gitos)\n  const cpfMatches = text.matchAll(/(\\d{3}\\.?\\d{3}\\.?\\d{3}-?\\d{2})/g);\n  for (const match of cpfMatches) {\n    const cpf = cleanCPF(match[1]);\n    if (!data.cpfs!.includes(cpf)) {\n      data.cpfs!.push(cpf);\n    }\n  }\n  console.log('[OCR] CPFs detectados:', data.cpfs);\n  \n  // Padr√£o: Datas (DD/MM/YYYY ou YYYY-MM-DD)\n  const dataMatches = text.matchAll(/(\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{4}|\\d{4}[\\/\\-]\\d{1,2}[\\/\\-]\\d{1,2})/g);\n  for (const match of dataMatches) {\n    const data_formatada = parseDate(match[1]);\n    if (data_formatada && !data.datas!.includes(data_formatada)) {\n      data.datas!.push(data_formatada);\n    }\n  }\n  console.log('[OCR] Datas detectadas:', data.datas);\n  \n  // Padr√£o: Valores monet√°rios (R$ XXX.XXX,XX)\n  const valoresMatch = text.match(/R\\$[\\s]*([\\d.,]+)/gi);\n  if (valoresMatch) {\n    const valores = valoresMatch.map(v => parseFloat(v.replace(/[^\\d,]/g, '').replace(',', '.')));\n    if (valores.length > 0) {\n      data.valores!.despesas = valores.reduce((a, b) => a + b, 0) / valores.length;\n      console.log('[OCR] Valores detectados:', valores);\n    }\n  }\n  \n  // Padr√£o: M√™s e Ano\n  const anoMatch = text.match(/(\\d{4})/);\n  if (anoMatch) {\n    data.ano = parseInt(anoMatch[1]);\n    console.log('[OCR] Ano detectado:', data.ano);\n  }\n  \n  // Detectar m√™s (se em portugu√™s)\n  const meses = ['janeiro', 'fevereiro', 'mar√ßo', 'abril', 'maio', 'junho', \n                 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];\n  for (let i = 0; i < meses.length; i++) {\n    if (text.toLowerCase().includes(meses[i])) {\n      data.mes = i + 1;\n      console.log('[OCR] M√™s detectado:', data.mes, meses[i]);\n      break;\n    }\n  }\n  \n  // For√ßa m√™s 12 para presta√ß√£o de contas\n  if (text.toLowerCase().includes('presta√ß√£o') || text.toLowerCase().includes('contas')) {\n    data.mes = 12;\n    console.log('[OCR] Detectado presta√ß√£o de contas - for√ßando m√™s 12');\n  }\n  \n  // Padr√£o: Munic√≠pio (c√≥digo IBGE 7 d√≠gitos come√ßando com 35 para SP)\n  const municipioMatch = text.match(/(35\\d{5})/);\n  if (municipioMatch) {\n    data.municipio = parseInt(municipioMatch[1]);\n    console.log('[OCR] Munic√≠pio detectado:', data.municipio);\n  }\n  \n  // Detec√ß√£o de palavras-chave\n  const keywords: { [key: string]: string[] } = {\n    responsaveis: ['respons√°vel', 'diretor', 'presidente', 'gestor', 'ordenador'],\n    documentos: ['nf', 'nota fiscal', 'recibo', 'comprovante', 'fatura'],\n    contratos: ['contrato', 'termo', 'acordo', 'licita√ß√£o']\n  };\n  \n  // Extrair linhas com palavras-chave\n  const linhas = text.split('\\n');\n  for (const linha of linhas) {\n    for (const [tipo, palavras] of Object.entries(keywords)) {\n      if (palavras.some(p => linha.toLowerCase().includes(p))) {\n        if (tipo === 'responsaveis' && !data.responsaveis!.includes(linha.trim())) {\n          data.responsaveis!.push(linha.trim());\n        } else if (tipo === 'documentos' && !data.documentos_fiscais!.includes(linha.trim())) {\n          data.documentos_fiscais!.push(linha.trim());\n        } else if (tipo === 'contratos' && !data.contratos!.includes(linha.trim())) {\n          data.contratos!.push(linha.trim());\n        }\n      }\n    }\n  }\n  \n  // Calcular confian√ßa (baseado em quantos campos foram encontrados)\n  const camposPreenchidos = [\n    data.cnpj,\n    data.ano,\n    data.mes,\n    data.cpfs && data.cpfs.length > 0,\n    data.datas && data.datas.length > 0,\n    data.valores?.despesas\n  ].filter(Boolean).length;\n  \n  data.confidence = Math.min(0.95, camposPreenchidos / 6);\n  \n  console.log('[OCR] Confian√ßa da extra√ß√£o:', Math.round(data.confidence * 100) + '%');\n  \n  return data;\n}\n\n/**\n * Fun√ß√£o auxiliar para limpar e validar CNPJ\n */\nfunction cleanCNPJ(cnpj: string): string {\n  return cnpj.replace(/\\D/g, '');\n}\n\n/**\n * Fun√ß√£o auxiliar para limpar e validar CPF\n */\nfunction cleanCPF(cpf: string): string {\n  return cpf.replace(/\\D/g, '');\n}\n\n/**\n * Fun√ß√£o auxiliar para parse de data (converte para YYYY-MM-DD)\n */\nfunction parseDate(dateStr: string): string | null {\n  try {\n    // Tenta YYYY-MM-DD\n    if (dateStr.match(/\\d{4}[\\/\\-]\\d{2}[\\/\\-]\\d{2}/)) {\n      const [year, month, day] = dateStr.replace(/\\//g, '-').split('-');\n      return `${year}-${month}-${day}`;\n    }\n    \n    // Tenta DD/MM/YYYY\n    const [day, month, year] = dateStr.replace(/\\//g, '-').split('-');\n    if (parseInt(year) > 1900 && parseInt(month) > 0 && parseInt(month) <= 12 && parseInt(day) > 0 && parseInt(day) <= 31) {\n      return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;\n    }\n  } catch (e) {\n    return null;\n  }\n  return null;\n}\n\n/**\n * Processa arquivo PDF e retorna dados extra√≠dos\n */\nexport async function processPDFFile(file: File): Promise<ExtractedData> {\n  try {\n    console.log('[OCR] Iniciando processamento de:', file.name);\n    \n    // Extrair texto do PDF\n    const text = await extractTextFromPDF(file);\n    \n    // Detectar padr√µes\n    const data = detectPatterns(text);\n    \n    return data;\n  } catch (error) {\n    console.error('[OCR] Erro ao processar PDF:', error);\n    throw new Error(`Erro ao processar PDF: ${error instanceof Error ? error.message : 'Desconhecido'}`);\n  }\n}\n\n/**\n * Mapeia dados extra√≠dos para o formato do formul√°rio\n */\nexport function mapExtractedDataToForm(extracted: ExtractedData): Partial<any> {\n  return {\n    descritor: {\n      municipio: extracted.municipio,\n      entidade: extracted.entidade || 1,\n      ano: extracted.ano,\n      mes: extracted.mes || 12\n    },\n    dados_gerais_entidade_beneficiaria: {\n      cnpj: extracted.cnpj,\n      razao_social: extracted.razao_social\n    },\n    receitas: {\n      repasses_recebidos: extracted.valores?.repasses || 0\n    },\n    disponibilidades: {\n      saldos: [\n        {\n          saldo_bancario: extracted.valores?.disponibilidades || 0\n        }\n      ]\n    },\n    extraction_metadata: {\n      source: 'PDF_OCR',\n      confidence: extracted.confidence,\n      timestamp: new Date().toISOString(),\n      extracted_cpfs: extracted.cpfs,\n      extracted_datas: extracted.datas,\n      raw_text_preview: extracted.rawText.substring(0, 500)\n    }\n  };\n}\n/**\n * Extrai dados estruturados de documentos (base64) para um bloco espec√≠fico\n * Fun√ß√£o auxiliar para compatibilidade com GeminiUploader\n */\nexport async function extractBlockData(base64String: string, mimeType: string, section: string): Promise<any> {\n  // Esta fun√ß√£o ser√° chamada pelo GeminiUploader para extrair dados por se√ß√£o\n  // Para PDFs, usa OCR; para outros formatos, seria Gemini\n  \n  console.log(`[OCR] Extracting block data for section: ${section}`);\n  console.log(`[OCR] Mime type: ${mimeType}`);\n  \n  try {\n    // Se √© PDF, usa OCR\n    if (mimeType === 'application/pdf') {\n      // Converter base64 para Blob/File\n      const binaryString = atob(base64String);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      const blob = new Blob([bytes], { type: mimeType });\n      const file = new File([blob], 'document.pdf', { type: mimeType });\n      \n      // Processar PDF com OCR\n      const extracted = await processPDFFile(file);\n      \n      // Mapear para a se√ß√£o especificada\n      const mapped = mapExtractedDataToForm(extracted);\n      \n      console.log(`[OCR] Extraction complete for section ${section}. Confidence: ${extracted.confidence}`);\n      \n      return {\n        success: true,\n        source: 'PDF_OCR',\n        confidence: extracted.confidence,\n        data: mapped,\n        section: section\n      };\n    }\n    \n    // Para outros tipos de documento, retorna erro (apenas PDF suportado por enquanto)\n    throw new Error(`Apenas PDF √© suportado. Recebido: ${mimeType}`);\n  } catch (error: any) {\n    console.error(`[OCR] Error in extractBlockData:`, error);\n    throw new Error(`Erro ao processar PDF: ${error.message}`);\n  }\n}","\n/**\n * DATA SANITIZER SERVICE\n * Normalizes AI/OCR output into strict Audesp formats.\n */\n\nexport const Patterns = {\n    CPF: /(\\d{3})\\.?(\\d{3})\\.?(\\d{3})-?(\\d{2})/g,\n    CNPJ: /(\\d{2})\\.?(\\d{3})\\.?(\\d{3})\\/?(\\d{4})-?(\\d{2})/g,\n    DATE_BR: /(\\d{1,2})\\/(\\d{1,2})\\/(\\d{2,4})/g,\n    MONEY: /R\\$\\s?([\\d.,]+)/g\n};\n\nexport const Sanitizers = {\n    /**\n     * Removes non-digits. Returns 11 chars for CPF or 14 for CNPJ.\n     */\n    cleanDoc: (value: string | number | undefined): string => {\n        if (!value) return \"\";\n        const str = String(value).replace(/\\D/g, \"\");\n        return str;\n    },\n\n    /**\n     * Tries to parse date from DD/MM/YYYY or YYYY-MM-DD to YYYY-MM-DD\n     */\n    cleanDate: (value: string | undefined): string => {\n        if (!value) return \"\";\n        \n        // If already YYYY-MM-DD\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) return value;\n\n        // Try DD/MM/YYYY\n        const matchBR = value.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/);\n        if (matchBR) {\n            const day = matchBR[1].padStart(2, '0');\n            const month = matchBR[2].padStart(2, '0');\n            const year = matchBR[3];\n            return `${year}-${month}-${day}`;\n        }\n\n        return value; // Return original if unknown format (let validation catch it)\n    },\n\n    /**\n     * Converts \"R$ 1.234,56\" or \"1234.56\" to float\n     */\n    cleanNumber: (value: string | number | undefined): number => {\n        if (typeof value === 'number') return value;\n        if (!value) return 0;\n\n        let str = String(value);\n        \n        // If format is Brazilian (1.234,56)\n        if (str.includes(',') && !str.includes('US')) {\n            str = str.replace(/\\./g, '').replace(',', '.');\n        } \n        // If contains currency symbol\n        str = str.replace(/[^\\d.-]/g, '');\n\n        const num = parseFloat(str);\n        return isNaN(num) ? 0 : num;\n    }\n};\n\n/**\n * Recursive function to traverse the object and sanitize specific keys\n */\nexport function sanitizeObject(obj: any): any {\n    if (Array.isArray(obj)) {\n        return obj.map(item => sanitizeObject(item));\n    } else if (typeof obj === 'object' && obj !== null) {\n        const newObj: any = {};\n        for (const key in obj) {\n            const value = obj[key];\n            \n            if (key.includes('cpf') || key.includes('cnpj') || key.includes('documento_numero')) {\n                newObj[key] = Sanitizers.cleanDoc(value);\n            } else if (key.includes('data') || key === 'vigencia_data_inicial' || key === 'vigencia_data_final') {\n                newObj[key] = Sanitizers.cleanDate(value);\n            } else if (key.includes('valor') || key.includes('saldo') || key.includes('remuneracao') || key.includes('montante')) {\n                newObj[key] = Sanitizers.cleanNumber(value);\n            } else if (typeof value === 'object') {\n                newObj[key] = sanitizeObject(value);\n            } else {\n                newObj[key] = value;\n            }\n        }\n        return newObj;\n    }\n    return obj;\n}\n","\nimport { GoogleGenAI, Type, Schema } from \"@google/genai\";\nimport { sanitizeObject } from \"./dataSanitizer\";\n\n// Ensure usage of process.env.API_KEY\n// NOTE: Gemini API calls should be made from backend only\n// This is a frontend placeholder that requires a backend proxy\nlet ai: any = null;\n\nif (typeof window === 'undefined' && process.env.API_KEY) {\n    ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\n}\n\n// --- SCHEMAS DEFINITIONS (Reusable) ---\n\nconst CREDOR_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        documento_numero: { type: Type.STRING, description: \"CNPJ or CPF numbers only\" },\n        nome: { type: Type.STRING },\n        documento_tipo: { type: Type.NUMBER, description: \"2 for CNPJ, 1 for CPF\" }\n    }\n};\n\nconst DOC_FISCAL_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero: { type: Type.STRING },\n        data_emissao: { type: Type.STRING, description: \"YYYY-MM-DD\" },\n        valor_bruto: { type: Type.NUMBER },\n        credor: CREDOR_SCHEMA,\n        descricao: { type: Type.STRING },\n        categoria_despesas_tipo: { type: Type.NUMBER }\n    }\n};\n\nconst EMPREGADO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        cpf: { type: Type.STRING },\n        data_admissao: { type: Type.STRING },\n        salario_contratual: { type: Type.NUMBER },\n        cbo: { type: Type.STRING },\n        periodos_remuneracao: {\n            type: Type.ARRAY,\n            items: {\n                type: Type.OBJECT,\n                properties: {\n                    mes: { type: Type.NUMBER },\n                    carga_horaria: { type: Type.NUMBER },\n                    remuneracao_bruta: { type: Type.NUMBER }\n                }\n            }\n        }\n    }\n};\n\nconst CONTRATO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero: { type: Type.STRING },\n        objeto: { type: Type.STRING },\n        data_assinatura: { type: Type.STRING },\n        valor_montante: { type: Type.NUMBER },\n        vigencia_data_inicial: { type: Type.STRING },\n        credor: CREDOR_SCHEMA\n    }\n};\n\nconst PAGAMENTO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        pagamento_data: { type: Type.STRING },\n        pagamento_valor: { type: Type.NUMBER },\n        numero_transacao: { type: Type.STRING },\n        identificacao_documento_fiscal: {\n            type: Type.OBJECT,\n            properties: { numero: { type: Type.STRING } }\n        },\n        meio_pagamento_tipo: { type: Type.NUMBER }\n    }\n};\n\nconst BEM_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero_patrimonio: { type: Type.STRING },\n        descricao: { type: Type.STRING },\n        data_aquisicao: { type: Type.STRING },\n        valor_aquisicao: { type: Type.NUMBER }\n    }\n};\n\nconst SALDO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        banco: { type: Type.NUMBER },\n        agencia: { type: Type.NUMBER },\n        conta: { type: Type.STRING },\n        saldo_bancario: { type: Type.NUMBER },\n        saldo_contabil: { type: Type.NUMBER }\n    }\n};\n\nconst RECEITA_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        data_repasse: { type: Type.STRING },\n        valor: { type: Type.NUMBER },\n        data_prevista: { type: Type.STRING }\n    }\n};\n\nconst CEDIDO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        cpf: { type: Type.STRING },\n        cargo_publico_ocupado: { type: Type.STRING },\n        data_inicial_cessao: { type: Type.STRING },\n        onus_pagamento: { type: Type.NUMBER }\n    }\n};\n\n// --- MAIN EXTRACTOR FUNCTIONS ---\n\n/**\n * Extracts data from a single image or PDF page for a specific section.\n */\nexport async function extractDataFromImage(\n  base64Data: string, \n  mimeType: string, \n  section: string\n): Promise<any> {\n  \n  let prompt = \"Analyze this document. Extract the data strictly into the specified JSON structure. Normalize dates to YYYY-MM-DD and numbers to floats. Ignore currency symbols.\";\n  let schema: any = {};\n\n  switch (section) {\n    case 'documentos_fiscais':\n      prompt += \" Extract invoices/receipts.\";\n      schema = { type: Type.OBJECT, properties: { documentos_fiscais: { type: Type.ARRAY, items: DOC_FISCAL_SCHEMA } } };\n      break;\n    case 'relacao_empregados':\n      prompt += \" Extract payroll/employee list.\";\n      schema = { type: Type.OBJECT, properties: { empregados: { type: Type.ARRAY, items: EMPREGADO_SCHEMA } } };\n      break;\n    case 'contratos':\n      prompt += \" Extract contracts.\";\n      schema = { type: Type.OBJECT, properties: { contratos: { type: Type.ARRAY, items: CONTRATO_SCHEMA } } };\n      break;\n    case 'pagamentos':\n      prompt += \" Extract payments/bank transfers.\";\n      schema = { type: Type.OBJECT, properties: { pagamentos: { type: Type.ARRAY, items: PAGAMENTO_SCHEMA } } };\n      break;\n    case 'empenhos':\n        schema = {\n            type: Type.OBJECT,\n            properties: {\n                empenhos: {\n                    type: Type.ARRAY,\n                    items: {\n                        type: Type.OBJECT,\n                        properties: {\n                            numero: { type: Type.STRING },\n                            data_emissao: { type: Type.STRING },\n                            valor: { type: Type.NUMBER },\n                            historico: { type: Type.STRING }\n                        }\n                    }\n                }\n            }\n        };\n        break;\n    case 'relacao_bens':\n        prompt += \" Extract asset list (bens patrimoniais).\";\n        schema = { type: Type.OBJECT, properties: { relacao_bens_moveis_adquiridos: { type: Type.ARRAY, items: BEM_SCHEMA } } };\n        break;\n    case 'disponibilidades':\n        prompt += \" Extract bank balances (extrato banc√°rio/concilia√ß√£o).\";\n        schema = { type: Type.OBJECT, properties: { saldos: { type: Type.ARRAY, items: SALDO_SCHEMA } } };\n        break;\n    case 'receitas':\n        prompt += \" Extract revenue/transfers received.\";\n        schema = { type: Type.OBJECT, properties: { repasses_recebidos: { type: Type.ARRAY, items: RECEITA_SCHEMA } } };\n        break;\n    case 'servidores_cedidos':\n        prompt += \" Extract list of ceded public servants.\";\n        schema = { type: Type.OBJECT, properties: { servidores_cedidos: { type: Type.ARRAY, items: CEDIDO_SCHEMA } } };\n        break;\n    default:\n        // Fallback for simple fields\n        prompt += \" Extract key information.\";\n        schema = { type: Type.OBJECT, properties: { info: { type: Type.STRING } } };\n        break;\n  }\n\n  try {\n    const response = await ai.models.generateContent({\n      model: 'gemini-2.5-flash',\n      contents: {\n        parts: [\n          { inlineData: { mimeType: mimeType, data: base64Data } },\n          { text: prompt }\n        ]\n      },\n      config: {\n        responseMimeType: \"application/json\",\n        responseSchema: schema\n      }\n    });\n\n    if (response.text) {\n        const raw = JSON.parse(response.text);\n        // If the schema wrapped in a root property, check logic\n        const keys = Object.keys(raw);\n        if (keys.length === 1 && Array.isArray(raw[keys[0]])) {\n            return sanitizeObject(raw[keys[0]]); // Return the array directly if needed by logic\n        }\n        // Special Case: relacao_bens needs nested object structure\n        if(section === 'relacao_bens' && raw.relacao_bens_moveis_adquiridos) {\n            return sanitizeObject(raw);\n        }\n        \n        return sanitizeObject(raw);\n    }\n    return null;\n\n  } catch (error) {\n    console.error(\"Gemini Extraction Error:\", error);\n    throw error;\n  }\n}\n\n/**\n * MASSIVE EXTRACTION: Reads a full PDF and maps to the entire Audesp Schema.\n * This is Module 2 of the requirement.\n */\nexport async function extractFullReport(base64Data: string, mimeType: string): Promise<any> {\n    const prompt = `\n    You are an expert accountant and auditor for TCESP Audesp Phase V.\n    Analyze this ENTIRE document (Accountability Report / Presta√ß√£o de Contas).\n    \n    Your task is to identify and extract ALL relevant sections into a single JSON structure.\n    \n    1. Identify the 'Descritor' (Year, Month, Entity, City).\n    2. Identify 'Empregados' (Payroll).\n    3. Identify 'Contratos' (Contracts).\n    4. Identify 'Documentos Fiscais' (Invoices, Receipts).\n    5. Identify 'Pagamentos' (Bank transfers, checks).\n    6. Identify 'Empenhos' (Commitments).\n    7. Identify 'Repasses' (Transfers received).\n    \n    If a section is not found, return an empty array for it.\n    Normalize all dates to YYYY-MM-DD.\n    Normalize all values to float (e.g. 1250.50).\n    Clean CPF/CNPJ (numbers only).\n    `;\n\n    // A monolithic schema covering the main arrays\n    const FULL_SCHEMA: Schema = {\n        type: Type.OBJECT,\n        properties: {\n            descritor: {\n                type: Type.OBJECT,\n                properties: {\n                    ano: { type: Type.NUMBER },\n                    mes: { type: Type.NUMBER },\n                    entidade: { type: Type.NUMBER },\n                    municipio: { type: Type.NUMBER }\n                }\n            },\n            relacao_empregados: { type: Type.ARRAY, items: EMPREGADO_SCHEMA },\n            contratos: { type: Type.ARRAY, items: CONTRATO_SCHEMA },\n            documentos_fiscais: { type: Type.ARRAY, items: DOC_FISCAL_SCHEMA },\n            pagamentos: { type: Type.ARRAY, items: PAGAMENTO_SCHEMA },\n            empenhos: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        numero: { type: Type.STRING },\n                        data_emissao: { type: Type.STRING },\n                        valor: { type: Type.NUMBER },\n                        historico: { type: Type.STRING }\n                    }\n                }\n            },\n            repasses: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        data_repasse: { type: Type.STRING },\n                        valor_repasse: { type: Type.NUMBER },\n                        numero_documento: { type: Type.STRING }\n                    }\n                }\n            }\n        }\n    };\n\n    try {\n        const response = await ai.models.generateContent({\n            model: 'gemini-2.5-flash',\n            contents: {\n                parts: [\n                    { inlineData: { mimeType: mimeType, data: base64Data } },\n                    { text: prompt }\n                ]\n            },\n            config: {\n                responseMimeType: \"application/json\",\n                responseSchema: FULL_SCHEMA\n            }\n        });\n\n        if (response.text) {\n            const raw = JSON.parse(response.text);\n            return sanitizeObject(raw);\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Full Report Extraction Error:\", error);\n        throw error;\n    }\n}\n","\nimport React, { useState } from 'react';\nimport { extractFullReport } from '../services/geminiService';\nimport { PrestacaoContas } from '../types';\nimport { CLS } from './ui/BlockBase';\n\ninterface FullReportImporterProps {\n    onDataMerge: (data: Partial<PrestacaoContas>) => void;\n    onCancel: () => void;\n}\n\nexport const FullReportImporter: React.FC<FullReportImporterProps> = ({ onDataMerge, onCancel }) => {\n    const [loading, setLoading] = useState(false);\n    const [status, setStatus] = useState<string>('');\n    const [extractedData, setExtractedData] = useState<any>(null);\n\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            const file = e.target.files[0];\n            setLoading(true);\n            setStatus('Lendo arquivo (Isso pode levar alguns segundos)...');\n\n            const reader = new FileReader();\n            reader.onloadend = async () => {\n                try {\n                    const base64String = (reader.result as string).split(',')[1];\n                    \n                    setStatus('Enviando para IA (Gemini 2.0)...');\n                    const data = await extractFullReport(base64String, file.type);\n                    \n                    if (data) {\n                        setExtractedData(data);\n                        setStatus('An√°lise conclu√≠da. Revise os dados abaixo.');\n                    } else {\n                        setStatus('Falha: Nenhum dado estruturado encontrado.');\n                    }\n                } catch (err: any) {\n                    setStatus(`Erro: ${err.message}`);\n                } finally {\n                    setLoading(false);\n                }\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const handleAccept = () => {\n        if (extractedData) {\n            onDataMerge(extractedData);\n        }\n    };\n\n    if (extractedData) {\n        return (\n            <div className=\"fixed inset-0 bg-slate-900/80 z-50 flex items-center justify-center p-4\">\n                <div className=\"bg-white w-full max-w-4xl h-[90vh] rounded-lg shadow-2xl flex flex-col\">\n                    <div className=\"p-6 border-b border-slate-200 flex justify-between items-center bg-slate-50\">\n                        <div>\n                            <h2 className=\"text-xl font-bold text-slate-800\">Revis√£o da Importa√ß√£o Inteligente</h2>\n                            <p className=\"text-sm text-slate-500\">O OCR identificou os seguintes registros no seu documento.</p>\n                        </div>\n                        <div className=\"flex gap-3\">\n                            <button onClick={onCancel} className=\"text-slate-500 hover:text-slate-800 font-bold text-sm px-4\">\n                                Cancelar\n                            </button>\n                            <button onClick={handleAccept} className={CLS.BTN_ADD}>\n                                Confirmar e Importar Tudo\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <div className=\"flex-1 overflow-y-auto p-6 bg-slate-100 space-y-6\">\n                        {/* Summary Cards */}\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                            <StatCard label=\"Empregados\" count={extractedData.relacao_empregados?.length || 0} />\n                            <StatCard label=\"Contratos\" count={extractedData.contratos?.length || 0} />\n                            <StatCard label=\"Notas Fiscais\" count={extractedData.documentos_fiscais?.length || 0} />\n                            <StatCard label=\"Pagamentos\" count={extractedData.pagamentos?.length || 0} />\n                        </div>\n\n                        {/* Raw JSON Preview (for now, better than nothing) */}\n                        <div className=\"bg-white p-4 rounded border border-slate-200\">\n                             <h3 className=\"font-bold text-sm mb-2 text-slate-700\">Pr√©-visualiza√ß√£o dos Dados Estruturados</h3>\n                             <pre className=\"text-xs font-mono bg-slate-900 text-green-400 p-4 rounded overflow-auto max-h-96\">\n                                {JSON.stringify(extractedData, null, 2)}\n                             </pre>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"fixed inset-0 bg-slate-900/80 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white w-full max-w-lg rounded-lg shadow-2xl p-8 text-center\">\n                <div className=\"mb-6\">\n                    <div className=\"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l4.414 4.414a1 1 0 01.586 1.414V19a2 2 0 01-2 2z\" />\n                        </svg>\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-slate-800\">Importar Presta√ß√£o Completa</h2>\n                    <p className=\"text-slate-500 mt-2 text-sm\">\n                        Fa√ßa upload de um PDF contendo m√∫ltiplos documentos (Notas, Extratos, Folha). \n                        A IA ir√° separar e classificar tudo automaticamente.\n                    </p>\n                </div>\n\n                <div className=\"border-2 border-dashed border-slate-300 rounded-lg p-8 hover:bg-slate-50 transition-colors relative cursor-pointer\">\n                    <input \n                        type=\"file\" \n                        accept=\"application/pdf\"\n                        onChange={handleFileChange}\n                        disabled={loading}\n                        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                    />\n                    {loading ? (\n                        <div className=\"space-y-3\">\n                            <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto\"></div>\n                            <p className=\"text-sm font-bold text-blue-600\">{status}</p>\n                        </div>\n                    ) : (\n                        <div>\n                            <p className=\"font-bold text-slate-700\">Clique ou arraste o PDF aqui</p>\n                            <p className=\"text-xs text-slate-400 mt-1\">Suporta arquivos PDF digitalizados (OCR via Gemini)</p>\n                        </div>\n                    )}\n                </div>\n\n                <button onClick={onCancel} className=\"mt-6 text-slate-400 hover:text-slate-600 text-sm font-medium\">\n                    Cancelar\n                </button>\n            </div>\n        </div>\n    );\n};\n\nconst StatCard = ({ label, count }: { label: string, count: number }) => (\n    <div className=\"bg-white p-4 rounded border border-slate-200 shadow-sm text-center\">\n        <div className=\"text-2xl font-bold text-blue-600\">{count}</div>\n        <div className=\"text-xs text-slate-500 uppercase font-bold\">{label}</div>\n    </div>\n);\n","\nimport React, { useState } from 'react';\nimport { extractBlockData } from '../services/ocrService';\n\ninterface GeminiUploaderProps {\n  section: string; // Chave sem√¢ntica (ex: 'contratos', 'empenhos')\n  onDataExtracted: (data: any) => void;\n}\n\nexport const GeminiUploader: React.FC<GeminiUploaderProps> = ({ section, onDataExtracted }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setLoading(true);\n      setError(null);\n\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        try {\n          const base64String = (reader.result as string).split(',')[1];\n          const mimeType = file.type;\n          \n          console.log(`[GeminiUploader] Processing file: ${file.name}, type: ${mimeType}`);\n          \n          // Using the new OCR Service\n          const extractedData = await extractBlockData(base64String, mimeType, section);\n          \n          if (extractedData && extractedData.success) {\n             console.log(`[GeminiUploader] Data extracted successfully:`, extractedData);\n             onDataExtracted(extractedData);\n          } else {\n             console.warn(`[GeminiUploader] No data extracted from document`);\n             setError(\"OCR: N√£o foi poss√≠vel identificar dados estruturados neste documento.\");\n          }\n        } catch (err: any) {\n          console.error(`[GeminiUploader] Error processing file:`, err);\n          const errorMsg = err?.message || \"Erro desconhecido\";\n          setError(`‚ùå ${errorMsg}. Tente um PDF com melhor qualidade.`);\n        } finally {\n          setLoading(false);\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div className=\"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-sm\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n            <h3 className=\"text-sm font-bold text-indigo-800 flex items-center gap-2\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\" clipRule=\"evenodd\" />\n                </svg>\n                OCR Inteligente (Gemini 2.0)\n            </h3>\n            <p className=\"text-xs text-indigo-600 mt-1\">\n                Extra√ß√£o autom√°tica para se√ß√£o: <strong>{section}</strong>\n            </p>\n        </div>\n        <div className=\"relative\">\n             <input\n                type=\"file\"\n                accept=\"application/pdf\"\n                onChange={handleFileChange}\n                disabled={loading}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                title=\"Selecione um arquivo PDF\"\n            />\n            <button disabled={loading} className={`px-4 py-2 rounded text-sm font-medium shadow transition-colors ${loading ? 'bg-indigo-300' : 'bg-indigo-600 hover:bg-indigo-700'} text-white`}>\n                {loading ? 'Lendo Documento...' : 'Upload PDF/Imagem'}\n            </button>\n        </div>\n      </div>\n      {error && <p className=\"text-red-600 text-xs mt-2 font-medium\">{error}</p>}\n    </div>\n  );\n};\n"],"names":["CLS","INPUT","CHECKBOX","LABEL","SECTION","BTN_ADD","BTN_REMOVE","BTN_SUB","HEADER_TITLE","HEADER_DIVIDER","GRID_CONTAINER","FLEX_ROW_CENTER","SectionHeader","_ref","title","children","_jsxs","className","_jsx","InputGroup","_ref2","label","error","ArrayBlock","_ref3","items","newItemTemplate","onAdd","onRemove","onUpdate","renderItem","ocrSection","onOcrData","onClick","GeminiUploader","section","onDataExtracted","data","empregados","Array","isArray","forEach","emp","_objectSpread","length","map","item","idx","field","val","Field","_ref4","value","onChange","type","options","e","target","opt","Number","step","undefined","cleanCPF","cpf","replace","parseDate","dateStr","match","year","month","day","split","concat","parseInt","padStart","async","processPDFFile","file","console","log","name","text","arrayBuffer","pdf","pdfjsLib","promise","fullText","pageNum","Math","min","numPages","page","getPage","viewport","getViewport","scale","canvas","document","createElement","context","getContext","width","height","render","canvasContext","Tesseract","logger","m","status","round","progress","extractTextFromPDF","_data$valores","confidence","rawText","valores","responsaveis","cpfs","datas","documentos_fiscais","contratos","cnpjMatch","cnpj","cpfMatches","matchAll","includes","push","dataMatches","data_formatada","valoresMatch","v","parseFloat","despesas","reduce","a","b","anoMatch","ano","meses","i","toLowerCase","mes","municipioMatch","municipio","keywords","documentos","linhas","linha","tipo","palavras","Object","entries","some","p","trim","camposPreenchidos","filter","Boolean","detectPatterns","Error","message","mapExtractedDataToForm","extracted","_extracted$valores","_extracted$valores2","descritor","entidade","dados_gerais_entidade_beneficiaria","razao_social","receitas","repasses_recebidos","repasses","disponibilidades","saldos","saldo_bancario","extraction_metadata","source","timestamp","Date","toISOString","extracted_cpfs","extracted_datas","raw_text_preview","substring","extractBlockData","base64String","mimeType","binaryString","atob","bytes","Uint8Array","charCodeAt","blob","Blob","File","mapped","success","window","workerSrc","Sanitizers","String","test","matchBR","str","num","isNaN","sanitizeObject","obj","newObj","key","ai","process","API_KEY","GoogleGenAI","apiKey","CREDOR_SCHEMA","Type","OBJECT","properties","documento_numero","STRING","description","nome","documento_tipo","NUMBER","DOC_FISCAL_SCHEMA","numero","data_emissao","valor_bruto","credor","descricao","categoria_despesas_tipo","EMPREGADO_SCHEMA","data_admissao","salario_contratual","cbo","periodos_remuneracao","ARRAY","carga_horaria","remuneracao_bruta","CONTRATO_SCHEMA","objeto","data_assinatura","valor_montante","vigencia_data_inicial","PAGAMENTO_SCHEMA","pagamento_data","pagamento_valor","numero_transacao","identificacao_documento_fiscal","meio_pagamento_tipo","extractFullReport","base64Data","FULL_SCHEMA","relacao_empregados","pagamentos","empenhos","valor","historico","data_repasse","valor_repasse","numero_documento","response","models","generateContent","model","contents","parts","inlineData","config","responseMimeType","responseSchema","JSON","parse","FullReportImporter","onDataMerge","onCancel","loading","setLoading","useState","setStatus","extractedData","setExtractedData","handleAccept","_extractedData$relaca","_extractedData$contra","_extractedData$docume","_extractedData$pagame","StatCard","count","stringify","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","accept","files","reader","FileReader","onloadend","result","err","readAsDataURL","disabled","setError","fillRule","clipRule","warn","errorMsg"],"ignoreList":[],"sourceRoot":""}