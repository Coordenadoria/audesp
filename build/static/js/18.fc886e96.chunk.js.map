{"version":3,"file":"static/js/18.fc886e96.chunk.js","mappings":"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","sources":["components/ui/BlockBase.tsx","services/ocrServiceBackend.ts","components/GeminiUploader.tsx","services/dataSanitizer.ts","services/geminiService.ts","components/FullReportImporter.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { GeminiUploader } from '../GeminiUploader';\n\n// --- Shared Styles ---\nexport const CLS = {\n    INPUT: \"w-full h-10 px-3 rounded-md border border-slate-300 text-sm text-slate-700 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-all placeholder:text-slate-400 disabled:bg-slate-50 disabled:text-slate-500\",\n    CHECKBOX: \"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer transition-colors\",\n    LABEL: \"block text-xs font-bold text-slate-500 uppercase mb-1.5 tracking-wider\",\n    SECTION: \"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-6 animate-in fade-in slide-in-from-bottom-2 duration-500\",\n    BTN_ADD: \"h-9 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium shadow-sm transition-colors flex items-center gap-2 cursor-pointer\",\n    BTN_REMOVE: \"text-red-500 hover:text-red-700 text-xs font-bold uppercase tracking-wide transition-colors px-2 py-1 rounded hover:bg-red-50 cursor-pointer\",\n    BTN_SUB: \"h-7 px-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-xs font-bold\",\n    HEADER_TITLE: \"text-xl font-bold text-slate-800\",\n    HEADER_DIVIDER: \"flex justify-between items-center mb-6 pb-4 border-b border-slate-100\",\n    GRID_CONTAINER: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\",\n    FLEX_ROW_CENTER: \"flex items-center gap-3\",\n};\n\nexport const SectionHeader = ({ title, children }: { title: string, children?: React.ReactNode }) => (\n    <div className={CLS.HEADER_DIVIDER}>\n        <h2 className={CLS.HEADER_TITLE}>{title}</h2>\n        <div className=\"flex gap-2\">{children}</div>\n    </div>\n);\n\nexport const InputGroup = ({ label, error, children }: { label: string, error?: string, children?: React.ReactNode }) => (\n    <div className=\"mb-1\">\n        <label className={CLS.LABEL}>{label}</label>\n        {children}\n        {error && <div className=\"text-red-600 text-[10px] font-bold uppercase mt-1 animate-pulse\">{error}</div>}\n    </div>\n);\n\n// --- Block Factory Props ---\ninterface ArrayBlockProps<T> {\n    title: string;\n    items: T[];\n    newItemTemplate: T;\n    onAdd: (item: T) => void;\n    onRemove: (index: number) => void;\n    onUpdate: (index: number, field: string, value: any) => void;\n    renderItem: (item: T, index: number, update: (field: string, val: any) => void) => React.ReactNode;\n    ocrSection?: string;\n    onOcrData?: (data: any) => void;\n    errors?: string[]; // Errors passed from parent validation logic\n}\n\nexport function ArrayBlock<T>({ \n    title, \n    items, \n    newItemTemplate, \n    onAdd, \n    onRemove, \n    onUpdate, \n    renderItem, \n    ocrSection,\n    onOcrData\n}: ArrayBlockProps<T>) {\n\n    const handleOcr = (data: any) => {\n        if (!data) return;\n        \n        // Strategy: if data is array, add all. if object, add one.\n        if (ocrSection === 'relacao_empregados' && data.empregados && Array.isArray(data.empregados)) {\n            data.empregados.forEach((emp: any) => onAdd(emp));\n        } else if (onOcrData) {\n            onOcrData(data); // Custom handler\n        } else {\n            // Default generic merge\n            onAdd({ ...newItemTemplate, ...data });\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <SectionHeader title={title}>\n                <button onClick={() => onAdd(newItemTemplate)} className={CLS.BTN_ADD}>+ Adicionar Item</button>\n            </SectionHeader>\n            \n            {ocrSection && <GeminiUploader section={ocrSection as any} onDataExtracted={handleOcr} />}\n            \n            {items && items.length > 0 ? (\n                items.map((item, idx) => (\n                    <div key={idx} className={CLS.SECTION + \" relative border-l-4 border-l-slate-400\"}>\n                        <div className=\"absolute top-4 right-4 z-10\">\n                            <button onClick={() => onRemove(idx)} className={CLS.BTN_REMOVE}>üóë Remover</button>\n                        </div>\n                        <div className=\"pt-2\">\n                             {renderItem(item, idx, (field, val) => onUpdate(idx, field, val))}\n                        </div>\n                    </div>\n                ))\n            ) : (\n                <div className=\"text-center p-8 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50\">\n                    <p className=\"text-slate-400 text-sm font-medium\">Nenhum registro adicionado.</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n// --- Simple Field Wrapper ---\nexport const Field = ({ label, value, onChange, type = \"text\", error, options }: any) => (\n    <InputGroup label={label} error={error}>\n        {options ? (\n            <select className={CLS.INPUT} value={value} onChange={e => onChange(e.target.value)}>\n                {options.map((opt: any) => (\n                    <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n            </select>\n        ) : (\n            <input \n                type={type} \n                className={CLS.INPUT} \n                value={value} \n                onChange={e => onChange(type === 'number' ? Number(e.target.value) : e.target.value)} \n                step={type === 'number' ? \"0.01\" : undefined}\n            />\n        )}\n    </InputGroup>\n);\n","/**\n * OCR Service - Python Backend Integration\n * \n * This service communicates with the Python FastAPI backend for advanced PDF OCR\n * instead of using client-side Tesseract.js to avoid CDN/worker issues.\n */\n\nconst API_BASE = process.env.REACT_APP_OCR_API || 'http://localhost:8000';\n\nexport interface ExtractedPattern {\n  cnpj: string[];\n  cpf: string[];\n  dates: string[];\n  currency: string[];\n  percentages: string[];\n  phones: string[];\n  emails: string[];\n  urls: string[];\n}\n\nexport interface OCRResponse {\n  success: boolean;\n  total_pages?: number;\n  full_text?: string;\n  patterns?: ExtractedPattern;\n  summary?: {\n    total_characters: number;\n    total_lines: number;\n    unique_patterns: number;\n  };\n  error?: string;\n}\n\nexport interface BlockData {\n  [key: string]: any;\n}\n\n/**\n * Extract text from PDF using Python backend\n */\nexport async function extractTextFromPDF(file: File): Promise<OCRResponse> {\n  if (!file.type.includes('pdf')) {\n    throw new Error('‚ùå Apenas PDF √© suportado');\n  }\n\n  const formData = new FormData();\n  formData.append('file', file);\n\n  try {\n    console.log('[OCRService] Enviando PDF para backend:', file.name);\n    \n    const response = await fetch(`${API_BASE}/api/ocr/extract`, {\n      method: 'POST',\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail || `HTTP ${response.status}`);\n    }\n\n    const data: OCRResponse = await response.json();\n    console.log('[OCRService] Resposta recebida:', {\n      pages: data.total_pages,\n      characters: data.summary?.total_characters,\n      patterns: data.summary?.unique_patterns,\n    });\n\n    return data;\n  } catch (error: any) {\n    const errorMsg = error.message || 'Erro ao processar PDF no backend';\n    console.error('[OCRService] Erro:', errorMsg);\n    throw new Error(`‚ùå Erro ao processar PDF: ${errorMsg}`);\n  }\n}\n\n/**\n * Extract and structure data for specific form blocks\n */\nexport async function extractBlockData(\n  file: File,\n  blockType: 'general' | 'finance' | 'all' = 'general'\n): Promise<BlockData> {\n  if (!file.type.includes('pdf')) {\n    throw new Error('‚ùå Apenas PDF √© suportado');\n  }\n\n  const formData = new FormData();\n  formData.append('file', file);\n\n  try {\n    console.log('[OCRService] Extraindo dados de bloco:', blockType);\n    \n    const response = await fetch(`${API_BASE}/api/ocr/extract-block?block_type=${blockType}`, {\n      method: 'POST',\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail || `HTTP ${response.status}`);\n    }\n\n    const data = await response.json();\n    \n    // Map extracted patterns to form fields\n    return mapExtractedDataToForm(data.patterns, blockType);\n  } catch (error: any) {\n    const errorMsg = error.message || 'Erro ao extrair dados de bloco';\n    console.error('[OCRService] Erro ao extrair bloco:', errorMsg);\n    throw new Error(`‚ùå Erro na extra√ß√£o: ${errorMsg}`);\n  }\n}\n\n/**\n * Map extracted patterns to form field structure\n */\nfunction mapExtractedDataToForm(patterns: ExtractedPattern, blockType: string): BlockData {\n  const mappedData: BlockData = {};\n\n  switch (blockType) {\n    case 'general':\n      // CNPJ (primary, take first match)\n      if (patterns.cnpj && patterns.cnpj.length > 0) {\n        mappedData['cnpj'] = patterns.cnpj[0];\n      }\n      // CPF (primary, take first match)\n      if (patterns.cpf && patterns.cpf.length > 0) {\n        mappedData['cpf'] = patterns.cpf[0];\n      }\n      // Dates\n      if (patterns.dates && patterns.dates.length > 0) {\n        mappedData['dates'] = patterns.dates;\n      }\n      // Contact info\n      if (patterns.phones && patterns.phones.length > 0) {\n        mappedData['phone'] = patterns.phones[0];\n      }\n      if (patterns.emails && patterns.emails.length > 0) {\n        mappedData['email'] = patterns.emails[0];\n      }\n      break;\n\n    case 'finance':\n      // Currency values\n      if (patterns.currency && patterns.currency.length > 0) {\n        mappedData['values'] = patterns.currency;\n        // Try to extract numeric value from first currency string\n        const currencyMatch = patterns.currency[0].match(/[\\d.,]+/);\n        if (currencyMatch) {\n          mappedData['primary_value'] = currencyMatch[0];\n        }\n      }\n      // Percentages\n      if (patterns.percentages && patterns.percentages.length > 0) {\n        mappedData['percentages'] = patterns.percentages;\n      }\n      break;\n\n    case 'all':\n    default:\n      // Return all patterns\n      mappedData['patterns'] = patterns;\n      break;\n  }\n\n  return mappedData;\n}\n\n/**\n * Check if Python backend is available\n */\nexport async function checkBackendHealth(): Promise<boolean> {\n  try {\n    const response = await fetch(`${API_BASE}/health`);\n    return response.ok;\n  } catch (error) {\n    console.warn('[OCRService] Backend n√£o dispon√≠vel:', error);\n    return false;\n  }\n}\n\n/**\n * Get backend capabilities and supported features\n */\nexport async function getOCRCapabilities() {\n  try {\n    const response = await fetch(`${API_BASE}/api/ocr/info`);\n    if (!response.ok) throw new Error('Failed to get OCR info');\n    return await response.json();\n  } catch (error) {\n    console.error('[OCRService] Erro ao obter capacidades:', error);\n    return null;\n  }\n}\n\n/**\n * Detect patterns in text (useful for quick validation)\n */\nexport function detectPatterns(text: string): Partial<ExtractedPattern> {\n  const patterns: Partial<ExtractedPattern> = {};\n\n  // CNPJ pattern\n  patterns.cnpj = (text.match(/\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}/g) || []);\n\n  // CPF pattern\n  patterns.cpf = (text.match(/\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}/g) || []);\n\n  // Dates\n  patterns.dates = (text.match(/\\d{1,2}[/-]\\d{1,2}[/-]\\d{4}/g) || []);\n\n  // Currency\n  patterns.currency = (text.match(/R\\$\\s*[\\d.,]+/g) || []);\n\n  // Percentages\n  patterns.percentages = (text.match(/\\d+(?:,\\d+)?\\s*%/g) || []);\n\n  return patterns;\n}\n","\nimport React, { useState } from 'react';\nimport { extractBlockData, checkBackendHealth } from '../services/ocrServiceBackend';\n\ninterface GeminiUploaderProps {\n  section: string; // Chave sem√¢ntica (ex: 'contratos', 'empenhos')\n  onDataExtracted: (data: any) => void;\n}\n\nexport const GeminiUploader: React.FC<GeminiUploaderProps> = ({ section, onDataExtracted }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check backend availability on mount\n  React.useEffect(() => {\n    checkBackendHealth();\n  }, []);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      \n      // Validate file type\n      if (!file.type.includes('pdf')) {\n        setError(`‚ùå Apenas PDF √© suportado. Recebido: ${file.type || 'tipo desconhecido'}`);\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        console.log(`[GeminiUploader] Enviando PDF para backend: ${file.name}`);\n        \n        // Use Python backend OCR service\n        const extractedData = await extractBlockData(file, 'general');\n        \n        console.log(`[GeminiUploader] Dados extra√≠dos com sucesso:`, extractedData);\n        onDataExtracted(extractedData);\n      } catch (err: any) {\n        console.error(`[GeminiUploader] Erro ao processar arquivo:`, err);\n        const errorMsg = err?.message || \"Erro ao processar PDF\";\n        setError(errorMsg);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  return (\n    <div className=\"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-sm\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n            <h3 className=\"text-sm font-bold text-indigo-800 flex items-center gap-2\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\" clipRule=\"evenodd\" />\n                </svg>\n                OCR Inteligente (Gemini 2.0)\n            </h3>\n            <p className=\"text-xs text-indigo-600 mt-1\">\n                Extra√ß√£o autom√°tica para se√ß√£o: <strong>{section}</strong>\n            </p>\n        </div>\n        <div className=\"relative\">\n             <input\n                type=\"file\"\n                accept=\"application/pdf\"\n                onChange={handleFileChange}\n                disabled={loading}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                title=\"Selecione um arquivo PDF\"\n            />\n            <button disabled={loading} className={`px-4 py-2 rounded text-sm font-medium shadow transition-colors ${loading ? 'bg-indigo-300' : 'bg-indigo-600 hover:bg-indigo-700'} text-white`}>\n                {loading ? 'Lendo Documento...' : 'Upload PDF/Imagem'}\n            </button>\n        </div>\n      </div>\n      {error && <p className=\"text-red-600 text-xs mt-2 font-medium\">{error}</p>}\n    </div>\n  );\n};\n","\n/**\n * DATA SANITIZER SERVICE\n * Normalizes AI/OCR output into strict Audesp formats.\n */\n\nexport const Patterns = {\n    CPF: /(\\d{3})\\.?(\\d{3})\\.?(\\d{3})-?(\\d{2})/g,\n    CNPJ: /(\\d{2})\\.?(\\d{3})\\.?(\\d{3})\\/?(\\d{4})-?(\\d{2})/g,\n    DATE_BR: /(\\d{1,2})\\/(\\d{1,2})\\/(\\d{2,4})/g,\n    MONEY: /R\\$\\s?([\\d.,]+)/g\n};\n\nexport const Sanitizers = {\n    /**\n     * Removes non-digits. Returns 11 chars for CPF or 14 for CNPJ.\n     */\n    cleanDoc: (value: string | number | undefined): string => {\n        if (!value) return \"\";\n        const str = String(value).replace(/\\D/g, \"\");\n        return str;\n    },\n\n    /**\n     * Tries to parse date from DD/MM/YYYY or YYYY-MM-DD to YYYY-MM-DD\n     */\n    cleanDate: (value: string | undefined): string => {\n        if (!value) return \"\";\n        \n        // If already YYYY-MM-DD\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) return value;\n\n        // Try DD/MM/YYYY\n        const matchBR = value.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/);\n        if (matchBR) {\n            const day = matchBR[1].padStart(2, '0');\n            const month = matchBR[2].padStart(2, '0');\n            const year = matchBR[3];\n            return `${year}-${month}-${day}`;\n        }\n\n        return value; // Return original if unknown format (let validation catch it)\n    },\n\n    /**\n     * Converts \"R$ 1.234,56\" or \"1234.56\" to float\n     */\n    cleanNumber: (value: string | number | undefined): number => {\n        if (typeof value === 'number') return value;\n        if (!value) return 0;\n\n        let str = String(value);\n        \n        // If format is Brazilian (1.234,56)\n        if (str.includes(',') && !str.includes('US')) {\n            str = str.replace(/\\./g, '').replace(',', '.');\n        } \n        // If contains currency symbol\n        str = str.replace(/[^\\d.-]/g, '');\n\n        const num = parseFloat(str);\n        return isNaN(num) ? 0 : num;\n    }\n};\n\n/**\n * Recursive function to traverse the object and sanitize specific keys\n */\nexport function sanitizeObject(obj: any): any {\n    if (Array.isArray(obj)) {\n        return obj.map(item => sanitizeObject(item));\n    } else if (typeof obj === 'object' && obj !== null) {\n        const newObj: any = {};\n        for (const key in obj) {\n            const value = obj[key];\n            \n            if (key.includes('cpf') || key.includes('cnpj') || key.includes('documento_numero')) {\n                newObj[key] = Sanitizers.cleanDoc(value);\n            } else if (key.includes('data') || key === 'vigencia_data_inicial' || key === 'vigencia_data_final') {\n                newObj[key] = Sanitizers.cleanDate(value);\n            } else if (key.includes('valor') || key.includes('saldo') || key.includes('remuneracao') || key.includes('montante')) {\n                newObj[key] = Sanitizers.cleanNumber(value);\n            } else if (typeof value === 'object') {\n                newObj[key] = sanitizeObject(value);\n            } else {\n                newObj[key] = value;\n            }\n        }\n        return newObj;\n    }\n    return obj;\n}\n","\nimport { GoogleGenAI, Type, Schema } from \"@google/genai\";\nimport { sanitizeObject } from \"./dataSanitizer\";\n\n// Ensure usage of process.env.API_KEY\n// NOTE: Gemini API calls should be made from backend only\n// This is a frontend placeholder that requires a backend proxy\nlet ai: any = null;\n\nif (typeof window === 'undefined' && process.env.API_KEY) {\n    ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\n}\n\n// --- SCHEMAS DEFINITIONS (Reusable) ---\n\nconst CREDOR_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        documento_numero: { type: Type.STRING, description: \"CNPJ or CPF numbers only\" },\n        nome: { type: Type.STRING },\n        documento_tipo: { type: Type.NUMBER, description: \"2 for CNPJ, 1 for CPF\" }\n    }\n};\n\nconst DOC_FISCAL_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero: { type: Type.STRING },\n        data_emissao: { type: Type.STRING, description: \"YYYY-MM-DD\" },\n        valor_bruto: { type: Type.NUMBER },\n        credor: CREDOR_SCHEMA,\n        descricao: { type: Type.STRING },\n        categoria_despesas_tipo: { type: Type.NUMBER }\n    }\n};\n\nconst EMPREGADO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        cpf: { type: Type.STRING },\n        data_admissao: { type: Type.STRING },\n        salario_contratual: { type: Type.NUMBER },\n        cbo: { type: Type.STRING },\n        periodos_remuneracao: {\n            type: Type.ARRAY,\n            items: {\n                type: Type.OBJECT,\n                properties: {\n                    mes: { type: Type.NUMBER },\n                    carga_horaria: { type: Type.NUMBER },\n                    remuneracao_bruta: { type: Type.NUMBER }\n                }\n            }\n        }\n    }\n};\n\nconst CONTRATO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero: { type: Type.STRING },\n        objeto: { type: Type.STRING },\n        data_assinatura: { type: Type.STRING },\n        valor_montante: { type: Type.NUMBER },\n        vigencia_data_inicial: { type: Type.STRING },\n        credor: CREDOR_SCHEMA\n    }\n};\n\nconst PAGAMENTO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        pagamento_data: { type: Type.STRING },\n        pagamento_valor: { type: Type.NUMBER },\n        numero_transacao: { type: Type.STRING },\n        identificacao_documento_fiscal: {\n            type: Type.OBJECT,\n            properties: { numero: { type: Type.STRING } }\n        },\n        meio_pagamento_tipo: { type: Type.NUMBER }\n    }\n};\n\nconst BEM_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero_patrimonio: { type: Type.STRING },\n        descricao: { type: Type.STRING },\n        data_aquisicao: { type: Type.STRING },\n        valor_aquisicao: { type: Type.NUMBER }\n    }\n};\n\nconst SALDO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        banco: { type: Type.NUMBER },\n        agencia: { type: Type.NUMBER },\n        conta: { type: Type.STRING },\n        saldo_bancario: { type: Type.NUMBER },\n        saldo_contabil: { type: Type.NUMBER }\n    }\n};\n\nconst RECEITA_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        data_repasse: { type: Type.STRING },\n        valor: { type: Type.NUMBER },\n        data_prevista: { type: Type.STRING }\n    }\n};\n\nconst CEDIDO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        cpf: { type: Type.STRING },\n        cargo_publico_ocupado: { type: Type.STRING },\n        data_inicial_cessao: { type: Type.STRING },\n        onus_pagamento: { type: Type.NUMBER }\n    }\n};\n\n// --- MAIN EXTRACTOR FUNCTIONS ---\n\n/**\n * Extracts data from a single image or PDF page for a specific section.\n */\nexport async function extractDataFromImage(\n  base64Data: string, \n  mimeType: string, \n  section: string\n): Promise<any> {\n  \n  let prompt = \"Analyze this document. Extract the data strictly into the specified JSON structure. Normalize dates to YYYY-MM-DD and numbers to floats. Ignore currency symbols.\";\n  let schema: any = {};\n\n  switch (section) {\n    case 'documentos_fiscais':\n      prompt += \" Extract invoices/receipts.\";\n      schema = { type: Type.OBJECT, properties: { documentos_fiscais: { type: Type.ARRAY, items: DOC_FISCAL_SCHEMA } } };\n      break;\n    case 'relacao_empregados':\n      prompt += \" Extract payroll/employee list.\";\n      schema = { type: Type.OBJECT, properties: { empregados: { type: Type.ARRAY, items: EMPREGADO_SCHEMA } } };\n      break;\n    case 'contratos':\n      prompt += \" Extract contracts.\";\n      schema = { type: Type.OBJECT, properties: { contratos: { type: Type.ARRAY, items: CONTRATO_SCHEMA } } };\n      break;\n    case 'pagamentos':\n      prompt += \" Extract payments/bank transfers.\";\n      schema = { type: Type.OBJECT, properties: { pagamentos: { type: Type.ARRAY, items: PAGAMENTO_SCHEMA } } };\n      break;\n    case 'empenhos':\n        schema = {\n            type: Type.OBJECT,\n            properties: {\n                empenhos: {\n                    type: Type.ARRAY,\n                    items: {\n                        type: Type.OBJECT,\n                        properties: {\n                            numero: { type: Type.STRING },\n                            data_emissao: { type: Type.STRING },\n                            valor: { type: Type.NUMBER },\n                            historico: { type: Type.STRING }\n                        }\n                    }\n                }\n            }\n        };\n        break;\n    case 'relacao_bens':\n        prompt += \" Extract asset list (bens patrimoniais).\";\n        schema = { type: Type.OBJECT, properties: { relacao_bens_moveis_adquiridos: { type: Type.ARRAY, items: BEM_SCHEMA } } };\n        break;\n    case 'disponibilidades':\n        prompt += \" Extract bank balances (extrato banc√°rio/concilia√ß√£o).\";\n        schema = { type: Type.OBJECT, properties: { saldos: { type: Type.ARRAY, items: SALDO_SCHEMA } } };\n        break;\n    case 'receitas':\n        prompt += \" Extract revenue/transfers received.\";\n        schema = { type: Type.OBJECT, properties: { repasses_recebidos: { type: Type.ARRAY, items: RECEITA_SCHEMA } } };\n        break;\n    case 'servidores_cedidos':\n        prompt += \" Extract list of ceded public servants.\";\n        schema = { type: Type.OBJECT, properties: { servidores_cedidos: { type: Type.ARRAY, items: CEDIDO_SCHEMA } } };\n        break;\n    default:\n        // Fallback for simple fields\n        prompt += \" Extract key information.\";\n        schema = { type: Type.OBJECT, properties: { info: { type: Type.STRING } } };\n        break;\n  }\n\n  try {\n    const response = await ai.models.generateContent({\n      model: 'gemini-2.5-flash',\n      contents: {\n        parts: [\n          { inlineData: { mimeType: mimeType, data: base64Data } },\n          { text: prompt }\n        ]\n      },\n      config: {\n        responseMimeType: \"application/json\",\n        responseSchema: schema\n      }\n    });\n\n    if (response.text) {\n        const raw = JSON.parse(response.text);\n        // If the schema wrapped in a root property, check logic\n        const keys = Object.keys(raw);\n        if (keys.length === 1 && Array.isArray(raw[keys[0]])) {\n            return sanitizeObject(raw[keys[0]]); // Return the array directly if needed by logic\n        }\n        // Special Case: relacao_bens needs nested object structure\n        if(section === 'relacao_bens' && raw.relacao_bens_moveis_adquiridos) {\n            return sanitizeObject(raw);\n        }\n        \n        return sanitizeObject(raw);\n    }\n    return null;\n\n  } catch (error) {\n    console.error(\"Gemini Extraction Error:\", error);\n    throw error;\n  }\n}\n\n/**\n * MASSIVE EXTRACTION: Reads a full PDF and maps to the entire Audesp Schema.\n * This is Module 2 of the requirement.\n */\nexport async function extractFullReport(base64Data: string, mimeType: string): Promise<any> {\n    const prompt = `\n    You are an expert accountant and auditor for TCESP Audesp Phase V.\n    Analyze this ENTIRE document (Accountability Report / Presta√ß√£o de Contas).\n    \n    Your task is to identify and extract ALL relevant sections into a single JSON structure.\n    \n    1. Identify the 'Descritor' (Year, Month, Entity, City).\n    2. Identify 'Empregados' (Payroll).\n    3. Identify 'Contratos' (Contracts).\n    4. Identify 'Documentos Fiscais' (Invoices, Receipts).\n    5. Identify 'Pagamentos' (Bank transfers, checks).\n    6. Identify 'Empenhos' (Commitments).\n    7. Identify 'Repasses' (Transfers received).\n    \n    If a section is not found, return an empty array for it.\n    Normalize all dates to YYYY-MM-DD.\n    Normalize all values to float (e.g. 1250.50).\n    Clean CPF/CNPJ (numbers only).\n    `;\n\n    // A monolithic schema covering the main arrays\n    const FULL_SCHEMA: Schema = {\n        type: Type.OBJECT,\n        properties: {\n            descritor: {\n                type: Type.OBJECT,\n                properties: {\n                    ano: { type: Type.NUMBER },\n                    mes: { type: Type.NUMBER },\n                    entidade: { type: Type.NUMBER },\n                    municipio: { type: Type.NUMBER }\n                }\n            },\n            relacao_empregados: { type: Type.ARRAY, items: EMPREGADO_SCHEMA },\n            contratos: { type: Type.ARRAY, items: CONTRATO_SCHEMA },\n            documentos_fiscais: { type: Type.ARRAY, items: DOC_FISCAL_SCHEMA },\n            pagamentos: { type: Type.ARRAY, items: PAGAMENTO_SCHEMA },\n            empenhos: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        numero: { type: Type.STRING },\n                        data_emissao: { type: Type.STRING },\n                        valor: { type: Type.NUMBER },\n                        historico: { type: Type.STRING }\n                    }\n                }\n            },\n            repasses: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        data_repasse: { type: Type.STRING },\n                        valor_repasse: { type: Type.NUMBER },\n                        numero_documento: { type: Type.STRING }\n                    }\n                }\n            }\n        }\n    };\n\n    try {\n        const response = await ai.models.generateContent({\n            model: 'gemini-2.5-flash',\n            contents: {\n                parts: [\n                    { inlineData: { mimeType: mimeType, data: base64Data } },\n                    { text: prompt }\n                ]\n            },\n            config: {\n                responseMimeType: \"application/json\",\n                responseSchema: FULL_SCHEMA\n            }\n        });\n\n        if (response.text) {\n            const raw = JSON.parse(response.text);\n            return sanitizeObject(raw);\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Full Report Extraction Error:\", error);\n        throw error;\n    }\n}\n","\nimport React, { useState } from 'react';\nimport { extractFullReport } from '../services/geminiService';\nimport { PrestacaoContas } from '../types';\nimport { CLS } from './ui/BlockBase';\n\ninterface FullReportImporterProps {\n    onDataMerge: (data: Partial<PrestacaoContas>) => void;\n    onCancel: () => void;\n}\n\nexport const FullReportImporter: React.FC<FullReportImporterProps> = ({ onDataMerge, onCancel }) => {\n    const [loading, setLoading] = useState(false);\n    const [status, setStatus] = useState<string>('');\n    const [extractedData, setExtractedData] = useState<any>(null);\n\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            const file = e.target.files[0];\n            setLoading(true);\n            setStatus('Lendo arquivo (Isso pode levar alguns segundos)...');\n\n            const reader = new FileReader();\n            reader.onloadend = async () => {\n                try {\n                    const base64String = (reader.result as string).split(',')[1];\n                    \n                    setStatus('Enviando para IA (Gemini 2.0)...');\n                    const data = await extractFullReport(base64String, file.type);\n                    \n                    if (data) {\n                        setExtractedData(data);\n                        setStatus('An√°lise conclu√≠da. Revise os dados abaixo.');\n                    } else {\n                        setStatus('Falha: Nenhum dado estruturado encontrado.');\n                    }\n                } catch (err: any) {\n                    setStatus(`Erro: ${err.message}`);\n                } finally {\n                    setLoading(false);\n                }\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const handleAccept = () => {\n        if (extractedData) {\n            onDataMerge(extractedData);\n        }\n    };\n\n    if (extractedData) {\n        return (\n            <div className=\"fixed inset-0 bg-slate-900/80 z-50 flex items-center justify-center p-4\">\n                <div className=\"bg-white w-full max-w-4xl h-[90vh] rounded-lg shadow-2xl flex flex-col\">\n                    <div className=\"p-6 border-b border-slate-200 flex justify-between items-center bg-slate-50\">\n                        <div>\n                            <h2 className=\"text-xl font-bold text-slate-800\">Revis√£o da Importa√ß√£o Inteligente</h2>\n                            <p className=\"text-sm text-slate-500\">O OCR identificou os seguintes registros no seu documento.</p>\n                        </div>\n                        <div className=\"flex gap-3\">\n                            <button onClick={onCancel} className=\"text-slate-500 hover:text-slate-800 font-bold text-sm px-4\">\n                                Cancelar\n                            </button>\n                            <button onClick={handleAccept} className={CLS.BTN_ADD}>\n                                Confirmar e Importar Tudo\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <div className=\"flex-1 overflow-y-auto p-6 bg-slate-100 space-y-6\">\n                        {/* Summary Cards */}\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                            <StatCard label=\"Empregados\" count={extractedData.relacao_empregados?.length || 0} />\n                            <StatCard label=\"Contratos\" count={extractedData.contratos?.length || 0} />\n                            <StatCard label=\"Notas Fiscais\" count={extractedData.documentos_fiscais?.length || 0} />\n                            <StatCard label=\"Pagamentos\" count={extractedData.pagamentos?.length || 0} />\n                        </div>\n\n                        {/* Raw JSON Preview (for now, better than nothing) */}\n                        <div className=\"bg-white p-4 rounded border border-slate-200\">\n                             <h3 className=\"font-bold text-sm mb-2 text-slate-700\">Pr√©-visualiza√ß√£o dos Dados Estruturados</h3>\n                             <pre className=\"text-xs font-mono bg-slate-900 text-green-400 p-4 rounded overflow-auto max-h-96\">\n                                {JSON.stringify(extractedData, null, 2)}\n                             </pre>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"fixed inset-0 bg-slate-900/80 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white w-full max-w-lg rounded-lg shadow-2xl p-8 text-center\">\n                <div className=\"mb-6\">\n                    <div className=\"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l4.414 4.414a1 1 0 01.586 1.414V19a2 2 0 01-2 2z\" />\n                        </svg>\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-slate-800\">Importar Presta√ß√£o Completa</h2>\n                    <p className=\"text-slate-500 mt-2 text-sm\">\n                        Fa√ßa upload de um PDF contendo m√∫ltiplos documentos (Notas, Extratos, Folha). \n                        A IA ir√° separar e classificar tudo automaticamente.\n                    </p>\n                </div>\n\n                <div className=\"border-2 border-dashed border-slate-300 rounded-lg p-8 hover:bg-slate-50 transition-colors relative cursor-pointer\">\n                    <input \n                        type=\"file\" \n                        accept=\"application/pdf\"\n                        onChange={handleFileChange}\n                        disabled={loading}\n                        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                    />\n                    {loading ? (\n                        <div className=\"space-y-3\">\n                            <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto\"></div>\n                            <p className=\"text-sm font-bold text-blue-600\">{status}</p>\n                        </div>\n                    ) : (\n                        <div>\n                            <p className=\"font-bold text-slate-700\">Clique ou arraste o PDF aqui</p>\n                            <p className=\"text-xs text-slate-400 mt-1\">Suporta arquivos PDF digitalizados (OCR via Gemini)</p>\n                        </div>\n                    )}\n                </div>\n\n                <button onClick={onCancel} className=\"mt-6 text-slate-400 hover:text-slate-600 text-sm font-medium\">\n                    Cancelar\n                </button>\n            </div>\n        </div>\n    );\n};\n\nconst StatCard = ({ label, count }: { label: string, count: number }) => (\n    <div className=\"bg-white p-4 rounded border border-slate-200 shadow-sm text-center\">\n        <div className=\"text-2xl font-bold text-blue-600\">{count}</div>\n        <div className=\"text-xs text-slate-500 uppercase font-bold\">{label}</div>\n    </div>\n);\n"],"names":["CLS","INPUT","CHECKBOX","LABEL","SECTION","BTN_ADD","BTN_REMOVE","BTN_SUB","HEADER_TITLE","HEADER_DIVIDER","GRID_CONTAINER","FLEX_ROW_CENTER","SectionHeader","_ref","title","children","_jsxs","className","_jsx","InputGroup","_ref2","label","error","ArrayBlock","_ref3","items","newItemTemplate","onAdd","onRemove","onUpdate","renderItem","ocrSection","onOcrData","onClick","GeminiUploader","section","onDataExtracted","data","empregados","Array","isArray","forEach","emp","_objectSpread","length","map","item","idx","field","val","Field","_ref4","value","onChange","type","options","e","target","opt","Number","step","undefined","API_BASE","process","loading","setLoading","useState","setError","React","async","fetch","concat","ok","console","warn","checkBackendHealth","xmlns","viewBox","fill","fillRule","d","clipRule","accept","files","file","includes","log","name","extractedData","blockType","arguments","Error","formData","FormData","append","response","method","body","errorData","json","detail","status","patterns","mappedData","cnpj","cpf","dates","phones","emails","currency","currencyMatch","match","percentages","mapExtractedDataToForm","errorMsg","message","extractBlockData","err","disabled","Sanitizers","String","replace","test","matchBR","day","padStart","month","year","str","num","parseFloat","isNaN","sanitizeObject","obj","newObj","key","ai","window","API_KEY","GoogleGenAI","apiKey","CREDOR_SCHEMA","Type","OBJECT","properties","documento_numero","STRING","description","nome","documento_tipo","NUMBER","DOC_FISCAL_SCHEMA","numero","data_emissao","valor_bruto","credor","descricao","categoria_despesas_tipo","EMPREGADO_SCHEMA","data_admissao","salario_contratual","cbo","periodos_remuneracao","ARRAY","mes","carga_horaria","remuneracao_bruta","CONTRATO_SCHEMA","objeto","data_assinatura","valor_montante","vigencia_data_inicial","PAGAMENTO_SCHEMA","pagamento_data","pagamento_valor","numero_transacao","identificacao_documento_fiscal","meio_pagamento_tipo","extractFullReport","base64Data","mimeType","FULL_SCHEMA","descritor","ano","entidade","municipio","relacao_empregados","contratos","documentos_fiscais","pagamentos","empenhos","valor","historico","repasses","data_repasse","valor_repasse","numero_documento","models","generateContent","model","contents","parts","inlineData","text","config","responseMimeType","responseSchema","JSON","parse","FullReportImporter","onDataMerge","onCancel","setStatus","setExtractedData","handleAccept","_extractedData$relaca","_extractedData$contra","_extractedData$docume","_extractedData$pagame","StatCard","count","stringify","stroke","strokeLinecap","strokeLinejoin","strokeWidth","reader","FileReader","onloadend","base64String","result","split","readAsDataURL"],"ignoreList":[],"sourceRoot":""}