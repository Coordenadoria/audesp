{"version":3,"file":"static/js/684.02019ee2.chunk.js","mappings":"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","sources":["services/advancedPDFService.ts","components/BatchPDFImporter.tsx"],"sourcesContent":["/**\n * SERVI√áO DE IA AVAN√áADA PARA PROCESSAMENTO EM LOTE DE PDFs\n * Usa APIs mais avan√ßadas (Claude, GPT-4V)\n * Extrai informa√ß√µes automaticamente e sugere preenchimento\n */\n\nexport interface ExtractedDocument {\n  filename: string;\n  type: 'edital' | 'licitacao' | 'ata' | 'contrato' | 'empenho' | 'pagamento' | 'outro';\n  confidence: number;\n  extractedData: {\n    [key: string]: any;\n  };\n  suggestedFields: {\n    field: string;\n    value: string;\n    confidence: number;\n  }[];\n  rawText: string;\n}\n\nexport interface BatchProcessingResult {\n  totalFiles: number;\n  processedFiles: number;\n  extractedDocuments: ExtractedDocument[];\n  summary: {\n    estimatedCompleteness: number;\n    suggestedNextSteps: string[];\n    warnings: string[];\n  };\n}\n\nexport class AdvancedPDFService {\n  private static anthropicApiKey = process.env.REACT_APP_ANTHROPIC_API_KEY;\n  private static openaiApiKey = process.env.REACT_APP_OPENAI_API_KEY;\n\n  /**\n   * Processar lote de PDFs com IA avan√ßada\n   * Usa Claude 3.5 Sonnet (modelo mais avan√ßado dispon√≠vel)\n   */\n  static async processBatchPDFs(files: File[]): Promise<BatchProcessingResult> {\n    console.log(`[AI] Iniciando processamento em lote de ${files.length} PDFs`);\n\n    const results: ExtractedDocument[] = [];\n\n    for (let i = 0; i < files.length; i++) {\n      try {\n        console.log(`[AI] Processando arquivo ${i + 1}/${files.length}: ${files[i].name}`);\n        const extracted = await this.processDocument(files[i]);\n        results.push(extracted);\n      } catch (error: any) {\n        console.error(`[AI] Erro ao processar ${files[i].name}:`, error);\n        results.push({\n          filename: files[i].name,\n          type: 'outro',\n          confidence: 0,\n          extractedData: {},\n          suggestedFields: [],\n          rawText: '',\n        });\n      }\n    }\n\n    return this.generateBatchSummary(results);\n  }\n\n  /**\n   * Processar um documento individual\n   */\n  private static async processDocument(file: File): Promise<ExtractedDocument> {\n    // 1. Converter PDF para texto\n    const text = await this.extractTextFromPDF(file);\n\n    // 2. Classificar documento\n    const docType = await this.classifyDocument(text);\n\n    // 3. Extrair campos estruturados\n    const extractedData = await this.extractStructuredData(text, docType);\n\n    // 4. Gerar sugest√µes\n    const suggestedFields = await this.generateSuggestions(text, extractedData, docType);\n\n    return {\n      filename: file.name,\n      type: docType,\n      confidence: this.calculateConfidence(extractedData),\n      extractedData,\n      suggestedFields,\n      rawText: text\n    };\n  }\n\n  /**\n   * Extrair texto de PDF (browser-based)\n   */\n  private static async extractTextFromPDF(file: File): Promise<string> {\n    try {\n      // Usar PDFjs Worker para extrair texto\n      const pdfjsLib = (window as any).pdfjsLib;\n      if (!pdfjsLib) {\n        throw new Error('PDFjs n√£o carregado');\n      }\n\n      const arrayBuffer = await file.arrayBuffer();\n      const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;\n\n      let text = '';\n      for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i);\n        const content = await page.getTextContent();\n        const pageText = content.items.map((item: any) => item.str).join(' ');\n        text += pageText + '\\n';\n      }\n\n      return text;\n    } catch (error) {\n      console.warn('[PDF] PDFjs n√£o dispon√≠vel, usando fallback');\n      return `N√£o foi poss√≠vel extrair texto de ${file.name}`;\n    }\n  }\n\n  /**\n   * Classificar documento usando Claude 3.5 Sonnet\n   */\n  private static async classifyDocument(\n    text: string\n  ): Promise<ExtractedDocument['type']> {\n    if (!this.anthropicApiKey) {\n      return this.classifyDocumentLocally(text);\n    }\n\n    try {\n      const response = await fetch('https://api.anthropic.com/v1/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.anthropicApiKey,\n          'anthropic-version': '2023-06-01'\n        },\n        body: JSON.stringify({\n          model: 'claude-3-5-sonnet-20241022',\n          max_tokens: 200,\n          messages: [\n            {\n              role: 'user',\n              content: `Classifique este documento em uma destas categorias: edital, licitacao, ata, contrato, empenho, pagamento, outro.\n\nTexto do documento (primeiros 2000 caracteres):\n${text.substring(0, 2000)}\n\nResponda apenas com uma palavra da lista acima, sem explica√ß√£o.`\n            }\n          ]\n        })\n      });\n\n      const data = await response.json();\n      const classification = data.content[0].text.toLowerCase().trim();\n\n      const validTypes: ExtractedDocument['type'][] = [\n        'edital',\n        'licitacao',\n        'ata',\n        'contrato',\n        'empenho',\n        'pagamento',\n        'outro'\n      ];\n\n      return validTypes.includes(classification as any)\n        ? (classification as ExtractedDocument['type'])\n        : this.classifyDocumentLocally(text);\n    } catch (error) {\n      console.error('[AI] Erro ao classificar com Claude:', error);\n      return this.classifyDocumentLocally(text);\n    }\n  }\n\n  /**\n   * Classifica√ß√£o local (fallback)\n   */\n  private static classifyDocumentLocally(text: string): ExtractedDocument['type'] {\n    const lower = text.toLowerCase();\n\n    if (lower.includes('edital')) return 'edital';\n    if (lower.includes('licita√ß√£o') || lower.includes('licitacao')) return 'licitacao';\n    if (lower.includes('ata')) return 'ata';\n    if (lower.includes('contrato')) return 'contrato';\n    if (lower.includes('empenho')) return 'empenho';\n    if (lower.includes('pagamento')) return 'pagamento';\n\n    return 'outro';\n  }\n\n  /**\n   * Extrair dados estruturados com Claude\n   */\n  private static async extractStructuredData(\n    text: string,\n    docType: ExtractedDocument['type']\n  ): Promise<Record<string, any>> {\n    if (!this.anthropicApiKey) {\n      return this.extractDataLocally(text, docType);\n    }\n\n    try {\n      const prompt = this.buildExtractionPrompt(text, docType);\n\n      const response = await fetch('https://api.anthropic.com/v1/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': this.anthropicApiKey,\n          'anthropic-version': '2023-06-01'\n        },\n        body: JSON.stringify({\n          model: 'claude-3-5-sonnet-20241022',\n          max_tokens: 2000,\n          messages: [\n            {\n              role: 'user',\n              content: prompt\n            }\n          ]\n        })\n      });\n\n      const data = await response.json();\n      const jsonStr = data.content[0].text;\n\n      try {\n        return JSON.parse(jsonStr);\n      } catch {\n        return this.extractDataLocally(text, docType);\n      }\n    } catch (error) {\n      console.error('[AI] Erro ao extrair dados:', error);\n      return this.extractDataLocally(text, docType);\n    }\n  }\n\n  /**\n   * Construir prompt de extra√ß√£o\n   */\n  private static buildExtractionPrompt(text: string, docType: string): string {\n    const fieldsByType: Record<string, string[]> = {\n      edital: [\n        'numero_edital',\n        'data_publicacao',\n        'modalidade',\n        'objeto',\n        'valor_estimado',\n        'data_abertura'\n      ],\n      licitacao: [\n        'numero_processo',\n        'data',\n        'vencedor',\n        'valor_contratado',\n        'modalidade'\n      ],\n      ata: ['data_assinatura', 'signatarios', 'objeto', 'valor'],\n      contrato: [\n        'numero_contrato',\n        'data_assinatura',\n        'partes',\n        'vigencia',\n        'valor',\n        'objeto'\n      ],\n      empenho: [\n        'numero_empenho',\n        'data',\n        'valor',\n        'favorecido',\n        'descricao'\n      ],\n      pagamento: [\n        'data_pagamento',\n        'valor',\n        'beneficiario',\n        'numero_nota',\n        'referencia'\n      ],\n      outro: ['informacoes_principais', 'valores', 'datas']\n    };\n\n    const fields = fieldsByType[docType] || fieldsByType['outro'];\n\n    return `Extraia os seguintes campos deste documento ${docType}:\n${fields.map((f) => `- ${f}`).join('\\n')}\n\nDocumento:\n${text.substring(0, 3000)}\n\nResponda em JSON v√°lido com os campos extra√≠dos. Se um campo n√£o for encontrado, use null.\nExemplo: {\"numero_contrato\": \"123/2024\", \"valor\": 50000.00}`;\n  }\n\n  /**\n   * Extra√ß√£o local (regex)\n   */\n  private static extractDataLocally(\n    text: string,\n    _docType: string\n  ): Record<string, any> {\n    const data: Record<string, any> = {};\n\n    // Padr√µes de regex comuns\n    const patterns = {\n      cpf: /\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}/g,\n      cnpj: /\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}/g,\n      valores: /R\\$\\s*[\\d.,]+/g,\n      datas: /\\d{2}\\/\\d{2}\\/\\d{4}/g,\n      numeros: /[N¬∫#]\\s*(\\d+)/g\n    };\n\n    for (const [key, pattern] of Object.entries(patterns)) {\n      const matches = text.match(pattern);\n      if (matches) {\n        data[key] = matches.slice(0, 5); // Primeiros 5 matches\n      }\n    }\n\n    return data;\n  }\n\n  /**\n   * Gerar sugest√µes de preenchimento\n   */\n  private static async generateSuggestions(\n    text: string,\n    extractedData: Record<string, any>,\n    docType: string\n  ): Promise<ExtractedDocument['suggestedFields']> {\n    const suggestions: ExtractedDocument['suggestedFields'] = [];\n\n    // Sugest√µes baseadas em dados extra√≠dos\n    for (const [key, value] of Object.entries(extractedData)) {\n      if (value && Array.isArray(value) && value.length > 0) {\n        suggestions.push({\n          field: key,\n          value: String(value[0]),\n          confidence: 0.85\n        });\n      } else if (value && value !== null) {\n        suggestions.push({\n          field: key,\n          value: String(value),\n          confidence: 0.8\n        });\n      }\n    }\n\n    return suggestions.slice(0, 10); // M√°ximo 10 sugest√µes\n  }\n\n  /**\n   * Calcular confian√ßa geral\n   */\n  private static calculateConfidence(extractedData: Record<string, any>): number {\n    const fields = Object.keys(extractedData).length;\n    const filledFields = Object.values(extractedData).filter((v) => v !== null).length;\n\n    return fields > 0 ? filledFields / fields : 0;\n  }\n\n  /**\n   * Gerar resumo do processamento em lote\n   */\n  private static generateBatchSummary(\n    results: ExtractedDocument[]\n  ): BatchProcessingResult {\n    const avgConfidence =\n      results.reduce((sum, r) => sum + r.confidence, 0) / Math.max(results.length, 1);\n\n    const totalSuggestedFields = results.reduce((sum, r) => sum + r.suggestedFields.length, 0);\n\n    return {\n      totalFiles: results.length,\n      processedFiles: results.filter((r) => r.confidence > 0).length,\n      extractedDocuments: results,\n      summary: {\n        estimatedCompleteness: avgConfidence,\n        suggestedNextSteps: [\n          'Revisar campos extra√≠dos automaticamente',\n          totalSuggestedFields > 0\n            ? `${totalSuggestedFields} campos sugeridos para preenchimento`\n            : 'Nenhuma sugest√£o autom√°tica dispon√≠vel',\n          'Validar dados cr√≠ticos antes de enviar'\n        ],\n        warnings:\n          avgConfidence < 0.5\n            ? [\n                'Baixa confian√ßa na extra√ß√£o. Revise manualmente os dados extra√≠dos.'\n              ]\n            : []\n      }\n    };\n  }\n}\n\nexport default AdvancedPDFService;\n","/**\n * COMPONENTE DE IMPORTA√á√ÉO EM LOTE DE PDFs\n * Upload, processamento com IA, e sugest√£o de preenchimento\n */\n\nimport React, { useState, useRef } from 'react';\nimport { PrestacaoContas } from '../types';\nimport AdvancedPDFService, { ExtractedDocument, BatchProcessingResult } from '../services/advancedPDFService';\n\ninterface BatchPDFImporterProps {\n  onDocumentsProcessed: (results: BatchProcessingResult) => void;\n  onApplySuggestions: (field: string, value: string) => void;\n  formData: PrestacaoContas;\n}\n\nexport const BatchPDFImporter: React.FC<BatchPDFImporterProps> = ({\n  onDocumentsProcessed,\n  onApplySuggestions,\n  formData\n}) => {\n  const [files, setFiles] = useState<File[]>([]);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [results, setResults] = useState<BatchProcessingResult | null>(null);\n  const [selectedDoc, setSelectedDoc] = useState<ExtractedDocument | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFiles = Array.from(e.target.files || []).filter((file: File) =>\n      file.type === 'application/pdf'\n    );\n\n    if (selectedFiles.length === 0) {\n      alert('Por favor, selecione apenas arquivos PDF');\n      return;\n    }\n\n    setFiles(selectedFiles);\n  };\n\n  const handleProcessFiles = async () => {\n    if (files.length === 0) {\n      alert('Selecione pelo menos um arquivo PDF');\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      const batchResults = await AdvancedPDFService.processBatchPDFs(files);\n      setResults(batchResults);\n      onDocumentsProcessed(batchResults);\n\n      // Selecionar primeiro documento\n      if (batchResults.extractedDocuments.length > 0) {\n        setSelectedDoc(batchResults.extractedDocuments[0]);\n      }\n    } catch (error: any) {\n      alert(`Erro ao processar PDFs: ${error.message}`);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleApplySuggestion = (field: string, value: string) => {\n    onApplySuggestions(field, value);\n    alert(`Campo '${field}' preenchido com: ${value}`);\n  };\n\n  return (\n    <div className=\"w-full bg-white rounded-lg shadow-lg border border-slate-200 p-6\">\n      {/* CABE√áALHO */}\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">\n          üìÑ Importar M√∫ltiplos PDFs\n        </h2>\n        <p className=\"text-sm text-slate-500\">\n          Envie v√°rios PDFs e deixe a IA ajudar no preenchimento autom√°tico\n        </p>\n      </div>\n\n      {!results ? (\n        <>\n          {/* ZONA DE DROP */}\n          <div\n            onDragOver={(e) => e.preventDefault()}\n            onDrop={(e) => {\n              e.preventDefault();\n              const droppedFiles = Array.from(e.dataTransfer.files).filter(\n                (f: File) => f.type === 'application/pdf'\n              );\n              setFiles(droppedFiles as File[]);\n            }}\n            className=\"border-2 border-dashed border-blue-300 rounded-lg p-8 text-center bg-blue-50 mb-4 hover:bg-blue-100 transition cursor-pointer\"\n          >\n            <div className=\"text-4xl mb-2\">üìÅ</div>\n            <p className=\"font-bold text-slate-700 mb-1\">\n              Arraste PDFs aqui\n            </p>\n            <p className=\"text-sm text-slate-500\">\n              ou clique para selecionar\n            </p>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              multiple\n              accept=\".pdf\"\n              onChange={handleFileSelect}\n              className=\"hidden\"\n            />\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition\"\n            >\n              Selecionar PDFs\n            </button>\n          </div>\n\n          {/* LISTA DE ARQUIVOS */}\n          {files.length > 0 && (\n            <div className=\"mb-4\">\n              <h3 className=\"font-bold text-slate-700 mb-2\">\n                Arquivos Selecionados ({files.length}):\n              </h3>\n              <div className=\"space-y-2\">\n                {files.map((file, idx) => (\n                  <div\n                    key={idx}\n                    className=\"flex items-center gap-3 p-2 bg-slate-50 rounded border border-slate-200\"\n                  >\n                    <span className=\"text-lg\">üìÑ</span>\n                    <span className=\"flex-1 text-sm text-slate-700 font-medium\">\n                      {file.name}\n                    </span>\n                    <span className=\"text-xs text-slate-500\">\n                      {(file.size / 1024).toFixed(1)} KB\n                    </span>\n                    <button\n                      onClick={() =>\n                        setFiles(files.filter((_, i) => i !== idx))\n                      }\n                      className=\"text-red-600 hover:text-red-700 font-bold\"\n                    >\n                      ‚úï\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* BOT√ÉO PROCESSAR */}\n          <button\n            onClick={handleProcessFiles}\n            disabled={files.length === 0 || isProcessing}\n            className=\"w-full h-11 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n          >\n            {isProcessing ? (\n              <>\n                <span className=\"animate-spin\">‚è≥</span>\n                Processando com IA...\n              </>\n            ) : (\n              <>\n                <span>üöÄ</span>\n                Processar {files.length} PDF(s) com IA\n              </>\n            )}\n          </button>\n        </>\n      ) : (\n        <>\n          {/* RESULTADOS */}\n          <div className=\"mb-6\">\n            {/* RESUMO */}\n            <div className=\"grid grid-cols-3 gap-4 mb-6\">\n              <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {results.processedFiles}/{results.totalFiles}\n                </div>\n                <div className=\"text-xs text-blue-700 font-bold\">\n                  Arquivos Processados\n                </div>\n              </div>\n\n              <div className=\"p-4 bg-green-50 rounded-lg border border-green-200\">\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {Math.round(results.summary.estimatedCompleteness * 100)}%\n                </div>\n                <div className=\"text-xs text-green-700 font-bold\">\n                  Completude Estimada\n                </div>\n              </div>\n\n              <div className=\"p-4 bg-purple-50 rounded-lg border border-purple-200\">\n                <div className=\"text-2xl font-bold text-purple-600\">\n                  {results.extractedDocuments.reduce(\n                    (sum, doc) => sum + doc.suggestedFields.length,\n                    0\n                  )}\n                </div>\n                <div className=\"text-xs text-purple-700 font-bold\">\n                  Sugest√µes Dispon√≠veis\n                </div>\n              </div>\n            </div>\n\n            {/* AVISO */}\n            {results.summary.warnings.length > 0 && (\n              <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg mb-6\">\n                <h4 className=\"font-bold text-yellow-700 mb-2\">‚ö†Ô∏è Avisos:</h4>\n                <ul className=\"space-y-1\">\n                  {results.summary.warnings.map((w, idx) => (\n                    <li key={idx} className=\"text-sm text-yellow-800\">\n                      ‚Ä¢ {w}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n\n            {/* PR√ìXIMOS PASSOS */}\n            <div className=\"p-4 bg-green-50 border border-green-200 rounded-lg mb-6\">\n              <h4 className=\"font-bold text-green-700 mb-2\">\n                ‚úì Pr√≥ximos Passos:\n              </h4>\n              <ol className=\"space-y-1 list-decimal list-inside\">\n                {results.summary.suggestedNextSteps.map((step, idx) => (\n                  <li key={idx} className=\"text-sm text-green-800\">\n                    {step}\n                  </li>\n                ))}\n              </ol>\n            </div>\n          </div>\n\n          {/* DOCUMENTOS EXTRA√çDOS */}\n          <div className=\"mb-6\">\n            <h3 className=\"font-bold text-slate-700 mb-3\">\n              üìã Documentos Extra√≠dos:\n            </h3>\n\n            <div className=\"grid grid-cols-2 gap-3 mb-4\">\n              {results.extractedDocuments.map((doc, idx) => (\n                <button\n                  key={idx}\n                  onClick={() => setSelectedDoc(doc)}\n                  className={`p-3 rounded-lg border-2 text-left transition ${\n                    selectedDoc?.filename === doc.filename\n                      ? 'border-blue-600 bg-blue-50'\n                      : 'border-slate-200 bg-white hover:border-slate-300'\n                  }`}\n                >\n                  <div className=\"font-bold text-slate-700 text-sm truncate\">\n                    {doc.filename}\n                  </div>\n                  <div className=\"text-xs text-slate-500 mt-1\">\n                    <span className=\"inline-block px-2 py-0.5 bg-slate-100 rounded mr-2\">\n                      {doc.type}\n                    </span>\n                    <span>\n                      {Math.round(doc.confidence * 100)}% confian√ßa\n                    </span>\n                  </div>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* DETALHES DO DOCUMENTO SELECIONADO */}\n          {selectedDoc && (\n            <div className=\"bg-slate-50 border border-slate-200 rounded-lg p-4\">\n              <h4 className=\"font-bold text-slate-700 mb-3\">\n                Sugest√µes para: {selectedDoc.filename}\n              </h4>\n\n              {selectedDoc.suggestedFields.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {selectedDoc.suggestedFields.map((suggestion, idx) => (\n                    <div\n                      key={idx}\n                      className=\"flex items-center justify-between p-3 bg-white rounded border border-slate-200 hover:border-blue-300 transition\"\n                    >\n                      <div>\n                        <div className=\"font-bold text-slate-700 text-sm\">\n                          {suggestion.field}\n                        </div>\n                        <div className=\"text-sm text-slate-600 font-mono\">\n                          {suggestion.value}\n                        </div>\n                        <div className=\"text-xs text-slate-500 mt-1\">\n                          Confian√ßa: {Math.round(suggestion.confidence * 100)}%\n                        </div>\n                      </div>\n                      <button\n                        onClick={() =>\n                          handleApplySuggestion(\n                            suggestion.field,\n                            suggestion.value\n                          )\n                        }\n                        className=\"px-3 py-1 bg-blue-600 text-white rounded text-xs font-bold hover:bg-blue-700 transition whitespace-nowrap ml-2\"\n                      >\n                        ‚úì Usar\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-sm text-slate-500\">\n                  Nenhuma sugest√£o dispon√≠vel para este documento.\n                </p>\n              )}\n            </div>\n          )}\n\n          {/* BOT√ÉO RESET */}\n          <div className=\"mt-6\">\n            <button\n              onClick={() => {\n                setResults(null);\n                setFiles([]);\n                setSelectedDoc(null);\n                if (fileInputRef.current) {\n                  fileInputRef.current.value = '';\n                }\n              }}\n              className=\"w-full px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300 transition\"\n            >\n              ‚Üê Voltar e Importar Novos PDFs\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default BatchPDFImporter;\n"],"names":["AdvancedPDFService","processBatchPDFs","files","console","log","concat","length","results","i","name","extracted","this","processDocument","push","error","filename","type","confidence","extractedData","suggestedFields","rawText","generateBatchSummary","file","text","extractTextFromPDF","docType","classifyDocument","extractStructuredData","generateSuggestions","calculateConfidence","pdfjsLib","window","Error","arrayBuffer","pdf","getDocument","promise","numPages","page","getPage","content","getTextContent","items","map","item","str","join","warn","anthropicApiKey","classifyDocumentLocally","response","fetch","method","headers","body","JSON","stringify","model","max_tokens","messages","role","substring","classification","json","toLowerCase","trim","includes","lower","extractDataLocally","prompt","buildExtractionPrompt","jsonStr","parse","_unused","fieldsByType","edital","licitacao","ata","contrato","empenho","pagamento","outro","fields","f","_docType","data","patterns","cpf","cnpj","valores","datas","numeros","key","pattern","Object","entries","matches","match","slice","suggestions","value","Array","isArray","field","String","keys","filledFields","values","filter","v","avgConfidence","reduce","sum","r","Math","max","totalSuggestedFields","totalFiles","processedFiles","extractedDocuments","summary","estimatedCompleteness","suggestedNextSteps","warnings","process","REACT_APP_ANTHROPIC_API_KEY","openaiApiKey","REACT_APP_OPENAI_API_KEY","BatchPDFImporter","_ref","onDocumentsProcessed","onApplySuggestions","formData","setFiles","useState","isProcessing","setIsProcessing","setResults","selectedDoc","setSelectedDoc","fileInputRef","useRef","_jsxs","className","children","_jsx","_Fragment","round","doc","w","idx","step","onClick","suggestion","handleApplySuggestion","alert","current","onDragOver","e","preventDefault","onDrop","droppedFiles","from","dataTransfer","ref","multiple","accept","onChange","selectedFiles","target","_fileInputRef$current","click","size","toFixed","_","async","batchResults","message","disabled"],"ignoreList":[],"sourceRoot":""}