/*! For license information please see main.6b6e14ba.js.LICENSE.txt */
(()=>{var e={122(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,s,r;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(s=i;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=i;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,r[s]))return!1;for(s=i;0!==s--;){var a=r[s];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},138(e,t,n){"use strict";var i,s,r,a,o=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const l=n(8584),c=n(9207),d=n(1762),u=n(9550),h=n(8396),p={keyword:"discriminator",type:"object",schemaType:"object",error:{message:e=>{let{params:{discrError:t,tagName:n}}=e;return t===c.DiscrError.Tag?'tag "'.concat(n,'" must be string'):'value of tag "'.concat(n,'" must be in oneOf')},params:e=>{let{params:{discrError:t,tag:n,tagName:s}}=e;return(0,l._)(i||(i=o(["{error: ",", tag: ",", tagValue: ","}"])),t,s,n)}},code(e){const{gen:t,data:n,schema:i,parentSchema:p,it:f}=e,{oneOf:m}=p;if(!f.opts.discriminator)throw new Error("discriminator: requires discriminator option");const g=i.propertyName;if("string"!=typeof g)throw new Error("discriminator: requires propertyName");if(i.mapping)throw new Error("discriminator: mapping is not supported");if(!m)throw new Error("discriminator: requires oneOf keyword");const v=t.let("valid",!1),y=t.const("tag",(0,l._)(s||(s=o(["","",""])),n,(0,l.getProperty)(g)));function b(n){const i=t.name("valid"),s=e.subschema({keyword:"oneOf",schemaProp:n},i);return e.mergeEvaluated(s,l.Name),i}t.if((0,l._)(r||(r=o(["typeof ",' == "string"'])),y),()=>function(){const n=function(){var e;const t={},n=s(p);let i=!0;for(let o=0;o<m.length;o++){let t=m[o];if((null===t||void 0===t?void 0:t.$ref)&&!(0,h.schemaHasRulesButRef)(t,f.self.RULES)){const e=t.$ref;if(t=d.resolveRef.call(f.self,f.schemaEnv.root,f.baseId,e),t instanceof d.SchemaEnv&&(t=t.schema),void 0===t)throw new u.default(f.opts.uriResolver,f.baseId,e)}const a=null===(e=null===t||void 0===t?void 0:t.properties)||void 0===e?void 0:e[g];if("object"!=typeof a)throw new Error('discriminator: oneOf subschemas (or referenced schemas) must have "properties/'.concat(g,'"'));i=i&&(n||s(t)),r(a,o)}if(!i)throw new Error('discriminator: "'.concat(g,'" must be required'));return t;function s(e){let{required:t}=e;return Array.isArray(t)&&t.includes(g)}function r(e,t){if(e.const)a(e.const,t);else{if(!e.enum)throw new Error('discriminator: "properties/'.concat(g,'" must have "const" or "enum"'));for(const n of e.enum)a(n,t)}}function a(e,n){if("string"!=typeof e||e in t)throw new Error('discriminator: "'.concat(g,'" values must be unique strings'));t[e]=n}}();t.if(!1);for(const e in n)t.elseIf((0,l._)(a||(a=o([""," === ",""])),y,e)),t.assign(v,b(n[e]));t.else(),e.error(!1,{discrError:c.DiscrError.Mapping,tag:y,tagName:g}),t.endIf()}(),()=>e.error(!1,{discrError:c.DiscrError.Tag,tag:y,tagName:g})),e.ok(v)}};t.default=p},166(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports},266(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8584),s={data:new i.Name("data"),valCxt:new i.Name("valCxt"),instancePath:new i.Name("instancePath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope"),json:new i.Name("json"),jsonPos:new i.Name("jsonPos"),jsonLen:new i.Name("jsonLen"),jsonPart:new i.Name("jsonPart")};t.default=s},463(e,t,n){"use strict";var i,s,r,a,o=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const l=n(8584),c=n(8396);function d(e,t,n){const{gen:d,compositeRule:u,data:h,opts:p}=e;if(void 0===n)return;const f=(0,l._)(i||(i=o(["","",""])),h,(0,l.getProperty)(t));if(u)return void(0,c.checkStrictMode)(e,"default is ignored for: ".concat(f));let m=(0,l._)(s||(s=o([""," === undefined"])),f);"empty"===p.useDefaults&&(m=(0,l._)(r||(r=o([""," || "," === null || ",' === ""'])),m,f,f)),d.if(m,(0,l._)(a||(a=o([""," = ",""])),f,(0,l.stringify)(n)))}t.assignDefaults=function(e,t){const{properties:n,items:i}=e.schema;if("object"===t&&n)for(const s in n)d(e,s,n[s].default);else"array"===t&&Array.isArray(i)&&i.forEach((t,n)=>d(e,n,t.default))}},483(e,t,n){"use strict";var i,s=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const r=n(2215),a=n(7864),o=n(8584),l=new o.Name("fullFormats"),c=new o.Name("fastFormats"),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keywords:!0};if(Array.isArray(t))return u(e,t,r.fullFormats,l),e;const[n,i]="fast"===t.mode?[r.fastFormats,c]:[r.fullFormats,l];return u(e,t.formats||r.formatNames,n,i),t.keywords&&a.default(e),e};function u(e,t,n,r){var a,l;null!==(a=(l=e.opts.code).formats)&&void 0!==a||(l.formats=o._(i||(i=s(['require("ajv-formats/dist/formats").',""])),r));for(const i of t)e.addFormat(i,n[i])}d.get=function(e){const t=("fast"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full")?r.fastFormats:r.fullFormats)[e];if(!t)throw new Error('Unknown format "'.concat(e,'"'));return t},e.exports=t=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d},579(e,t,n){"use strict";e.exports=n(1153)},656(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const b=n(8584),w=n(8396),_=n(266),x=n(8396);function k(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,b._)(r||(r=y(["Object.prototype.hasOwnProperty"])))})}function S(e,t,n){return(0,b._)(a||(a=y(["",".call(",", ",")"])),k(e),t,n)}function A(e,t,n,i){const s=(0,b._)(c||(c=y(["",""," === undefined"])),t,(0,b.getProperty)(n));return i?(0,b.or)(s,(0,b.not)(S(e,t,n))):s}function E(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:s,it:r}=e;n.if(A(n,s,t,r.opts.ownProperties),()=>{e.setParams({missingProperty:(0,b._)(i||(i=y(["",""])),t)},!0),e.error()})},t.checkMissingProp=function(e,t,n){let{gen:i,data:r,it:{opts:a}}=e;return(0,b.or)(...t.map(e=>(0,b.and)(A(i,r,e,a.ownProperties),(0,b._)(s||(s=y([""," = ",""])),n,e))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=k,t.isOwnProperty=S,t.propertyInData=function(e,t,n,i){const s=(0,b._)(o||(o=y(["",""," !== undefined"])),t,(0,b.getProperty)(n));return i?(0,b._)(l||(l=y([""," && ",""])),s,S(e,t,n)):s},t.noPropertyInData=A,t.allSchemaProperties=E,t.schemaProperties=function(e,t){return E(t).filter(n=>!(0,w.alwaysValidSchema)(e,t[n]))},t.callValidateCode=function(e,t,n,i){let{schemaCode:s,data:r,it:{gen:a,topSchemaRef:o,schemaPath:l,errorPath:c},it:f}=e;const m=i?(0,b._)(d||(d=y(["",", ",", ","",""])),s,r,o,l):r,g=[[_.default.instancePath,(0,b.strConcat)(_.default.instancePath,c)],[_.default.parentData,f.parentData],[_.default.parentDataProperty,f.parentDataProperty],[_.default.rootData,_.default.rootData]];f.opts.dynamicRef&&g.push([_.default.dynamicAnchors,_.default.dynamicAnchors]);const v=(0,b._)(u||(u=y(["",", ",""])),m,a.object(...g));return n!==b.nil?(0,b._)(h||(h=y(["",".call(",", ",")"])),t,n,v):(0,b._)(p||(p=y(["","(",")"])),t,v)};const C=(0,b._)(f||(f=y(["new RegExp"])));t.usePattern=function(e,t){let{gen:n,it:{opts:i}}=e;const s=i.unicodeRegExp?"u":"",{regExp:r}=i.code,a=r(t,s);return n.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,b._)(m||(m=y(["","(",", ",")"])),"new RegExp"===r.code?C:(0,x.useFunc)(n,r),t,s)})},t.validateArray=function(e){const{gen:t,data:n,keyword:i,it:s}=e,r=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return a(()=>t.assign(e,!1)),e}return t.var(r,!0),a(()=>t.break()),r;function a(s){const a=t.const("len",(0,b._)(g||(g=y(["",".length"])),n));t.forRange("i",0,a,n=>{e.subschema({keyword:i,dataProp:n,dataPropType:w.Type.Num},r),t.if((0,b.not)(r),s)})}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:i,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(e=>(0,w.alwaysValidSchema)(s,e))&&!s.opts.unevaluated)return;const r=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((n,s)=>{const o=e.subschema({keyword:i,schemaProp:s,compositeRule:!0},a);t.assign(r,(0,b._)(v||(v=y([""," || ",""])),r,a));e.mergeValidEvaluated(o,a)||t.if((0,b.not)(r))})),e.result(r,()=>e.reset(),()=>e.error(!0))}},667(e){"use strict";var t=e.exports=function(e,t,i){"function"==typeof t&&(i=t,t={}),n(t,"function"==typeof(i=t.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function n(e,s,r,a,o,l,c,d,u,h){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var p in s(a,o,l,c,d,u,h),a){var f=a[p];if(Array.isArray(f)){if(p in t.arrayKeywords)for(var m=0;m<f.length;m++)n(e,s,r,f[m],o+"/"+p+"/"+m,l,o,p,a,m)}else if(p in t.propsKeywords){if(f&&"object"==typeof f)for(var g in f)n(e,s,r,f[g],o+"/"+p+"/"+i(g),l,o,p,a,g)}else(p in t.keywords||e.allKeys&&!(p in t.skipKeywords))&&n(e,s,r,f,o+"/"+p,l,o,p,a)}r(a,o,l,c,d,u,h)}}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},1011(e,t,n){"use strict";var i,s,r,a,o=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const l=n(656),c=n(8584),d={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:e=>{let{schemaCode:t}=e;return(0,c.str)(i||(i=o(['must match pattern "','"'])),t)},params:e=>{let{schemaCode:t}=e;return(0,c._)(s||(s=o(["{pattern: ","}"])),t)}},code(e){const{data:t,$data:n,schema:i,schemaCode:s,it:d}=e,u=d.opts.unicodeRegExp?"u":"",h=n?(0,c._)(r||(r=o(["(new RegExp(",", ","))"])),s,u):(0,l.usePattern)(e,i);e.fail$data((0,c._)(a||(a=o(["!",".test(",")"])),h,t))}};t.default=d},1153(e,t,n){"use strict";var i=n(5043),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,r={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return{$$typeof:s,type:e,key:c,ref:d,props:r,_owner:o.current}}t.jsx=c,t.jsxs=c},1156(e,t,n){"use strict";var i,s,r,a,o,l=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const c=n(8584),d=n(8396),u={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:e=>{let{params:{len:t}}=e;return(0,c.str)(i||(i=l(["must NOT have more than "," items"])),t)},params:e=>{let{params:{len:t}}=e;return(0,c._)(s||(s=l(["{limit: ","}"])),t)}},code(e){const{parentSchema:t,it:n}=e,{items:i}=t;Array.isArray(i)?h(e,i):(0,d.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function h(e,t){const{gen:n,schema:i,data:s,keyword:u,it:h}=e;h.items=!0;const p=n.const("len",(0,c._)(r||(r=l(["",".length"])),s));if(!1===i)e.setParams({len:t.length}),e.pass((0,c._)(a||(a=l([""," <= ",""])),p,t.length));else if("object"==typeof i&&!(0,d.alwaysValidSchema)(h,i)){const i=n.var("valid",(0,c._)(o||(o=l([""," <= ",""])),p,t.length));n.if((0,c.not)(i),()=>function(i){n.forRange("i",t.length,p,t=>{e.subschema({keyword:u,dataProp:t,dataPropType:d.Type.Num},i),h.allErrors||n.if((0,c.not)(i),()=>n.break())})}(i)),e.ok(i)}}t.validateAdditionalItems=h,t.default=u},1246(e){"use strict";const t=e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=e=>{let{target:{error:{code:t}}}=e;n(Error("File could not be read! Code=".concat(t)))},i.readAsArrayBuffer(e)}),n=async e=>{let i=e;if("undefined"===typeof e)return"undefined";if("string"===typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))i=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{const t=await fetch(e);i=await t.arrayBuffer()}else if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(i=await n(e.src)),"VIDEO"===e.tagName&&(i=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise(n=>{e.toBlob(async e=>{i=await t(e),n()})});else if("undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();i=await t(n)}else(e instanceof File||e instanceof Blob)&&(i=await t(e));return new Uint8Array(i)};e.exports=n},1257(e,t,n){"use strict";var i=n(2897).default;const s=n(1432),r=n(9343),a=n(2163),o=n(7092),l=n(1600),c=n(5783),{setLogging:d}=n(5597);e.exports=i({languages:o,OEM:l,PSM:c,createScheduler:s,createWorker:r,setLogging:d},a)},1289(e,t,n){"use strict";var i,s,r,a=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const o=n(8584),l=n(8396),c={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:e=>{let{params:t}=e;return(0,o._)(i||(i=a(["{passingSchemas: ","}"])),t.passing)}},code(e){const{gen:t,schema:n,parentSchema:i,it:c}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(c.opts.discriminator&&i.discriminator)return;const d=n,u=t.let("valid",!1),h=t.let("passing",null),p=t.name("_valid");e.setParams({passing:h}),t.block(function(){d.forEach((n,i)=>{let d;(0,l.alwaysValidSchema)(c,n)?t.var(p,!0):d=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},p),i>0&&t.if((0,o._)(s||(s=a([""," && ",""])),p,u)).assign(u,!1).assign(h,(0,o._)(r||(r=a(["[",", ","]"])),h,i)).else(),t.if(p,()=>{t.assign(u,!0),t.assign(h,i),d&&e.mergeEvaluated(d,o.Name)})})}),e.result(u,()=>e.reset(),()=>e.error(!0))}};t.default=c},1432(e,t,n){"use strict";const i=n(5362),{log:s}=n(5597),r=n(1674);let a=0;e.exports=()=>{const e=r("Scheduler",a),t={},n={};let o=[];a+=1;const l=()=>Object.keys(t).length,c=()=>{if(0!==o.length){const e=Object.keys(t);for(let i=0;i<e.length;i+=1)if("undefined"===typeof n[e[i]]){o[0](t[e[i]]);break}}},d=(t,r)=>new Promise((a,l)=>{const d=i({action:t,payload:r});o.push(async e=>{o.shift(),n[e.id]=d;try{a(await e[t].apply(this,[...r,d.id]))}catch(i){l(i)}finally{delete n[e.id],c()}}),s("[".concat(e,"]: Add ").concat(d.id," to JobQueue")),s("[".concat(e,"]: JobQueue length=").concat(o.length)),c()});return{addWorker:n=>(t[n.id]=n,s("[".concat(e,"]: Add ").concat(n.id)),s("[".concat(e,"]: Number of workers=").concat(l())),c(),n.id),addJob:async function(t){if(0===l())throw Error("[".concat(e,"]: You need to have at least one worker before adding jobs"));for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return d(t,i)},terminate:async()=>{Object.keys(t).forEach(async e=>{await t[e].terminate()}),o=[]},getQueueLen:()=>o.length,getNumWorkers:l}}},1518(e,t,n){"use strict";var i,s,r,a=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const o=n(8584),l=n(8396),c=n(2979),d={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:e=>{let{schemaCode:t}=e;return(0,o._)(i||(i=a(["{allowedValue: ","}"])),t)}},code(e){const{gen:t,data:n,$data:i,schemaCode:d,schema:u}=e;i||u&&"object"==typeof u?e.fail$data((0,o._)(s||(s=a(["!","(",", ",")"])),(0,l.useFunc)(t,c.default),n,d)):e.fail((0,o._)(r||(r=a([""," !== ",""])),u,n))}};t.default=d},1578(e,t,n){"use strict";const{isUUID:i}=n(6099),s=/([0-9a-z\u017F\u212A][\x2D0-9a-z\u017F\u212A]{0,31}):((?:[!\$'-\.0-;=@-Z_a-z\u017F\u212A]|%[0-9a-f]{2})+)/i,r=["http","https","ws","wss","urn","urn:uuid"];function a(e){return!0===e.secure||!1!==e.secure&&(!!e.scheme&&(3===e.scheme.length&&("w"===e.scheme[0]||"W"===e.scheme[0])&&("s"===e.scheme[1]||"S"===e.scheme[1])&&("s"===e.scheme[2]||"S"===e.scheme[2])))}function o(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function l(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const c={scheme:"http",domainHost:!0,parse:o,serialize:l},d={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=a(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(a(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"===typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}},u={http:c,https:{scheme:"https",domainHost:c.domainHost,parse:o,serialize:l},ws:d,wss:{scheme:"wss",domainHost:d.domainHost,parse:d.parse,serialize:d.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(s);if(n){const i=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=h("".concat(i,":").concat(t.nid||e.nid));e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",i=e.nid.toLowerCase(),s=h("".concat(n,":").concat(t.nid||i));s&&(e=s.serialize(e,t));const r=e,a=e.nss;return r.path="".concat(i||t.nid,":").concat(a),t.skipEscape=!0,r},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&i(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};function h(e){return e&&(u[e]||u[e.toLowerCase()])||void 0}Object.setPrototypeOf(u,null),e.exports={wsIsSecure:a,SCHEMES:u,isValidSchemeName:function(e){return-1!==r.indexOf(e)},getSchemeHandler:h}},1598(e,t,n){"use strict";var i,s,r,a=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const o=n(8584),l=n(8396),c=n(656);t.error={message:e=>{let{params:{property:t,depsCount:n,deps:s}}=e;const r=1===n?"property":"properties";return(0,o.str)(i||(i=a(["must have "," "," when property "," is present"])),r,s,t)},params:e=>{let{params:{property:t,depsCount:n,deps:i,missingProperty:r}}=e;return(0,o._)(s||(s=a(["{property: ",",\n    missingProperty: ",",\n    depsCount: ",",\n    deps: ","}"])),t,r,n,i)}};const d={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function(e){let{schema:t}=e;const n={},i={};for(const s in t){if("__proto__"===s)continue;(Array.isArray(t[s])?n:i)[s]=t[s]}return[n,i]}(e);u(e,t),h(e,n)}};function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema;const{gen:n,data:i,it:s}=e;if(0===Object.keys(t).length)return;const l=n.let("missing");for(const d in t){const u=t[d];if(0===u.length)continue;const h=(0,c.propertyInData)(n,i,d,s.opts.ownProperties);e.setParams({property:d,depsCount:u.length,deps:u.join(", ")}),s.allErrors?n.if(h,()=>{for(const t of u)(0,c.checkReportMissingProp)(e,t)}):(n.if((0,o._)(r||(r=a([""," && (",")"])),h,(0,c.checkMissingProp)(e,u,l))),(0,c.reportMissingProp)(e,l),n.else())}}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema;const{gen:n,data:i,keyword:s,it:r}=e,a=n.name("valid");for(const o in t)(0,l.alwaysValidSchema)(r,t[o])||(n.if((0,c.propertyInData)(n,i,o,r.opts.ownProperties),()=>{const t=e.subschema({keyword:s,schemaProp:o},a);e.mergeValidEvaluated(t,a)},()=>n.var(a,!0)),e.ok(a))}t.validatePropertyDeps=u,t.validateSchemaDeps=h,t.default=d},1600(e){"use strict";e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},1674(e){"use strict";e.exports=(e,t)=>"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8))},1734(e){"use strict";e.exports=e=>{const t={};return"undefined"!==typeof WorkerGlobalScope?t.type="webworker":"object"===typeof document?t.type="browser":"object"===typeof process&&(t.type="node"),"undefined"===typeof e?t:t[e]}},1762(e,t,n){"use strict";var i,s,r=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const a=n(8584),o=n(6817),l=n(266),c=n(2302),d=n(8396),u=n(5413);class h{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,c.normalizeId)(null===n||void 0===n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null===n||void 0===n?void 0:n.$async,this.refs={}}}function p(e){const t=m.call(this,e);if(t)return t;const n=(0,c.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:d,lines:h}=this.opts.code,{ownProperties:p}=this.opts,f=new a.CodeGen(this.scope,{es5:d,lines:h,ownProperties:p});let g;e.$async&&(g=f.scopeValue("Error",{ref:o.default,code:(0,a._)(i||(i=r(['require("ajv/dist/runtime/validation_error").default'])))}));const v=f.scopeName("validate");e.validateName=v;const y={gen:f,allErrors:this.opts.allErrors,data:l.default.data,parentData:l.default.parentData,parentDataProperty:l.default.parentDataProperty,dataNames:[l.default.data],dataPathArr:[a.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:f.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,a.stringify)(e.schema)}:{ref:e.schema}),validateName:v,ValidationError:g,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:a.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,a._)(s||(s=r(['""']))),opts:this.opts,self:this};let b;try{this._compilations.add(e),(0,u.validateFunctionCode)(y),f.optimize(this.opts.code.optimize);const t=f.toString();b="".concat(f.scopeRefs(l.default.scope),"return ").concat(t),this.opts.code.process&&(b=this.opts.code.process(b,e));const n=new Function("".concat(l.default.self),"".concat(l.default.scope),b)(this,this.scope.get());if(this.scope.value(v,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:v,validateCode:t,scopeValues:f._values}),this.opts.unevaluated){const{props:e,items:t}=y;n.evaluated={props:e instanceof a.Name?void 0:e,items:t instanceof a.Name?void 0:t,dynamicProps:e instanceof a.Name,dynamicItems:t instanceof a.Name},n.source&&(n.source.evaluated=(0,a.stringify)(n.evaluated))}return e.validate=n,e}catch(w){throw delete e.validate,delete e.validateName,b&&this.logger.error("Error compiling schema, function code:",b),w}finally{this._compilations.delete(e)}}function f(e){return(0,c.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:p.call(this,e)}function m(e){for(const t of this._compilations)if(g(t,e))return t}function g(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function v(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||y.call(this,e,t)}function y(e,t){const n=this.opts.uriResolver.parse(t),i=(0,c._getFullPath)(this.opts.uriResolver,n);let s=(0,c.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&i===s)return w.call(this,n,e);const r=(0,c.normalizeId)(i),a=this.refs[r]||this.schemas[r];if("string"==typeof a){const t=y.call(this,e,a);if("object"!==typeof(null===t||void 0===t?void 0:t.schema))return;return w.call(this,n,t)}if("object"===typeof(null===a||void 0===a?void 0:a.schema)){if(a.validate||p.call(this,a),r===(0,c.normalizeId)(t)){const{schema:t}=a,{schemaId:n}=this.opts,i=t[n];return i&&(s=(0,c.resolveUrl)(this.opts.uriResolver,s,i)),new h({schema:t,schemaId:n,root:e,baseId:s})}return w.call(this,n,a)}}t.SchemaEnv=h,t.compileSchema=p,t.resolveRef=function(e,t,n){var i;n=(0,c.resolveUrl)(this.opts.uriResolver,t,n);const s=e.refs[n];if(s)return s;let r=v.call(this,e,n);if(void 0===r){const s=null===(i=e.localRefs)||void 0===i?void 0:i[n],{schemaId:a}=this.opts;s&&(r=new h({schema:s,schemaId:a,root:e,baseId:t}))}return void 0!==r?e.refs[n]=f.call(this,r):void 0},t.getCompilingSchema=m,t.resolveSchema=y;const b=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function w(e,t){let{baseId:n,schema:i,root:s}=t;var r;if("/"!==(null===(r=e.fragment)||void 0===r?void 0:r[0]))return;for(const l of e.fragment.slice(1).split("/")){if("boolean"===typeof i)return;const e=i[(0,d.unescapeFragment)(l)];if(void 0===e)return;i=e;const t="object"===typeof i&&i[this.opts.schemaId];!b.has(l)&&t&&(n=(0,c.resolveUrl)(this.opts.uriResolver,n,t))}let a;if("boolean"!=typeof i&&i.$ref&&!(0,d.schemaHasRulesButRef)(i,this.RULES)){const e=(0,c.resolveUrl)(this.opts.uriResolver,n,i.$ref);a=y.call(this,s,e)}const{schemaId:o}=this.opts;return a=a||new h({schema:i,schemaId:o,root:s,baseId:n}),a.schema!==a.root.schema?a:void 0}},1847(e,t,n){var i=n(4893);e.exports=function(e,t){if(null==e)return{};var n,s,r=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r},e.exports.__esModule=!0,e.exports.default=e.exports},2075(e,t,n){"use strict";var i,s,r,a,o,l=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const c=n(656),d=n(8584),u=n(266),h=n(8396),p={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:e=>{let{params:t}=e;return(0,d._)(i||(i=l(["{additionalProperty: ","}"])),t.additionalProperty)}},code(e){const{gen:t,schema:n,parentSchema:i,data:p,errsCount:f,it:m}=e;if(!f)throw new Error("ajv implementation error");const{allErrors:g,opts:v}=m;if(m.props=!0,"all"!==v.removeAdditional&&(0,h.alwaysValidSchema)(m,n))return;const y=(0,c.allSchemaProperties)(i.properties),b=(0,c.allSchemaProperties)(i.patternProperties);function w(e){t.code((0,d._)(o||(o=l(["delete ","[","]"])),p,e))}function _(i){if("all"===v.removeAdditional||v.removeAdditional&&!1===n)w(i);else{if(!1===n)return e.setParams({additionalProperty:i}),e.error(),void(g||t.break());if("object"==typeof n&&!(0,h.alwaysValidSchema)(m,n)){const n=t.name("valid");"failing"===v.removeAdditional?(x(i,n,!1),t.if((0,d.not)(n),()=>{e.reset(),w(i)})):(x(i,n),g||t.if((0,d.not)(n),()=>t.break()))}}}function x(t,n,i){const s={keyword:"additionalProperties",dataProp:t,dataPropType:h.Type.Str};!1===i&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,n)}t.forIn("key",p,n=>{y.length||b.length?t.if(function(n){let s;if(y.length>8){const e=(0,h.schemaRefOrVal)(m,i.properties,"properties");s=(0,c.isOwnProperty)(t,e,n)}else s=y.length?(0,d.or)(...y.map(e=>(0,d._)(r||(r=l([""," === ",""])),n,e))):d.nil;return b.length&&(s=(0,d.or)(s,...b.map(t=>(0,d._)(a||(a=l(["",".test(",")"])),(0,c.usePattern)(e,t),n)))),(0,d.not)(s)}(n),()=>_(n)):_(n)}),e.ok((0,d._)(s||(s=l([""," === ",""])),f,u.default.errors))}};t.default=p},2079(e){"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},2141(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6623),s=n(7352),r=n(9294),a=n(1011),o=n(8211),l=n(4796),c=n(4700),d=n(6480),u=n(1518),h=n(6740),p=[i.default,s.default,r.default,a.default,o.default,l.default,c.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=p},2163(e,t,n){"use strict";const i=n(9343);e.exports={recognize:async(e,t,n)=>{const s=await i(t,1,n);return s.recognize(e).finally(async()=>{await s.terminate()})},detect:async(e,t)=>{const n=await i("osd",0,t);return n.detect(e).finally(async()=>{await n.terminate()})}}},2215(e,t,n){"use strict";var i=n(2897).default;function s(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:s(o,l),time:s(d,u),"date-time":s(function(e){const t=e.split(h);return 2===t.length&&o(t[0])&&d(t[1],!0)},p),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return f.test(e)&&m.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:http[s\u017F]?|ftp):\/\/(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!(?:10|127)(?:\.[0-9]{1,3}){3})(?!(?:169\.254|192\.168)(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:[0-9KSa-z\xA1-\uFFFF]+-)*[0-9KSa-z\xA1-\uFFFF]+)(?:\.(?:[0-9KSa-z\xA1-\uFFFF]+-)*[0-9KSa-z\xA1-\uFFFF]+)*(?:\.(?:[KSa-z\xA1-\uFFFF]{2,})))(?::[0-9]{2,5})?(?:\/(?:(?![\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*)?$/i,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(y.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return g.lastIndex=0,g.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=2147483647&&e>=-2147483648}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:v},double:{type:"number",validate:v},password:!0,binary:!0},t.fastFormats=i(i({},t.fullFormats),{},{date:s(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,l),time:s(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"date-time":s(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,p),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i}),t.formatNames=Object.keys(t.fullFormats);const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(e){const t=r.exec(e);if(!t)return!1;const n=+t[1],i=+t[2],s=+t[3];return i>=1&&i<=12&&s>=1&&s<=(2===i&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(n)?29:a[i])}function l(e,t){if(e&&t)return e>t?1:e<t?-1:0}const c=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function d(e,t){const n=c.exec(e);if(!n)return!1;const i=+n[1],s=+n[2],r=+n[3],a=n[5];return(i<=23&&s<=59&&r<=59||23===i&&59===s&&60===r)&&(!t||""!==a)}function u(e,t){if(!e||!t)return;const n=c.exec(e),i=c.exec(t);return n&&i?(e=n[1]+n[2]+n[3]+(n[4]||""))>(t=i[1]+i[2]+i[3]+(i[4]||""))?1:e<t?-1:0:void 0}const h=/t|\s/i;function p(e,t){if(!e||!t)return;const[n,i]=e.split(h),[s,r]=t.split(h),a=l(n,s);return void 0!==a?a||u(i,r):void 0}const f=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function v(){return!0}const y=/[^\\]\\Z/},2262(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y,b,w=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const _=n(8584),x={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:e=>{let{schemaCode:t}=e;return(0,_.str)(i||(i=w(['must match format "','"'])),t)},params:e=>{let{schemaCode:t}=e;return(0,_._)(s||(s=w(["{format: ","}"])),t)}},code(e,t){const{gen:n,data:i,$data:s,schema:x,schemaCode:k,it:S}=e,{opts:A,errSchemaPath:E,schemaEnv:C,self:M}=S;A.validateFormats&&(s?function(){const s=n.scopeValue("formats",{ref:M.formats,code:A.code.formats}),m=n.const("fDef",(0,_._)(r||(r=w(["","[","]"])),s,k)),g=n.let("fType"),v=n.let("format");n.if((0,_._)(a||(a=w(["typeof ",' == "object" && !('," instanceof RegExp)"])),m,m),()=>n.assign(g,(0,_._)(o||(o=w(["",'.type || "string"'])),m)).assign(v,(0,_._)(l||(l=w(["",".validate"])),m)),()=>n.assign(g,(0,_._)(c||(c=w(['"string"'])))).assign(v,m)),e.fail$data((0,_.or)(!1===A.strictSchema?_.nil:(0,_._)(d||(d=w([""," && !",""])),k,v),function(){const e=C.$async?(0,_._)(u||(u=w(["(",".async ? await ","(",") : ","(","))"])),m,v,i,v,i):(0,_._)(h||(h=w(["","(",")"])),v,i),n=(0,_._)(p||(p=w(["(typeof ",' == "function" ? '," : ",".test(","))"])),v,e,v,i);return(0,_._)(f||(f=w([""," && "," !== true && "," === "," && !",""])),v,v,g,t,n)}()))}():function(){const s=M.formats[x];if(!s)return void function(){if(!1===A.strictSchema)return void M.logger.warn(e());throw new Error(e());function e(){return'unknown format "'.concat(x,'" ignored in schema at path "').concat(E,'"')}}();if(!0===s)return;const[r,a,o]=function(e){const t=e instanceof RegExp?(0,_.regexpCode)(e):A.code.formats?(0,_._)(m||(m=w(["","",""])),A.code.formats,(0,_.getProperty)(x)):void 0,i=n.scopeValue("formats",{key:x,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,(0,_._)(g||(g=w(["",".validate"])),i)];return["string",e,i]}(s);r===t&&e.pass(function(){if("object"==typeof s&&!(s instanceof RegExp)&&s.async){if(!C.$async)throw new Error("async format in sync schema");return(0,_._)(v||(v=w(["await ","(",")"])),o,i)}return"function"==typeof a?(0,_._)(y||(y=w(["","(",")"])),o,i):(0,_._)(b||(b=w(["",".test(",")"])),o,i)}())}())}};t.default=x},2302(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const i=n(8396),s=n(122),r=n(667),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"boolean"==typeof e||(!0===t?!l(e):!!t&&c(e)<=t)};const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(o.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(l))return!0;if("object"==typeof n&&l(n))return!0}return!1}function c(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&(0,i.eachItem)(e[n],e=>t+=c(e)),t===1/0))return 1/0}return t}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!1!==(arguments.length>2?arguments[2]:void 0)&&(t=p(t));const n=e.parse(t);return u(e,n)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=u;const h=/#\/?$/;function p(e){return e?e.replace(h,""):""}t.normalizeId=p,t.resolveUrl=function(e,t,n){return n=p(n),e.resolve(t,n)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:i}=this.opts,a=p(e[n]||t),o={"":a},l=d(i,a,!1),c={},u=new Set;return r(e,{allKeys:!0},(e,t,i,s)=>{if(void 0===s)return;const r=l+t;let a=o[s];function d(t){const n=this.opts.uriResolver.resolve;if(t=p(a?n(a,t):t),u.has(t))throw m(t);u.add(t);let i=this.refs[t];return"string"==typeof i&&(i=this.refs[i]),"object"==typeof i?h(e,i.schema,t):t!==p(r)&&("#"===t[0]?(h(e,c[t],t),c[t]=e):this.refs[t]=r),t}function g(e){if("string"==typeof e){if(!f.test(e))throw new Error('invalid anchor "'.concat(e,'"'));d.call(this,"#".concat(e))}}"string"==typeof e[n]&&(a=d.call(this,e[n])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),o[t]=a}),c;function h(e,t,n){if(void 0!==t&&!s(e,t))throw m(n)}function m(e){return new Error('reference "'.concat(e,'" resolves to more than one schema'))}}},2392(e,t){"use strict";function n(e,t){return t.rules.some(t=>i(e,t))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function(e,t){let{schema:i,self:s}=e;const r=s.RULES.types[t];return r&&!0!==r&&n(i,r)},t.shouldUseGroup=n,t.shouldUseRule=i},2730(e,t,n){"use strict";var i=n(5043),s=n(8853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,s,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,i){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,i)&&(n=null),i||null===s?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,i=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var L,O=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),r=i.stack.split("\n"),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==r[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case A:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function re(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Se=null;function Ae(e){if(e=bs(e)){if("function"!==typeof xe)throw Error(r(280));var t=e.stateNode;t&&(t=_s(t),xe(e.stateNode,e.type,t))}}function Ee(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Me(e,t){return e(t)}function Pe(){}var Te=!1;function De(e,t,n){if(Te)return e(t,n);Te=!0;try{return Me(e,t,n)}finally{Te=!1,(null!==ke||null!==Se)&&(Pe(),Ce())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var i=_s(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Re=!1;if(d)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(de){Re=!1}function Ie(e,t,n,i,s,r,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Le=!1,Oe=null,je=!1,Be=null,We={onError:function(e){Le=!0,Oe=e}};function ze(e,t,n,i,s,r,a,o,l){Le=!1,Oe=null,Ie.apply(We,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(r(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===i)return He(s),t;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,i=a;break}if(l===i){o=!0,i=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=s;break}if(l===i){o=!0,i=a,n=s;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var $e=s.unstable_scheduleCallback,Ke=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Qe=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,it=s.unstable_IdlePriority,st=null,rt=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?i=ut(o):0!==(r&=a)&&(i=ut(r))}else 0!==(a=n&~s)?i=ut(a):0!==r&&(i=ut(r));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(r=t&-t)||16===s&&0!==(4194240&r)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(n=31-at(t)),i|=e[n],t&=~s;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,kt,St,At,Et=!1,Ct=[],Mt=null,Pt=null,Tt=null,Dt=new Map,Nt=new Map,Rt=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,i,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&xt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ot(e){var t=ys(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&xt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function Bt(e,t,n){jt(e)&&n.delete(t)}function Wt(){Et=!1,null!==Mt&&jt(Mt)&&(Mt=null),null!==Pt&&jt(Pt)&&(Pt=null),null!==Tt&&jt(Tt)&&(Tt=null),Dt.forEach(Bt),Nt.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Wt)))}function Ut(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var i=Ct[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Mt&&zt(Mt,e),null!==Pt&&zt(Pt,e),null!==Tt&&zt(Tt,e),Dt.forEach(t),Nt.forEach(t),n=0;n<Rt.length;n++)(i=Rt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var Vt=w.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,i){var s=bt,r=Vt.transition;Vt.transition=null;try{bt=1,$t(e,t,n,i)}finally{bt=s,Vt.transition=r}}function Gt(e,t,n,i){var s=bt,r=Vt.transition;Vt.transition=null;try{bt=4,$t(e,t,n,i)}finally{bt=s,Vt.transition=r}}function $t(e,t,n,i){if(Ht){var s=Xt(e,t,n,i);if(null===s)Hi(e,t,i,Kt,n),It(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return Mt=Lt(Mt,e,t,n,i,s),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,i,s),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Dt.set(r,Lt(Dt.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Nt.set(r,Lt(Nt.get(r)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(It(e,i),4&t&&-1<Ft.indexOf(e)){for(;null!==s;){var r=bs(s);if(null!==r&&_t(r),null===(r=Xt(e,t,n,i))&&Hi(e,t,i,Kt,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Kt=null;function Xt(e,t,n,i){if(Kt=null,null!==(e=ys(e=_e(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,s="value"in Qt?Qt.value:Qt.textContent,r=s.length;for(e=0;e<i&&n[e]===s[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===s[r-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,i,s,r){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=O({},cn,{view:0,detail:0}),hn=rn(un),pn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=rn(pn),mn=rn(O({},pn,{dataTransfer:0})),gn=rn(O({},un,{relatedTarget:0})),vn=rn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(yn),wn=rn(O({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function An(){return Sn}var En=O({},un,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=rn(En),Mn=rn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=rn(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Tn=rn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=rn(Dn),Rn=[9,13,27,32],Fn=d&&"CompositionEvent"in window,In=null;d&&"documentMode"in document&&(In=document.documentMode);var Ln=d&&"TextEvent"in window&&!In,On=d&&(!Fn||In&&8<In&&11>=In),jn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,i){Ee(i),0<(t=Gi(t,"onChange")).length&&(n=new dn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gn=null,$n=null;function Kn(e){ji(e,0)}function Xn(e){if($(ws(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Gn&&(Gn.detachEvent("onpropertychange",ni),$n=Gn=null)}function ni(e){if("value"===e.propertyName&&Xn($n)){var t=[];qn(t,$n,e,_e(e)),De(Kn,t)}}function ii(e,t,n){"focusin"===e?(ti(),$n=n,(Gn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function ri(e,t){if("click"===e)return Xn(t)}function ai(e,t){if("input"===e||"change"===e)return Xn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!u.call(t,s)||!oi(e[s],t[s]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=di(n,r);var a=di(n,i);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=d&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,bi=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==K(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Gi(vi,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},ki={},Si={};function Ai(e){if(ki[e])return ki[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}d&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ei=Ai("animationend"),Ci=Ai("animationiteration"),Mi=Ai("animationstart"),Pi=Ai("transitionend"),Ti=new Map,Di="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(e,t){Ti.set(e,t),l(t,[e])}for(var Ri=0;Ri<Di.length;Ri++){var Fi=Di[Ri];Ni(Fi.toLowerCase(),"on"+(Fi[0].toUpperCase()+Fi.slice(1)))}Ni(Ei,"onAnimationEnd"),Ni(Ci,"onAnimationIteration"),Ni(Mi,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function Oi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(r(198));var d=Oe;Le=!1,Oe=null,je||(je=!0,Be=d)}}(i,t,void 0,e),e.currentTarget=null}function ji(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;Oi(s,o,c),r=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;Oi(s,o,c),r=l}}}if(je)throw e=Be,je=!1,Be=null,e}function Bi(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function Wi(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[zi]){e[zi]=!0,a.forEach(function(t){"selectionchange"!==t&&(Li.has(t)||Wi(t,!1,e),Wi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zi]||(t[zi]=!0,Wi("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Yt(t)){case 1:var s=qt;break;case 4:s=Gt;break;default:s=$t}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,s){var r=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ys(o)))return;if(5===(l=a.tag)||6===l){i=r=a;continue e}o=o.parentNode}}i=i.return}De(function(){var i=r,s=_e(n),a=[];e:{var o=Ti.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ei:case Ci:case Mi:l=vn;break;case Pi:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ne(f,h))&&d.push(qi(f,m,p)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(d=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:ws(l),p=null==c?o:ws(c),(o=new d(m,f+"leave",l,n,s)).target=u,o.relatedTarget=p,m=null,ys(s)===i&&((d=new d(h,f+"enter",c,n,s)).target=p,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,f=0,p=d=l;p;p=$i(p))f++;for(p=0,m=h;m;m=$i(m))p++;for(;0<f-p;)d=$i(d),f--;for(;0<p-f;)h=$i(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=$i(d),h=$i(h)}d=null}else d=null;null!==l&&Ki(a,o,l,d,!1),null!==c&&null!==u&&Ki(a,u,c,d,!0)}if("select"===(l=(o=i?ws(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Hn(o))if(Qn)g=ai;else{g=si;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ri);switch(g&&(g=g(e,i))?qn(a,g,n,s):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?ws(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(a,n,s);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":wi(a,n,s)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=en()):(Jt="value"in(Qt=s)?Qt.value:Qt.textContent,Un=!0)),0<(v=Gi(i,b)).length&&(b=new wn(b,e,null,n,s),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,jn);case"textInput":return(e=t.data)===jn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Fn&&Wn(e,t)?(e=en(),Zt=Jt=Qt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:i}),s.data=y))}ji(a,t)})}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Ne(e,n))&&i.unshift(qi(e,r,s)),null!=(r=Ne(e,t))&&i.push(qi(e,r,s))),e=e.return}return i}function $i(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,i,s){for(var r=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ne(n,r))&&a.unshift(qi(n,l,o)):s||null!=(l=Ne(n,r))&&a.push(qi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xi=/\r\n?/g,Yi=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(Xi,"\n").replace(Yi,"")}function Ji(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(r(425))}function Zi(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(e){return rs.resolve(null).then(e).catch(os)}:is;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return e.removeChild(s),void Ut(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);Ut(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ps="__reactProps$"+us,fs="__reactContainer$"+us,ms="__reactEvents$"+us,gs="__reactListeners$"+us,vs="__reactHandles$"+us;function ys(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function _s(e){return e[ps]||null}var xs=[],ks=-1;function Ss(e){return{current:e}}function As(e){0>ks||(e.current=xs[ks],xs[ks]=null,ks--)}function Es(e,t){ks++,xs[ks]=e.current,e.current=t}var Cs={},Ms=Ss(Cs),Ps=Ss(!1),Ts=Cs;function Ds(e,t){var n=e.type.contextTypes;if(!n)return Cs;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ns(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rs(){As(Ps),As(Ms)}function Fs(e,t,n){if(Ms.current!==Cs)throw Error(r(168));Es(Ms,t),Es(Ps,n)}function Is(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in t))throw Error(r(108,V(e)||"Unknown",s));return O({},n,i)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Ts=Ms.current,Es(Ms,e),Es(Ps,Ps.current),!0}function Os(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=Is(e,t,Ts),i.__reactInternalMemoizedMergedChildContext=e,As(Ps),As(Ms),Es(Ms,e)):As(Ps),Es(Ps,n)}var js=null,Bs=!1,Ws=!1;function zs(e){null===js?js=[e]:js.push(e)}function Us(){if(!Ws&&null!==js){Ws=!0;var e=0,t=bt;try{var n=js;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}js=null,Bs=!1}catch(s){throw null!==js&&(js=js.slice(e+1)),$e(Ze,Us),s}finally{bt=t,Ws=!1}}return null}var Vs=[],Hs=0,qs=null,Gs=0,$s=[],Ks=0,Xs=null,Ys=1,Qs="";function Js(e,t){Vs[Hs++]=Gs,Vs[Hs++]=qs,qs=e,Gs=t}function Zs(e,t,n){$s[Ks++]=Ys,$s[Ks++]=Qs,$s[Ks++]=Xs,Xs=e;var i=Ys;e=Qs;var s=32-at(i)-1;i&=~(1<<s),n+=1;var r=32-at(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|i,Qs=r+e}else Ys=1<<r|n<<s|i,Qs=e}function er(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function tr(e){for(;e===qs;)qs=Vs[--Hs],Vs[Hs]=null,Gs=Vs[--Hs],Vs[Hs]=null;for(;e===Xs;)Xs=$s[--Ks],$s[Ks]=null,Qs=$s[--Ks],$s[Ks]=null,Ys=$s[--Ks],$s[Ks]=null}var nr=null,ir=null,sr=!1,rr=null;function ar(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function or(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,ir=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,ir=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Ys,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,ir=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(sr){var t=ir;if(t){var n=t;if(!or(e,t)){if(lr(e))throw Error(r(418));t=cs(n.nextSibling);var i=nr;t&&or(e,t)?ar(i,n):(e.flags=-4097&e.flags|2,sr=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,sr=!1,nr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function ur(e){if(e!==nr)return!1;if(!sr)return dr(e),sr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ir)){if(lr(e))throw hr(),Error(r(418));for(;t;)ar(e,t),t=cs(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ir=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ir=null}}else ir=nr?cs(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=ir;e;)e=cs(e.nextSibling)}function pr(){ir=nr=null,sr=!1}function fr(e){null===rr?rr=[e]:rr.push(e)}var mr=w.ReactCurrentBatchConfig;function gr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var s=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yr(e){return(0,e._init)(e._payload)}function br(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Lc(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,i){var r=n.type;return r===k?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===N&&yr(r)===t.type)?((i=s(t,n.props)).ref=gr(e,t,n),i.return=e,i):((i=Rc(n.type,n.key,n.props,null,e.mode,i)).ref=gr(e,t,n),i.return=e,i)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Oc(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,i,r){return null===t||7!==t.tag?((t=Fc(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gr(e,null,t),n.return=e,n;case x:return(t=Oc(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Fc(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function p(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===s?c(e,t,n,i):null;case x:return n.key===s?d(e,t,n,i):null;case N:return p(e,t,(s=n._init)(n._payload),i)}if(te(n)||I(n))return null!==s?null:u(e,t,n,i,null);vr(e,n)}return null}function f(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case x:return d(t,e=e.get(null===i.key?n:i.key)||null,i,s);case N:return f(e,t,n,(0,i._init)(i._payload),s)}if(te(i)||I(i))return u(t,e=e.get(n)||null,i,s,null);vr(t,i)}return null}function m(s,r,o,l){for(var c=null,d=null,u=r,m=r=0,g=null;null!==u&&m<o.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var v=p(s,u,o[m],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(s,u),r=a(v,r,m),null===d?c=v:d.sibling=v,d=v,u=g}if(m===o.length)return n(s,u),sr&&Js(s,m),c;if(null===u){for(;m<o.length;m++)null!==(u=h(s,o[m],l))&&(r=a(u,r,m),null===d?c=u:d.sibling=u,d=u);return sr&&Js(s,m),c}for(u=i(s,u);m<o.length;m++)null!==(g=f(u,s,m,o[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),r=a(g,r,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(s,e)}),sr&&Js(s,m),c}function g(s,o,l,c){var d=I(l);if("function"!==typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(s,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===u?d=b:u.sibling=b,u=b,m=v}if(y.done)return n(s,m),sr&&Js(s,g),d;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=a(y,o,g),null===u?d=y:u.sibling=y,u=y);return sr&&Js(s,g),d}for(m=i(s,m);!y.done;g++,y=l.next())null!==(y=f(m,s,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&m.forEach(function(e){return t(s,e)}),sr&&Js(s,g),d}return function e(i,r,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,d=r;null!==d;){if(d.key===c){if((c=a.type)===k){if(7===d.tag){n(i,d.sibling),(r=s(d,a.props.children)).return=i,i=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&yr(c)===d.type){n(i,d.sibling),(r=s(d,a.props)).ref=gr(i,d,a),r.return=i,i=r;break e}n(i,d);break}t(i,d),d=d.sibling}a.type===k?((r=Fc(a.props.children,i.mode,l,a.key)).return=i,i=r):((l=Rc(a.type,a.key,a.props,null,i.mode,l)).ref=gr(i,r,a),l.return=i,i=l)}return o(i);case x:e:{for(d=a.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(i,r.sibling),(r=s(r,a.children||[])).return=i,i=r;break e}n(i,r);break}t(i,r),r=r.sibling}(r=Oc(a,i.mode,l)).return=i,i=r}return o(i);case N:return e(i,r,(d=a._init)(a._payload),l)}if(te(a))return m(i,r,a,l);if(I(a))return g(i,r,a,l);vr(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==r&&6===r.tag?(n(i,r.sibling),(r=s(r,a)).return=i,i=r):(n(i,r),(r=Lc(a,i.mode,l)).return=i,i=r),o(i)):n(i,r)}}var wr=br(!0),_r=br(!1),xr=Ss(null),kr=null,Sr=null,Ar=null;function Er(){Ar=Sr=kr=null}function Cr(e){var t=xr.current;As(xr),e._currentValue=t}function Mr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Pr(e,t){kr=e,Ar=Sr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Tr(e){var t=e._currentValue;if(Ar!==e)if(e={context:e,memoizedValue:t,next:null},null===Sr){if(null===kr)throw Error(r(308));Sr=e,kr.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Dr=null;function Nr(e){null===Dr?Dr=[e]:Dr.push(e)}function Rr(e,t,n,i){var s=t.interleaved;return null===s?(n.next=n,Nr(t)):(n.next=s.next,s.next=n),t.interleaved=n,Fr(e,i)}function Fr(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ir=!1;function Lr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Or(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Br(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Cl)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Fr(e,n)}return null===(s=i.interleaved)?(t.next=t,Nr(i)):(t.next=s.next,s.next=t),i.interleaved=t,Fr(e,n)}function Wr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zr(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=a:r=r.next=a,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ur(e,t,n,i){var s=e.updateQueue;Ir=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?r=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(a=0,d=c=l=null,o=r;;){var h=o.lane,p=o.eventTime;if((i&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,u,h):f)||void 0===h)break e;u=O({},u,h);break e;case 2:Ir=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===r&&(s.shared.lanes=0);Il|=a,e.lanes=a,e.memoizedState=u}}function Vr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!==typeof s)throw Error(r(191,s));s.call(i)}}}var Hr={},qr=Ss(Hr),Gr=Ss(Hr),$r=Ss(Hr);function Kr(e){if(e===Hr)throw Error(r(174));return e}function Xr(e,t){switch(Es($r,t),Es(Gr,e),Es(qr,Hr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}As(qr),Es(qr,t)}function Yr(){As(qr),As(Gr),As($r)}function Qr(e){Kr($r.current);var t=Kr(qr.current),n=le(t,e.type);t!==n&&(Es(Gr,e),Es(qr,n))}function Jr(e){Gr.current===e&&(As(qr),As(Gr))}var Zr=Ss(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=w.ReactCurrentDispatcher,sa=w.ReactCurrentBatchConfig,ra=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function pa(){throw Error(r(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ma(e,t,n,i,s,a){if(ra=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Ja:Za,e=n(i,s),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(r(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,s)}while(da)}if(ia.current=Qa,t=null!==oa&&null!==oa.next,ra=0,la=oa=aa=null,ca=!1,t)throw Error(r(300));return e}function ga(){var e=0!==ua;return ua=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=oa,s=i.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ra&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,aa.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(bo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Il|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);oi(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function xa(){}function ka(e,t){var n=aa,i=ya(),s=t(),a=!oi(i.memoizedState,s);if(a&&(i.memoizedState=s,bo=!0),i=i.queue,Ia(Ea.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ta(9,Aa.bind(null,n,i,s,t),void 0,null),null===Ml)throw Error(r(349));0!==(30&ra)||Sa(n,t,s)}return s}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Aa(e,t,n,i){t.value=n,t.getSnapshot=i,Ca(t)&&Ma(e)}function Ea(e,t,n){return n(function(){Ca(t)&&Ma(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Ma(e){var t=Fr(e,1);null!==t&&tc(t,e,1,-1)}function Pa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=$a.bind(null,aa,e),[t.memoizedState,e]}function Ta(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Da(){return ya().memoizedState}function Na(e,t,n,i){var s=va();aa.flags|=e,s.memoizedState=Ta(1|t,n,void 0,void 0===i?null:i)}function Ra(e,t,n,i){var s=ya();i=void 0===i?null:i;var r=void 0;if(null!==oa){var a=oa.memoizedState;if(r=a.destroy,null!==i&&fa(i,a.deps))return void(s.memoizedState=Ta(t,n,r,i))}aa.flags|=e,s.memoizedState=Ta(1|t,n,r,i)}function Fa(e,t){return Na(8390656,8,e,t)}function Ia(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function Oa(e,t){return Ra(4,4,e,t)}function ja(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,ja.bind(null,t,e),n)}function Wa(){}function za(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 0===(21&ra)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(oi(n,t)||(n=mt(),aa.lanes|=n,Il|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=i}}function qa(){return ya().memoizedState}function Ga(e,t,n){var i=ec(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(e))Xa(t,n);else if(null!==(n=Rr(e,t,n,i))){tc(n,e,i,Zl()),Ya(n,t,i)}}function $a(e,t,n){var i=ec(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(e))Xa(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(s.next=s,Nr(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Rr(e,t,s,i))&&(tc(n,e,i,s=Zl()),Ya(n,t,i))}}function Ka(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Xa(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qa={readContext:Tr,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Tr,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Tr,useEffect:Fa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4194308,4,ja.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Pa,useDebugValue:Wa,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,s=va();if(sr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Ml)throw Error(r(349));0!==(30&ra)||Sa(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Fa(Ea.bind(null,i,a,e),[e]),i.flags|=2048,Ta(9,Aa.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Ml.identifierPrefix;if(sr){var n=Qs;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Tr,useCallback:za,useContext:Tr,useEffect:Ia,useImperativeHandle:Ba,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Ua,useReducer:wa,useRef:Da,useState:function(){return wa(ba)},useDebugValue:Wa,useDeferredValue:function(e){return Va(ya(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},eo={readContext:Tr,useCallback:za,useContext:Tr,useEffect:Ia,useImperativeHandle:Ba,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Ua,useReducer:_a,useRef:Da,useState:function(){return _a(ba)},useDebugValue:Wa,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Va(t,oa.memoizedState,e)},useTransition:function(){return[_a(ba)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Zl(),s=ec(e),r=jr(i,s);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Br(e,r,s))&&(tc(t,e,s,i),Wr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Zl(),s=ec(e),r=jr(i,s);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Br(e,r,s))&&(tc(t,e,s,i),Wr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),i=ec(e),s=jr(n,i);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Br(e,s,i))&&(tc(t,e,i,n),Wr(t,e,i))}};function so(e,t,n,i,s,r,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(s,r))}function ro(e,t,n){var i=!1,s=Cs,r=t.contextType;return"object"===typeof r&&null!==r?r=Tr(r):(s=Ns(t)?Ts:Ms.current,r=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ds(e,s):Cs),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Lr(e);var r=t.contextType;"object"===typeof r&&null!==r?s.context=Tr(r):(r=Ns(t)?Ts:Ms.current,s.context=Ds(e,r)),s.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(no(e,t,r,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&io.enqueueReplaceState(s,s.state,null),Ur(e,n,s,i),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=jr(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Vl||(Vl=!0,Hl=i),uo(0,t)},n}function fo(e,t,n){(n=jr(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){uo(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jr(-1,1)).tag=2,Br(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,i){t.child=null===e?_r(t,null,n,i):wr(t,e.child,n,i)}function _o(e,t,n,i,s){n=n.render;var r=t.ref;return Pr(t,s),i=ma(e,t,n,i,r,s),n=ga(),null===e||bo?(sr&&n&&er(t),t.flags|=1,wo(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vo(e,t,s))}function xo(e,t,n,i,s){if(null===e){var r=n.type;return"function"!==typeof r||Dc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,ko(e,t,r,i,s))}if(r=e.child,0===(e.lanes&s)){var a=r.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Vo(e,t,s)}return t.flags|=1,(e=Nc(r,i)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,i,s){if(null!==e){var r=e.memoizedProps;if(li(r,i)&&e.ref===t.ref){if(bo=!1,t.pendingProps=i=r,0===(e.lanes&s))return t.lanes=e.lanes,Vo(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return Eo(e,t,n,i,s)}function So(e,t,n){var i=t.pendingProps,s=i.children,r=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(Nl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(Nl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==r?r.baseLanes:n,Es(Nl,Dl),Dl|=i}else null!==r?(i=r.baseLanes|n,t.memoizedState=null):i=n,Es(Nl,Dl),Dl|=i;return wo(e,t,s,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,i,s){var r=Ns(n)?Ts:Ms.current;return r=Ds(t,r),Pr(t,s),n=ma(e,t,n,i,r,s),i=ga(),null===e||bo?(sr&&i&&er(t),t.flags|=1,wo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vo(e,t,s))}function Co(e,t,n,i,s){if(Ns(n)){var r=!0;Ls(t)}else r=!1;if(Pr(t,s),null===t.stateNode)Uo(e,t),ro(t,n,i),oo(t,n,i,s),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Tr(c):c=Ds(t,c=Ns(n)?Ts:Ms.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(t,a,i,c),Ir=!1;var h=t.memoizedState;a.state=h,Ur(t,i,a,s),l=t.memoizedState,o!==i||h!==l||Ps.current||Ir?("function"===typeof d&&(no(t,n,d,i),l=t.memoizedState),(o=Ir||so(t,n,o,i,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Or(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Tr(l):l=Ds(t,l=Ns(n)?Ts:Ms.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,i,l),Ir=!1,h=t.memoizedState,a.state=h,Ur(t,i,a,s);var f=t.memoizedState;o!==u||h!==f||Ps.current||Ir?("function"===typeof p&&(no(t,n,p,i),f=t.memoizedState),(c=Ir||so(t,n,c,i,h,f,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Mo(e,t,n,i,r,s)}function Mo(e,t,n,i,s,r){Ao(e,t);var a=0!==(128&t.flags);if(!i&&!a)return s&&Os(t,n,!1),Vo(e,t,r);i=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=wr(t,e.child,null,r),t.child=wr(t,null,o,r)):wo(e,t,o,r),t.memoizedState=i.state,s&&Os(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Fs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fs(0,t.context,!1),Xr(e,t.containerInfo)}function To(e,t,n,i,s){return pr(),fr(s),t.flags|=256,wo(e,t,n,i),t.child}var Do,No,Ro,Fo={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var i,s=t.pendingProps,a=Zr.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Es(Zr,1&a),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,s,0,null),e=Fc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(n),t.memoizedState=Fo,e):Oo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,jo(e,t,o,i=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Ic({mode:"visible",children:i.children},s,0,null),(a=Fc(a,s,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&wr(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Fo,a);if(0===(1&t.mode))return jo(e,t,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,jo(e,t,o,i=co(a=Error(r(419)),i,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(i=Ml)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Fr(e,s),tc(i,e,s,-1))}return fc(),jo(e,t,o,i=co(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ir=cs(s.nextSibling),nr=t,sr=!0,rr=null,null!==e&&($s[Ks++]=Ys,$s[Ks++]=Qs,$s[Ks++]=Xs,Ys=e.id,Qs=e.overflow,Xs=t),t=Oo(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,a,n);if(o){o=s.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Nc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Nc(i,o):(o=Fc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Fo,s}return e=(o=e.child).sibling,s=Nc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Oo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jo(e,t,n,i){return null!==i&&fr(i),wr(t,e.child,null,n),(e=Oo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Mr(e.return,t,n)}function Wo(e,t,n,i,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function zo(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(wo(e,t,i.children,n),0!==(2&(i=Zr.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Es(Zr,i),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Wo(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Wo(t,!0,n,null,r);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Go(e,t,n){var i=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ns(t.type)&&Rs(),qo(t),null;case 3:return i=t.stateNode,Yr(),As(Ps),As(Ms),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(rc(rr),rr=null))),qo(t),null;case 5:Jr(t);var s=Kr($r.current);if(n=t.type,null!==e&&null!=t.stateNode)No(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(r(166));return qo(t),null}if(e=Kr(qr.current),ur(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[hs]=t,i[ps]=a,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(s=0;s<Ii.length;s++)Bi(Ii[s],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":Y(i,a),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Bi("invalid",i);break;case"textarea":se(i,a),Bi("invalid",i)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),s=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":G(i),Z(i,a,!0);break;case"textarea":G(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=i,Do(e,t),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),s=i;break;case"iframe":case"object":case"embed":Bi("load",e),s=i;break;case"video":case"audio":for(s=0;s<Ii.length;s++)Bi(Ii[s],e);s=i;break;case"source":Bi("error",e),s=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),s=i;break;case"details":Bi("toggle",e),s=i;break;case"input":Y(e,i),s=X(e,i),Bi("invalid",e);break;case"option":default:s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=O({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":se(e,i),s=ie(e,i),Bi("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Bi("scroll",e):null!=d&&b(e,a,d,l))}switch(n){case"input":G(e),Z(e,i,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Ro(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(n=Kr($r.current),Kr(qr.current),ur(t)){if(i=t.stateNode,n=t.memoizedProps,i[hs]=t,(a=i.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hs]=t,t.stateNode=i}return qo(t),null;case 13:if(As(Zr),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sr&&null!==ir&&0!==(1&t.mode)&&0===(128&t.flags))hr(),pr(),t.flags|=98560,a=!1;else if(a=ur(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(r(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(r(317));a[hs]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==rr&&(rc(rr),rr=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Yr(),null===e&&Ui(t.stateNode.containerInfo),qo(t),null;case 10:return Cr(t.type._context),qo(t),null;case 19:if(As(Zr),null===(a=t.memoizedState))return qo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Ho(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Es(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>zl&&(t.flags|=128,i=!0,Ho(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!sr)return qo(t),null}else 2*Qe()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,i=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=Zr.current,Es(Zr,i?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function $o(e,t){switch(tr(t),t.tag){case 1:return Ns(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yr(),As(Ps),As(Ms),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jr(t),null;case 13:if(As(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return As(Zr),null;case 4:return Yr(),null;case 10:return Cr(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},No=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Kr(qr.current);var r,a=null;switch(n){case"input":s=X(e,s),i=X(e,i),a=[];break;case"select":s=O({},s,{value:void 0}),i=O({},i,{value:void 0}),a=[];break;case"textarea":s=ie(e,s),i=ie(e,i),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(d in ye(n,i),n=null,s)if(!i.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in i){var c=i[d];if(l=null!=s?s[d]:void 0,i.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Bi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ko=!1,Xo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Jo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){kc(e,t,i)}else n.current=null}function Zo(e,t,n){try{n()}catch(i){kc(e,t,i)}}var el=!1;function tl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,void 0!==r&&Zo(t,n,r)}s=s.next}while(s!==i)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[ms],delete t[gs],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,dl=!1;function ul(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Xo||Jo(n,t);case 6:var i=cl,s=dl;cl=null,ul(e,t,n),dl=s,null!==(cl=i)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Ut(e)):ls(cl,n.stateNode));break;case 4:i=cl,s=dl,cl=n.stateNode.containerInfo,dl=!0,ul(e,t,n),cl=i,dl=s;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&Zo(n,t,a),s=s.next}while(s!==i)}ul(e,t,n);break;case 1:if(!Xo&&(Jo(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){kc(n,t,o)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Xo=(i=Xo)||null!==n.memoizedState,ul(e,t,n),Xo=i):ul(e,t,n);break;default:ul(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var i=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(r(160));hl(a,o,s),cl=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){kc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&i){try{tl(3,e,e.return),nl(3,e)}catch(g){kc(e,e.return,g)}try{tl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),gl(e),512&i&&null!==n&&Jo(n,n.return);break;case 5:if(fl(t,e),gl(e),512&i&&null!==n&&Jo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&i&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(s,a),be(l,o);var d=be(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):b(s,u,h,d)}switch(l){case"input":J(s,a);break;case"textarea":re(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(s,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),gl(e),4&i){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),gl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Wl=Qe())),4&i&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(d=Xo)||u,fl(t,e),Xo=d):fl(t,e),gl(e),8192&i){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(f=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:tl(4,p,p.return);break;case 1:Jo(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(i,n,g)}}break;case 5:Jo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Qo=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&i&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rl(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(he(s,""),i.flags&=-33),ll(e,al(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;ol(e,al(e),a);break;default:throw Error(r(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Qo=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Qo;){var s=Qo,r=s.child;if(22===s.tag&&i){var a=null!==s.memoizedState||Ko;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Ko;var c=Xo;if(Ko=a,(Xo=l)&&!c)for(Qo=s;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,Qo=l):_l(s);for(;null!==r;)Qo=r,yl(r,t,n),r=r.sibling;Qo=s,Ko=o,Xo=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==r?(r.return=s,Qo=r):bl(e)}}function bl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||nl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Xo)if(null===n)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vr(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vr(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(r(163))}Xo||512&t.flags&&il(t)}catch(p){kc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function _l(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){kc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(l){kc(t,s,l)}}var r=t.return;try{il(t)}catch(l){kc(t,r,l)}break;case 5:var a=t.return;try{il(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var xl,kl=Math.ceil,Sl=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,Cl=0,Ml=null,Pl=null,Tl=0,Dl=0,Nl=Ss(0),Rl=0,Fl=null,Il=0,Ll=0,Ol=0,jl=null,Bl=null,Wl=0,zl=1/0,Ul=null,Vl=!1,Hl=null,ql=null,Gl=!1,$l=null,Kl=0,Xl=0,Yl=null,Ql=-1,Jl=0;function Zl(){return 0!==(6&Cl)?Qe():-1!==Ql?Ql:Ql=Qe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Tl?Tl&-Tl:null!==mr.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function tc(e,t,n,i){if(50<Xl)throw Xl=0,Yl=null,Error(r(185));vt(e,n,i),0!==(2&Cl)&&e===Ml||(e===Ml&&(0===(2&Cl)&&(Ll|=n),4===Rl&&ac(e,Tl)),nc(e,i),1===n&&0===Cl&&0===(1&t.mode)&&(zl=Qe()+500,Bs&&Us()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var a=31-at(r),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&i)||(s[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var i=ht(e,e===Ml?Tl:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Bs=!0,zs(e)}(oc.bind(null,e)):zs(oc.bind(null,e)),as(function(){0===(6&Cl)&&Us()}),n=null;else{switch(wt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Mc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ql=-1,Jl=0,0!==(6&Cl))throw Error(r(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var i=ht(e,e===Ml?Tl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var s=Cl;Cl|=2;var a=pc();for(Ml===e&&Tl===t||(Ul=null,zl=Qe()+500,uc(e,t));;)try{vc();break}catch(l){hc(e,l)}Er(),Sl.current=a,Cl=s,null!==Pl?t=0:(Ml=null,Tl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(i=s,t=sc(e,s))),1===t)throw n=Fl,uc(e,0),ac(e,i),nc(e,Qe()),n;if(6===t)ac(e,i);else{if(s=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!oi(r(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=mc(e,i))&&(0!==(a=ft(e))&&(i=a,t=sc(e,a))),1===t))throw n=Fl,uc(e,0),ac(e,i),nc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:case 5:wc(e,Bl,Ul);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=Wl+500-Qe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&i)!==i){Zl(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=is(wc.bind(null,e,Bl,Ul),t);break}wc(e,Bl,Ul);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>s&&(s=o),i&=~a}if(i=s,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kl(i/1960))-i)){e.timeoutHandle=is(wc.bind(null,e,Bl,Ul),i);break}wc(e,Bl,Ul);break;default:throw Error(r(329))}}}return nc(e,Qe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bl,Bl=n,null!==t&&rc(t)),e}function rc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function ac(e,t){for(t&=~Ol,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function oc(e){if(0!==(6&Cl))throw Error(r(327));_c();var t=ht(e,0);if(0===(1&t))return nc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Fl,uc(e,0),ac(e,t),nc(e,Qe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Ul),nc(e,Qe()),null}function lc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(zl=Qe()+500,Bs&&Us())}}function cc(e){null!==$l&&0===$l.tag&&0===(6&Cl)&&_c();var t=Cl;Cl|=1;var n=El.transition,i=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=i,El.transition=n,0===(6&(Cl=t))&&Us()}}function dc(){Dl=Nl.current,As(Nl)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(tr(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rs();break;case 3:Yr(),As(Ps),As(Ms),na();break;case 5:Jr(i);break;case 4:Yr();break;case 13:case 19:As(Zr);break;case 10:Cr(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Ml=e,Pl=e=Nc(e.current,null),Tl=Dl=t,Rl=0,Fl=null,Ol=Ll=Il=0,Bl=jl=null,null!==Dr){for(t=0;t<Dr.length;t++)if(null!==(i=(n=Dr[t]).interleaved)){n.interleaved=null;var s=i.next,r=n.pending;if(null!==r){var a=r.next;r.next=s,i.next=a}n.pending=i}Dr=null}return e}function hc(e,t){for(;;){var n=Pl;try{if(Er(),ia.current=Qa,ca){for(var i=aa.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ca=!1}if(ra=0,la=oa=aa=null,da=!1,ua=0,Al.current=null,null===n||null===n.return){Rl=1,Fl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&mo(a,d,t),c=d;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,d,t),fc();break e}c=Error(r(426))}else if(sr&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fr(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===jl?jl=[a]:jl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zr(a,po(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zr(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Qa,null===e?Qa:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Ml||0===(268435455&Il)&&0===(268435455&Ll)||ac(Ml,Tl)}function mc(e,t){var n=Cl;Cl|=2;var i=pc();for(Ml===e&&Tl===t||(Ul=null,uc(e,t));;)try{gc();break}catch(s){hc(e,s)}if(Er(),Cl=n,Sl.current=i,null!==Pl)throw Error(r(261));return Ml=null,Tl=0,Rl}function gc(){for(;null!==Pl;)yc(Pl)}function vc(){for(;null!==Pl&&!Xe();)yc(Pl)}function yc(e){var t=xl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Al.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=$o(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Rl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var i=bt,s=El.transition;try{El.transition=null,bt=1,function(e,t,n,i){do{_c()}while(null!==$l);if(0!==(6&Cl))throw Error(r(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}(e,a),e===Ml&&(Pl=Ml=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Mc(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=El.transition,El.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,Al.current=null,function(e,t){if(es=Ht,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===s&&(l=o),p===a&&++u===i&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(r(163))}}catch(_){kc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}m=el,el=!1}(e,n),ml(n,e),fi(ts),Ht=!!es,ts=es=null,e.current=n,vl(n,e,s),Ye(),Cl=l,bt=o,El.transition=a}else e.current=n;if(Gl&&(Gl=!1,$l=e,Kl=s),a=e.pendingLanes,0===a&&(ql=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Vl)throw Vl=!1,e=Hl,Hl=null,e;0!==(1&Kl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Yl?Xl++:(Xl=0,Yl=e):Xl=0,Us()}(e,t,n,i)}finally{El.transition=s,bt=i}return null}function _c(){if(null!==$l){var e=wt(Kl),t=El.transition,n=bt;try{if(El.transition=null,bt=16>e?16:e,null===$l)var i=!1;else{if(e=$l,$l=null,Kl=0,0!==(6&Cl))throw Error(r(331));var s=Cl;for(Cl|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:tl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var p=(u=Qo).sibling,f=u.return;if(sl(u),u===d){Qo=null;break}if(null!==p){p.return=f,Qo=p;break}Qo=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qo=y;break e}Qo=a.return}}var b=e.current;for(Qo=b;null!==Qo;){var w=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Qo=w;else e:for(o=b;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(x){kc(l,l.return,x)}if(l===o){Qo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Qo=_;break e}Qo=l.return}}if(Cl=s,Us(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(st,e)}catch(x){}i=!0}return i}finally{bt=n,El.transition=t}}return!1}function xc(e,t,n){e=Br(e,t=po(0,t=lo(n,t),1),1),t=Zl(),null!==e&&(vt(e,1,t),nc(e,t))}function kc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=Br(t,e=fo(t,e=lo(n,e),1),1),e=Zl(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(Tl&n)===n&&(4===Rl||3===Rl&&(130023424&Tl)===Tl&&500>Qe()-Wl?uc(e,0):Ol|=n),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=Zl();null!==(e=Fr(e,t))&&(vt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),Ac(e,n)}function Mc(e,t){return $e(e,t)}function Pc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,i){return new Pc(e,t,n,i)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,i,s,a){var o=2;if(i=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Fc(n.children,s,a,t);case S:o=8,s|=8;break;case A:return(e=Tc(12,n,t,2|s)).elementType=A,e.lanes=a,e;case P:return(e=Tc(13,n,t,s)).elementType=P,e.lanes=a,e;case T:return(e=Tc(19,n,t,s)).elementType=T,e.lanes=a,e;case R:return Ic(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case C:o=9;break e;case M:o=11;break e;case D:o=14;break e;case N:o=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function Fc(e,t,n,i){return(e=Tc(7,e,i,t)).lanes=n,e}function Ic(e,t,n,i){return(e=Tc(22,e,i,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Oc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,i,s,r,a,o,l){return e=new jc(e,t,n,o,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Tc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lr(r),e}function Wc(e){if(!e)return Cs;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ns(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ns(n))return Is(e,n,t)}return t}function zc(e,t,n,i,s,r,a,o,l){return(e=Bc(n,i,!0,e,0,r,0,o,l)).context=Wc(null),n=e.current,(r=jr(i=Zl(),s=ec(n))).callback=void 0!==t&&null!==t?t:null,Br(n,r,s),e.current.lanes=s,vt(e,s,i),nc(e,i),e}function Uc(e,t,n,i){var s=t.current,r=Zl(),a=ec(s);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=jr(r,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Br(s,t,a))&&(tc(e,s,a,r),Wr(e,s,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ps.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),pr();break;case 5:Qr(t);break;case 1:Ns(t.type)&&Ls(t);break;case 4:Xr(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Es(xr,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Es(Zr,1&Zr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Es(Zr,1&Zr.current),null!==(e=Vo(e,t,n))?e.sibling:null);Es(Zr,1&Zr.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return zo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es(Zr,Zr.current),i)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Vo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,sr&&0!==(1048576&t.flags)&&Zs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Uo(e,t),e=t.pendingProps;var s=Ds(t,Ms.current);Pr(t,n),s=ma(null,t,i,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ns(i)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Lr(t),s.updater=io,t.stateNode=s,s._reactInternals=t,oo(t,i,e,n),t=Mo(null,t,i,!0,a,n)):(t.tag=0,sr&&a&&er(t),wo(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Uo(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===D)return 14}return 2}(i),e=to(i,e),s){case 0:t=Eo(null,t,i,e,n);break e;case 1:t=Co(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=xo(null,t,i,to(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,Eo(e,t,i,s=t.elementType===i?s:to(i,s),n);case 1:return i=t.type,s=t.pendingProps,Co(e,t,i,s=t.elementType===i?s:to(i,s),n);case 3:e:{if(Po(t),null===e)throw Error(r(387));i=t.pendingProps,s=(a=t.memoizedState).element,Or(e,t),Ur(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=To(e,t,i,n,s=lo(Error(r(423)),t));break e}if(i!==s){t=To(e,t,i,n,s=lo(Error(r(424)),t));break e}for(ir=cs(t.stateNode.containerInfo.firstChild),nr=t,sr=!0,rr=null,n=_r(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),i===s){t=Vo(e,t,n);break e}wo(e,t,i,n)}t=t.child}return t;case 5:return Qr(t),null===e&&cr(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(i,s)?o=null:null!==a&&ns(i,a)&&(t.flags|=32),Ao(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cr(t),null;case 13:return Lo(e,t,n);case 4:return Xr(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=wr(t,null,i,n):wo(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,_o(e,t,i,s=t.elementType===i?s:to(i,s),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Es(xr,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===s.children&&!Ps.current){t=Vo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=jr(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Mr(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Mr(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Pr(t,n),i=i(s=Tr(s)),t.flags|=1,wo(e,t,i,n),t.child;case 14:return s=to(i=t.type,t.pendingProps),xo(e,t,i,s=to(i.type,s),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:to(i,s),Uo(e,t),t.tag=1,Ns(i)?(e=!0,Ls(t)):e=!1,Pr(t,n),ro(t,i,s),oo(t,i,s,n),Mo(null,t,i,!0,e,n);case 19:return zo(e,t,n);case 22:return So(e,t,n)}throw Error(r(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,i,s){var r=n._reactRootContainer;if(r){var a=r;if("function"===typeof s){var o=s;s=function(){var e=Vc(a);o.call(e)}}Uc(t,a,e,s)}else a=function(e,t,n,i,s){if(s){if("function"===typeof i){var r=i;i=function(){var e=Vc(a);r.call(e)}}var a=zc(t,i,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[fs]=a.current,Ui(8===e.nodeType?e.parentNode:e),cc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof i){var o=i;i=function(){var e=Vc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fs]=l.current,Ui(8===e.nodeType?e.parentNode:e),cc(function(){Uc(t,l,n,i)}),l}(n,t,e,s,i);return Vc(a)}Kc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Uc(e,t,null,null)},Kc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Uc(null,e,null,null)}),t[fs]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ot(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Qe()),0===(6&Cl)&&(zl=Qe()+500,Us()))}break;case 13:cc(function(){var t=Fr(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),qc(e,1)}},xt=function(e){if(13===e.tag){var t=Fr(e,134217728);if(null!==t)tc(t,e,134217728,Zl());qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ec(e),n=Fr(e,t);if(null!==n)tc(n,e,t,Zl());qc(e,t)}},St=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=_s(i);if(!s)throw Error(r(90));$(i),J(i,s)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=lc,Pe=cc;var Zc={usingClientEntryPoint:!1,Events:[bs,ws,_s,Ee,Ce,lc]},ed={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{st=nd.inject(td),rt=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(r(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(r(299));var n=!1,i="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,i,s),e[fs]=t.current,Ui(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(r(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(r(405));var i=null!=n&&n.hydratedSources||null,s=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,s,0,a,o),e[fs]=t.current,Ui(e),i)for(e=0;e<i.length;e++)s=(s=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Kc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(r(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(r(40));return!!e._reactRootContainer&&(cc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Yc(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Jc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},2875(e,t,n){"use strict";var i,s,r=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const a=n(8584),o=n(8396),l=n(656),c={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return d(e,"additionalItems",t);n.items=!0,(0,o.alwaysValidSchema)(n,t)||e.ok((0,l.validateArray)(e))}};function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.schema;const{gen:l,parentSchema:c,data:d,keyword:u,it:h}=e;!function(e){const{opts:i,errSchemaPath:s}=h,r=n.length,a=r===e.minItems&&(r===e.maxItems||!1===e[t]);if(i.strictTuples&&!a){const e='"'.concat(u,'" is ').concat(r,"-tuple, but minItems or maxItems/").concat(t,' are not specified or different at path "').concat(s,'"');(0,o.checkStrictMode)(h,e,i.strictTuples)}}(c),h.opts.unevaluated&&n.length&&!0!==h.items&&(h.items=o.mergeEvaluated.items(l,n.length,h.items));const p=l.name("valid"),f=l.const("len",(0,a._)(i||(i=r(["",".length"])),d));n.forEach((t,n)=>{(0,o.alwaysValidSchema)(h,t)||(l.if((0,a._)(s||(s=r([""," > ",""])),f,n),()=>e.subschema({keyword:u,schemaProp:n,dataProp:n},p)),e.ok(p))})}t.validateTuple=d,t.default=c},2897(e,t,n){var i=n(3693);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},2943(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2875),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,i.validateTuple)(e,"items")};t.default=s},2979(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(122);i.code='require("ajv/dist/runtime/equal").default',t.default=i},2985(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8396),s={keyword:["then","else"],schemaType:["object","boolean"],code(e){let{keyword:t,parentSchema:n,it:s}=e;void 0===n.if&&(0,i.checkStrictMode)(s,'"'.concat(t,'" without "if" is ignored'))}};t.default=s},2992(e,t,n){"use strict";var i,s=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const r=n(8584),a=n(8396),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:e=>{let{params:t}=e;return(0,r._)(i||(i=s(["{propertyName: ","}"])),t.propertyName)}},code(e){const{gen:t,schema:n,data:i,it:s}=e;if((0,a.alwaysValidSchema)(s,n))return;const o=t.name("valid");t.forIn("key",i,n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},o),t.if((0,r.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};t.default=o},3146(e,t,n){"use strict";var i=n(2897).default;const s=n(6125).rE,r=n(6706);e.exports=i(i({},r),{},{workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js@v".concat(s,"/dist/worker.min.js")})},3324(e,t,n){"use strict";var i,s,r,a=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const o=n(8584),l=n(8396),c={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:e=>{let{params:t}=e;return(0,o.str)(i||(i=a(['must match "','" schema'])),t.ifClause)},params:e=>{let{params:t}=e;return(0,o._)(s||(s=a(["{failingKeyword: ","}"])),t.ifClause)}},code(e){const{gen:t,parentSchema:n,it:i}=e;void 0===n.then&&void 0===n.else&&(0,l.checkStrictMode)(i,'"if" without "then" and "else" is ignored');const s=d(i,"then"),c=d(i,"else");if(!s&&!c)return;const u=t.let("valid",!0),h=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h);e.mergeEvaluated(t)}(),e.reset(),s&&c){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(h,p("then",n),p("else",n))}else s?t.if(h,p("then")):t.if((0,o.not)(h),p("else"));function p(n,i){return()=>{const s=e.subschema({keyword:n},h);t.assign(u,h),e.mergeValidEvaluated(s,u),i?t.assign(i,(0,o._)(r||(r=a(["",""])),n)):e.setParams({ifClause:n})}}e.pass(u,()=>e.error(!0))}};function d(e,t){const n=e.schema[t];return void 0!==n&&!(0,l.alwaysValidSchema)(e,n)}t.default=c},3670(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5413),s=n(656),r=n(8396),a=n(2075),o={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:o,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===o.additionalProperties&&a.default.code(new i.KeywordCxt(c,a.default,"additionalProperties"));const d=(0,s.allSchemaProperties)(n);for(const i of d)c.definedProperties.add(i);c.opts.unevaluated&&d.length&&!0!==c.props&&(c.props=r.mergeEvaluated.props(t,(0,r.toHash)(d),c.props));const u=d.filter(e=>!(0,r.alwaysValidSchema)(c,n[e]));if(0===u.length)return;const h=t.name("valid");for(const i of u)p(i)?f(i):(t.if((0,s.propertyInData)(t,l,i,c.opts.ownProperties)),f(i),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(i),e.ok(h);function p(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=o},3693(e,t,n){var i=n(7736);e.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3709(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=[n(2262).default];t.default=i},3738(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3740(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},3837(e){"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},3919(e,t,n){"use strict";const i=n(3146),s=n(4282),r=n(4826),a=n(6171),o=n(6677),l=n(1246);e.exports={defaultOptions:i,spawnWorker:s,terminateWorker:r,onMessage:a,send:o,loadImage:l}},3939(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1156),s=n(2943),r=n(2875),a=n(4859),o=n(6386),l=n(1598),c=n(2992),d=n(2075),u=n(3670),h=n(5532),p=n(8218),f=n(3952),m=n(1289),g=n(5801),v=n(3324),y=n(2985);t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[p.default,f.default,m.default,g.default,v.default,y.default,c.default,d.default,l.default,u.default,h.default];return e?t.push(s.default,a.default):t.push(i.default,r.default),t.push(o.default),t}},3952(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(656).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=i},4202(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,i){var s,r={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,s)&&!S.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:r,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,s,r,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===r?"."+M(l,0):r,_(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),P(a,t,s,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",_(e))for(var c=0;c<e.length;c++){var d=r+M(o=e[c],c);l+=P(o,t,s,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,s,d=r+M(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var i=[],s=0;return P(e,i,"","",function(e){return t.call(n,e,s++)}),i}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},R={transition:null},F={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function I(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=I,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),r=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:r,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=I,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},4282(e){"use strict";e.exports=e=>{let t,{workerPath:n,workerBlobURL:i}=e;if(Blob&&URL&&i){const e=new Blob(['importScripts("'.concat(n,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(n);return t}},4366(e,t,n){"use strict";var i=n(2897).default;const{normalizeIPv6:s,removeDotSegments:r,recomposeAuthority:a,normalizeComponentEncoding:o,isIPv4:l,nonSimpleDomain:c}=n(6099),{SCHEMES:d,getSchemeHandler:u}=n(1578);function h(e,t,n,i){const s={};return i||(e=m(p(e,n),n),t=m(p(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=r(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=r(t.path||""),s.query=t.query):(t.path?("/"===t.path[0]?s.path=r(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=r(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function p(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},i=Object.assign({},t),s=[],o=u(i.scheme||n.scheme);o&&o.serialize&&o.serialize(n,i),void 0!==n.path&&(i.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),void 0!==n.scheme&&(n.path=n.path.split("%3A").join(":")))),"suffix"!==i.reference&&n.scheme&&s.push(n.scheme,":");const l=a(n);if(void 0!==l&&("suffix"!==i.reference&&s.push("//"),s.push(l),n.path&&"/"!==n.path[0]&&s.push("/")),void 0!==n.path){let e=n.path;i.absolutePath||o&&o.absolutePath||(e=r(e)),void 0===l&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),s.push(e)}return void 0!==n.query&&s.push("?",n.query),void 0!==n.fragment&&s.push("#",n.fragment),s.join("")}const f=/^(?:((?:[\0-"\$-\.0-9;->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+):)?(?:\/\/((?:((?:[\0-"\$-\.0->A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)@)?(\[(?:[\0-"\$-\.0->@-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+\]|(?:[\0-"\$-\.0-9;->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)(?::([0-9]*))?))?((?:[\0-"\$->@-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)(?:\?((?:[\0-"\$-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?(?:#((?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|[\n\r])*))?/;function m(e,t){const n=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let r=!1;"suffix"===n.reference&&(e=n.scheme?n.scheme+":"+e:"//"+e);const a=e.match(f);if(a){if(i.scheme=a[1],i.userinfo=a[3],i.host=a[4],i.port=parseInt(a[5],10),i.path=a[6]||"",i.query=a[7],i.fragment=a[8],isNaN(i.port)&&(i.port=a[5]),i.host){if(!1===l(i.host)){const e=s(i.host);i.host=e.host.toLowerCase(),r=e.isIPV6}else r=!0}void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||void 0!==i.query||i.path?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",n.reference&&"suffix"!==n.reference&&n.reference!==i.reference&&(i.error=i.error||"URI is not a "+n.reference+" reference.");const t=u(n.scheme||i.scheme);if(!n.unicodeSupport&&(!t||!t.unicodeSupport)&&i.host&&(n.domainHost||t&&t.domainHost)&&!1===r&&c(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(o){i.error=i.error||"Host's domain name can not be converted to ASCII: "+o}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==i.scheme&&(i.scheme=unescape(i.scheme)),void 0!==i.host&&(i.host=unescape(i.host))),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),t&&t.parse&&t.parse(i,n)}else i.error=i.error||"URI can not be parsed.";return i}const g={SCHEMES:d,normalize:function(e,t){return"string"===typeof e?e=p(m(e,t),t):"object"===typeof e&&(e=m(p(e,t),t)),e},resolve:function(e,t,n){const i=n?Object.assign({scheme:"null"},n):{scheme:"null"},s=h(m(e,i),m(t,i),i,!0);return i.skipEscape=!0,p(s,i)},resolveComponent:h,equal:function(e,t,n){return"string"===typeof e?(e=unescape(e),e=p(o(m(e,n),!0),i(i({},n),{},{skipEscape:!0}))):"object"===typeof e&&(e=p(o(e,!0),i(i({},n),{},{skipEscape:!0}))),"string"===typeof t?(t=unescape(t),t=p(o(m(t,n),!0),i(i({},n),{},{skipEscape:!0}))):"object"===typeof t&&(t=p(o(t,!0),i(i({},n),{},{skipEscape:!0}))),e.toLowerCase()===t.toLowerCase()},serialize:p,parse:m};e.exports=g,e.exports.default=g,e.exports.fastUri=g},4391(e,t,n){"use strict";var i=n(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4445(e,t,n){"use strict";var i=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const s=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&s.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:i(i({},e),{},{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},4601(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4366);i.code='require("ajv/dist/runtime/uri").default',t.default=i},4700(e,t,n){"use strict";var i,s,r,a=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const o=n(8584),l={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message(e){let{keyword:t,schemaCode:n}=e;const s="maxItems"===t?"more":"fewer";return(0,o.str)(i||(i=a(["must NOT have "," than "," items"])),s,n)},params:e=>{let{schemaCode:t}=e;return(0,o._)(s||(s=a(["{limit: ","}"])),t)}},code(e){const{keyword:t,data:n,schemaCode:i}=e,s="maxItems"===t?o.operators.GT:o.operators.LT;e.fail$data((0,o._)(r||(r=a(["",".length "," ",""])),n,s,i))}};t.default=l},4796(e,t,n){"use strict";var i,s,r=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const a=n(656),o=n(8584),l=n(8396),c={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:e=>{let{params:{missingProperty:t}}=e;return(0,o.str)(i||(i=r(["must have required property '","'"])),t)},params:e=>{let{params:{missingProperty:t}}=e;return(0,o._)(s||(s=r(["{missingProperty: ","}"])),t)}},code(e){const{gen:t,schema:n,schemaCode:i,data:s,$data:r,it:c}=e,{opts:d}=c;if(!r&&0===n.length)return;const u=n.length>=d.loopRequired;if(c.allErrors?function(){if(u||r)e.block$data(o.nil,h);else for(const t of n)(0,a.checkReportMissingProp)(e,t)}():function(){const l=t.let("missing");if(u||r){const n=t.let("valid",!0);e.block$data(n,()=>function(n,r){e.setParams({missingProperty:n}),t.forOf(n,i,()=>{t.assign(r,(0,a.propertyInData)(t,s,n,d.ownProperties)),t.if((0,o.not)(r),()=>{e.error(),t.break()})},o.nil)}(l,n)),e.ok(n)}else t.if((0,a.checkMissingProp)(e,n,l)),(0,a.reportMissingProp)(e,l),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:i}=e.it;for(const e of n)if(void 0===(null===t||void 0===t?void 0:t[e])&&!i.has(e)){const t=c.schemaEnv.baseId+c.errSchemaPath,n='required property "'.concat(e,'" is not defined at "').concat(t,'" (strictRequired)');(0,l.checkStrictMode)(c,n,c.opts.strictRequired)}}function h(){t.forOf("prop",i,n=>{e.setParams({missingProperty:n}),t.if((0,a.noPropertyInData)(t,s,n,d.ownProperties),()=>e.error())})}}};t.default=c},4826(e){"use strict";e.exports=e=>{e.terminate()}},4859(e,t,n){"use strict";var i,s,r=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const a=n(8584),o=n(8396),l=n(656),c=n(1156),d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:e=>{let{params:{len:t}}=e;return(0,a.str)(i||(i=r(["must NOT have more than "," items"])),t)},params:e=>{let{params:{len:t}}=e;return(0,a._)(s||(s=r(["{limit: ","}"])),t)}},code(e){const{schema:t,parentSchema:n,it:i}=e,{prefixItems:s}=n;i.items=!0,(0,o.alwaysValidSchema)(i,t)||(s?(0,c.validateAdditionalItems)(e,s):e.ok((0,l.validateArray)(e)))}};t.default=d},4893(e){e.exports=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},5043(e,t,n){"use strict";e.exports=n(4202)},5280(e,t,n){"use strict";var i,s,r,a,o,l=n(2897).default,c=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const d=n(5467);class u extends Error{constructor(e){super('CodeGen: "code" for '.concat(e," not defined")),this.value=e.value}}var h;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(h||(t.UsedValueState=h={})),t.varKinds={const:new d.Name("const"),let:new d.Name("let"),var:new d.Name("var")};class p{constructor(){let{prefixes:e,parent:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof d.Name?e:this.name(e)}name(e){return new d.Name(this._newName(e))}_newName(e){const t=this._names[e]||this._nameGroup(e);return"".concat(e).concat(t.index++)}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error('CodeGen: prefix "'.concat(e,'" is not allowed in this scope'));return this._names[e]={prefix:e,index:0}}}t.Scope=p;class f extends d.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,t){let{property:n,itemIndex:s}=t;this.value=e,this.scopePath=(0,d._)(i||(i=c([".","[","]"])),new d.Name(n),s)}}t.ValueScopeName=f;const m=(0,d._)(s||(s=c(["\n"],["\\n"])));t.ValueScope=class extends p{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts=l(l({},e),{},{_n:e.lines?m:d.nil})}get(){return this._scope}name(e){return new f(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(e),{prefix:s}=i,r=null!==(n=t.key)&&void 0!==n?n:t.ref;let a=this._values[s];if(a){const e=a.get(r);if(e)return e}else a=this._values[s]=new Map;a.set(r,i);const o=this._scope[s]||(this._scope[s]=[]),l=o.length;return o[l]=t.ref,i.setValue(t,{property:s,itemIndex:l}),i}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._values;return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error('CodeGen: name "'.concat(t,'" has no value'));return(0,d._)(r||(r=c(["","",""])),e,t.scopePath)})}scopeCode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._values,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error('CodeGen: name "'.concat(e,'" has no value'));return e.value.code},t,n)}_reduceValues(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0,r=d.nil;for(const l in e){const p=e[l];if(!p)continue;const f=i[l]=i[l]||new Map;p.forEach(e=>{if(f.has(e))return;f.set(e,h.Started);let i=n(e);if(i){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;r=(0,d._)(a||(a=c(["",""," "," = ",";",""])),r,n,e,i,this.opts._n)}else{if(!(i=null===s||void 0===s?void 0:s(e)))throw new u(e);r=(0,d._)(o||(o=c(["","","",""])),r,i,this.opts._n)}f.set(e,h.Completed)})}return r}}},5362(e,t,n){"use strict";const i=n(1674);let s=0;e.exports=e=>{let{id:t,action:n,payload:r={}}=e,a=t;return"undefined"===typeof a&&(a=i("Job",s),s+=1),{id:a,action:n,payload:r}}},5413(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y,b,w,_,x,k,S,A,E,C,M,P,T,D,N,R,F,I,L,O,j,B,W,z,U=n(2897).default,V=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const H=n(6470),q=n(9273),G=n(2392),$=n(9273),K=n(463),X=n(9142),Y=n(6340),Q=n(8584),J=n(266),Z=n(2302),ee=n(8396),te=n(6772);function ne(e,t){let{gen:n,validateName:v,schema:y,schemaEnv:b,opts:w}=e;w.code.es5?n.func(v,(0,Q._)(i||(i=V(["",", ",""])),J.default.data,J.default.valCxt),b.$async,()=>{n.code((0,Q._)(s||(s=V(['"use strict"; ',""])),ie(y,w))),function(e,t){e.if(J.default.valCxt,()=>{e.var(J.default.instancePath,(0,Q._)(l||(l=V(["",".",""])),J.default.valCxt,J.default.instancePath)),e.var(J.default.parentData,(0,Q._)(c||(c=V(["",".",""])),J.default.valCxt,J.default.parentData)),e.var(J.default.parentDataProperty,(0,Q._)(d||(d=V(["",".",""])),J.default.valCxt,J.default.parentDataProperty)),e.var(J.default.rootData,(0,Q._)(u||(u=V(["",".",""])),J.default.valCxt,J.default.rootData)),t.dynamicRef&&e.var(J.default.dynamicAnchors,(0,Q._)(h||(h=V(["",".",""])),J.default.valCxt,J.default.dynamicAnchors))},()=>{e.var(J.default.instancePath,(0,Q._)(p||(p=V(['""'])))),e.var(J.default.parentData,(0,Q._)(f||(f=V(["undefined"])))),e.var(J.default.parentDataProperty,(0,Q._)(m||(m=V(["undefined"])))),e.var(J.default.rootData,J.default.data),t.dynamicRef&&e.var(J.default.dynamicAnchors,(0,Q._)(g||(g=V(["{}"]))))})}(n,w),n.code(t)}):n.func(v,(0,Q._)(r||(r=V(["",", ",""])),J.default.data,function(e){return(0,Q._)(a||(a=V(["{",'="", ',", ",", ","=","","}={}"])),J.default.instancePath,J.default.parentData,J.default.parentDataProperty,J.default.rootData,J.default.data,e.dynamicRef?(0,Q._)(o||(o=V([", ","={}"])),J.default.dynamicAnchors):Q.nil)}(w)),b.$async,()=>n.code(ie(y,w)).code(t))}function ie(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Q._)(S||(S=V(["/*# sourceURL="," */"])),n):Q.nil}function se(e,t){ae(e)&&(oe(e),re(e))?function(e,t){const{schema:n,gen:i,opts:s}=e;s.$comment&&n.$comment&&ce(e);(function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Z.resolveUrl)(e.opts.uriResolver,e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const r=i.const("_errs",J.default.errors);le(e,r),i.var(t,(0,Q._)(A||(A=V([""," === ",""])),r,J.default.errors))}(e,t):(0,H.boolOrEmptySchema)(e,t)}function re(e){let{schema:t,self:n}=e;if("boolean"==typeof t)return!t;for(const i in t)if(n.RULES.all[i])return!0;return!1}function ae(e){return"boolean"!=typeof e.schema}function oe(e){(0,ee.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:i,self:s}=e;t.$ref&&i.ignoreKeywordsWithRef&&(0,ee.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn('$ref: keywords ignored in schema at path "'.concat(n,'"'))}(e)}function le(e,t){if(e.opts.jtd)return de(e,[],!1,t);const n=(0,q.getSchemaTypes)(e.schema);de(e,n,!(0,q.coerceAndCheckDataType)(e,n),t)}function ce(e){let{gen:t,schemaEnv:n,schema:i,errSchemaPath:s,opts:r}=e;const a=i.$comment;if(!0===r.$comment)t.code((0,Q._)(E||(E=V(["",".logger.log(",")"])),J.default.self,a));else if("function"==typeof r.$comment){const e=(0,Q.str)(C||(C=V(["","/$comment"])),s),i=t.scopeValue("root",{ref:n.root});t.code((0,Q._)(M||(M=V(["",".opts.$comment(",", ",", ",".schema)"])),J.default.self,a,e,i))}}function de(e,t,n,i){const{gen:s,schema:r,data:a,allErrors:o,opts:l,self:c}=e,{RULES:d}=c;function u(c){(0,G.shouldUseGroup)(r,c)&&(c.type?(s.if((0,$.checkDataType)(c.type,a,l.strictNumbers)),ue(e,c),1===t.length&&t[0]===c.type&&n&&(s.else(),(0,$.reportTypeError)(e)),s.endIf()):ue(e,c),o||s.if((0,Q._)(I||(I=V([""," === ",""])),J.default.errors,i||0)))}!r.$ref||!l.ignoreKeywordsWithRef&&(0,ee.schemaHasRulesButRef)(r,d)?(l.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach(t=>{pe(e.dataTypes,t)||fe(e,'type "'.concat(t,'" not allowed by context "').concat(e.dataTypes.join(","),'"'))}),function(e,t){const n=[];for(const i of e.dataTypes)pe(t,i)?n.push(i):t.includes("integer")&&"number"===i&&n.push("integer");e.dataTypes=n}(e,t)})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&fe(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const n=e.self.RULES.all;for(const i in n){const s=n[i];if("object"==typeof s&&(0,G.shouldUseRule)(e.schema,s)){const{type:n}=s.definition;n.length&&!n.some(e=>he(t,e))&&fe(e,'missing type "'.concat(n.join(","),'" for keyword "').concat(i,'"'))}}}(e,e.dataTypes)}(e,t),s.block(()=>{for(const e of d.rules)u(e);u(d.post)})):s.block(()=>ge(e,"$ref",d.all.$ref.definition))}function ue(e,t){const{gen:n,schema:i,opts:{useDefaults:s}}=e;s&&(0,K.assignDefaults)(e,t.type),n.block(()=>{for(const n of t.rules)(0,G.shouldUseRule)(i,n)&&ge(e,n.keyword,n.definition,t.type)})}function he(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function pe(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function fe(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=' at "'.concat(n,'" (strictTypes)'),(0,ee.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){ae(e)&&(oe(e),re(e))?function(e){const{schema:t,opts:n,gen:i}=e;ne(e,()=>{n.$comment&&t.$comment&&ce(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,ee.checkStrictMode)(e,"default is ignored in the schema root")}(e),i.let(J.default.vErrors,null),i.let(J.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Q._)(v||(v=V(["",".evaluated"])),n)),t.if((0,Q._)(y||(y=V(["",".dynamicProps"])),e.evaluated),()=>t.assign((0,Q._)(b||(b=V(["",".props"])),e.evaluated),(0,Q._)(w||(w=V(["undefined"]))))),t.if((0,Q._)(_||(_=V(["",".dynamicItems"])),e.evaluated),()=>t.assign((0,Q._)(x||(x=V(["",".items"])),e.evaluated),(0,Q._)(k||(k=V(["undefined"])))))}(e),le(e),function(e){const{gen:t,schemaEnv:n,validateName:i,ValidationError:s,opts:r}=e;n.$async?t.if((0,Q._)(P||(P=V([""," === 0"])),J.default.errors),()=>t.return(J.default.data),()=>t.throw((0,Q._)(T||(T=V(["new ","(",")"])),s,J.default.vErrors))):(t.assign((0,Q._)(D||(D=V(["",".errors"])),i),J.default.vErrors),r.unevaluated&&function(e){let{gen:t,evaluated:n,props:i,items:s}=e;i instanceof Q.Name&&t.assign((0,Q._)(R||(R=V(["",".props"])),n),i);s instanceof Q.Name&&t.assign((0,Q._)(F||(F=V(["",".items"])),n),s)}(e),t.return((0,Q._)(N||(N=V([""," === 0"])),J.default.errors)))}(e)})}(e):ne(e,()=>(0,H.topBoolOrEmptySchema)(e))};class me{constructor(e,t,n){if((0,X.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ee.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",be(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,X.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error("".concat(n," value must be ").concat(JSON.stringify(t.schemaType)));("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",J.default.errors))}result(e,t,n){this.failResult((0,Q.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,Q.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail((0,Q._)(L||(L=V([""," !== undefined && (",")"])),t,(0,Q.or)(this.invalid$data(),e)))}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?te.reportExtraError:te.reportError)(this,this.def.error,t)}$dataError(){(0,te.reportError)(this,this.def.$dataError||te.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,te.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q.nil;this.gen.block(()=>{this.check$data(e,n),t()})}check$data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q.nil,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.nil;if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:s,def:r}=this;n.if((0,Q.or)((0,Q._)(O||(O=V([""," === undefined"])),i),t)),e!==Q.nil&&n.assign(e,!0),(s.length||r.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Q.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:i,it:s}=this;return(0,Q.or)(function(){if(n.length){if(!(t instanceof Q.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return(0,Q._)(j||(j=V(["",""])),(0,$.checkDataTypes)(e,t,s.opts.strictNumbers,$.DataType.Wrong))}return Q.nil}(),function(){if(i.validateSchema){const n=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,Q._)(B||(B=V(["!","(",")"])),n,t)}return Q.nil}())}subschema(e,t){const n=(0,Y.getSubschema)(this.it,e);(0,Y.extendSubschemaData)(n,this.it,e),(0,Y.extendSubschemaMode)(n,e);const i=U(U(U({},this.it),n),{},{items:void 0,props:void 0});return se(i,t),i}mergeEvaluated(e,t){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=ee.mergeEvaluated.props(i,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=ee.mergeEvaluated.items(i,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(t,()=>this.mergeEvaluated(e,Q.Name)),!0}}function ge(e,t,n,i){const s=new me(e,n,t);"code"in n?n.code(s,i):s.$data&&n.validate?(0,X.funcKeywordCode)(s,n):"macro"in n?(0,X.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,X.funcKeywordCode)(s,n)}t.KeywordCxt=me;const ve=/^\/(?:[^~]|~0|~1)*$/,ye=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function be(e,t){let n,i,{dataLevel:s,dataNames:r,dataPathArr:a}=t;if(""===e)return J.default.rootData;if("/"===e[0]){if(!ve.test(e))throw new Error("Invalid JSON-pointer: ".concat(e));n=e,i=J.default.rootData}else{const t=ye.exec(e);if(!t)throw new Error("Invalid JSON-pointer: ".concat(e));const o=+t[1];if(n=t[2],"#"===n){if(o>=s)throw new Error(c("property/index",o));return a[s-o]}if(o>s)throw new Error(c("data",o));if(i=r[s-o],!n)return i}let o=i;const l=n.split("/");for(const d of l)d&&(i=(0,Q._)(W||(W=V(["","",""])),i,(0,Q.getProperty)((0,ee.unescapeJsonPointer)(d))),o=(0,Q._)(z||(z=V([""," && ",""])),o,i));return o;function c(e,t){return"Cannot access ".concat(e," ").concat(t," levels up, current level is ").concat(s)}}t.getData=be},5467(e,t,n){"use strict";var i,s,r=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class a{}t._CodeOrName=a,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class o extends a{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=o;class l extends a{constructor(e){super(),this._items="string"===typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>"".concat(e).concat(t),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof o&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function c(e){const t=[e[0]];let n=0;for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];for(;n<s.length;)h(t,s[n]),t.push(e[++n]);return new l(t)}t._Code=l,t.nil=new l(""),t._=c;const d=new l("+");function u(e){const t=[f(e[0])];let n=0;for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];for(;n<s.length;)t.push(d),h(t,s[n]),t.push(d,f(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===d){const n=p(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(t),new l(t)}function h(e,t){var n;t instanceof l?e.push(...t._items):t instanceof o?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:f(Array.isArray(n)?n.join(","):n))}function p(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof o||'"'!==e[e.length-1])return;return"string"!=typeof t?"".concat(e.slice(0,-1)).concat(t,'"'):'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof o?void 0:'"'.concat(e).concat(t.slice(1))}function f(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=u,t.addCodeArg=h,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:u(i||(i=r(["","",""])),e,t)},t.stringify=function(e){return new l(f(e))},t.safeStringify=f,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new l(".".concat(e)):c(s||(s=r(["[","]"])),e)},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new l("".concat(e));throw new Error("CodeGen: invalid export name: ".concat(e,", use explicit $id name mapping"))},t.regexpCode=function(e){return new l(e.toString())}},5532(e,t,n){"use strict";var i,s,r=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const a=n(656),o=n(8584),l=n(8396),c=n(8396),d={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:d,parentSchema:u,it:h}=e,{opts:p}=h,f=(0,a.allSchemaProperties)(n),m=f.filter(e=>(0,l.alwaysValidSchema)(h,n[e]));if(0===f.length||m.length===f.length&&(!h.opts.unevaluated||!0===h.props))return;const g=p.strictSchema&&!p.allowMatchingProperties&&u.properties,v=t.name("valid");!0===h.props||h.props instanceof o.Name||(h.props=(0,c.evaluatedPropsToName)(t,h.props));const{props:y}=h;function b(e){for(const t in g)new RegExp(e).test(t)&&(0,l.checkStrictMode)(h,"property ".concat(t," matches pattern ").concat(e," (use allowMatchingProperties)"))}function w(n){t.forIn("key",d,l=>{t.if((0,o._)(i||(i=r(["",".test(",")"])),(0,a.usePattern)(e,n),l),()=>{const i=m.includes(n);i||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:l,dataPropType:c.Type.Str},v),h.opts.unevaluated&&!0!==y?t.assign((0,o._)(s||(s=r(["","[","]"])),y,l),!0):i||h.allErrors||t.if((0,o.not)(v),()=>t.break())})})}!function(){for(const e of f)g&&b(e),h.allErrors?w(e):(t.var(v,!0),w(e),t.if(v))}()}};t.default=d},5597(e,t){"use strict";var n=this;let i=!1;t.logging=i,t.setLogging=e=>{i=e},t.log=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i?console.log.apply(n,t):null}},5783(e){"use strict";e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},5801(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8396),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const r=t.name("valid");n.forEach((t,n)=>{if((0,i.alwaysValidSchema)(s,t))return;const a=e.subschema({keyword:"allOf",schemaProp:n},r);e.ok(r),e.mergeEvaluated(a)})}};t.default=s},6099(e){"use strict";const t=RegExp.prototype.test.bind(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])$/);function i(e){let t="",n=0,i=0;for(i=0;i<e.length;i++)if(n=e[i].charCodeAt(0),48!==n){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[i];break}for(i+=1;i<e.length;i++){if(n=e[i].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[i]}return t}const s=RegExp.prototype.test.bind(/(?:[\0- #%\/-:<>-\^\|\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/);function r(e){return e.length=0,!0}function a(e,t,n){if(e.length){const s=i(e);if(""===s)return n.error=!0,!1;t.push(s),e.length=0}return!0}function o(e){if(function(e,t){let n=0;for(let i=0;i<e.length;i++)e[i]===t&&n++;return n}(e,":")<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const n={error:!1,address:"",zone:""},s=[],o=[];let l=!1,c=!1,d=a;for(let i=0;i<e.length;i++){const a=e[i];if("["!==a&&"]"!==a)if(":"!==a)if("%"===a){if(!d(o,s,n))break;d=r}else o.push(a);else{if(!0===l&&(c=!0),!d(o,s,n))break;if(++t>7){n.error=!0;break}i>0&&":"===e[i-1]&&(l=!0),s.push(":")}}return o.length&&(d===r?n.zone=o.join(""):c?s.push(o.join("")):s.push(i(o))),n.address=s.join(""),n}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,n=t.address;return t.zone&&(e+="%"+t.zone,n+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:n}}}e.exports={nonSimpleDomain:s,recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let i=unescape(e.host);if(!n(i)){const t=o(i);i=!0===t.isIPV6?"[".concat(t.escapedHost,"]"):e.host}t.push(i)}return"number"!==typeof e.port&&"string"!==typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const n=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=n(e.scheme)),void 0!==e.userinfo&&(e.userinfo=n(e.userinfo)),void 0!==e.host&&(e.host=n(e.host)),void 0!==e.path&&(e.path=n(e.path)),void 0!==e.query&&(e.query=n(e.query)),void 0!==e.fragment&&(e.fragment=n(e.fragment)),e},removeDotSegments:function(e){let t=e;const n=[];let i=-1,s=0;for(;s=t.length;){if(1===s){if("."===t)break;if("/"===t){n.push("/");break}n.push(t);break}if(2===s){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){n.push("/");break}}else if(3===s&&"/.."===t){0!==n.length&&n.pop(),n.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==n.length&&n.pop();continue}}if(-1===(i=t.indexOf("/",1))){n.push(t);break}n.push(t.slice(0,i)),t=t.slice(i)}return n.join("")},isIPv4:n,isUUID:t,normalizeIPv6:o,stringArrayToHexStripped:i}},6125(e){"use strict";e.exports={rE:"7.0.0"}},6171(e){"use strict";e.exports=(e,t)=>{e.onmessage=e=>{let{data:n}=e;t(n)}}},6280(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},6340(e,t,n){"use strict";var i,s,r,a,o,l=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const c=n(8584),d=n(8396);t.getSubschema=function(e,t){let{keyword:n,schemaProp:r,schema:a,schemaPath:o,errSchemaPath:u,topSchemaRef:h}=t;if(void 0!==n&&void 0!==a)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==n){const t=e.schema[n];return void 0===r?{schema:t,schemaPath:(0,c._)(i||(i=l(["","",""])),e.schemaPath,(0,c.getProperty)(n)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(n)}:{schema:t[r],schemaPath:(0,c._)(s||(s=l(["","","",""])),e.schemaPath,(0,c.getProperty)(n),(0,c.getProperty)(r)),errSchemaPath:"".concat(e.errSchemaPath,"/").concat(n,"/").concat((0,d.escapeFragment)(r))}}if(void 0!==a){if(void 0===o||void 0===u||void 0===h)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:o,topSchemaRef:h,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,n){let{dataProp:i,dataPropType:s,data:u,dataTypes:h,propertyName:p}=n;if(void 0!==u&&void 0!==i)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=t;if(void 0!==i){const{errorPath:n,dataPathArr:u,opts:h}=t;m(f.let("data",(0,c._)(r||(r=l(["","",""])),t.data,(0,c.getProperty)(i)),!0)),e.errorPath=(0,c.str)(a||(a=l(["","",""])),n,(0,d.getErrorPath)(i,s,h.jsPropertySyntax)),e.parentDataProperty=(0,c._)(o||(o=l(["",""])),i),e.dataPathArr=[...u,e.parentDataProperty]}if(void 0!==u){m(u instanceof c.Name?u:f.let("data",u,!0)),void 0!==p&&(e.propertyName=p)}function m(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}h&&(e.dataTypes=h)},t.extendSubschemaMode=function(e,t){let{jtdDiscriminator:n,jtdMetadata:i,compositeRule:s,createErrors:r,allErrors:a}=t;void 0!==s&&(e.compositeRule=s),void 0!==r&&(e.createErrors=r),void 0!==a&&(e.allErrors=a),e.jtdDiscriminator=n,e.jtdMetadata=i}},6386(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const g=n(8584),v=n(8396),y={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:e=>{let{params:{min:t,max:n}}=e;return void 0===n?(0,g.str)(i||(i=m(["must contain at least "," valid item(s)"])),t):(0,g.str)(s||(s=m(["must contain at least "," and no more than "," valid item(s)"])),t,n)},params:e=>{let{params:{min:t,max:n}}=e;return void 0===n?(0,g._)(r||(r=m(["{minContains: ","}"])),t):(0,g._)(a||(a=m(["{minContains: ",", maxContains: ","}"])),t,n)}},code(e){const{gen:t,schema:n,parentSchema:i,data:s,it:r}=e;let a,y;const{minContains:b,maxContains:w}=i;r.opts.next?(a=void 0===b?1:b,y=w):a=1;const _=t.const("len",(0,g._)(o||(o=m(["",".length"])),s));if(e.setParams({min:a,max:y}),void 0===y&&0===a)return void(0,v.checkStrictMode)(r,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==y&&a>y)return(0,v.checkStrictMode)(r,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,v.alwaysValidSchema)(r,n)){let t=(0,g._)(l||(l=m([""," >= ",""])),_,a);return void 0!==y&&(t=(0,g._)(c||(c=m([""," && "," <= ",""])),t,_,y)),void e.pass(t)}r.items=!0;const x=t.name("valid");function k(){const e=t.name("_valid"),n=t.let("count",0);S(e,()=>t.if(e,()=>function(e){t.code((0,g._)(u||(u=m(["","++"])),e)),void 0===y?t.if((0,g._)(h||(h=m([""," >= ",""])),e,a),()=>t.assign(x,!0).break()):(t.if((0,g._)(p||(p=m([""," > ",""])),e,y),()=>t.assign(x,!1).break()),1===a?t.assign(x,!0):t.if((0,g._)(f||(f=m([""," >= ",""])),e,a),()=>t.assign(x,!0)))}(n)))}function S(n,i){t.forRange("i",0,_,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:v.Type.Num,compositeRule:!0},n),i()})}void 0===y&&1===a?S(x,()=>t.if(x,()=>t.break())):0===a?(t.let(x,!0),void 0!==y&&t.if((0,g._)(d||(d=m(["",".length > 0"])),s),k)):(t.let(x,!1),k()),e.result(x,()=>e.reset())}};t.default=y},6470(e,t,n){"use strict";var i,s=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const r=n(6772),a=n(8584),o=n(266),l={message:"boolean schema is false"};function c(e,t){const{gen:n,data:i}=e,s={gen:n,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,r.reportError)(s,l,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?c(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign((0,a._)(i||(i=s(["",".errors"])),r),null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:i}=e;!1===i?(n.var(t,!1),c(e)):n.var(t,!0)}},6480(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y,b,w=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const _=n(9273),x=n(8584),k=n(8396),S=n(2979),A={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:e=>{let{params:{i:t,j:n}}=e;return(0,x.str)(i||(i=w(["must NOT have duplicate items (items ## "," and "," are identical)"])),n,t)},params:e=>{let{params:{i:t,j:n}}=e;return(0,x._)(s||(s=w(["{i: ",", j: ","}"])),t,n)}},code(e){const{gen:t,data:n,$data:i,schema:s,parentSchema:A,schemaCode:E,it:C}=e;if(!i&&!s)return;const M=t.let("valid"),P=A.items?(0,_.getSchemaTypes)(A.items):[];function T(i,s){const r=t.name("item"),a=(0,_.checkDataTypes)(P,r,C.opts.strictNumbers,_.DataType.Wrong),o=t.const("indices",(0,x._)(l||(l=w(["{}"]))));t.for((0,x._)(c||(c=w([";","--;"])),i),()=>{t.let(r,(0,x._)(d||(d=w(["","[","]"])),n,i)),t.if(a,(0,x._)(u||(u=w(["continue"])))),P.length>1&&t.if((0,x._)(h||(h=w(["typeof ",' == "string"'])),r),(0,x._)(p||(p=w(["",' += "_"'])),r)),t.if((0,x._)(f||(f=w(["typeof ","[",'] == "number"'])),o,r),()=>{t.assign(s,(0,x._)(m||(m=w(["","[","]"])),o,r)),e.error(),t.assign(M,!1).break()}).code((0,x._)(g||(g=w(["","[","] = ",""])),o,r,i))})}function D(i,s){const r=(0,k.useFunc)(t,S.default),a=t.name("outer");t.label(a).for((0,x._)(v||(v=w([";","--;"])),i),()=>t.for((0,x._)(y||(y=w([""," = ","; ","--;"])),s,i,s),()=>t.if((0,x._)(b||(b=w(["","(","[","], ","[","])"])),r,n,i,n,s),()=>{e.error(),t.assign(M,!1).break(a)})))}e.block$data(M,function(){const i=t.let("i",(0,x._)(a||(a=w(["",".length"])),n)),s=t.let("j");e.setParams({i:i,j:s}),t.assign(M,!0),t.if((0,x._)(o||(o=w([""," > 1"])),i),()=>(P.length>0&&!P.some(e=>"object"===e||"array"===e)?T:D)(i,s))},(0,x._)(r||(r=w([""," === false"])),E)),e.ok(M)}};t.default=A},6623(e,t,n){"use strict";var i,s,r,a=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const o=n(8584),l=o.operators,c={maximum:{okStr:"<=",ok:l.LTE,fail:l.GT},minimum:{okStr:">=",ok:l.GTE,fail:l.LT},exclusiveMaximum:{okStr:"<",ok:l.LT,fail:l.GTE},exclusiveMinimum:{okStr:">",ok:l.GT,fail:l.LTE}},d={message:e=>{let{keyword:t,schemaCode:n}=e;return(0,o.str)(i||(i=a(["must be "," ",""])),c[t].okStr,n)},params:e=>{let{keyword:t,schemaCode:n}=e;return(0,o._)(s||(s=a(["{comparison: ",", limit: ","}"])),c[t].okStr,n)}},u={keyword:Object.keys(c),type:"number",schemaType:"number",$data:!0,error:d,code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data((0,o._)(r||(r=a([""," "," "," || isNaN(",")"])),n,c[t].fail,i,n))}};t.default=u},6677(e){"use strict";e.exports=async(e,t)=>{e.postMessage(t)}},6706(e){"use strict";e.exports={workerBlobURL:!0,logger:()=>{}}},6740(e,t,n){"use strict";var i,s,r,a,o=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const l=n(8584),c=n(8396),d=n(2979),u={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:e=>{let{schemaCode:t}=e;return(0,l._)(i||(i=o(["{allowedValues: ","}"])),t)}},code(e){const{gen:t,data:n,$data:i,schema:u,schemaCode:h,it:p}=e;if(!i&&0===u.length)throw new Error("enum must have non-empty array");const f=u.length>=p.opts.loopEnum;let m;const g=()=>null!==m&&void 0!==m?m:m=(0,c.useFunc)(t,d.default);let v;if(f||i)v=t.let("valid"),e.block$data(v,function(){t.assign(v,!1),t.forOf("v",h,e=>t.if((0,l._)(s||(s=o(["","(",", ",")"])),g(),n,e),()=>t.assign(v,!0).break()))});else{if(!Array.isArray(u))throw new Error("ajv implementation error");const e=t.const("vSchema",h);v=(0,l.or)(...u.map((t,i)=>function(e,t){const i=u[t];return"object"===typeof i&&null!==i?(0,l._)(r||(r=o(["","(",", ","[","])"])),g(),n,e,t):(0,l._)(a||(a=o([""," === ",""])),n,i)}(e,i)))}e.pass(v)}};t.default=u},6754(e,t){"use strict";function n(e){const t=e.length;let n,i=0,s=0;for(;s<t;)i++,n=e.charCodeAt(s++),n>=55296&&n<=56319&&s<t&&(n=e.charCodeAt(s),56320===(64512&n)&&s++);return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},6772(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y,b,w,_,x,k,S,A,E,C,M=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const P=n(8584),T=n(8396),D=n(266);function N(e,t){const n=e.const("err",t);e.if((0,P._)(g||(g=M([""," === null"])),D.default.vErrors),()=>e.assign(D.default.vErrors,(0,P._)(v||(v=M(["[","]"])),n)),(0,P._)(y||(y=M(["",".push(",")"])),D.default.vErrors,n)),e.code((0,P._)(b||(b=M(["","++"])),D.default.errors))}function R(e,t){const{gen:n,validateName:i,schemaEnv:s}=e;s.$async?n.throw((0,P._)(w||(w=M(["new ","(",")"])),e.ValidationError,t)):(n.assign((0,P._)(_||(_=M(["",".errors"])),i),t),n.return(!1))}t.keywordError={message:e=>{let{keyword:t}=e;return(0,P.str)(i||(i=M(['must pass "','" keyword validation'])),t)}},t.keyword$DataError={message:e=>{let{keyword:t,schemaType:n}=e;return n?(0,P.str)(s||(s=M(['"','" keyword must be '," ($data)"])),t,n):(0,P.str)(r||(r=M(['"','" keyword is invalid ($data)'])),t)}},t.reportError=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.keywordError,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const{it:r}=e,{gen:o,compositeRule:l,allErrors:c}=r,d=I(e,n,i);(null!==s&&void 0!==s?s:l||c)?N(o,d):R(r,(0,P._)(a||(a=M(["[","]"])),d))},t.reportExtraError=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.keywordError,i=arguments.length>2?arguments[2]:void 0;const{it:s}=e,{gen:r,compositeRule:a,allErrors:o}=s;N(r,I(e,n,i)),a||o||R(s,D.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(D.default.errors,t),e.if((0,P._)(o||(o=M([""," !== null"])),D.default.vErrors),()=>e.if(t,()=>e.assign((0,P._)(l||(l=M(["",".length"])),D.default.vErrors),t),()=>e.assign(D.default.vErrors,null)))},t.extendErrors=function(e){let{gen:t,keyword:n,schemaValue:i,data:s,errsCount:r,it:a}=e;if(void 0===r)throw new Error("ajv implementation error");const o=t.name("err");t.forRange("i",r,D.default.errors,e=>{t.const(o,(0,P._)(c||(c=M(["","[","]"])),D.default.vErrors,e)),t.if((0,P._)(d||(d=M(["",".instancePath === undefined"])),o),()=>t.assign((0,P._)(u||(u=M(["",".instancePath"])),o),(0,P.strConcat)(D.default.instancePath,a.errorPath))),t.assign((0,P._)(h||(h=M(["",".schemaPath"])),o),(0,P.str)(p||(p=M(["","/",""])),a.errSchemaPath,n)),a.opts.verbose&&(t.assign((0,P._)(f||(f=M(["",".schema"])),o),i),t.assign((0,P._)(m||(m=M(["",".data"])),o),s))})};const F={keyword:new P.Name("keyword"),schemaPath:new P.Name("schemaPath"),params:new P.Name("params"),propertyName:new P.Name("propertyName"),message:new P.Name("message"),schema:new P.Name("schema"),parentSchema:new P.Name("parentSchema")};function I(e,t,n){const{createErrors:i}=e.it;return!1===i?(0,P._)(x||(x=M(["{}"]))):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{gen:i,it:s}=e,r=[L(s,n),O(e,n)];return function(e,t,n){let{params:i,message:s}=t;const{keyword:r,data:a,schemaValue:o,it:l}=e,{opts:c,propertyName:d,topSchemaRef:u,schemaPath:h}=l;n.push([F.keyword,r],[F.params,"function"==typeof i?i(e):i||(0,P._)(E||(E=M(["{}"])))]),c.messages&&n.push([F.message,"function"==typeof s?s(e):s]);c.verbose&&n.push([F.schema,o],[F.parentSchema,(0,P._)(C||(C=M(["","",""])),u,h)],[D.default.data,a]);d&&n.push([F.propertyName,d])}(e,t,r),i.object(...r)}(e,t,n)}function L(e,t){let{errorPath:n}=e,{instancePath:i}=t;const s=i?(0,P.str)(k||(k=M(["","",""])),n,(0,T.getErrorPath)(i,T.Type.Str)):n;return[D.default.instancePath,(0,P.strConcat)(D.default.instancePath,s)]}function O(e,t){let{keyword:n,it:{errSchemaPath:i}}=e,{schemaPath:s,parentSchema:r}=t,a=r?i:(0,P.str)(S||(S=M(["","/",""])),i,n);return s&&(a=(0,P.str)(A||(A=M(["","",""])),a,(0,T.getErrorPath)(s,T.Type.Str))),[F.schemaPath,a]}},6817(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=n},7003(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const i=n(9281),s=n(9497),r=n(138),a=n(2079),o=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends i.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(r.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,o):a;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=n(5413);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=n(8584);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=n(6817);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var p=n(9550);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})},7092(e){"use strict";e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},7234(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,a=s>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,d=e[c];if(0>r(l,n))c<s&&0>r(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<s&&0>r(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function _(e){if(g=!1,w(e),!m)if(null!==i(c))m=!0,R(x);else{var t=i(d);null!==t&&F(_,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(E),E=-1),f=!0;var r=p;try{for(w(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===i(c)&&s(c),w(n)}else s(c);h=i(c)}if(null!==h)var l=!0;else{var u=i(d);null!==u&&F(_,u.startTime-n),l=!1}return l}finally{h=null,p=r,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,A=null,E=-1,C=5,M=-1;function P(){return!(t.unstable_now()-M<C)}function T(){if(null!==A){var e=t.unstable_now();M=e;var n=!0;try{n=A(!0,e)}finally{n?k():(S=!1,A=null)}}else S=!1}if("function"===typeof b)k=function(){b(T)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,N=D.port2;D.port1.onmessage=T,k=function(){N.postMessage(null)}}else k=function(){v(T,0)};function R(e){A=e,S||(S=!0,k())}function F(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,r){var a=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?a+r:a:r=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>a?(e.sortIndex=r,n(d,e),null===i(c)&&e===i(d)&&(g?(y(E),E=-1):g=!0,F(_,r-a))):(e.sortIndex=o,n(c,e),m||f||(m=!0,R(x))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7352(e,t,n){"use strict";var i,s,r,a,o,l=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const c=n(8584),d={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:e=>{let{schemaCode:t}=e;return(0,c.str)(i||(i=l(["must be multiple of ",""])),t)},params:e=>{let{schemaCode:t}=e;return(0,c._)(s||(s=l(["{multipleOf: ","}"])),t)}},code(e){const{gen:t,data:n,schemaCode:i,it:s}=e,d=s.opts.multipleOfPrecision,u=t.let("res"),h=d?(0,c._)(r||(r=l(["Math.abs(Math.round(",") - ",") > 1e-",""])),u,u,d):(0,c._)(a||(a=l([""," !== parseInt(",")"])),u,u);e.fail$data((0,c._)(o||(o=l(["("," === 0 || ("," = ","/",", ","))"])),i,u,n,i,h))}};t.default=d},7599(e,t,n){"use strict";var i=n(2897).default;const s="browser"===n(1734)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t=i({},e);return["corePath","workerPath","langPath"].forEach(n=>{e[n]&&(t[n]=s(t[n]))}),t}},7736(e,t,n){var i=n(3738).default,s=n(9045);e.exports=function(e){var t=s(e,"string");return"symbol"==i(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7864(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const h=n(7003),p=n(8584),f=p.operators,m={formatMaximum:{okStr:"<=",ok:f.LTE,fail:f.GT},formatMinimum:{okStr:">=",ok:f.GTE,fail:f.LT},formatExclusiveMaximum:{okStr:"<",ok:f.LT,fail:f.GTE},formatExclusiveMinimum:{okStr:">",ok:f.GT,fail:f.LTE}},g={message:e=>{let{keyword:t,schemaCode:n}=e;return p.str(i||(i=u(["should be "," ",""])),m[t].okStr,n)},params:e=>{let{keyword:t,schemaCode:n}=e;return p._(s||(s=u(["{comparison: ",", limit: ","}"])),m[t].okStr,n)}};t.formatLimitDefinition={keyword:Object.keys(m),type:"string",schemaType:"string",$data:!0,error:g,code(e){const{gen:t,data:n,schemaCode:i,keyword:s,it:f}=e,{opts:g,self:v}=f;if(!g.validateFormats)return;const y=new h.KeywordCxt(f,v.RULES.all.format.definition,"format");function b(e){return p._(d||(d=u(["",".compare(",", ",") "," 0"])),e,n,i,m[s].fail)}y.$data?function(){const n=t.scopeValue("formats",{ref:v.formats,code:g.code.formats}),i=t.const("fmt",p._(r||(r=u(["","[","]"])),n,y.schemaCode));e.fail$data(p.or(p._(a||(a=u(["typeof ",' != "object"'])),i),p._(o||(o=u([""," instanceof RegExp"])),i),p._(l||(l=u(["typeof ",'.compare != "function"'])),i),b(i)))}():function(){const n=y.schema,i=v.formats[n];if(!i||!0===i)return;if("object"!=typeof i||i instanceof RegExp||"function"!=typeof i.compare)throw new Error('"'.concat(s,'": format "').concat(n,'" does not define "compare" function'));const r=t.scopeValue("formats",{key:n,ref:i,code:g.code.formats?p._(c||(c=u(["","",""])),g.code.formats,p.getProperty(n)):void 0});e.fail$data(b(r))}()},dependencies:["format"]};t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},7950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},7968(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const p=n(9550),f=n(656),m=n(8584),g=n(266),v=n(1762),y=n(8396),b={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:s}=e,{baseId:r,schemaEnv:a,validateName:o,opts:l,self:c}=s,{root:d}=a;if(("#"===n||"#/"===n)&&r===d.baseId)return function(){if(a===d)return _(e,o,a,a.$async);const n=t.scopeValue("root",{ref:d});return _(e,(0,m._)(i||(i=h(["",".validate"])),n),d,d.$async)}();const u=v.resolveRef.call(c,d,r,n);if(void 0===u)throw new p.default(s.opts.uriResolver,r,n);return u instanceof v.SchemaEnv?function(t){const n=w(e,t);_(e,n,t,t.$async)}(u):function(i){const s=t.scopeValue("schema",!0===l.code.source?{ref:i,code:(0,m.stringify)(i)}:{ref:i}),r=t.name("valid"),a=e.subschema({schema:i,dataTypes:[],schemaPath:m.nil,topSchemaRef:s,errSchemaPath:n},r);e.mergeEvaluated(a),e.ok(r)}(u)}};function w(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,m._)(s||(s=h(["",".validate"])),n.scopeValue("wrapper",{ref:t}))}function _(e,t,n,i){const{gen:s,it:p}=e,{allErrors:v,schemaEnv:b,opts:w}=p,_=w.passContext?g.default.this:m.nil;function x(e){const t=(0,m._)(o||(o=h(["",".errors"])),e);s.assign(g.default.vErrors,(0,m._)(l||(l=h([""," === null ? "," : ",".concat(",")"])),g.default.vErrors,t,g.default.vErrors,t)),s.assign(g.default.errors,(0,m._)(c||(c=h(["",".length"])),g.default.vErrors))}function k(e){var t;if(!p.opts.unevaluated)return;const i=null===(t=null===n||void 0===n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==p.props)if(i&&!i.dynamicProps)void 0!==i.props&&(p.props=y.mergeEvaluated.props(s,i.props,p.props));else{const t=s.var("props",(0,m._)(d||(d=h(["",".evaluated.props"])),e));p.props=y.mergeEvaluated.props(s,t,p.props,m.Name)}if(!0!==p.items)if(i&&!i.dynamicItems)void 0!==i.items&&(p.items=y.mergeEvaluated.items(s,i.items,p.items));else{const t=s.var("items",(0,m._)(u||(u=h(["",".evaluated.items"])),e));p.items=y.mergeEvaluated.items(s,t,p.items,m.Name)}}i?function(){if(!b.$async)throw new Error("async schema referenced by sync schema");const n=s.let("valid");s.try(()=>{s.code((0,m._)(r||(r=h(["await ",""])),(0,f.callValidateCode)(e,t,_))),k(t),v||s.assign(n,!0)},e=>{s.if((0,m._)(a||(a=h(["!("," instanceof ",")"])),e,p.ValidationError),()=>s.throw(e)),x(e),v||s.assign(n,!1)}),e.ok(n)}():e.result((0,f.callValidateCode)(e,t,_),()=>k(t),()=>x(t))}t.getValidate=w,t.callRef=_,t.default=b},8211(e,t,n){"use strict";var i,s,r,a=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const o=n(8584),l={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message(e){let{keyword:t,schemaCode:n}=e;const s="maxProperties"===t?"more":"fewer";return(0,o.str)(i||(i=a(["must NOT have "," than "," properties"])),s,n)},params:e=>{let{schemaCode:t}=e;return(0,o._)(s||(s=a(["{limit: ","}"])),t)}},code(e){const{keyword:t,data:n,schemaCode:i}=e,s="maxProperties"===t?o.operators.GT:o.operators.LT;e.fail$data((0,o._)(r||(r=a(["Object.keys(",").length "," ",""])),n,s,i))}};t.default=l},8218(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8396),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:s}=e;if((0,i.alwaysValidSchema)(s,n))return void e.fail();const r=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},r),e.failResult(r,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=s},8396(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y,b,w,_=n(2897).default,x=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const k=n(8584),S=n(5467);function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.schema;const{opts:n,self:i}=e;if(!n.strictSchema)return;if("boolean"===typeof t)return;const s=i.RULES.keywords;for(const r in t)s[r]||F(e,'unknown keyword: "'.concat(r,'"'))}function E(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function C(e){return"number"==typeof e?"".concat(e):e.replace(/~/g,"~0").replace(/\//g,"~1")}function M(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function P(e){let{mergeNames:t,mergeToName:n,mergeValues:i,resultToName:s}=e;return(e,r,a,o)=>{const l=void 0===a?r:a instanceof k.Name?(r instanceof k.Name?t(e,r,a):n(e,r,a),a):r instanceof k.Name?(n(e,a,r),r):i(r,a);return o!==k.Name||l instanceof k.Name?l:s(e,l)}}function T(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",(0,k._)(m||(m=x(["{}"]))));return void 0!==t&&D(e,n,t),n}function D(e,t,n){Object.keys(n).forEach(n=>e.assign((0,k._)(g||(g=x(["","",""])),t,(0,k.getProperty)(n)),!0))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(A(e,t),!E(t,e.self.RULES.all))},t.checkUnknownRules=A,t.schemaHasRules=E,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function(e,t,n,r){let{topSchemaRef:a,schemaPath:o}=e;if(!r){if("number"==typeof t||"boolean"==typeof t)return t;if("string"==typeof t)return(0,k._)(i||(i=x(["",""])),t)}return(0,k._)(s||(s=x(["","","",""])),a,o,(0,k.getProperty)(n))},t.unescapeFragment=function(e){return M(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(C(e))},t.escapeJsonPointer=C,t.unescapeJsonPointer=M,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:P({mergeNames:(e,t,n)=>e.if((0,k._)(r||(r=x([""," !== true && "," !== undefined"])),n,t),()=>{e.if((0,k._)(a||(a=x([""," === true"])),t),()=>e.assign(n,!0),()=>e.assign(n,(0,k._)(o||(o=x([""," || {}"])),n)).code((0,k._)(l||(l=x(["Object.assign(",", ",")"])),n,t)))}),mergeToName:(e,t,n)=>e.if((0,k._)(c||(c=x([""," !== true"])),n),()=>{!0===t?e.assign(n,!0):(e.assign(n,(0,k._)(d||(d=x([""," || {}"])),n)),D(e,n,t))}),mergeValues:(e,t)=>!0===e||_(_({},e),t),resultToName:T}),items:P({mergeNames:(e,t,n)=>e.if((0,k._)(u||(u=x([""," !== true && "," !== undefined"])),n,t),()=>e.assign(n,(0,k._)(h||(h=x([""," === true ? true : "," > "," ? "," : ",""])),t,n,t,n,t))),mergeToName:(e,t,n)=>e.if((0,k._)(p||(p=x([""," !== true"])),n),()=>e.assign(n,!0===t||(0,k._)(f||(f=x([""," > "," ? "," : ",""])),n,t,n,t))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=T,t.setEvaluated=D;const N={};var R;function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.opts.strictSchema;if(n){if(t="strict mode: ".concat(t),!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:N[t.code]||(N[t.code]=new S._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(R||(t.Type=R={})),t.getErrorPath=function(e,t,n){if(e instanceof k.Name){const i=t===R.Num;return n?i?(0,k._)(v||(v=x(['"[" + ',' + "]"'])),e):(0,k._)(y||(y=x(['"[\'" + ',' + "\']"'])),e):i?(0,k._)(b||(b=x(['"/" + ',""])),e):(0,k._)(w||(w=x(['"/" + ','.replace(/~/g, "~0").replace(/\\//g, "~1")'],['"/" + ','.replace(/~/g, "~0").replace(/\\\\//g, "~1")'])),e)}return n?(0,k.getProperty)(e).toString():"/"+C(e)},t.checkStrictMode=F},8584(e,t,n){"use strict";var i,s,r,a,o,l,c=n(166).default,d=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const u=n(5467),h=n(5280);var p=n(5467);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return p.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return p.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return p.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return p.Name}});var f=n(5280);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return f.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return f.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return f.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return f.varKinds}}),t.operators={GT:new u._Code(">"),GTE:new u._Code(">="),LT:new u._Code("<"),LTE:new u._Code("<="),EQ:new u._Code("==="),NEQ:new u._Code("!=="),NOT:new u._Code("!"),OR:new u._Code("||"),AND:new u._Code("&&"),ADD:new u._Code("+")};class m{optimizeNodes(){return this}optimizeNames(e,t){return this}}class g extends m{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render(e){let{es5:t,_n:n}=e;const i=t?h.varKinds.var:this.varKind,s=void 0===this.rhs?"":" = ".concat(this.rhs);return"".concat(i," ").concat(this.name).concat(s,";")+n}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,e,t)),this}get names(){return this.rhs instanceof u._CodeOrName?this.rhs.names:{}}}class v extends m{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render(e){let{_n:t}=e;return"".concat(this.lhs," = ").concat(this.rhs,";")+t}optimizeNames(e,t){if(!(this.lhs instanceof u.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=B(this.rhs,e,t),this}get names(){return j(this.lhs instanceof u.Name?{}:d({},this.lhs.names),this.rhs)}}class y extends v{constructor(e,t,n,i){super(e,n,i),this.op=t}render(e){let{_n:t}=e;return"".concat(this.lhs," ").concat(this.op,"= ").concat(this.rhs,";")+t}}class b extends m{constructor(e){super(),this.label=e,this.names={}}render(e){let{_n:t}=e;return"".concat(this.label,":")+t}}class w extends m{constructor(e){super(),this.label=e,this.names={}}render(e){let{_n:t}=e;const n=this.label?" ".concat(this.label):"";return"break".concat(n,";")+t}}class _ extends m{constructor(e){super(),this.error=e}render(e){let{_n:t}=e;return"throw ".concat(this.error,";")+t}get names(){return this.error.names}}class x extends m{constructor(e){super(),this.code=e}render(e){let{_n:t}=e;return"".concat(this.code,";")+t}optimizeNodes(){return"".concat(this.code)?this:void 0}optimizeNames(e,t){return this.code=B(this.code,e,t),this}get names(){return this.code instanceof u._CodeOrName?this.code.names:{}}}class k extends m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.nodes=e}render(e){return this.nodes.reduce((t,n)=>t+n.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let i=n.length;for(;i--;){const s=n[i];s.optimizeNames(e,t)||(W(e,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>O(e,t.names),{})}}class S extends k{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class A extends k{}class E extends S{}E.kind="else";class C extends S{constructor(e,t){super(t),this.condition=e}render(e){let t="if(".concat(this.condition,")")+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new E(e):e}return t?!1===e?t instanceof C?t:t.nodes:this.nodes.length?this:new C(z(e),t instanceof C?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=B(this.condition,e,t),this}get names(){const e=super.names;return j(e,this.condition),this.else&&O(e,this.else.names),e}}C.kind="if";class M extends S{}M.kind="for";class P extends M{constructor(e){super(),this.iteration=e}render(e){return"for(".concat(this.iteration,")")+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=B(this.iteration,e,t),this}get names(){return O(super.names,this.iteration.names)}}class T extends M{constructor(e,t,n,i){super(),this.varKind=e,this.name=t,this.from=n,this.to=i}render(e){const t=e.es5?h.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return"for(".concat(t," ").concat(n,"=").concat(i,"; ").concat(n,"<").concat(s,"; ").concat(n,"++)")+super.render(e)}get names(){const e=j(super.names,this.from);return j(e,this.to)}}class D extends M{constructor(e,t,n,i){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=i}render(e){return"for(".concat(this.varKind," ").concat(this.name," ").concat(this.loop," ").concat(this.iterable,")")+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=B(this.iterable,e,t),this}get names(){return O(super.names,this.iterable.names)}}class N extends S{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){const t=this.async?"async ":"";return"".concat(t,"function ").concat(this.name,"(").concat(this.args,")")+super.render(e)}}N.kind="func";class R extends k{render(e){return"return "+super.render(e)}}R.kind="return";class F extends S{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,i;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(i=this.finally)||void 0===i||i.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&O(e,this.catch.names),this.finally&&O(e,this.finally.names),e}}class I extends S{constructor(e){super(),this.error=e}render(e){return"catch(".concat(this.error,")")+super.render(e)}}I.kind="catch";class L extends S{render(e){return"finally"+super.render(e)}}L.kind="finally";function O(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function j(e,t){return t instanceof u._CodeOrName?O(e,t.names):e}function B(e,t,n){return e instanceof u.Name?s(e):(i=e)instanceof u._Code&&i._items.some(e=>e instanceof u.Name&&1===t[e.str]&&void 0!==n[e.str])?new u._Code(e._items.reduce((e,t)=>(t instanceof u.Name&&(t=s(t)),t instanceof u._Code?e.push(...t._items):e.push(t),e),[])):e;var i;function s(e){const i=n[e.str];return void 0===i||1!==t[e.str]?e:(delete t[e.str],i)}}function W(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function z(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,u._)(a||(a=c(["!",""])),q(e))}t.CodeGen=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._values={},this._blockStarts=[],this._constants={},this.opts=d(d({},t),{},{_n:t.lines?"\n":""}),this._extScope=e,this._scope=new h.Scope({parent:e}),this._nodes=[new A]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,i){const s=this._scope.toName(t);return void 0!==n&&i&&(this._constants[s.str]=n),this._leafNode(new g(e,s,n)),s}const(e,t,n){return this._def(h.varKinds.const,e,t,n)}let(e,t,n){return this._def(h.varKinds.let,e,t,n)}var(e,t,n){return this._def(h.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new v(e,t,n))}add(e,n){return this._leafNode(new y(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==u.nil&&this._leafNode(new x(e)),this}object(){const e=["{"];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const[s,r]of n)e.length>1&&e.push(","),e.push(s),(s!==r||this.opts.es5)&&(e.push(":"),(0,u.addCodeArg)(e,r));return e.push("}"),new u._Code(e)}if(e,t,n){if(this._blockNode(new C(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new C(e))}else(){return this._elseNode(new E)}endIf(){return this._endBlockNode(C,E)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new P(e),t)}forRange(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.es5?h.varKinds.var:h.varKinds.let;const r=this._scope.toName(e);return this._for(new T(s,r,t,n),()=>i(r))}forOf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.varKinds.const;const a=this._scope.toName(e);if(this.opts.es5){const e=t instanceof u.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,u._)(i||(i=c(["",".length"])),e),t=>{this.var(a,(0,u._)(s||(s=c(["","[","]"])),e,t)),n(a)})}return this._for(new D("of",r,a,t),()=>n(a))}forIn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.es5?h.varKinds.var:h.varKinds.const;if(this.opts.ownProperties)return this.forOf(e,(0,u._)(r||(r=c(["Object.keys(",")"])),t),n);const s=this._scope.toName(e);return this._for(new D("in",i,s,t),()=>n(s))}endFor(){return this._endBlockNode(M)}label(e){return this._leafNode(new b(e))}break(e){return this._leafNode(new w(e))}return(e){const t=new R;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new F;if(this._blockNode(i),this.code(e),t){const e=this.name("e");this._currNode=i.catch=new I(e),t(e)}return n&&(this._currNode=i.finally=new L,this.code(n)),this._endBlockNode(I,L)}throw(e){return this._leafNode(new _(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error("CodeGen: wrong number of nodes: ".concat(n," vs ").concat(e," expected"));return this._nodes.length=t,this}func(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.nil,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return this._blockNode(new N(e,t,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(N)}optimize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error('CodeGen: not in block "'.concat(t?"".concat(e.kind,"/").concat(t.kind):e.kind,'"'))}_elseNode(e){const t=this._currNode;if(!(t instanceof C))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=z;const U=H(t.operators.AND);t.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(U)};const V=H(t.operators.OR);function H(e){return(t,n)=>t===u.nil?n:n===u.nil?t:(0,u._)(o||(o=c([""," "," ",""])),q(t),e,q(n))}function q(e){return e instanceof u.Name?e:(0,u._)(l||(l=c(["(",")"])),e)}t.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(V)}},8617(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3740),s=n(7968),r=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",i.default,s.default];t.default=r},8853(e,t,n){"use strict";e.exports=n(7234)},9045(e,t,n){var i=n(3738).default;e.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9142(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const f=n(8584),m=n(266),g=n(656),v=n(6772);function y(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,()=>t.assign(n,(0,f._)(c||(c=p(["","[","]"])),i.parentData,i.parentDataProperty)))}function b(e,t,n){if(void 0===n)throw new Error('keyword "'.concat(t,'" failed to compile'));return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,f.stringify)(n)})}t.macroKeywordCode=function(e,t){const{gen:n,keyword:i,schema:s,parentSchema:r,it:a}=e,o=t.macro.call(a.self,s,r,a),l=b(n,i,o);!1!==a.opts.validateSchema&&a.self.validateSchema(o,!0);const c=n.name("valid");e.subschema({schema:o,schemaPath:f.nil,errSchemaPath:"".concat(a.errSchemaPath,"/").concat(i),topSchemaRef:l,compositeRule:!0},c),e.pass(c,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var n;const{gen:c,keyword:w,schema:_,parentSchema:x,$data:k,it:S}=e;!function(e,t){let{schemaEnv:n}=e;if(t.async&&!n.$async)throw new Error("async keyword in sync schema")}(S,t);const A=!k&&t.compile?t.compile.call(S.self,_,x,S):t.validate,E=b(c,w,A),C=c.let("valid");function M(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.async?(0,f._)(o||(o=p(["await "]))):f.nil;const i=S.opts.passContext?m.default.this:m.default.self,s=!("compile"in t&&!k||!1===t.schema);c.assign(C,(0,f._)(l||(l=p(["","",""])),n,(0,g.callValidateCode)(e,E,i,s)),t.modifying)}function P(e){var n;c.if((0,f.not)(null!==(n=t.valid)&&void 0!==n?n:C),e)}e.block$data(C,function(){if(!1===t.errors)M(),t.modifying&&y(e),P(()=>e.error());else{const n=t.async?function(){const e=c.let("ruleErrs",null);return c.try(()=>M((0,f._)(i||(i=p(["await "])))),t=>c.assign(C,!1).if((0,f._)(s||(s=p([""," instanceof ",""])),t,S.ValidationError),()=>c.assign(e,(0,f._)(r||(r=p(["",".errors"])),t)),()=>c.throw(t))),e}():function(){const e=(0,f._)(a||(a=p(["",".errors"])),E);return c.assign(e,null),M(f.nil),e}();t.modifying&&y(e),P(()=>function(e,t){const{gen:n}=e;n.if((0,f._)(d||(d=p(["Array.isArray(",")"])),t),()=>{n.assign(m.default.vErrors,(0,f._)(u||(u=p([""," === null ? "," : ",".concat(",")"])),m.default.vErrors,t,m.default.vErrors,t)).assign(m.default.errors,(0,f._)(h||(h=p(["",".length"])),m.default.vErrors)),(0,v.extendErrors)(e)},()=>e.error())}(e,n))}}),e.ok(null!==(n=t.valid)&&void 0!==n?n:C)},t.validSchemaType=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&"undefined"==typeof e)},t.validateKeywordUsage=function(e,t,n){let{schema:i,opts:s,self:r,errSchemaPath:a}=e;if(Array.isArray(t.keyword)?!t.keyword.includes(n):t.keyword!==n)throw new Error("ajv implementation error");const o=t.dependencies;if(null===o||void 0===o?void 0:o.some(e=>!Object.prototype.hasOwnProperty.call(i,e)))throw new Error("parent schema must have dependencies of ".concat(n,": ").concat(o.join(",")));if(t.validateSchema){if(!t.validateSchema(i[n])){const e='keyword "'.concat(n,'" value is invalid at path "').concat(a,'": ')+r.errorsText(t.validateSchema.errors);if("log"!==s.validateSchema)throw new Error(e);r.logger.error(e)}}}},9207(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(n||(t.DiscrError=n={}))},9273(e,t,n){"use strict";var i,s,r,a,o,l,c,d,u,h,p,f,m,g,v,y,b,w,_,x,k,S,A,E,C,M,P,T,D,N,R,F,I,L=n(166).default;Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const O=n(4445),j=n(2392),B=n(6772),W=n(8584),z=n(8396);var U;function V(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(O.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(U||(t.DataType=U={})),t.getSchemaTypes=function(e){const t=V(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=V,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:A,opts:E}=e,C=function(e,t){return t?e.filter(e=>H.has(e)||"array"===t&&"array"===e):[]}(t,E.coerceTypes),M=t.length>0&&!(0===C.length&&1===t.length&&(0,j.schemaHasRulesForType)(e,t[0]));if(M){const M=G(t,A,E.strictNumbers,U.Wrong);n.if(M,()=>{C.length?function(e,t,n){const{gen:A,data:E,opts:C}=e,M=A.let("dataType",(0,W._)(i||(i=L(["typeof ",""])),E)),P=A.let("coerced",(0,W._)(s||(s=L(["undefined"]))));"array"===C.coerceTypes&&A.if((0,W._)(r||(r=L([""," == 'object' && Array.isArray(",") && ",".length == 1"])),M,E,E),()=>A.assign(E,(0,W._)(a||(a=L(["","[0]"])),E)).assign(M,(0,W._)(o||(o=L(["typeof ",""])),E)).if(G(t,E,C.strictNumbers),()=>A.assign(P,E)));A.if((0,W._)(l||(l=L([""," !== undefined"])),P));for(const i of n)(H.has(i)||"array"===i&&"array"===C.coerceTypes)&&T(i);function T(e){switch(e){case"string":return void A.elseIf((0,W._)(d||(d=L(["",' == "number" || ',' == "boolean"'])),M,M)).assign(P,(0,W._)(u||(u=L(['"" + ',""])),E)).elseIf((0,W._)(h||(h=L([""," === null"])),E)).assign(P,(0,W._)(p||(p=L(['""']))));case"number":return void A.elseIf((0,W._)(f||(f=L(["",' == "boolean" || '," === null\n              || (",' == "string" && '," && "," == +",")"])),M,E,M,E,E,E)).assign(P,(0,W._)(m||(m=L(["+",""])),E));case"integer":return void A.elseIf((0,W._)(g||(g=L(["",' === "boolean" || '," === null\n              || (",' === "string" && '," && "," == +"," && !("," % 1))"])),M,E,M,E,E,E,E)).assign(P,(0,W._)(v||(v=L(["+",""])),E));case"boolean":return void A.elseIf((0,W._)(y||(y=L(["",' === "false" || '," === 0 || "," === null"])),E,E,E)).assign(P,!1).elseIf((0,W._)(b||(b=L(["",' === "true" || '," === 1"])),E,E)).assign(P,!0);case"null":return A.elseIf((0,W._)(w||(w=L(["",' === "" || '," === 0 || "," === false"])),E,E,E)),void A.assign(P,null);case"array":A.elseIf((0,W._)(_||(_=L(["",' === "string" || ',' === "number"\n              || ',' === "boolean" || '," === null"])),M,M,M,E)).assign(P,(0,W._)(x||(x=L(["[","]"])),E))}}A.else(),K(e),A.endIf(),A.if((0,W._)(c||(c=L([""," !== undefined"])),P),()=>{A.assign(E,P),function(e,t){let{gen:n,parentData:i,parentDataProperty:s}=e;n.if((0,W._)(k||(k=L([""," !== undefined"])),i),()=>n.assign((0,W._)(S||(S=L(["","[","]"])),i,s),t))}(e,P)})}(e,t,C):K(e)})}return M};const H=new Set(["string","number","integer","boolean","null"]);function q(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:U.Correct;const s=i===U.Correct?W.operators.EQ:W.operators.NEQ;let r;switch(e){case"null":return(0,W._)(A||(A=L([""," "," null"])),t,s);case"array":r=(0,W._)(E||(E=L(["Array.isArray(",")"])),t);break;case"object":r=(0,W._)(C||(C=L([""," && typeof ",' == "object" && !Array.isArray(',")"])),t,t,t);break;case"integer":r=a((0,W._)(M||(M=L(["!("," % 1) && !isNaN(",")"])),t,t));break;case"number":r=a();break;default:return(0,W._)(P||(P=L(["typeof "," "," ",""])),t,s,e)}return i===U.Correct?r:(0,W.not)(r);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.nil;return(0,W.and)((0,W._)(T||(T=L(["typeof ",' == "number"'])),t),e,n?(0,W._)(D||(D=L(["isFinite(",")"])),t):W.nil)}}function G(e,t,n,i){if(1===e.length)return q(e[0],t,n,i);let s;const r=(0,z.toHash)(e);if(r.array&&r.object){const e=(0,W._)(N||(N=L(["typeof ",' != "object"'])),t);s=r.null?e:(0,W._)(R||(R=L(["!"," || ",""])),t,e),delete r.null,delete r.array,delete r.object}else s=W.nil;r.number&&delete r.integer;for(const a in r)s=(0,W.and)(s,q(a,t,n,i));return s}t.checkDataType=q,t.checkDataTypes=G;const $={message:e=>{let{schema:t}=e;return"must be ".concat(t)},params:e=>{let{schema:t,schemaValue:n}=e;return"string"==typeof t?(0,W._)(F||(F=L(["{type: ","}"])),t):(0,W._)(I||(I=L(["{type: ","}"])),n)}};function K(e){const t=function(e){const{gen:t,data:n,schema:i}=e,s=(0,z.schemaRefOrVal)(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:s,schemaValue:s,parentSchema:i,params:{},it:e}}(e);(0,B.reportError)(t,$)}t.reportTypeError=K},9281(e,t,n){"use strict";var i=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var s=n(5413);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return s.KeywordCxt}});var r=n(8584);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const a=n(6817),o=n(9550),l=n(4445),c=n(1762),d=n(8584),u=n(2302),h=n(9273),p=n(8396),f=n(3837),m=n(4601),g=(e,t)=>new RegExp(e,t);g.code="new RegExp";const v=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),b={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},w={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};class _{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts=i(i({},e),function(e){var t,n,s,r,a,o,l,c,d,u,h,p,f,v,y,b,w,_,x,k,S,A,E,C,M;const P=e.strict,T=null===(t=e.code)||void 0===t?void 0:t.optimize,D=!0===T||void 0===T?1:T||0,N=null!==(s=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==s?s:g,R=null!==(r=e.uriResolver)&&void 0!==r?r:m.default;return{strictSchema:null===(o=null!==(a=e.strictSchema)&&void 0!==a?a:P)||void 0===o||o,strictNumbers:null===(c=null!==(l=e.strictNumbers)&&void 0!==l?l:P)||void 0===c||c,strictTypes:null!==(u=null!==(d=e.strictTypes)&&void 0!==d?d:P)&&void 0!==u?u:"log",strictTuples:null!==(p=null!==(h=e.strictTuples)&&void 0!==h?h:P)&&void 0!==p?p:"log",strictRequired:null!==(v=null!==(f=e.strictRequired)&&void 0!==f?f:P)&&void 0!==v&&v,code:e.code?i(i({},e.code),{},{optimize:D,regExp:N}):{optimize:D,regExp:N},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(b=e.loopEnum)&&void 0!==b?b:200,meta:null===(w=e.meta)||void 0===w||w,messages:null===(_=e.messages)||void 0===_||_,inlineRefs:null===(x=e.inlineRefs)||void 0===x||x,schemaId:null!==(k=e.schemaId)&&void 0!==k?k:"$id",addUsedSchema:null===(S=e.addUsedSchema)||void 0===S||S,validateSchema:null===(A=e.validateSchema)||void 0===A||A,validateFormats:null===(E=e.validateFormats)||void 0===E||E,unicodeRegExp:null===(C=e.unicodeRegExp)||void 0===C||C,int32range:null===(M=e.int32range)||void 0===M||M,uriResolver:R}}(e));const{es5:t,lines:n}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:y,es5:t,lines:n}),this.logger=function(e){if(!1===e)return M;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,l.getRules)(),x.call(this,b,e,"NOT SUPPORTED"),x.call(this,w,e,"DEPRECATED","warn"),this._metaOpts=C.call(this),e.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&E.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),S.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let s=f;"id"===n&&(s=i({},f),s.id=s.$id,delete s.$id),t&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error('no schema with key or ref "'.concat(e,'"'))}else n=this.compile(e);const i=n(t);return"$async"in n||(this.errors=n.errors),i}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,e,t);async function i(e,t){await s.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||r.call(this,n)}async function s(e){e&&!this.getSchema(e)&&await i.call(this,{$ref:e},!0)}async function r(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof o.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),r.call(this,e)}}function a(e){let{missingSchema:t,missingRef:n}=e;if(this.refs[t])throw new Error("AnySchema ".concat(t," is loaded but ").concat(n," cannot be resolved"))}async function l(e){const n=await c.call(this,e);this.refs[e]||await s.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema;if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,s);return this}if("object"===typeof e){const{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error("schema ".concat(t," must be string"))}return t=(0,u.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,s,!0),this}addMetaSchema(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.opts.validateSchema;return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,e);if(!i&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return i}getSchema(e){let t;for(;"string"==typeof(t=k.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,i=new c.SchemaEnv({schema:{},schemaId:n});if(t=c.resolveSchema.call(this,i,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=k.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,u.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(T.call(this,n,t),!t)return(0,p.eachItem)(n,e=>D.call(this,e)),this;R.call(this,t);const s=i(i({},t),{},{type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)});return(0,p.eachItem)(n,0===s.type.length?e=>D.call(this,e,s):e=>s.type.forEach(t=>D.call(this,e,s,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex(t=>t.keyword===e);t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.errors,{separator:t=", ",dataVar:n="data"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&0!==e.length?e.map(e=>"".concat(n).concat(e.instancePath," ").concat(e.message)).reduce((e,n)=>e+t+n):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const i of t){const t=i.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:i}=t.definition,r=s[e];i&&r&&(s[e]=I(r))}}return e}_removeAllSchemas(e,t){for(const n in e){const i=e[n];t&&!t.test(n)||("string"==typeof i?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.opts.validateSchema,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.opts.addUsedSchema;const{schemaId:a}=this.opts;if("object"==typeof e)i=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let o=this._cache.get(e);if(void 0!==o)return o;n=(0,u.normalizeId)(i||n);const l=u.getSchemaRefs.call(this,e,n);return o=new c.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:n,localRefs:l}),this._cache.set(o.schema,o),r&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=o),s&&this.validateSchema(e,!0),o}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error('schema with key or id "'.concat(e,'" already exists'))}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):c.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,e)}finally{this.opts=t}}}function x(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"error";for(const s in e){const r=s;r in t&&this.logger[i]("".concat(n,": option ").concat(s,". ").concat(e[r]))}}function k(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function S(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function A(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function E(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function C(){const e=i({},this.opts);for(const t of v)delete e[t];return e}_.ValidationError=a.default,_.MissingRefError=o.default,t.default=_;const M={log(){},warn(){},error(){}};const P=/^[a-z_$][a-z0-9_$:-]*$/i;function T(e,t){const{RULES:n}=this;if((0,p.eachItem)(e,e=>{if(n.keywords[e])throw new Error("Keyword ".concat(e," is already defined"));if(!P.test(e))throw new Error("Keyword ".concat(e," has invalid name"))}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function D(e,t,n){var s;const r=null===t||void 0===t?void 0:t.post;if(n&&r)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:a}=this;let o=r?a.post:a.rules.find(e=>{let{type:t}=e;return t===n});if(o||(o={type:n,rules:[]},a.rules.push(o)),a.keywords[e]=!0,!t)return;const l={keyword:e,definition:i(i({},t),{},{type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)})};t.before?N.call(this,o,l,t.before):o.rules.push(l),a.all[e]=l,null===(s=t.implements)||void 0===s||s.forEach(e=>this.addKeyword(e))}function N(e,t,n){const i=e.rules.findIndex(e=>e.keyword===n);i>=0?e.rules.splice(i,0,t):(e.rules.push(t),this.logger.warn("rule ".concat(n," is not defined")))}function R(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=I(t)),e.validateSchema=this.compile(t,!0))}const F={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function I(e){return{anyOf:[e,F]}}},9294(e,t,n){"use strict";var i,s,r,a,o,l=n(166).default;Object.defineProperty(t,"__esModule",{value:!0});const c=n(8584),d=n(8396),u=n(6754),h={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message(e){let{keyword:t,schemaCode:n}=e;const s="maxLength"===t?"more":"fewer";return(0,c.str)(i||(i=l(["must NOT have "," than "," characters"])),s,n)},params:e=>{let{schemaCode:t}=e;return(0,c._)(s||(s=l(["{limit: ","}"])),t)}},code(e){const{keyword:t,data:n,schemaCode:i,it:s}=e,h="maxLength"===t?c.operators.GT:c.operators.LT,p=!1===s.opts.unicode?(0,c._)(r||(r=l(["",".length"])),n):(0,c._)(a||(a=l(["","(",")"])),(0,d.useFunc)(e.gen,u.default),n);e.fail$data((0,c._)(o||(o=l([""," "," ",""])),p,h,i))}};t.default=h},9343(e,t,n){"use strict";var i=n(2897).default,s=n(1847).default;const r=["logger","errorHandler"],a=n(7599),o=n(5362),{log:l}=n(5597),c=n(1674),d=n(1600),{defaultOptions:u,spawnWorker:h,terminateWorker:p,onMessage:f,loadImage:m,send:g}=n(3919);let v=0;e.exports=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.LSTM_ONLY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const b=c("Worker",v),w=a(i(i({},u),n)),{logger:_,errorHandler:x}=w,k=s(w,r),S={},A="string"===typeof e?e.split("+"):e;let E=t,C=y;const M=[d.DEFAULT,d.LSTM_ONLY].includes(t)&&!k.legacyCore;let P,T;const D=new Promise((e,t)=>{T=e,P=t});let N=h(k);N.onerror=e=>{P(e.message)},v+=1;const R=e=>{let{id:t,action:n,payload:i}=e;return new Promise((e,s)=>{l("[".concat(b,"]: Start ").concat(t,", action=").concat(n));const r="".concat(n,"-").concat(t);S[r]={resolve:e,reject:s},g(N,{workerId:b,jobId:t,action:n,payload:i})})},F=(e,t)=>R(o({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:k.langPath,dataPath:k.dataPath,cachePath:k.cachePath,cacheMethod:k.cacheMethod,gzip:k.gzip,lstmOnly:[d.DEFAULT,d.LSTM_ONLY].includes(E)&&!k.legacyLang}}})),I=(e,t,n,i)=>R(o({id:i,action:"initialize",payload:{langs:e,oem:t,config:n}}));f(N,e=>{let{workerId:t,jobId:n,status:s,action:r,data:a}=e;const o="".concat(r,"-").concat(n);if("resolve"===s)l("[".concat(t,"]: Complete ").concat(n)),S[o].resolve({jobId:n,data:a}),delete S[o];else if("reject"===s){if(S[o].reject(a),delete S[o],"load"===r&&P(a),!x)throw Error(a);x(a)}else"progress"===s&&_(i(i({},a),{},{userJobId:n}))});const L={id:b,worker:N,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,n)=>R(o({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>R(o({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>R(o({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>R(o({id:n,action:"FS",payload:{method:e,args:t}})),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(M&&[d.TESSERACT_ONLY,d.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const s=t||E;E=s;const r=n||C;C=r;const a=("string"===typeof e?e.split("+"):e).filter(e=>!A.includes(e));return A.push(...a),a.length>0?F(a,i).then(()=>I(e,s,r,i)):I(e,s,r,i)},setParameters:function(){return R(o({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},recognize:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{text:!0};return R(o({id:arguments.length>3?arguments[3]:void 0,action:"recognize",payload:{image:await m(e),options:t,output:n}}))},detect:async(e,t)=>{if(M)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return R(o({id:t,action:"detect",payload:{image:await m(e)}}))},terminate:async()=>(null!==N&&(p(N),N=null),Promise.resolve())};var O;return R(o({id:O,action:"load",payload:{options:{lstmOnly:M,corePath:k.corePath,logging:k.logging}}})).then(()=>F(e)).then(()=>I(e,t,y)).then(()=>T(L)).catch(()=>{}),D}},9497(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8617),s=n(2141),r=n(3939),a=n(3709),o=n(6280),l=[i.default,s.default,(0,r.default)(),a.default,o.metadataVocabulary,o.contentVocabulary];t.default=l},9550(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2302);class s extends Error{constructor(e,t,n,s){super(s||"can't resolve reference ".concat(n," from id ").concat(t)),this.missingRef=(0,i.resolveUrl)(e,t,n),this.missingSchema=(0,i.normalizeId)((0,i.getFullPath)(e,this.missingRef))}}t.default=s}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(5043),t=n(4391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function r(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=["color","size","strokeWidth","absoluteStrokeWidth","children"];var d=(t,n)=>{const i=(0,e.forwardRef)((i,s)=>{let{color:r="currentColor",size:a=24,strokeWidth:d=2,absoluteStrokeWidth:u,children:h}=i,p=function(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(i,c);return(0,e.createElement)("svg",o(o({ref:s},l),{},{width:a,height:a,stroke:r,strokeWidth:u?24*Number(d)/Number(a):d,className:"lucide lucide-".concat((f=t,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...n.map(t=>{let[n,i]=t;return(0,e.createElement)(n,i)}),...(Array.isArray(h)?h:[h])||[]]);var f});return i.displayName="".concat(t),i};const u=d("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),h=d("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),p=d("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),f=d("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),m=d("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),g=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v=d("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),y=d("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),b=d("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),w=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),x=d("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),k=d("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),S={$schema:"http://json-schema.org/draft-07/schema#",title:"Audesp Presta\xe7\xe3o de Contas v1.9",type:"object",required:["descritor","contratos","documentos_fiscais","pagamentos"],properties:{descritor:{type:"object",required:["tipo_documento","municipio","entidade","ano","mes"],properties:{tipo_documento:{type:"string",enum:["Presta\xe7\xe3o de Contas de Conv\xeanio","Presta\xe7\xe3o de Contas de Contrato de Gest\xe3o","Presta\xe7\xe3o de Contas de Termo de Parceria","Presta\xe7\xe3o de Contas de Termo de Fomento","Presta\xe7\xe3o de Contas de Termo de Colabora\xe7\xe3o","Declara\xe7\xe3o Negativa"],description:"Tipo de documento sendo prestado"},municipio:{type:"number",minimum:1,maximum:99999,description:"C\xf3digo IBGE do munic\xedpio"},entidade:{type:"number",minimum:1,description:"C\xf3digo da entidade respons\xe1vel"},ano:{type:"number",minimum:2e3,maximum:2050,description:"Ano de exerc\xedcio"},mes:{type:"number",minimum:1,maximum:12,description:"M\xeas de exerc\xedcio"}}},contratos:{type:"array",minItems:0,items:{type:"object",required:["numero","objeto","data_assinatura","data_vigencia_inicio","data_vigencia_fim","valor_total"],properties:{numero:{type:"string",pattern:"^[0-9\\/-]*$",description:"N\xfamero do contrato"},objeto:{type:"string",minLength:3,maxLength:500,description:"Descri\xe7\xe3o do objeto do contrato"},data_assinatura:{type:"string",format:"date",description:"Data de assinatura (YYYY-MM-DD)"},data_vigencia_inicio:{type:"string",format:"date",description:"In\xedcio da vig\xeancia"},data_vigencia_fim:{type:"string",format:"date",description:"Fim da vig\xeancia"},valor_total:{type:"number",minimum:0,description:"Valor total do contrato"},empenho:{type:"string",description:"N\xfamero de empenho"},observacoes:{type:"string",description:"Observa\xe7\xf5es adicionais"}}}},documentos_fiscais:{type:"array",minItems:0,items:{type:"object",required:["tipo","numero","data_emissao","valor_bruto"],properties:{tipo:{type:"string",enum:["Nota Fiscal","Fatura","Recibo","Nota Fiscal Eletr\xf4nica","RPA","Outro"],description:"Tipo de documento fiscal"},numero:{type:"string",minLength:1,maxLength:50,description:"N\xfamero do documento"},serie:{type:"string",description:"S\xe9rie do documento"},data_emissao:{type:"string",format:"date",description:"Data de emiss\xe3o"},data_vencimento:{type:"string",format:"date",description:"Data de vencimento"},fornecedor_cnpj:{type:"string",pattern:"^[0-9]{14}$",description:"CNPJ do fornecedor (14 d\xedgitos)"},fornecedor_cpf:{type:"string",pattern:"^[0-9]{11}$",description:"CPF do fornecedor (11 d\xedgitos)"},valor_bruto:{type:"number",minimum:.01,description:"Valor bruto do documento"},desconto:{type:"number",minimum:0,default:0,description:"Desconto aplicado"},retencao_ir:{type:"number",minimum:0,default:0,description:"Reten\xe7\xe3o de IR"},retencao_inss:{type:"number",minimum:0,default:0,description:"Reten\xe7\xe3o de INSS"},retencao_iss:{type:"number",minimum:0,default:0,description:"Reten\xe7\xe3o de ISS"},valor_liquido:{type:"number",minimum:0,description:"Valor l\xedquido (calculado automaticamente)"},classificacao:{type:"string",description:"Classifica\xe7\xe3o cont\xe1bil"},contrato_numero:{type:"string",description:"N\xfamero do contrato relacionado"},observacoes:{type:"string",description:"Observa\xe7\xf5es"}}}},pagamentos:{type:"array",minItems:0,items:{type:"object",required:["data_pagamento","numero_documento","valor_pago"],properties:{numero_documento:{type:"string",minLength:1,description:"N\xfamero do documento fiscal relacionado"},data_pagamento:{type:"string",format:"date",description:"Data do pagamento"},valor_pago:{type:"number",minimum:.01,description:"Valor pago"},forma_pagamento:{type:"string",enum:["Transfer\xeancia Banc\xe1ria","Cheque","Cr\xe9dito em Conta","Boleto","Pix","Dinheiro","Outro"],description:"Forma de pagamento"},numero_nota_fiscal:{type:"string",description:"N\xfamero da nota fiscal"},banco:{type:"string",description:"Banco utilizador"},agencia:{type:"string",description:"Ag\xeancia banc\xe1ria"},conta:{type:"string",description:"N\xfamero da conta"},comprovante:{type:"string",description:"N\xfamero do comprovante"},observacoes:{type:"string",description:"Observa\xe7\xf5es"}}}},bens_moveis:{type:"array",minItems:0,items:{type:"object",required:["numero_patrimonio","descricao"],properties:{numero_patrimonio:{type:"string",minLength:1,description:"N\xfamero do patrim\xf4nio"},descricao:{type:"string",minLength:3,description:"Descri\xe7\xe3o do bem"},data_aquisicao:{type:"string",format:"date",description:"Data de aquisi\xe7\xe3o"},valor_aquisicao:{type:"number",minimum:0,description:"Valor de aquisi\xe7\xe3o"},data_cessao:{type:"string",format:"date",description:"Data de cess\xe3o"},valor_cessao:{type:"number",minimum:0,description:"Valor de cess\xe3o"},data_baixa:{type:"string",format:"date",description:"Data de baixa/devolu\xe7\xe3o"}}}},bens_imoveis:{type:"array",minItems:0,items:{type:"object",required:["descricao"],properties:{descricao:{type:"string",minLength:3,description:"Descri\xe7\xe3o do im\xf3vel"},endereco:{type:"string",description:"Endere\xe7o completo"},data_aquisicao:{type:"string",format:"date",description:"Data de aquisi\xe7\xe3o"},data_cessao:{type:"string",format:"date",description:"Data de cess\xe3o"},matricula:{type:"string",description:"Matr\xedcula do im\xf3vel"}}}},empregados:{type:"array",minItems:0,items:{type:"object",required:["cpf","data_admissao"],properties:{cpf:{type:"string",pattern:"^[0-9]{11}$",description:"CPF (11 d\xedgitos)"},data_admissao:{type:"string",format:"date",description:"Data de admiss\xe3o"},data_demissao:{type:"string",format:"date",description:"Data de demiss\xe3o (opcional)"},nome:{type:"string",description:"Nome do empregado"},cargo:{type:"string",description:"Cargo/fun\xe7\xe3o"},cbo:{type:"string",description:"Classifica\xe7\xe3o Brasileira de Ocupa\xe7\xf5es"},cns:{type:"string",description:"N\xfamero CNS (sa\xfade)"},salario_contratual:{type:"number",minimum:0,description:"Sal\xe1rio contratual"}}}},resumo_executivo:{type:"object",properties:{total_documentos_fiscais:{type:"number",description:"Total de documentos fiscais"},valor_total_documentos:{type:"number",description:"Valor total dos documentos"},total_pagamentos:{type:"number",description:"Total de pagamentos realizados"},valor_total_pagamentos:{type:"number",description:"Valor total dos pagamentos"},saldo:{type:"number",description:"Saldo calculado"},observacoes:{type:"string",description:"Observa\xe7\xf5es gerais"}}}}},A=[{id:"descritor",title:"Descritor",icon:"FileText",fields:[{name:"tipo_documento",label:"Tipo de Documento",type:"select",required:!0},{name:"municipio",label:"Munic\xedpio",type:"number",required:!0},{name:"entidade",label:"Entidade",type:"number",required:!0},{name:"ano",label:"Ano",type:"number",required:!0},{name:"mes",label:"M\xeas",type:"number",required:!0}]},{id:"contratos",title:"Contratos",icon:"FileCheck",subsections:[{id:"contrato",title:"Contrato",fields:[{name:"numero",label:"N\xfamero do Contrato",type:"text",required:!0},{name:"objeto",label:"Objeto",type:"textarea",required:!0},{name:"data_assinatura",label:"Data de Assinatura",type:"date",required:!0},{name:"data_vigencia_inicio",label:"Vig\xeancia In\xedcio",type:"date",required:!0},{name:"data_vigencia_fim",label:"Vig\xeancia Fim",type:"date",required:!0},{name:"valor_total",label:"Valor Total",type:"currency",required:!0},{name:"empenho",label:"Empenho",type:"text",required:!1},{name:"observacoes",label:"Observa\xe7\xf5es",type:"textarea",required:!1}]}]},{id:"documentos_fiscais",title:"Documentos Fiscais",icon:"FileText",subsections:[{id:"documento_fiscal",title:"Documento Fiscal",fields:[{name:"tipo",label:"Tipo",type:"select",required:!0},{name:"numero",label:"N\xfamero",type:"text",required:!0},{name:"serie",label:"S\xe9rie",type:"text",required:!1},{name:"data_emissao",label:"Data de Emiss\xe3o",type:"date",required:!0},{name:"data_vencimento",label:"Data de Vencimento",type:"date",required:!1},{name:"fornecedor_cnpj",label:"CNPJ Fornecedor",type:"text",mask:"cnpj",required:!1},{name:"fornecedor_cpf",label:"CPF Fornecedor",type:"text",mask:"cpf",required:!1},{name:"valor_bruto",label:"Valor Bruto",type:"currency",required:!0},{name:"desconto",label:"Desconto",type:"currency",required:!1},{name:"retencao_ir",label:"Reten\xe7\xe3o IR",type:"currency",required:!1},{name:"retencao_inss",label:"Reten\xe7\xe3o INSS",type:"currency",required:!1},{name:"retencao_iss",label:"Reten\xe7\xe3o ISS",type:"currency",required:!1},{name:"valor_liquido",label:"Valor L\xedquido",type:"currency",required:!1},{name:"classificacao",label:"Classifica\xe7\xe3o",type:"text",required:!1},{name:"contrato_numero",label:"Contrato Relacionado",type:"text",required:!1},{name:"observacoes",label:"Observa\xe7\xf5es",type:"textarea",required:!1}]}]},{id:"pagamentos",title:"Pagamentos",icon:"CreditCard",subsections:[{id:"pagamento",title:"Pagamento",fields:[{name:"numero_documento",label:"N\xfamero do Documento",type:"text",required:!0},{name:"data_pagamento",label:"Data de Pagamento",type:"date",required:!0},{name:"valor_pago",label:"Valor Pago",type:"currency",required:!0},{name:"forma_pagamento",label:"Forma de Pagamento",type:"select",required:!0},{name:"numero_nota_fiscal",label:"NF Relacionada",type:"text",required:!1},{name:"banco",label:"Banco",type:"text",required:!1},{name:"agencia",label:"Ag\xeancia",type:"text",required:!1},{name:"conta",label:"Conta",type:"text",required:!1},{name:"comprovante",label:"Comprovante",type:"text",required:!1},{name:"observacoes",label:"Observa\xe7\xf5es",type:"textarea",required:!1}]}]},{id:"bens_moveis",title:"Bens M\xf3veis",icon:"Package",subsections:[{id:"bem_movel",title:"Bem M\xf3vel",fields:[{name:"numero_patrimonio",label:"Patrim\xf4nio",type:"text",required:!0},{name:"descricao",label:"Descri\xe7\xe3o",type:"textarea",required:!0},{name:"data_aquisicao",label:"Data Aquisi\xe7\xe3o",type:"date",required:!1},{name:"valor_aquisicao",label:"Valor Aquisi\xe7\xe3o",type:"currency",required:!1},{name:"data_cessao",label:"Data Cess\xe3o",type:"date",required:!1},{name:"valor_cessao",label:"Valor Cess\xe3o",type:"currency",required:!1},{name:"data_baixa",label:"Data Baixa",type:"date",required:!1}]}]},{id:"bens_imoveis",title:"Bens Im\xf3veis",icon:"Building",subsections:[{id:"bem_imovel",title:"Bem Im\xf3vel",fields:[{name:"descricao",label:"Descri\xe7\xe3o",type:"textarea",required:!0},{name:"endereco",label:"Endere\xe7o",type:"textarea",required:!1},{name:"data_aquisicao",label:"Data Aquisi\xe7\xe3o",type:"date",required:!1},{name:"data_cessao",label:"Data Cess\xe3o",type:"date",required:!1},{name:"matricula",label:"Matr\xedcula",type:"text",required:!1}]}]},{id:"empregados",title:"Empregados",icon:"Users",subsections:[{id:"empregado",title:"Empregado",fields:[{name:"cpf",label:"CPF",type:"text",mask:"cpf",required:!0},{name:"nome",label:"Nome",type:"text",required:!1},{name:"cargo",label:"Cargo",type:"text",required:!1},{name:"data_admissao",label:"Data Admiss\xe3o",type:"date",required:!0},{name:"data_demissao",label:"Data Demiss\xe3o",type:"date",required:!1},{name:"cbo",label:"CBO",type:"text",required:!1},{name:"cns",label:"CNS",type:"text",required:!1},{name:"salario_contratual",label:"Sal\xe1rio",type:"currency",required:!1}]}]}];var E=n(7003),C=n.n(E),M=n(483),P=n.n(M);const T=new(C())({allErrors:!0});P()(T);T.compile(S);var D=n(579);const N=t=>{let{data:n,onChange:i}=t;const[s,r]=(0,e.useState)(new Set(["descritor"])),[a,l]=(0,e.useState)([]),[c,d]=(0,e.useState)(!0),u=(0,e.useCallback)(e=>{const t=new Set(s);t.has(e)?t.delete(e):t.add(e),r(t)},[s]),p=(0,e.useCallback)((e,t)=>{const s=e.split("."),r=JSON.parse(JSON.stringify(n));let o=r;for(let n=0;n<s.length-1;n++)o[s[n]]||(o[s[n]]={}),o=o[s[n]];o[s[s.length-1]]=t,i(r);const c=((e,t)=>{const n=e.split(".");let i=S.properties;for(let r=0;r<n.length-1;r++){const e=n[r];i&&i[e]&&(i="array"===i[e].type?i[e].items.properties:i[e].properties)}const s=i&&i[n[n.length-1]];return s?"string"===s.type&&"string"!==typeof t&&""!==t?"Deve ser um texto":"number"===s.type&&isNaN(t)&&""!==t?"Deve ser um n\xfamero":s.pattern&&t&&!new RegExp(s.pattern).test(t)?"Formato inv\xe1lido":void 0!==s.minimum&&t<s.minimum?"M\xednimo ".concat(s.minimum):void 0!==s.maximum&&t>s.maximum?"M\xe1ximo ".concat(s.maximum):s.minLength&&t&&t.length<s.minLength?"M\xednimo ".concat(s.minLength," caracteres"):s.maxLength&&t&&t.length>s.maxLength?"M\xe1ximo ".concat(s.maxLength," caracteres"):s.enum&&t&&!s.enum.includes(t)?"Op\xe7\xe3o inv\xe1lida":null:null})(e,t);l(a.filter(t=>t.path!==e)),c&&l([...a,{path:e,message:c}])},[n,i,a]),f=(0,e.useCallback)((e,t)=>{const i=n[t.split(".").pop()]||"",s=a.find(e=>e.path===t),r="w-full px-3 py-2 border rounded-lg ".concat(s?"border-red-500 bg-red-50":"border-gray-300"," focus:outline-none focus:ring-2 ").concat(s?"focus:ring-red-500":"focus:ring-blue-500");switch(e.type){case"text":return(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,D.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,D.jsx)("input",{type:"text",value:i,onChange:e=>p(t,e.target.value),placeholder:e.placeholder||"",className:r}),s&&(0,D.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.message})]},t);case"number":return(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,D.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,D.jsx)("input",{type:"number",value:i,onChange:e=>p(t,e.target.value?parseFloat(e.target.value):""),className:r}),s&&(0,D.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.message})]},t);case"currency":return(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,D.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,D.jsx)("input",{type:"text",value:"number"===typeof i?i.toFixed(2):i,onChange:e=>p(t,e.target.value?parseFloat(e.target.value.replace(/[^\d.]/g,"")):""),placeholder:"0.00",className:r}),s&&(0,D.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.message})]},t);case"date":return(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,D.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,D.jsx)("input",{type:"date",value:i,onChange:e=>p(t,e.target.value),className:r}),s&&(0,D.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.message})]},t);case"select":const n=e.options||[];return(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,D.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,D.jsxs)("select",{value:i,onChange:e=>p(t,e.target.value),className:r,children:[(0,D.jsx)("option",{value:"",children:"Selecione..."}),n.map(e=>(0,D.jsx)("option",{value:e,children:e},e))]}),s&&(0,D.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.message})]},t);case"textarea":return(0,D.jsxs)("div",{className:"mb-3",children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,e.required&&(0,D.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,D.jsx)("textarea",{value:i,onChange:e=>p(t,e.target.value),rows:3,className:"".concat(r," resize-none")}),s&&(0,D.jsx)("p",{className:"text-red-500 text-xs mt-1",children:s.message})]},t);default:return null}},[n,a,p]),m=(0,e.useCallback)(e=>{const t=s.has(e.id),r=n[e.id]||{};if(e.subsections){const s=Array.isArray(r)?r:[];return(0,D.jsxs)("div",{className:"mb-4 border rounded-lg overflow-hidden",children:[(0,D.jsxs)("button",{onClick:()=>u(e.id),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-medium hover:from-blue-700 hover:to-blue-800 flex items-center justify-between",children:[(0,D.jsxs)("span",{className:"flex items-center gap-2",children:[t?(0,D.jsx)(y,{size:20}):(0,D.jsx)(b,{size:20}),e.title]}),(0,D.jsx)("span",{className:"text-sm bg-blue-800 px-2 py-1 rounded",children:s.length})]}),t&&(0,D.jsxs)("div",{className:"p-4 bg-white",children:[s.map((t,r)=>(0,D.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,D.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,D.jsxs)("h4",{className:"font-semibold text-gray-700",children:[e.subsections[0].title," #",r+1]}),(0,D.jsx)("button",{onClick:()=>{const t=s.filter((e,t)=>t!==r);i(o(o({},n),{},{[e.id]:t}))},className:"text-red-500 hover:text-red-700",children:(0,D.jsx)(w,{size:18})})]}),e.subsections[0].fields.map(t=>f(t,"".concat(e.id,"[").concat(r,"].").concat(t.name)))]},r)),(0,D.jsxs)("button",{onClick:()=>{const t=[...s,{}];i(o(o({},n),{},{[e.id]:t}))},className:"w-full py-2 px-4 bg-blue-100 text-blue-700 font-medium rounded-lg hover:bg-blue-200 flex items-center justify-center gap-2",children:[(0,D.jsx)(_,{size:18})," Adicionar ",e.subsections[0].title]})]})]},e.id)}return(0,D.jsxs)("div",{className:"mb-4 border rounded-lg overflow-hidden",children:[(0,D.jsx)("button",{onClick:()=>u(e.id),className:"w-full px-4 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white font-medium hover:from-gray-700 hover:to-gray-800 flex items-center justify-between",children:(0,D.jsxs)("span",{className:"flex items-center gap-2",children:[t?(0,D.jsx)(y,{size:20}):(0,D.jsx)(b,{size:20}),e.title]})}),t&&(0,D.jsx)("div",{className:"p-4 bg-white",children:e.fields.map(t=>f(t,"".concat(e.id,".").concat(t.name)))})]},e.id)},[s,n,i,f,u]);return(0,D.jsxs)("div",{className:"flex h-full gap-4 p-4",children:[(0,D.jsx)("div",{className:"flex-1 overflow-auto",children:(0,D.jsxs)("div",{className:"max-w-2xl",children:[(0,D.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Presta\xe7\xe3o de Contas AUDESP"}),A.map(e=>m(e))]})}),c&&(0,D.jsxs)("div",{className:"w-96 border border-gray-300 rounded-lg bg-white flex flex-col",children:[(0,D.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[(0,D.jsx)("h2",{className:"font-bold text-gray-900",children:"JSON Preview"}),(0,D.jsx)("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:(0,D.jsx)(x,{size:18})})]}),(0,D.jsxs)("div",{className:"flex-1 overflow-auto p-4",children:[(0,D.jsx)("pre",{className:"text-xs bg-gray-100 p-3 rounded border border-gray-200 overflow-auto",children:JSON.stringify(n,null,2)}),(0,D.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(n,null,2))},className:"w-full mt-3 py-2 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[(0,D.jsx)(k,{size:16})," Copiar JSON"]})]}),a.length>0&&(0,D.jsxs)("div",{className:"border-t border-gray-200 p-4 max-h-32 overflow-auto",children:[(0,D.jsxs)("h3",{className:"font-semibold text-red-600 mb-2 flex items-center gap-2",children:[(0,D.jsx)(h,{size:16})," Erros (",a.length,")"]}),a.map((e,t)=>(0,D.jsxs)("div",{className:"text-xs text-red-600 mb-1",children:[(0,D.jsx)("strong",{children:e.path}),": ",e.message]},t))]})]})]})},R=d("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),F=e=>{let{data:t}=e;const n=(e,t)=>{const n=document.createElement("a");n.setAttribute("href","data:text/html;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},i=(e,t)=>{if(0===t.length)return void alert("Nenhum dado para exportar");const n=Object.keys(t[0]),i=[n.join(","),...t.map(e=>n.map(t=>"string"===typeof e[t]&&e[t].includes(",")?'"'.concat(e[t],'"'):e[t]).join(","))].join("\n"),s=document.createElement("a");s.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(i)),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)};return(0,D.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,D.jsx)(R,{size:24,className:"text-blue-600"}),(0,D.jsx)("h2",{className:"text-xl font-bold",children:"Gerador de Relat\xf3rios"})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,D.jsxs)("button",{onClick:()=>n((()=>{let e='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <title>Demonstrativo de Execu\xe7\xe3o Financeira</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }\n            h1 { text-align: center; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 10px; }\n            h2 { color: #003366; margin-top: 30px; }\n            table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n            th { background-color: #003366; color: white; padding: 10px; text-align: left; }\n            td { border: 1px solid #ddd; padding: 8px; }\n            tr:nth-child(even) { background-color: #f9f9f9; }\n            .total { font-weight: bold; background-color: #f0f0f0; }\n            .currency { text-align: right; }\n            .footer { margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px; font-size: 12px; }\n          </style>\n        </head>\n        <body>\n          <h1>Demonstrativo de Execu\xe7\xe3o Financeira</h1>\n          \n          <h2>Documentos Fiscais</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>N\xfamero</th>\n                <th>Tipo</th>\n                <th>Data</th>\n                <th class="currency">Valor Bruto</th>\n                <th class="currency">Dedu\xe7\xf5es</th>\n                <th class="currency">Valor L\xedquido</th>\n              </tr>\n            </thead>\n            <tbody>\n    ',n=0,i=0;t.documentos_fiscais.forEach(t=>{const s=t.valor_bruto||0,r=(t.desconto||0)+(t.retencao_ir||0)+(t.retencao_inss||0)+(t.retencao_iss||0),a=s-r;n+=s,i+=r,e+="\n        <tr>\n          <td>".concat(t.numero||"-","</td>\n          <td>").concat(t.tipo||"-","</td>\n          <td>").concat(t.data_emissao||"-",'</td>\n          <td class="currency">R$ ').concat(s.toFixed(2),'</td>\n          <td class="currency">R$ ').concat(r.toFixed(2),'</td>\n          <td class="currency">R$ ').concat(a.toFixed(2),"</td>\n        </tr>\n      ")}),e+='\n            <tr class="total">\n              <td colspan="3">TOTAL</td>\n              <td class="currency">R$ '.concat(n.toFixed(2),'</td>\n              <td class="currency">R$ ').concat(i.toFixed(2),'</td>\n              <td class="currency">R$ ').concat((n-i).toFixed(2),'</td>\n            </tr>\n            </tbody>\n          </table>\n\n          <h2>Pagamentos Realizados</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Documento</th>\n                <th>Data</th>\n                <th>Forma de Pagamento</th>\n                <th class="currency">Valor</th>\n              </tr>\n            </thead>\n            <tbody>\n    ');let s=0;return t.pagamentos.forEach(t=>{const n=t.valor_pago||0;s+=n,e+="\n        <tr>\n          <td>".concat(t.numero_documento||"-","</td>\n          <td>").concat(t.data_pagamento||"-","</td>\n          <td>").concat(t.forma_pagamento||"-",'</td>\n          <td class="currency">R$ ').concat(n.toFixed(2),"</td>\n        </tr>\n      ")}),e+='\n            <tr class="total">\n              <td colspan="3">TOTAL</td>\n              <td class="currency">R$ '.concat(s.toFixed(2),'</td>\n            </tr>\n            </tbody>\n          </table>\n\n          <div class="footer">\n            <p>Relat\xf3rio gerado automaticamente pelo sistema AUDESP</p>\n            <p>Data: ').concat((new Date).toLocaleDateString("pt-BR"),"</p>\n          </div>\n        </body>\n      </html>\n    "),e})(),"Demonstrativo_Financeiro.html"),className:"flex items-center justify-center gap-2 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-medium transition",children:[(0,D.jsx)(p,{size:18})," Demonstrativo Financeiro"]}),(0,D.jsxs)("button",{onClick:()=>n((()=>{let e='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <title>Rela\xe7\xe3o de Contratos</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }\n            h1 { text-align: center; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 10px; }\n            table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n            th { background-color: #003366; color: white; padding: 10px; text-align: left; }\n            td { border: 1px solid #ddd; padding: 8px; }\n            tr:nth-child(even) { background-color: #f9f9f9; }\n            .total { font-weight: bold; background-color: #f0f0f0; }\n            .currency { text-align: right; }\n          </style>\n        </head>\n        <body>\n          <h1>Rela\xe7\xe3o de Contratos</h1>\n          <table>\n            <thead>\n              <tr>\n                <th>N\xfamero</th>\n                <th>Objeto</th>\n                <th>Vig\xeancia In\xedcio</th>\n                <th>Vig\xeancia Fim</th>\n                <th class="currency">Valor Total</th>\n              </tr>\n            </thead>\n            <tbody>\n    ',n=0;return t.contratos.forEach(t=>{const i=t.valor_total||0;n+=i,e+="\n        <tr>\n          <td>".concat(t.numero||"-","</td>\n          <td>").concat(t.objeto||"-","</td>\n          <td>").concat(t.data_vigencia_inicio||"-","</td>\n          <td>").concat(t.data_vigencia_fim||"-",'</td>\n          <td class="currency">R$ ').concat(i.toFixed(2),"</td>\n        </tr>\n      ")}),e+='\n            <tr class="total">\n              <td colspan="4">TOTAL</td>\n              <td class="currency">R$ '.concat(n.toFixed(2),"</td>\n            </tr>\n            </tbody>\n          </table>\n        </body>\n      </html>\n    "),e})(),"Relacao_Contratos.html"),className:"flex items-center justify-center gap-2 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-medium transition",children:[(0,D.jsx)(p,{size:18})," Rela\xe7\xe3o de Contratos"]}),(0,D.jsxs)("button",{onClick:()=>i("Documentos_Fiscais.csv",t.documentos_fiscais),className:"flex items-center justify-center gap-2 bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 font-medium transition",children:[(0,D.jsx)(p,{size:18})," Documentos Fiscais (CSV)"]}),(0,D.jsxs)("button",{onClick:()=>i("Pagamentos.csv",t.pagamentos),className:"flex items-center justify-center gap-2 bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 font-medium transition",children:[(0,D.jsx)(p,{size:18})," Pagamentos (CSV)"]})]}),(0,D.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,D.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,D.jsx)("strong",{children:"Nota:"}),' Os relat\xf3rios s\xe3o gerados em HTML e podem ser abertos em qualquer navegador para impress\xe3o em PDF. Use a fun\xe7\xe3o "Imprimir" do navegador para converter para PDF.']})})]})},I=d("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);function L(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(s){t[i]=s,e.apply(n,t)}})}function O(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function j(e,t){O(e,t),t.add(e)}function B(e,t,n){O(e,t),t.set(e,n)}function W(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function z(e,t,n){return n(W(e,t))}function U(e,t){return e.get(W(e,t))}function V(e,t,n){return e.set(W(e,t),n),n}function H(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return H=function(e){this.s=e,this.n=e.next},H.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new H(e)}var q,G,$,K,X,Y,Q,J,Z,ee,te,ne,ie,se,re,ae,oe,le;const ce="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),de=[.001,0,0,.001,0,0],ue=1.35,he=1,pe=2,fe=4,me=16,ge=32,ve=64,ye=128,be=256,we={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_e="pdfjs_internal_editor_",xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Se=1,Ae=2,Ee=0,Ce=1,Me=2,Pe=3,Te=3,De=4,Ne={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Re={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Fe=1,Ie=2,Le=3,Oe=4,je=5,Be={ERRORS:0,WARNINGS:1,INFOS:5},We={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ze=0,Ue=1,Ve=2,He=3,qe=4;let Ge=Be.WARNINGS;function $e(e){Number.isInteger(e)&&(Ge=e)}function Ke(){return Ge}function Xe(e){Ge>=Be.INFOS&&console.info("Info: ".concat(e))}function Ye(e){Ge>=Be.WARNINGS&&console.warn("Warning: ".concat(e))}function Qe(e){throw new Error(e)}function Je(e,t){e||Qe(t)}function Ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(s){}}const i=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i)?i:null}function et(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=URL.parse(e);return i?(i.hash=t,i.href):n&&Ze(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function tt(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const nt=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class it extends nt{constructor(e,t){super(e,"PasswordException"),this.code=t}}class st extends nt{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rt extends nt{constructor(e){super(e,"InvalidPDFException")}}class at extends nt{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class ot extends nt{constructor(e){super(e,"FormatError")}}class lt extends nt{constructor(e){super(e,"AbortException")}}function ct(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||Qe("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let s=0;s<t;s+=n){const r=Math.min(s+n,t),a=e.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function dt(e){"string"!==typeof e&&Qe("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}class ut{static get isLittleEndian(){return tt(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return tt(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return tt(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return tt(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get isFloat16ArraySupported(){return tt(this,"isFloat16ArraySupported","undefined"!==typeof Float16Array)}static get isSanitizerSupported(){return tt(this,"isSanitizerSupported","undefined"!==typeof Sanitizer)}static get platform(){const{platform:e,userAgent:t}=navigator;return tt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return tt(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ht=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class pt{static makeHexColor(e,t,n){return"#".concat(ht[e]).concat(ht[t]).concat(ht[n])}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=e[n],s=e[n+1];e[n]=i*t[0]+s*t[2]+t[4],e[n+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],d=e[n+c+1];e[n+c]=t*i+d*r+o,e[n+c+1]=t*s+d*a+l}}static applyInverseTransform(e,t){const n=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const i=t[0],s=t[1],r=t[2],a=t[3],o=t[4],l=t[5],c=e[0],d=e[1],u=e[2],h=e[3];let p=i*c+o,f=p,m=i*u+o,g=m,v=a*d+l,y=v,b=a*h+l,w=b;if(0!==s||0!==r){const e=s*c,t=s*u,n=r*d,i=r*h;p+=n,g+=n,m+=i,f+=i,v+=e,w+=e,b+=t,y+=t}n[0]=Math.min(n[0],p,m,f,g),n[1]=Math.min(n[1],v,b,y,w),n[2]=Math.max(n[2],p,m,f,g),n[3]=Math.max(n[3],v,b,y,w)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],s=e[2],r=e[3],a=n**2+i**2,o=n*s+i*r,l=s**2+r**2,c=(a+l)/2,d=Math.sqrt(c**2-(a*l-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>r?null:[n,s,i,r]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,n,i,s,r,a,o,l){l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o),W(pt,this,mt).call(this,e,n,s,a,t,i,r,o,3*(3*(n-s)-e+a),6*(e-2*n+s),3*(n-e),l),W(pt,this,mt).call(this,e,n,s,a,t,i,r,o,3*(3*(i-r)-t+o),6*(t-2*i+r),3*(i-t),l)}}function ft(e,t,n,i,s,r,a,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,p=d*(d*(d*e+3*l*t)+3*u*n)+h*i,f=d*(d*(d*s+3*l*r)+3*u*a)+h*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function mt(e,t,n,i,s,r,a,o,l,c,d,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&W(q,this,ft).call(this,e,t,n,i,s,r,a,o,-d/c,u));const h=c**2-4*d*l;if(h<0)return;const p=Math.sqrt(h),f=2*l;W(q,this,ft).call(this,e,t,n,i,s,r,a,o,(-c+p)/f,u),W(q,this,ft).call(this,e,t,n,i,s,r,a,o,(-c-p)/f,u)}q=pt;let gt=null,vt=null;function yt(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),ct(e)}const bt="pdfjs_internal_id_";function wt(e,t,n){return Math.min(Math.max(e,t),n)}function _t(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(ct(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});class xt{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let s=null;const r=n.name;if("#text"===r)s=n.value;else{if(!xt.shouldBuildText(r))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?s=n.attributes.textContent:n.value&&(s=n.value)}if(null!==s&&t.push({str:s}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}class kt{static setupStorage(e,t,n,i,s){const r=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(e.textContent=r.value),"print"===s)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?e.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==r.value&&e.setAttribute("value",r.value),"print"===s)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})})}break;case"select":if(null!==r.value){e.setAttribute("value",r.value);for(const e of n.children)e.attributes.value===r.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:s})})}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:s,linkService:r}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(s));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&r.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:s,linkService:n});const a="richText"!==s,o=e.div;if(o.append(r),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);r.append(e),a&&xt.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,r]];for(;c.length>0;){var d,u;const[e,i,r]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),r.append(e);continue}const p=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(r.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:s,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);a&&xt.shouldBuildText(h)&&l.push(e),p.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const St="http://www.w3.org/2000/svg";class At{}async function Et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Nt(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)i(new Error(s.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)})}G=At,r(At,"CSS",96),r(At,"PDF",72),r(At,"PDF_TO_CSS_UNITS",G.CSS/G.PDF);class Ct{constructor(e){let{viewBox:t,userUnit:n,scale:i,rotation:s,offsetX:r=0,offsetY:a=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=a,i*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,u,h,p,f,m,g,v;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,u=0,h=0,p=1;break;case 90:d=0,u=1,h=1,p=0;break;case 270:d=0,u=-1,h=-1,p=0;break;case 0:d=1,u=0,h=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,p=-p),0===d?(f=Math.abs(c-t[1])*i+r,m=Math.abs(l-t[0])*i+a,g=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(f=Math.abs(l-t[0])*i+r,m=Math.abs(c-t[1])*i+a,g=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[d*i,u*i,h*i,p*i,f-d*i*l-h*i*c,m-u*i*l-p*i*c],this.width=g,this.height=v}get rawDims(){const e=this.viewBox;return tt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ct({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return pt.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];pt.applyTransform(t,this.transform);const n=[e[2],e[3]];return pt.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return pt.applyInverseTransform(n,this.transform),n}}class Mt extends nt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Pt(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function Tt(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class Dt{constructor(){r(this,"started",Object.create(null)),r(this,"times",[])}time(e){e in this.started&&Ye("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ye("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:s}of this.times)e.push("".concat(n.padEnd(t)," ").concat(s-i,"ms\n"));return e.join("")}}function Nt(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Rt(e){e.preventDefault()}function Ft(e){e.preventDefault(),e.stopPropagation()}class It{static toDateObject(e){if(e instanceof Date)return e;if(!e||"string"!==typeof e)return null;W(It,this,Lt)._||(Lt._=W(It,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=W(It,this,Lt)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(r+=c,a+=d):"+"===l&&(r-=c,a-=d),new Date(Date.UTC(n,i,s,r,a,o))}}var Lt={_:void 0};function Ot(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ye('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function jt(e){const{a:t,b:n,c:i,d:s,e:r,f:a}=e.getTransform();return[t,n,i,s,r,a]}function Bt(e){const{a:t,b:n,c:i,d:s,e:r,f:a}=e.getTransform().invertSelf();return[t,n,i,s,r,a]}function Wt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Ct){const{pageWidth:i,pageHeight:s}=t.rawDims,{style:r}=e,a=ut.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(i,"px"),l="var(--total-scale-factor) * ".concat(s,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),d=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(r.width=d,r.height=c):(r.width=c,r.height=d)}i&&e.setAttribute("data-main-rotation",t.rotation)}class zt{constructor(){const{pixelRatio:e}=zt;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=1/0,a=1/0,o=1/0;(n=zt.capPixels(n,s))>0&&(r=Math.sqrt(n/(e*t))),-1!==i&&(a=i/e,o=i/t);const l=Math.min(r,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Ut=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Vt{static get isDarkMode(){var e,t;return tt(this,"isDarkMode",!(null===(e=window)||void 0===e||null===(t=e.matchMedia)||void 0===t||!t.call(e,"(prefers-color-scheme: dark)").matches))}}function Ht(e,t){const n=e[0]/255,i=e[1]/255,s=e[2]/255,r=Math.max(n,i,s),a=Math.min(n,i,s),o=(r+a)/2;if(r===a)t[0]=t[1]=0;else{const e=r-a;switch(t[1]=o<.5?e/(r+a):e/(2-r-a),r){case n:t[0]=60*((i-s)/e+(i<s?6:0));break;case i:t[0]=60*((s-n)/e+2);break;case s:t[0]=60*((n-i)/e+4)}}t[2]=o}function qt(e,t){const n=e[0],i=e[1],s=e[2],r=(1-Math.abs(2*s-1))*i,a=r*(1-Math.abs(n/60%2-1)),o=s-r/2;switch(Math.floor(n/60)){case 0:t[0]=r+o,t[1]=a+o,t[2]=o;break;case 1:t[0]=a+o,t[1]=r+o,t[2]=o;break;case 2:t[0]=o,t[1]=r+o,t[2]=a+o;break;case 3:t[0]=o,t[1]=a+o,t[2]=r+o;break;case 4:t[0]=a+o,t[1]=o,t[2]=r+o;break;case 5:case 6:t[0]=r+o,t[1]=o,t[2]=a+o}}function Gt(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function $t(e,t,n){qt(e,n),n.map(Gt);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];qt(t,n),n.map(Gt);const s=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const Kt=new Map;function Xt(e,t){let{html:n,dir:i,className:s}=e;const r=document.createDocumentFragment();if("string"===typeof n){const e=document.createElement("p");e.dir=i||"auto";const t=n.split(/(?:\r\n?|\n)/);for(let n=0,i=t.length;n<i;++n){const s=t[n];e.append(document.createTextNode(s)),n<i-1&&e.append(document.createElement("br"))}r.append(e)}else kt.render({xfaHtml:n,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",s),t.append(r)}function Yt(e){const t=new Path2D;if(!e)return t;for(let n=0,i=e.length;n<i;)switch(e[n++]){case ze:t.moveTo(e[n++],e[n++]);break;case Ue:t.lineTo(e[n++],e[n++]);break;case Ve:t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);break;case He:t.quadraticCurveTo(e[n++],e[n++],e[n++],e[n++]);break;case qe:t.closePath();break;default:Ye("Unrecognized drawing path operator: ".concat(e[n-1]))}return t}var Qt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,sn=new WeakMap,rn=new WeakMap,an=new WeakSet;class on{constructor(e){j(this,an),B(this,Qt,null),B(this,Jt,null),B(this,Zt,void 0),B(this,en,null),B(this,tn,null),B(this,nn,null),B(this,sn,null),B(this,rn,null),V(Zt,this,e),pn._||(pn._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=V(Qt,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=U(Zt,this)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Rt,{signal:t}),e.addEventListener("pointerdown",ln,{signal:t}));const n=V(en,this,document.createElement("div"));n.className="buttons",e.append(n);const i=U(Zt,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===U(Zt,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return e}get div(){return U(Qt,this)}hide(){var e;U(Qt,this).classList.add("hidden"),null===(e=U(Jt,this))||void 0===e||e.hideDropdown()}show(){var e,t;U(Qt,this).classList.remove("hidden"),null===(e=U(tn,this))||void 0===e||e.shown(),null===(t=U(nn,this))||void 0===t||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=U(Zt,this),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",pn._[e]),W(an,this,un).call(this,n)&&n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),U(en,this).append(n)}async addAltText(e){const t=await e.render();W(an,this,un).call(this,t),U(en,this).append(t,z(an,this,hn)),V(tn,this,e)}addComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(U(nn,this))return;const n=e.renderForToolbar();if(!n)return;W(an,this,un).call(this,n);const i=V(sn,this,z(an,this,hn));t?(U(en,this).insertBefore(n,t),U(en,this).insertBefore(i,t)):U(en,this).append(n,i),V(nn,this,e),e.toolbar=this}addColorPicker(e){if(U(Jt,this))return;V(Jt,this,e);const t=e.renderButton();W(an,this,un).call(this,t),U(en,this).append(t,z(an,this,hn))}async addEditSignatureButton(e){const t=V(rn,this,await e.renderEditButton(U(Zt,this)));W(an,this,un).call(this,t),U(en,this).append(t,z(an,this,hn))}removeButton(e){var t,n;if("comment"===e)null===(t=U(nn,this))||void 0===t||t.removeToolbarCommentButton(),V(nn,this,null),null===(n=U(sn,this))||void 0===n||n.remove(),V(sn,this,null)}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t)}}async addButtonBefore(e,t,n){if(!t&&"comment"===e)return;const i=U(en,this).querySelector(n);i&&"comment"===e&&this.addComment(t,i)}updateEditSignatureButton(e){U(rn,this)&&(U(rn,this).title=e)}remove(){var e;U(Qt,this).remove(),null===(e=U(Jt,this))||void 0===e||e.destroy(),V(Jt,this,null)}}function ln(e){e.stopPropagation()}function cn(e){U(Zt,this)._focusEventsAllowed=!1,Ft(e)}function dn(e){U(Zt,this)._focusEventsAllowed=!0,Ft(e)}function un(e){const t=U(Zt,this)._uiManager._signal;return t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("focusin",W(an,this,cn).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",W(an,this,dn).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Rt,{signal:t}),!0)}function hn(e){const t=document.createElement("div");return t.className="divider",t}var pn={_:null},fn=new WeakMap,mn=new WeakMap,gn=new WeakMap,vn=new WeakSet;class yn{constructor(e){j(this,vn),B(this,fn,null),B(this,mn,null),B(this,gn,void 0),V(gn,this,e)}show(e,t,n){const[i,s]=W(vn,this,wn).call(this,t,n),{style:r}=U(mn,this)||V(mn,this,W(vn,this,bn).call(this));e.append(U(mn,this)),r.insetInlineEnd="".concat(100*i,"%"),r.top="calc(".concat(100*s,"% + var(--editor-toolbar-vert-offset))")}hide(){U(mn,this).remove()}}function bn(){const e=V(mn,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=U(gn,this)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Rt,{signal:t});const n=V(fn,this,document.createElement("div"));return n.className="buttons",e.append(n),U(gn,this).hasCommentManager()&&W(vn,this,_n).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{U(gn,this).commentSelection("floating_button")}),W(vn,this,_n).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{U(gn,this).highlightSelection("floating_button")}),e}function wn(e,t){let n=0,i=0;for(const s of e){const e=s.y+s.height;if(e<n)continue;const r=s.x+(t?s.width:0);e>n?(i=r,n=e):t?r>i&&(i=r):r<i&&(i=r)}return[t?1-i:i,n]}function _n(e,t,n,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const r=document.createElement("span");s.append(r),r.className="visuallyHidden",r.setAttribute("data-l10n-id",n);const a=U(gn,this)._signal;a instanceof AbortSignal&&!a.aborted&&(s.addEventListener("contextmenu",Rt,{signal:a}),s.addEventListener("click",i,{signal:a})),U(fn,this).append(s)}function xn(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}class kn{static initializeAndAddPointerId(e){(An._||(An._=new Set)).add(e)}static setPointer(e,t){var n;Sn._||(Sn._=t),null!==(n=Cn._)&&void 0!==n||(Cn._=e)}static setTimeStamp(e){En._=e}static isSamePointerId(e){return Sn._===e}static isSamePointerIdOrRemove(e){var t;return Sn._===e||(null===(t=An._)||void 0===t||t.delete(e),!1)}static isSamePointerType(e){return Cn._===e}static isInitializedAndDifferentPointerType(e){return null!==Cn._&&!kn.isSamePointerType(e)}static isSameTimeStamp(e){return En._===e}static isUsingMultiplePointers(){var e;return(null===(e=An._)||void 0===e?void 0:e.size)>=1}static clearPointerType(){Cn._=null}static clearPointerIds(){Sn._=NaN,An._=null}static clearTimeStamp(){En._=NaN}}var Sn={_:NaN},An={_:null},En={_:NaN},Cn={_:null},Mn=new WeakMap;class Pn{constructor(){B(this,Mn,0)}get id(){var e,t;return"".concat(_e).concat((V(Mn,this,(e=U(Mn,this),t=e++,e)),t))}}var Tn=new WeakMap,Dn=new WeakMap,Nn=new WeakMap,Rn=new WeakSet;class Fn{constructor(){j(this,Rn),B(this,Tn,yt()),B(this,Dn,0),B(this,Nn,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return tt(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:s}=e;return W(Rn,this,In).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(s),e)}async getFromUrl(e){return W(Rn,this,In).call(this,e,e)}async getFromBlob(e,t){const n=await t;return W(Rn,this,In).call(this,e,n)}async getFromId(e){U(Nn,this)||V(Nn,this,new Map);const t=U(Nn,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,s;U(Nn,this)||V(Nn,this,new Map);let r=U(Nn,this).get(e);if(null!==(s=r)&&void 0!==s&&s.bitmap)return r.refCounter+=1,r;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),r={bitmap:a.transferToImageBitmap(),id:"image_".concat(U(Tn,this),"_").concat((V(Dn,this,(n=U(Dn,this),i=n++,n)),i)),refCounter:1,isSvg:!1},U(Nn,this).set(e,r),U(Nn,this).set(r.id,r),r}getSvgUrl(e){const t=U(Nn,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;U(Nn,this)||V(Nn,this,new Map);const n=U(Nn,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(U(Tn,this),"_"))}}async function In(e,t){var n;U(Nn,this)||V(Nn,this,new Map);let i=U(Nn,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var s,r;let e;if(i||(i={bitmap:null,id:"image_".concat(U(Tn,this),"_").concat((V(Dn,this,(s=U(Dn,this),r=s++,s)),r)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await Et(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=$._isSVGFittingCanvas,n=new FileReader,s=new Image,r=new Promise((e,r)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;s.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},s.onerror=n.onerror=r});n.readAsDataURL(e),await r}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(a){Ye(a),i=null}return U(Nn,this).set(e,i),i&&U(Nn,this).set(i.id,i),i}$=Fn;var Ln=new WeakMap,On=new WeakMap,jn=new WeakMap,Bn=new WeakMap;class Wn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;B(this,Ln,[]),B(this,On,!1),B(this,jn,void 0),B(this,Bn,-1),V(jn,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(s&&t(),U(On,this))return;const l={cmd:t,undo:n,post:i,type:r};if(-1===U(Bn,this))return U(Ln,this).length>0&&(U(Ln,this).length=0),V(Bn,this,0),void U(Ln,this).push(l);if(a&&U(Ln,this)[U(Bn,this)].type===r)return o&&(l.undo=U(Ln,this)[U(Bn,this)].undo),void(U(Ln,this)[U(Bn,this)]=l);const c=U(Bn,this)+1;c===U(jn,this)?U(Ln,this).splice(0,1):(V(Bn,this,c),c<U(Ln,this).length&&U(Ln,this).splice(c)),U(Ln,this).push(l)}undo(){if(-1===U(Bn,this))return;V(On,this,!0);const{undo:e,post:t}=U(Ln,this)[U(Bn,this)];e(),null===t||void 0===t||t(),V(On,this,!1),V(Bn,this,U(Bn,this)-1)}redo(){if(U(Bn,this)<U(Ln,this).length-1){V(Bn,this,U(Bn,this)+1),V(On,this,!0);const{cmd:e,post:t}=U(Ln,this)[U(Bn,this)];e(),null===t||void 0===t||t(),V(On,this,!1)}}hasSomethingToUndo(){return-1!==U(Bn,this)}hasSomethingToRedo(){return U(Bn,this)<U(Ln,this).length-1}cleanType(e){if(-1!==U(Bn,this)){for(let t=U(Bn,this);t>=0;t--)if(U(Ln,this)[t].type!==e)return U(Ln,this).splice(t+1,U(Bn,this)-t),void V(Bn,this,t);U(Ln,this).length=0,V(Bn,this,-1)}}destroy(){V(Ln,this,null)}}var zn=new WeakSet;class Un{constructor(e){j(this,zn),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ut.platform;for(const[n,i,s={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(W(zn,this,Vn).call(this,t));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:r=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...r,t)(),s||Ft(t))}}function Vn(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class Hn{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,Ot(i))}t.remove()}(e),tt(this,"_colors",e)}convert(e){const t=Ot(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((e,n)=>e===t[n]))return Hn._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?pt.makeHexColor(...t):e}}r(Hn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var qn=new WeakMap,Gn=new WeakMap,$n=new WeakMap,Kn=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,Zn=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,ii=new WeakMap,si=new WeakMap,ri=new WeakMap,ai=new WeakMap,oi=new WeakMap,li=new WeakMap,ci=new WeakMap,di=new WeakMap,ui=new WeakMap,hi=new WeakMap,pi=new WeakMap,fi=new WeakMap,mi=new WeakMap,gi=new WeakMap,vi=new WeakMap,yi=new WeakMap,bi=new WeakMap,wi=new WeakMap,_i=new WeakMap,xi=new WeakMap,ki=new WeakMap,Si=new WeakMap,Ai=new WeakMap,Ei=new WeakMap,Ci=new WeakMap,Mi=new WeakMap,Pi=new WeakMap,Ti=new WeakMap,Di=new WeakMap,Ni=new WeakMap,Ri=new WeakMap,Fi=new WeakMap,Ii=new WeakMap,Li=new WeakMap,Oi=new WeakMap,ji=new WeakMap,Bi=new WeakMap,Wi=new WeakSet;class zi{static get _keyboardManager(){const e=zi.prototype,t=e=>U(Li,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return tt(this,"_keyboardManager",new Un([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&U(Li,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&U(Li,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,n,i,s,a,o,l,c,d,u,h,p,f,m,g){j(this,Wi),B(this,qn,new AbortController),B(this,Gn,null),B(this,$n,null),B(this,Kn,new Map),B(this,Xn,new Map),B(this,Yn,null),B(this,Qn,null),B(this,Jn,null),B(this,Zn,new Wn),B(this,ei,null),B(this,ti,null),B(this,ni,null),B(this,ii,0),B(this,si,new Set),B(this,ri,null),B(this,ai,null),B(this,oi,new Set),r(this,"_editorUndoBar",null),B(this,li,!1),B(this,ci,!1),B(this,di,!1),B(this,ui,null),B(this,hi,null),B(this,pi,null),B(this,fi,null),B(this,mi,!1),B(this,gi,null),B(this,vi,new Pn),B(this,yi,!1),B(this,bi,!1),B(this,wi,!1),B(this,_i,null),B(this,xi,null),B(this,ki,null),B(this,Si,null),B(this,Ai,null),B(this,Ei,xe.NONE),B(this,Ci,new Set),B(this,Mi,null),B(this,Pi,null),B(this,Ti,null),B(this,Di,null),B(this,Ni,null),B(this,Ri,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),B(this,Fi,[0,0]),B(this,Ii,null),B(this,Li,null),B(this,Oi,null),B(this,ji,null),B(this,Bi,null);const v=this._signal=U(qn,this).signal;V(Li,this,e),V(Oi,this,t),V(ji,this,n),V(Yn,this,i),V(ei,this,s),V(Pi,this,a),V(Ni,this,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:v}),window.addEventListener("pointerdown",()=>{V(bi,this,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{V(bi,this,!1)},{capture:!0,signal:v}),W(Wi,this,$i).call(this),W(Wi,this,es).call(this),W(Wi,this,Yi).call(this),V(Qn,this,l.annotationStorage),V(ui,this,l.filterFactory),V(Ti,this,c),V(fi,this,d||null),V(li,this,u),V(ci,this,h),V(di,this,p),V(Ai,this,f||null),this.viewParameters={realScale:At.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=!1!==g,null===s||void 0===s||s.setSidebarUiManager(this)}destroy(){var e,t,n,i,s,r,a,o,l;null===(e=U(Bi,this))||void 0===e||e.resolve(),V(Bi,this,null),null===(t=U(qn,this))||void 0===t||t.abort(),V(qn,this,null),this._signal=null;for(const c of U(Xn,this).values())c.destroy();U(Xn,this).clear(),U(Kn,this).clear(),U(oi,this).clear(),null===(n=U(Si,this))||void 0===n||n.clear(),V(Gn,this,null),U(Ci,this).clear(),U(Zn,this).destroy(),null===(i=U(Yn,this))||void 0===i||i.destroy(),null===(s=U(ei,this))||void 0===s||s.destroy(),null===(r=U(Pi,this))||void 0===r||r.destroy(),null===(a=U(gi,this))||void 0===a||a.hide(),V(gi,this,null),null===(o=U(ki,this))||void 0===o||o.destroy(),V(ki,this,null),V($n,this,null),U(hi,this)&&(clearTimeout(U(hi,this)),V(hi,this,null)),U(Ii,this)&&(clearTimeout(U(Ii,this)),V(Ii,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy(),V(Ni,this,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return U(Ai,this)}get useNewAltTextFlow(){return U(ci,this)}get useNewAltTextWhenAddingImage(){return U(di,this)}get hcmFilter(){return tt(this,"hcmFilter",U(Ti,this)?U(ui,this).addHCMFilter(U(Ti,this).foreground,U(Ti,this).background):"none")}get direction(){return tt(this,"direction",getComputedStyle(U(Li,this)).direction)}get _highlightColors(){return tt(this,"_highlightColors",U(fi,this)?new Map(U(fi,this).split(",").map(e=>((e=e.split("=").map(e=>e.trim()))[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return tt(this,"highlightColors",null);const t=new Map,n=!!U(Ti,this);for(const[i,s]of e){const e=i.endsWith("_HCM");n&&e?t.set(i.replace("_HCM",""),s):n||e||t.set(i,s)}return tt(this,"highlightColors",t)}get highlightColorNames(){return tt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),V(ni,this,e)}setMainHighlightColorPicker(e){V(ki,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=U(Yn,this))||void 0===t||t.editAltText(this,e,n)}hasCommentManager(){return!!U(ei,this)}editComment(e,t,n,i){var s;null===(s=U(ei,this))||void 0===s||s.showDialog(this,e,t,n,i)}selectComment(e,t){const n=U(Xn,this).get(e),i=null===n||void 0===n?void 0:n.getEditorByUID(t);null===i||void 0===i||i.toggleComment(!0,!0)}updateComment(e){var t;null===(t=U(ei,this))||void 0===t||t.updateComment(e.getData())}updatePopupColor(e){var t;null===(t=U(ei,this))||void 0===t||t.updatePopupColor(e)}removeComment(e){var t;null===(t=U(ei,this))||void 0===t||t.removeComments([e.uid])}toggleComment(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null===(n=U(ei,this))||void 0===n||n.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){var n;return e&&(null===(n=U(ei,this))||void 0===n?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return(null===(e=U(ei,this))||void 0===e?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(U(Xn,this).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=n=>{n.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var t;null===(t=U(Pi,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return U(Pi,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)V(di,this,n)}onPageChanging(e){let{pageNumber:t}=e;V(ii,this,t-1)}focusMainContainer(){U(Li,this).focus()}findParent(e,t){for(const n of U(Xn,this).values()){const{x:i,y:s,width:r,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+r&&t>=s&&t<=s+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];U(Oi,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){U(oi,this).add(e)}removeShouldRescale(e){U(oi,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*At.PDF_TO_CSS_UNITS;for(const i of U(oi,this))i.onScaleChanging();null===(t=U(ni,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a}=n,o=n.toString(),l=W(Wi,this,Ui).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const d=W(Wi,this,Vi).call(this,l),u=U(Ei,this)===xe.NONE,h=()=>{const n=null===d||void 0===d?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:a,text:o});u&&this.showAllEditors("highlight",!0,!0),t&&(null===n||void 0===n||n.editComment())};u?this.switchToMode(xe.HIGHLIGHT,h):h()}commentSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!U(Qn,this))return null;const t="".concat(_e).concat(e),n=U(Qn,this).getRawValue(t);return n&&U(Qn,this).remove(t),n}addToAnnotationStorage(e){e.isEmpty()||!U(Qn,this)||U(Qn,this).has(e.id)||U(Qn,this).setValue(e.id,e)}a11yAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=U(ji,this);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,U(mi,this)&&(V(mi,this,!1),W(Wi,this,Gi).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of U(Ci,this))if(t.div.contains(e)){V(xi,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!U(xi,this))return;const[e,t]=U(xi,this);V(xi,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){W(Wi,this,Yi).call(this),this.setEditingState(!0)}removeEditListeners(){W(Wi,this,Qi).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of U(ai,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of U(ai,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=U(Gn,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of U(Ci,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const e of U(ai,this))if(e.isHandlingMimeForPasting(r.type))return void e.paste(r,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void Ye('paste: "'.concat(s.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const r of n){const t=await i.deserialize(r);if(!t)return;e.push(t)}const t=()=>{for(const t of e)W(Wi,this,rs).call(this,t);W(Wi,this,ls).call(this,e)},s=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:s,mustExec:!0})}catch(s){Ye('paste: "'.concat(s.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),U(Ei,this)===xe.NONE||this.isEditorHandlingKeyboard||zi._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,U(mi,this)&&(V(mi,this,!1),W(Wi,this,Gi).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(e){e?(W(Wi,this,Ki).call(this),W(Wi,this,Ji).call(this),W(Wi,this,ts).call(this,{isEditing:U(Ei,this)!==xe.NONE,isEmpty:W(Wi,this,os).call(this),hasSomethingToUndo:U(Zn,this).hasSomethingToUndo(),hasSomethingToRedo:U(Zn,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(W(Wi,this,Xi).call(this),W(Wi,this,Zi).call(this),W(Wi,this,ts).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!U(ai,this)){V(ai,this,e);for(const e of U(ai,this))W(Wi,this,ns).call(this,e.defaultPropertiesToUpdate)}}getId(){return U(vi,this).id}get currentLayer(){return U(Xn,this).get(U(ii,this))}getLayer(e){return U(Xn,this).get(e)}get currentPageIndex(){return U(ii,this)}addLayer(e){U(Xn,this).set(e.pageIndex,e),U(yi,this)?e.enable():e.disable()}removeLayer(e){U(Xn,this).delete(e.pageIndex)}async updateMode(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(U(Ei,this)!==e&&(!U(Bi,this)||(await U(Bi,this).promise,U(Bi,this)))){var l,c;if(V(Bi,this,Promise.withResolvers()),null===(t=U(ni,this))||void 0===t||t.commitOrRemove(),U(Ei,this)===xe.POPUP)null===(l=U(ei,this))||void 0===l||l.hideSidebar();if(null===(n=U(ei,this))||void 0===n||n.destroyPopup(),V(Ei,this,e),e===xe.NONE){var d;this.setEditingState(!1),W(Wi,this,ss).call(this);for(const e of U(Kn,this).values())e.hideStandaloneCommentButton();return null===(d=this._editorUndoBar)||void 0===d||d.hide(),this.toggleComment(null),void U(Bi,this).resolve()}for(const e of U(Kn,this).values())e.addStandaloneCommentButton();if(e===xe.SIGNATURE)await(null===(c=U(Pi,this))||void 0===c?void 0:c.loadSignatures());s&&kn.clearPointerType(),this.setEditingState(!0),await W(Wi,this,is).call(this),this.unselectAll();for(const t of U(Xn,this).values())t.updateMode(e);if(e===xe.POPUP){var u;U($n,this)||V($n,this,await U(Ni,this).getAnnotationsByType(new Set(U(ai,this).map(e=>e._editorType))));const e=new Set,t=[];for(const n of U(Kn,this).values()){const{annotationElementId:i,hasComment:s,deleted:r}=n;i&&e.add(i),s&&!r&&t.push(n.getData())}for(const n of U($n,this)){const{id:i,popupRef:s,contentsObj:r}=n;s&&null!==r&&void 0!==r&&r.str&&!e.has(i)&&!U(si,this).has(i)&&t.push(n)}null===(u=U(ei,this))||void 0===u||u.showSidebar(t)}if(!i)return r&&this.addNewEditorFromKeyboard(),void U(Bi,this).resolve();for(const e of U(Kn,this).values())e.uid===i?(this.setSelected(e),o?e.editComment():a?e.enterInEditMode():e.focus()):e.unselect();U(Bi,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==U(Ei,this)&&this._eventBus.dispatch("switchannotationeditormode",o({source:this},e))}updateParams(e,t){if(U(ai,this)){switch(e){case ke.CREATE:return void this.currentLayer.addNewEditor(t);case ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(U(Di,this)||V(Di,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}if(this.hasSelection)for(const n of U(Ci,this))n.updateParams(e,t);else for(const n of U(ai,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const s of U(Kn,this).values())s.editorType===e&&s.show(t);(null===(n=null===(i=U(Di,this))||void 0===i?void 0:i.get(ke.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&W(Wi,this,ns).call(this,[[ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(U(wi,this)!==e){V(wi,this,e);for(const t of U(Xn,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of U(Kn,this).values())t.pageIndex===e&&(yield t)}getEditor(e){return U(Kn,this).get(e)}addEditor(e){U(Kn,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(U(hi,this)&&clearTimeout(U(hi,this)),V(hi,this,setTimeout(()=>{this.focusMainContainer(),V(hi,this,null)},0))),U(Kn,this).delete(e.id),e.annotationElementId)&&(null===(t=U(Si,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&U(si,this).has(e.annotationElementId))||(null===(n=U(Qn,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){U(si,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return U(si,this).has(e)}removeDeletedAnnotationElement(e){U(si,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){U(Gn,this)!==e&&(V(Gn,this,e),e&&W(Wi,this,ns).call(this,e.propertiesToUpdate))}updateUI(e){z(Wi,this,as)===e&&W(Wi,this,ns).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){W(Wi,this,ns).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(U(Ci,this).has(e))return U(Ci,this).delete(e),e.unselect(),void W(Wi,this,ts).call(this,{hasSelectedEditor:this.hasSelection});U(Ci,this).add(e),e.select(),W(Wi,this,ns).call(this,e.propertiesToUpdate),W(Wi,this,ts).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),null===(t=U(ni,this))||void 0===t||t.commitOrRemove();for(const n of U(Ci,this))n!==e&&n.unselect();U(Ci,this).clear(),U(Ci,this).add(e),e.select(),W(Wi,this,ns).call(this,e.propertiesToUpdate),W(Wi,this,ts).call(this,{hasSelectedEditor:!0})}isSelected(e){return U(Ci,this).has(e)}get firstSelectedEditor(){return U(Ci,this).values().next().value}unselect(e){e.unselect(),U(Ci,this).delete(e),W(Wi,this,ts).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==U(Ci,this).size}get isEnterHandled(){return 1===U(Ci,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;U(Zn,this).undo(),W(Wi,this,ts).call(this,{hasSomethingToUndo:U(Zn,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:W(Wi,this,os).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){U(Zn,this).redo(),W(Wi,this,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:U(Zn,this).hasSomethingToRedo(),isEmpty:W(Wi,this,os).call(this)})}addCommands(e){U(Zn,this).add(e),W(Wi,this,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:W(Wi,this,os).call(this)})}cleanUndoStack(e){U(Zn,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...U(Ci,this)],i=()=>{for(const e of n)W(Wi,this,rs).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(i,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:i,mustExec:!0})}commitOrRemove(){var e;null===(e=U(Gn,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return U(Gn,this)||this.hasSelection}selectAll(){for(const e of U(Ci,this))e.commit();W(Wi,this,ls).call(this,U(Kn,this).values())}unselectAll(){var e;if((!U(Gn,this)||(U(Gn,this).commitOrRemove(),U(Ei,this)===xe.NONE))&&(null===(e=U(ni,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of U(Ci,this))e.unselect();U(Ci,this).clear(),W(Wi,this,ts).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;U(Fi,this)[0]+=e,U(Fi,this)[1]+=t;const[n,i]=U(Fi,this),s=[...U(Ci,this)];U(Ii,this)&&clearTimeout(U(Ii,this)),V(Ii,this,setTimeout(()=>{V(Ii,this,null),U(Fi,this)[0]=U(Fi,this)[1]=0,this.addCommands({cmd:()=>{for(const e of s)U(Kn,this).has(e.id)&&(e.translateInPage(n,i),e.translationDone())},undo:()=>{for(const e of s)U(Kn,this).has(e.id)&&(e.translateInPage(-n,-i),e.translationDone())},mustExec:!1})},1e3));for(const r of s)r.translateInPage(e,t),r.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),V(ri,this,new Map);for(const e of U(Ci,this))U(ri,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!U(ri,this))return!1;this.disableUserSelect(!1);const e=U(ri,this);V(ri,this,null);let t=!1;for(const[{x:i,y:s,pageIndex:r},a]of e)a.newX=i,a.newY=s,a.newPageIndex=r,t||(t=i!==a.savedX||s!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(U(Kn,this).has(e.id)){const s=U(Xn,this).get(i);s?e._setParentAndPosition(s,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:s,newPageIndex:r}]of e)n(t,i,s,r)},undo:()=>{for(const[t,{savedX:i,savedY:s,savedPageIndex:r}]of e)n(t,i,s,r)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(U(ri,this))for(const n of U(ri,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===U(Ci,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return U(Gn,this)===e}getActive(){return U(Gn,this)}getMode(){return U(Ei,this)}isEditingMode(){return U(Ei,this)!==xe.NONE}get imageManager(){return tt(this,"imageManager",new Fn)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:r}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-i)/r,y:1-(e+a-n)/s,width:o/r,height:a/s});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/s,y:1-(t+o-i)/r,width:a/s,height:o/r});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-i)/r,y:(e-n)/s,width:o/r,height:a/s});break;default:a=(e,t,a,o)=>({x:(e-n)/s,y:(t-i)/r,width:a/s,height:o/r})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:s}of e.getClientRects())0!==i&&0!==s&&o.push(a(t,n,i,s))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(U(Jn,this)||V(Jn,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=U(Jn,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=U(Jn,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=U(Qn,this).getRawValue(n);i&&(U(Ei,this)!==xe.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var i;const s=null===(i=U(Si,this))||void 0===i?void 0:i.get(e);s&&(s.setCanvas(t,n),U(Si,this).delete(e))}addMissingCanvas(e,t){(U(Si,this)||V(Si,this,new Map)).set(e,t)}}function Ui(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function Vi(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of U(Xn,this).values())if(n.hasTextLayer(e))return n;return null}function Hi(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=W(Wi,this,Ui).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(U(gi,this)||V(gi,this,new yn(this)),U(gi,this).show(t,n,"ltr"===this.direction))}function qi(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(U(Mi,this))null===(n=U(gi,this))||void 0===n||n.hide(),V(Mi,this,null),W(Wi,this,ts).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===U(Mi,this))return;const s=W(Wi,this,Ui).call(this,t).closest(".textLayer");var r;if(s){if(null===(e=U(gi,this))||void 0===e||e.hide(),V(Mi,this,i),W(Wi,this,ts).call(this,{hasSelectedText:!0}),(U(Ei,this)===xe.HIGHLIGHT||U(Ei,this)===xe.NONE)&&(U(Ei,this)===xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),V(mi,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=U(Ei,this)===xe.HIGHLIGHT?W(Wi,this,Vi).call(this,s):null;if(null===e||void 0===e||e.toggleDrawing(),U(bi,this)){const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&W(Wi,this,Gi).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}else null===e||void 0===e||e.toggleDrawing(!0),W(Wi,this,Gi).call(this,"main_toolbar")}}else U(Mi,this)&&(null===(r=U(gi,this))||void 0===r||r.hide(),V(Mi,this,null),W(Wi,this,ts).call(this,{hasSelectedText:!1}))}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";U(Ei,this)===xe.HIGHLIGHT?this.highlightSelection(e):U(li,this)&&W(Wi,this,Hi).call(this)}function $i(){document.addEventListener("selectionchange",W(Wi,this,qi).bind(this),{signal:this._signal})}function Ki(){if(U(pi,this))return;V(pi,this,new AbortController);const e=this.combinedSignal(U(pi,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Xi(){var e;null===(e=U(pi,this))||void 0===e||e.abort(),V(pi,this,null)}function Yi(){if(U(_i,this))return;V(_i,this,new AbortController);const e=this.combinedSignal(U(_i,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function Qi(){var e;null===(e=U(_i,this))||void 0===e||e.abort(),V(_i,this,null)}function Ji(){if(U(ti,this))return;V(ti,this,new AbortController);const e=this.combinedSignal(U(ti,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Zi(){var e;null===(e=U(ti,this))||void 0===e||e.abort(),V(ti,this,null)}function es(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function ts(e){Object.entries(e).some(e=>{let[t,n]=e;return U(Ri,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(U(Ri,this),e)}),U(Ei,this)===xe.HIGHLIGHT&&!1===e.hasSelectedEditor&&W(Wi,this,ns).call(this,[[ke.HIGHLIGHT_FREE,!0]]))}function ns(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function is(){if(!U(yi,this)){V(yi,this,!0);const e=[];for(const t of U(Xn,this).values())e.push(t.enable());await Promise.all(e);for(const t of U(Kn,this).values())t.enable()}}function ss(){if(this.unselectAll(),U(yi,this)){V(yi,this,!1);for(const e of U(Xn,this).values())e.disable();for(const e of U(Kn,this).values())e.disable()}}function rs(e){const t=U(Xn,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function as(e){let t=null;for(t of U(Ci,e));return t}function os(){if(0===U(Kn,this).size)return!0;if(1===U(Kn,this).size)for(const e of U(Kn,this).values())return e.isEmpty();return!1}function ls(e){for(const t of U(Ci,this))t.unselect();U(Ci,this).clear();for(const t of e)t.isEmpty()||(U(Ci,this).add(t),t.select());W(Wi,this,ts).call(this,{hasSelectedEditor:this.hasSelection})}r(zi,"TRANSLATE_SMALL",1),r(zi,"TRANSLATE_BIG",10);var cs=new WeakMap,ds=new WeakMap,us=new WeakMap,hs=new WeakMap,ps=new WeakMap,fs=new WeakMap,ms=new WeakMap,gs=new WeakMap,vs=new WeakMap,ys=new WeakMap,bs=new WeakMap,ws=new WeakMap,_s=new WeakSet;class xs{constructor(e){j(this,_s),B(this,cs,null),B(this,ds,!1),B(this,us,null),B(this,hs,null),B(this,ps,null),B(this,fs,null),B(this,ms,!1),B(this,gs,null),B(this,vs,null),B(this,ys,null),B(this,bs,null),B(this,ws,!1),V(vs,this,e),V(ws,this,e._uiManager.useNewAltTextFlow),As._||(As._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=xs._l10n)&&void 0!==t||(xs._l10n=e)}async render(){const e=V(us,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=V(hs,this,document.createElement("span"));e.append(t),U(ws,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",As._.missing),t.setAttribute("data-l10n-id",As._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=U(vs,this)._uiManager._signal;e.addEventListener("contextmenu",Rt,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),U(vs,this)._uiManager.editAltText(U(vs,this)),U(ws,this)&&U(vs,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:z(_s,this,ks)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(V(ms,this,!0),i(t))},{signal:n}),await W(_s,this,Ss).call(this),e}finish(){U(us,this)&&(U(us,this).focus({focusVisible:U(ms,this)}),V(ms,this,!1))}isEmpty(){return U(ws,this)?null===U(cs,this):!U(cs,this)&&!U(ds,this)}hasData(){return U(ws,this)?null!==U(cs,this)||!!U(ys,this):this.isEmpty()}get guessedText(){return U(ys,this)}async setGuessedText(e){null===U(cs,this)&&(V(ys,this,e),V(bs,this,await xs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),W(_s,this,Ss).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!U(ws,this)||U(cs,this))return null===(t=U(gs,this))||void 0===t||t.remove(),void V(gs,this,null);if(!U(gs,this)){const e=V(gs,this,document.createElement("div"));e.className="noAltTextBadge",U(vs,this).div.append(e)}U(gs,this).classList.toggle("hidden",!e)}serialize(e){let t=U(cs,this);return e||U(ys,this)!==t||(t=U(bs,this)),{altText:t,decorative:U(ds,this),guessedText:U(ys,this),textWithDisclaimer:U(bs,this)}}get data(){return{altText:U(cs,this),decorative:U(ds,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:s,cancel:r=!1}=e;i&&(V(ys,this,i),V(bs,this,s)),U(cs,this)===t&&U(ds,this)===n||(r||(V(cs,this,t),V(ds,this,n)),W(_s,this,Ss).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];U(us,this)&&(!e&&U(fs,this)&&(clearTimeout(U(fs,this)),V(fs,this,null)),U(us,this).disabled=!e)}shown(){U(vs,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:z(_s,this,ks)}})}destroy(){var e,t;null===(e=U(us,this))||void 0===e||e.remove(),V(us,this,null),V(hs,this,null),V(ps,this,null),null===(t=U(gs,this))||void 0===t||t.remove(),V(gs,this,null)}}function ks(e){return(U(cs,e)?"added":null===U(cs,e)&&e.guessedText&&"review")||"missing"}async function Ss(){const e=U(us,this);if(!e)return;if(U(ws,this)){var t,n;if(e.classList.toggle("done",!!U(cs,this)),e.setAttribute("data-l10n-id",As._[z(_s,this,ks)]),null===(t=U(hs,this))||void 0===t||t.setAttribute("data-l10n-id",As._["".concat(z(_s,this,ks),"-label")]),!U(cs,this))return void(null===(n=U(ps,this))||void 0===n||n.remove())}else{var i;if(!U(cs,this)&&!U(ds,this))return e.classList.remove("done"),void(null===(i=U(ps,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=U(ps,this);if(!s){V(ps,this,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip"),s.id="alt-text-tooltip-".concat(U(vs,this).id);const t=100,n=U(vs,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(U(fs,this)),V(fs,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{V(fs,this,setTimeout(()=>{V(fs,this,null),U(ps,this).classList.add("show"),U(vs,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;U(fs,this)&&(clearTimeout(U(fs,this)),V(fs,this,null)),null===(e=U(ps,this))||void 0===e||e.classList.remove("show")},{signal:n})}U(ds,this)?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=U(cs,this)),s.parentNode||e.append(s);const r=U(vs,this).getElementForAltText();null===r||void 0===r||r.setAttribute("aria-describedby",s.id)}var As={_:null};r(xs,"_l10n",null);var Es=new WeakMap,Cs=new WeakMap,Ms=new WeakMap,Ps=new WeakMap,Ts=new WeakMap,Ds=new WeakMap,Ns=new WeakMap,Rs=new WeakMap,Fs=new WeakMap,Is=new WeakMap,Ls=new WeakSet;class Os{constructor(e){j(this,Ls),B(this,Es,null),B(this,Cs,null),B(this,Ms,!1),B(this,Ps,null),B(this,Ts,null),B(this,Ds,null),B(this,Ns,null),B(this,Rs,null),B(this,Fs,!1),B(this,Is,null),V(Ps,this,e)}renderForToolbar(){const e=V(Cs,this,document.createElement("button"));return e.className="comment",W(Ls,this,js).call(this,e,!1)}renderForStandalone(){const e=V(Es,this,document.createElement("button"));e.className="annotationCommentButton";const t=U(Ps,this).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd="calc(".concat(100*("ltr"===U(Ps,this)._uiManager.direction?1-t[0]:t[0]),"% - var(--comment-button-dim))"),n.top="calc(".concat(100*t[1],"% - var(--comment-button-dim))");const i=U(Ps,this).commentButtonColor;i&&(n.backgroundColor=i)}return W(Ls,this,js).call(this,e,!0)}focusButton(){setTimeout(()=>{var e,t;null===(e=null!==(t=U(Es,this))&&void 0!==t?t:U(Cs,this))||void 0===e||e.focus()},0)}onUpdatedColor(){if(!U(Es,this))return;const e=U(Ps,this).commentButtonColor;e&&(U(Es,this).style.backgroundColor=e),U(Ps,this)._uiManager.updatePopupColor(U(Ps,this))}get commentButtonWidth(){var e,t;return(null!==(e=null===(t=U(Es,this))||void 0===t?void 0:t.getBoundingClientRect().width)&&void 0!==e?e:0)/U(Ps,this).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(U(Is,this))return U(Is,this);if(!U(Es,this))return null;const{x:e,y:t,height:n}=U(Es,this).getBoundingClientRect(),{x:i,y:s,width:r,height:a}=U(Ps,this).parent.boundingClientRect;return[(e-i)/r,(t+n-s)/a]}set commentPopupPositionInLayer(e){V(Is,this,e)}hasDefaultPopupPosition(){return null===U(Is,this)}removeStandaloneCommentButton(){var e;null===(e=U(Es,this))||void 0===e||e.remove(),V(Es,this,null)}removeToolbarCommentButton(){var e;null===(e=U(Cs,this))||void 0===e||e.remove(),V(Cs,this,null)}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;U(Es,this)&&(U(Es,this).classList.toggle("selected",t),U(Es,this).ariaExpanded=n)}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=U(Ps,this).commentButtonPosition;const{width:e,height:t,x:s,y:r}=U(Ps,this);n=s+n*e,i=r+i*t}const s=U(Ps,this).parent.boundingClientRect,{x:r,y:a,width:l,height:c}=s;U(Ps,this)._uiManager.editComment(U(Ps,this),r+n*l,a+i*c,o(o({},e),{},{parentDimensions:s}))}finish(){U(Cs,this)&&(U(Cs,this).focus({focusVisible:U(Ms,this)}),V(Ms,this,!1))}isDeleted(){return U(Fs,this)||""===U(Ns,this)}isEmpty(){return null===U(Ns,this)}hasBeenEdited(){return this.isDeleted()||U(Ns,this)!==U(Ts,this)}serialize(){return this.data}get data(){return{text:U(Ns,this),richText:U(Ds,this),date:U(Rs,this),deleted:this.isDeleted()}}set data(e){if(e!==U(Ns,this)&&V(Ds,this,null),null===e)return V(Ns,this,""),void V(Fs,this,!0);V(Ns,this,e),V(Rs,this,new Date),V(Fs,this,!1)}setInitialText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;V(Ts,this,e),this.data=e,V(Rs,this,null),V(Ds,this,t)}shown(){}destroy(){var e,t;null===(e=U(Cs,this))||void 0===e||e.remove(),V(Cs,this,null),null===(t=U(Es,this))||void 0===t||t.remove(),V(Es,this,null),V(Ns,this,""),V(Ds,this,null),V(Rs,this,null),V(Ps,this,null),V(Ms,this,!1),V(Fs,this,!1)}}function js(e,t){if(!U(Ps,this)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[U(Ps,this)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=U(Ps,this)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Rt,{signal:n}),t&&(e.addEventListener("focusin",e=>{U(Ps,this)._focusEventsAllowed=!1,Ft(e)},{capture:!0,signal:n}),e.addEventListener("focusout",e=>{U(Ps,this)._focusEventsAllowed=!0,Ft(e)},{capture:!0,signal:n})),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=t=>{t.preventDefault(),e===U(Cs,this)?this.edit():U(Ps,this).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(V(Ms,this,!0),i(t))},{signal:n}),e.addEventListener("pointerenter",()=>{U(Ps,this).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{U(Ps,this).toggleComment(!1,!1)},{signal:n}),e}var Bs=new WeakMap,Ws=new WeakMap,zs=new WeakMap,Us=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,qs=new WeakMap,Gs=new WeakMap,$s=new WeakMap,Ks=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Qs=new WeakSet;class Js{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:a=null,signal:o}=e;j(this,Qs),B(this,Bs,void 0),B(this,Ws,!1),B(this,zs,null),B(this,Us,void 0),B(this,Vs,void 0),B(this,Hs,void 0),B(this,qs,void 0),B(this,Gs,null),B(this,$s,void 0),B(this,Ks,null),B(this,Xs,void 0),B(this,Ys,null),V(Bs,this,t),V(zs,this,i),V(Us,this,n),V(Vs,this,s),V(Hs,this,r),V(qs,this,a),V(Xs,this,new AbortController),V($s,this,AbortSignal.any([o,U(Xs,this).signal])),t.addEventListener("touchstart",W(Qs,this,Zs).bind(this),{passive:!1,signal:U($s,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/zt.pixelRatio}destroy(){var e,t;null===(e=U(Xs,this))||void 0===e||e.abort(),V(Xs,this,null),null===(t=U(Gs,this))||void 0===t||t.abort(),V(Gs,this,null)}}function Zs(e){var t,n;if(null!==(t=U(Us,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(U(Gs,this))return;const e=V(Gs,this,new AbortController),t=AbortSignal.any([U($s,this),e.signal]),n=U(Bs,this),i={capture:!0,signal:t,passive:!1},s=e=>{var t;"touch"===e.pointerType&&(null===(t=U(Gs,this))||void 0===t||t.abort(),V(Gs,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(Ft(e),s(e))},i),n.addEventListener("pointerup",s,i),void n.addEventListener("pointercancel",s,i)}if(!U(Ys,this)){var i;V(Ys,this,new AbortController);const e=AbortSignal.any([U($s,this),U(Ys,this).signal]),t=U(Bs,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",W(Qs,this,er).bind(this),n);const s=W(Qs,this,tr).bind(this);t.addEventListener("touchend",s,n),t.addEventListener("touchcancel",s,n),n.capture=!0,t.addEventListener("pointerdown",Ft,n),t.addEventListener("pointermove",Ft,n),t.addEventListener("pointercancel",Ft,n),t.addEventListener("pointerup",Ft,n),null===(i=U(Vs,this))||void 0===i||i.call(this)}if(Ft(e),2!==e.touches.length||null!==(n=U(zs,this))&&void 0!==n&&n.call(this))return void V(Ks,this,null);let[s,r]=e.touches;s.identifier>r.identifier&&([s,r]=[r,s]),V(Ks,this,{touch0X:s.screenX,touch0Y:s.screenY,touch1X:r.screenX,touch1Y:r.screenY})}function er(e){var t;if(!U(Ks,this)||2!==e.touches.length)return;Ft(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:s,screenY:r}=n,{screenX:a,screenY:o}=i,l=U(Ks,this),{touch0X:c,touch0Y:d,touch1X:u,touch1Y:h}=l,p=u-c,f=h-d,m=a-s,g=o-r,v=Math.hypot(m,g)||1,y=Math.hypot(p,f)||1;if(!U(Ws,this)&&Math.abs(y-v)<=K.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=a,l.touch1Y=o,!U(Ws,this))return void V(Ws,this,!0);const b=[(s+a)/2,(r+o)/2];null===(t=U(Hs,this))||void 0===t||t.call(this,b,y,v)}function tr(e){if(!(e.touches.length>=2)){var t;if(U(Ys,this))U(Ys,this).abort(),V(Ys,this,null),null===(t=U(qs,this))||void 0===t||t.call(this);U(Ks,this)&&(Ft(e),V(Ks,this,null),V(Ws,this,!1))}}K=Js;var nr=new WeakMap,ir=new WeakMap,sr=new WeakMap,rr=new WeakMap,ar=new WeakMap,or=new WeakMap,lr=new WeakMap,cr=new WeakMap,dr=new WeakMap,ur=new WeakMap,hr=new WeakMap,pr=new WeakMap,fr=new WeakMap,mr=new WeakMap,gr=new WeakMap,vr=new WeakMap,yr=new WeakMap,br=new WeakMap,wr=new WeakMap,_r=new WeakMap,xr=new WeakMap,kr=new WeakMap,Sr=new WeakMap,Ar=new WeakMap,Er=new WeakMap,Cr=new WeakMap,Mr=new WeakSet;class Pr{static get _resizerKeyboardManager(){const e=Pr.prototype._resizeWithKeyboard,t=zi.TRANSLATE_SMALL,n=zi.TRANSLATE_BIG;return tt(this,"_resizerKeyboardManager",new Un([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Pr.prototype._stopResizingWithKeyboard]]))}constructor(e){j(this,Mr),B(this,nr,null),B(this,ir,null),B(this,sr,null),B(this,rr,null),B(this,ar,null),B(this,or,!1),B(this,lr,null),B(this,cr,""),B(this,dr,null),B(this,ur,null),B(this,hr,null),B(this,pr,null),B(this,fr,null),B(this,mr,""),B(this,gr,!1),B(this,vr,null),B(this,yr,!1),B(this,br,!1),B(this,wr,!1),B(this,_r,null),B(this,xr,0),B(this,kr,0),B(this,Sr,null),B(this,Ar,null),r(this,"isSelected",!1),r(this,"_isCopy",!1),r(this,"_editToolbar",null),r(this,"_initialOptions",Object.create(null)),r(this,"_initialData",null),r(this,"_isVisible",!0),r(this,"_uiManager",null),r(this,"_focusEventsAllowed",!0),B(this,Er,!1),B(this,Cr,Pr._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return tt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Xr({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=Pr._l10n)&&void 0!==n||(Pr._l10n=e),Pr._l10nResizer||(Pr._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==Pr._borderLineWidth)return;const i=getComputedStyle(document.documentElement);Pr._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Qe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return U(Er,this)}set _isDraggable(e){var t;V(Er,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=U(Cr,this)}setParent(e){var t;null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(W(Mr,this,Kr).call(this),null===(t=U(pr,this))||void 0===t||t.remove(),V(pr,this,null));this.parent=e}focusin(e){this._focusEventsAllowed&&(U(gr,this)?V(gr,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[s,r]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(t+i)/r,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){W(Mr,this,Tr).call(this,this.parentDimensions,e,t)}translateInPage(e,t){U(vr,this)||V(vr,this,[this.x,this.y,this.width,this.height]),W(Mr,this,Tr).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){U(vr,this)||V(vr,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l;const{style:c}=n;c.left="".concat((100*r).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(r,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!U(vr,this)&&(U(vr,this)[0]!==this.x||U(vr,this)[1]!==this.y)}get _hasBeenResized(){return!!U(vr,this)&&(U(vr,this)[2]!==this.width||U(vr,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Pr,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,i]}=this;let{x:s,y:r,width:a,height:o}=this;if(a*=n,o*=i,s*=n,r*=i,this._mustFixPosition)switch(e){case 0:s=wt(s,0,n-a),r=wt(r,0,i-o);break;case 90:s=wt(s,0,n-o),r=wt(r,a,i);break;case 180:s=wt(s,a,n),r=wt(r,o,i);break;case 270:s=wt(s,o,n),r=wt(r,0,i-a)}this.x=s/=n,this.y=r/=i;const[l,c]=this.getBaseTranslation();s+=l,r+=c,t.left="".concat((100*s).toFixed(2),"%"),t.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return Dr.call(Pr,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Dr.call(Pr,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width="".concat((100*t).toFixed(2),"%"),e.height="".concat((100*n).toFixed(2),"%")}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=U(sr,this))||void 0===e||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||U(br,this))return this._editToolbar;this._editToolbar=new on(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.removeButton("comment")}removeEditToolbar(){var e,t;null===(e=this._editToolbar)||void 0===e||e.remove(),this._editToolbar=null,null===(t=U(sr,this))||void 0===t||t.destroy()}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return U(sr,this)||(xs.initialize(Pr._l10n),V(sr,this,new xs(this)),U(nr,this)&&(U(sr,this).data=U(nr,this),V(nr,this,null))),U(sr,this)}get altTextData(){var e;return null===(e=U(sr,this))||void 0===e?void 0:e.data}set altTextData(e){U(sr,this)&&(U(sr,this).data=e)}get guessedAltText(){var e;return null===(e=U(sr,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=U(sr,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=U(sr,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!U(sr,this)&&!U(sr,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=U(sr,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}focusCommentButton(){var e;null===(e=U(rr,this))||void 0===e||e.focusButton()}addCommentButton(){return this.canAddComment?U(rr,this)||V(rr,this,new Os(this)):null}addStandaloneCommentButton(){this._uiManager.hasCommentManager()&&(U(ar,this)?this._uiManager.isEditingMode()&&U(ar,this).classList.remove("hidden"):this.hasComment&&(V(ar,this,U(rr,this).renderForStandalone()),this.div.append(U(ar,this))))}removeStandaloneCommentButton(){U(rr,this).removeStandaloneCommentButton(),V(ar,this,null)}hideStandaloneCommentButton(){var e;null===(e=U(ar,this))||void 0===e||e.classList.add("hidden")}get comment(){var e;const{data:{richText:t,text:n,date:i,deleted:s}}=U(rr,this);return{text:n,richText:t,date:i,deleted:s,color:this.getNonHCMColor(),opacity:null!==(e=this.opacity)&&void 0!==e?e:1}}set comment(e){U(rr,this)||V(rr,this,new Os(this)),U(rr,this).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData(e){let{comment:t,popupRef:n,richText:i}=e;if(!n)return;if(U(rr,this)||V(rr,this,new Os(this)),U(rr,this).setInitialText(t,i),!this.annotationElementId)return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return null===(e=U(rr,this))||void 0===e?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return null===(e=U(rr,this))||void 0===e?void 0:e.isDeleted()}get hasComment(){return!!U(rr,this)&&!U(rr,this).isEmpty()&&!U(rr,this).isDeleted()}async editComment(e){U(rr,this)||V(rr,this,new Os(this)),U(rr,this).edit(e)}toggleComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){U(rr,this).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const t=180,n=100,[,,,i]=e.rect,[s]=this.pageDimensions,[r]=this.pageTranslation,a=r+s+1,o=i-n,l=a+t;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,o,l,i]}}}updateFromAnnotationLayer(e){let{popup:{contents:t,deleted:n}}=e;U(rr,this).data=n?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=U(or,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),W(Mr,this,Vr).call(this);const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*i/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/i).toFixed(2),"%"));const[s,r]=this.getInitialTranslation();return this.translate(s,r),xn(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(U(Ar,this)||V(Ar,this,new Js({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:W(Mr,this,jr).bind(this),onPinching:W(Mr,this,Br).bind(this),onPinchEnd:W(Mr,this,Wr).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=ut.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(V(gr,this,!0),this._isDraggable?W(Mr,this,Ur).call(this,e):W(Mr,this,zr).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){U(_r,this)&&clearTimeout(U(_r,this)),V(_r,this,setTimeout(()=>{var e;V(_r,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/i,c=t/i,d=this.x*s,u=this.y*r,h=this.width*s,p=this.height*r;switch(n){case 0:return[d+l+a,r-u-c-p+o,d+l+h+a,r-u-c+o];case 90:return[d+c+a,r-u+l+o,d+c+p+a,r-u+l+h+o];case 180:return[d-l-h+a,r-u+c+o,d-l+a,r-u+c+p+o];case 270:return[d-c-p+a,r-u-l-h+o,d-c+a,r-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,s,r]=e,a=s-n,o=r-i;switch(this.rotation){case 0:return[n,t-r,a,o];case 90:return[n,t-i,o,a];case 180:return[s,t-i,a,o];case 270:return[s,t-r,o,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Pr._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;null===(e=U(rr,this))||void 0===e||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:s,richText:r},uid:a,pageIndex:o,creationDate:l,modificationDate:c}=this;return{id:a,pageIndex:o,rect:this.getPDFRect(),richText:r,contentsObj:{str:e},creationDate:l,modificationDate:n||c,popupRef:!s,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),V(br,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),V(br,this,!1),!0)}isInEditMode(){return U(br,this)}shouldGetKeyboardEvents(){return U(wr,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:r}=window;return t<r&&i>0&&e<s&&n>0}rebuild(){W(Mr,this,Vr).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){var e;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,V(nr,i,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,r]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(e.rect,r);return i.x=a/s,i.y=o/r,i.width=l/s,i.height=c/r,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t,n;if(null===(e=U(fr,this))||void 0===e||e.abort(),V(fr,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),U(_r,this)&&(clearTimeout(U(_r,this)),V(_r,this,null)),W(Mr,this,Kr).call(this),this.removeEditToolbar(),U(Sr,this)){for(const e of U(Sr,this).values())clearTimeout(e);V(Sr,this,null)}this.parent=null,null===(t=U(Ar,this))||void 0===t||t.destroy(),V(Ar,this,null),null===(n=U(pr,this))||void 0===n||n.remove(),V(pr,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(W(Mr,this,Rr).call(this),U(dr,this).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,s,r]=this.getPDFRect();return[Pr._round(n+(s-n)*e),Pr._round(i+(r-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return U(rr,this).commentPopupPositionInLayer}set commentPopupPosition(e){U(rr,this).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return U(rr,this).hasDefaultPopupPosition()}get commentButtonWidth(){return U(rr,this).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;null===(t=U(rr,this))||void 0===t||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),V(hr,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=U(dr,this).children;if(!U(ir,this)){V(ir,this,Array.from(t));const e=W(Mr,this,Hr).bind(this),n=W(Mr,this,qr).bind(this),i=this._uiManager._signal;for(const t of U(ir,this)){const s=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",W(Mr,this,Gr).bind(this,s),{signal:i}),t.setAttribute("data-l10n-id",Pr._l10nResizer[s])}}const n=U(ir,this)[0];let i=0;for(const r of t){if(r===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(U(ir,this).length/4);if(s!==i){if(s<i)for(let t=0;t<i-s;t++)U(dr,this).append(U(dr,this).firstElementChild);else if(s>i)for(let t=0;t<s-i;t++)U(dr,this).firstElementChild.before(U(dr,this).lastElementChild);let e=0;for(const n of t){const t=U(ir,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",Pr._l10nResizer[t])}}W(Mr,this,$r).call(this,0),V(wr,this,!0),U(dr,this).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){U(wr,this)&&W(Mr,this,Or).call(this,U(mr,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){W(Mr,this,Kr).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=U(sr,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return null===(e=this.div)||void 0===e?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,i,s;this.isSelected&&(this.isSelected=!1,null===(e=U(dr,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(s=U(sr,this))||void 0===s||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){"BUTTON"!==e.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return U(yr,this)}set isEditing(e){V(yr,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){U(Sr,this)||V(Sr,this,new Map);const{action:t}=e;let n=U(Sr,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),U(Sr,this).delete(t),0===U(Sr,this).size&&V(Sr,this,null)},Pr._telemetryTimeout),void U(Sr,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),V(or,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),V(or,this,!0)}updateFakeAnnotationElement(e){if(U(pr,this)||this.deleted)return this.deleted?(U(pr,this).remove(),void V(pr,this,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&U(pr,this).updateEdited({rect:this.getPDFRect(),popup:this.comment}));V(pr,this,e.addFakeAnnotation(this))}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function Tr(e,t,n){let[i,s]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/s,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function Dr(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function Nr(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function Rr(){if(U(dr,this))return;V(dr,this,document.createElement("div")),U(dr,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");U(dr,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",W(Mr,this,Fr).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Rt,{signal:t}),e.tabIndex=-1}this.div.prepend(U(dr,this))}function Fr(e,t){var n;t.preventDefault();const{isMac:i}=ut.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=U(sr,this))||void 0===n||n.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,V(ur,this,[t.screenX,t.screenY]);const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",W(Mr,this,Or).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ft,{passive:!1,signal:a}),window.addEventListener("contextmenu",Rt,{signal:a}),V(hr,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;r.abort(),this.parent.togglePointerEvents(!0),null===(e=U(sr,this))||void 0===e||e.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,W(Mr,this,Lr).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function Ir(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}function Lr(){if(!U(hr,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=U(hr,this);V(hr,this,null);const s=this.x,r=this.y,a=this.width,o=this.height;s===e&&r===t&&a===n&&o===i||this.addCommands({cmd:W(Mr,this,Ir).bind(this,s,r,a,o),undo:W(Mr,this,Ir).bind(this,e,t,n,i),mustExec:!0})}function Or(e,t){const[n,i]=this.parentDimensions,s=this.x,r=this.y,a=this.width,o=this.height,l=X.MIN_SIZE/n,c=X.MIN_SIZE/i,d=W(Mr,this,Nr).call(this,this.rotation),u=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],h=W(Mr,this,Nr).call(this,360-this.rotation);let p,f,m=!1,g=!1;switch(e){case"topLeft":m=!0,p=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":m=!0,p=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":g=!0,p=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":m=!0,p=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":m=!0,p=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":g=!0,p=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const v=p(a,o),y=f(a,o);let b=u(...y);const w=X._round(s+b[0]),_=X._round(r+b[1]);let x,k,S=1,A=1;if(t.fromKeyboard)({deltaX:x,deltaY:k}=t);else{const{screenX:e,screenY:n}=t,[i,s]=U(ur,this);[x,k]=this.screenToPageTranslation(e-i,n-s),U(ur,this)[0]=e,U(ur,this)[1]=n}var E,C;if([x,k]=(E=x/n,C=k/i,[h[0]*E+h[2]*C,h[1]*E+h[3]*C]),m){const e=Math.hypot(a,o);S=A=Math.max(Math.min(Math.hypot(y[0]-v[0]-x,y[1]-v[1]-k)/e,1/a,1/o),l/a,c/o)}else g?S=wt(Math.abs(y[0]-v[0]-x),l,1)/a:A=wt(Math.abs(y[1]-v[1]-k),c,1)/o;const M=X._round(a*S),P=X._round(o*A);b=u(...f(M,P));const T=w-b[0],D=_-b[1];U(vr,this)||V(vr,this,[this.x,this.y,this.width,this.height]),this.width=M,this.height=P,this.x=T,this.y=D,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function jr(){var e;V(hr,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=U(sr,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function Br(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;const s=W(Mr,this,Nr).call(this,this.rotation),r=(e,t)=>[s[0]*e+s[2]*t,s[1]*e+s[3]*t],[a,o]=this.parentDimensions,l=this.x,c=this.y,d=this.width,u=this.height,h=X.MIN_SIZE/a,p=X.MIN_SIZE/o;i=Math.max(Math.min(i,1/d,1/u),h/d,p/u);const f=X._round(d*i),m=X._round(u*i);if(f===d&&m===u)return;U(vr,this)||V(vr,this,[l,c,d,u]);const g=r(d/2,u/2),v=X._round(l+g[0]),y=X._round(c+g[1]),b=r(f/2,m/2);this.x=v-b[0],this.y=y-b[1],this.width=f,this.height=m,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function Wr(){var e;null===(e=U(sr,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),W(Mr,this,Lr).call(this)}function zr(e){const{isMac:t}=ut.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Ur(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),r={capture:!0,passive:!1,signal:s},a=e=>{i.abort(),V(lr,this,null),V(gr,this,!1),this._uiManager.endDragSession()||W(Mr,this,zr).call(this,e),n&&this._onStopDragging()};t&&(V(xr,this,e.clientX),V(kr,this,e.clientY),V(lr,this,e.pointerId),V(cr,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:t,clientY:i,pointerId:s}=e;if(s!==U(lr,this))return void Ft(e);const[r,a]=this.screenToPageTranslation(t-U(xr,this),i-U(kr,this));V(xr,this,t),V(kr,this,i),this._uiManager.dragSelectedEditors(r,a)},r),window.addEventListener("touchmove",Ft,r),window.addEventListener("pointerdown",e=>{e.pointerType===U(cr,this)&&(U(Ar,this)||e.isPrimary)&&a(e),Ft(e)},r));const o=e=>{U(lr,this)&&U(lr,this)!==e.pointerId?Ft(e):a(e)};window.addEventListener("pointerup",o,{signal:s}),window.addEventListener("blur",o,{signal:s})}function Vr(){if(U(fr,this)||!this.div)return;V(fr,this,new AbortController);const e=this._uiManager.combinedSignal(U(fr,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function Hr(e){X._resizerKeyboardManager.exec(this,e)}function qr(e){var t;U(wr,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==U(dr,this)&&W(Mr,this,Kr).call(this)}function Gr(e){V(mr,this,U(wr,this)?e:"")}function $r(e){if(U(ir,this))for(const t of U(ir,this))t.tabIndex=e}function Kr(){V(wr,this,!1),W(Mr,this,$r).call(this,-1),W(Mr,this,Lr).call(this)}X=Pr,r(Pr,"_l10n",null),r(Pr,"_l10nResizer",null),r(Pr,"_borderLineWidth",-1),r(Pr,"_colorManager",new Hn),r(Pr,"_zIndex",1),r(Pr,"_telemetryTimeout",1e3);class Xr extends Pr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Yr=3285377520,Qr=4294901760,Jr=65535;class Zr{constructor(e){this.h1=e?4294967295&e:Yr,this.h2=e?4294967295&e:Yr}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,s=e.length;i<s;i++){const s=e.charCodeAt(i);s<=255?t[n++]=s:(t[n++]=s>>>8,t[n++]=255&s)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,s=n-4*i,r=new Uint32Array(t.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,p=13715;for(let f=0;f<i;f++)1&f?(a=r[f],a=a*d&Qr|a*h&Jr,a=a<<15|a>>>17,a=a*u&Qr|a*p&Jr,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[f],o=o*d&Qr|o*h&Jr,o=o<<15|o>>>17,o=o*u&Qr|o*p&Jr,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,s){case 3:a^=t[4*i+2]<<16;case 2:a^=t[4*i+1]<<8;case 1:a^=t[4*i],a=a*d&Qr|a*h&Jr,a=a<<15|a>>>17,a=a*u&Qr|a*p&Jr,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Qr|36045*e&Jr,t=4283543511*t&Qr|(2950163797*(t<<16|e>>>16)&Qr)>>>16,e^=t>>>1,e=444984403*e&Qr|60499*e&Jr,t=3301882366*t&Qr|(3120437893*(t<<16|e>>>16)&Qr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const ea=Object.freeze({map:null,hash:"",transfer:void 0});var ta=new WeakMap,na=new WeakMap,ia=new WeakMap,sa=new WeakMap,ra=new WeakSet;class aa{constructor(){j(this,ra),B(this,ta,!1),B(this,na,null),B(this,ia,null),B(this,sa,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=U(sa,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return U(sa,this).get(e)}remove(e){const t=U(sa,this).get(e);if(void 0!==t&&(t instanceof Pr&&U(ia,this).delete(t.annotationElementId),U(sa,this).delete(e),0===U(sa,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor)){for(const e of U(sa,this).values())if(e instanceof Pr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=U(sa,this).get(e);let i=!1;if(void 0!==n)for(const[s,r]of Object.entries(t))n[s]!==r&&(i=!0,n[s]=r);else i=!0,U(sa,this).set(e,t);i&&W(ra,this,oa).call(this),t instanceof Pr&&((U(ia,this)||V(ia,this,new Map)).set(t.annotationElementId,t),"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type))}has(e){return U(sa,this).has(e)}get size(){return U(sa,this).size}resetModified(){U(ta,this)&&(V(ta,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new ca(this)}get serializable(){if(0===U(sa,this).size)return ea;const e=new Map,t=new Zr,n=[],i=Object.create(null);let s=!1;for(const[r,a]of U(sa,this)){const n=a instanceof Pr?a.serialize(!1,i):a;n&&(e.set(r,n),t.update("".concat(r,":").concat(JSON.stringify(n))),s||(s=!!n.bitmap))}if(s)for(const r of e.values())r.bitmap&&n.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:ea}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const a of U(sa,this).values()){var s;if(!(a instanceof Pr)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const c=(s=e)[l]||(s[l]=new Map);for(const[e,t]of Object.entries(o)){var r;if("type"===e)continue;let n=c.get(e);n||(n=new Map,c.set(e,n));const i=null!==(r=n.get(t))&&void 0!==r?r:0;n.set(t,i+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[a,o]of t)e[a]=o.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){V(na,this,null)}updateEditor(e,t){var n;const i=null===(n=U(ia,this))||void 0===n?void 0:n.get(e);return!!i&&(i.updateFromAnnotationLayer(t),!0)}getEditor(e){var t;return(null===(t=U(ia,this))||void 0===t?void 0:t.get(e))||null}get modifiedIds(){if(U(na,this))return U(na,this);const e=[];if(U(ia,this))for(const t of U(ia,this).values())t.serialize()&&e.push(t.annotationElementId);return V(na,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return U(sa,this).entries()}}function oa(){U(ta,this)||(V(ta,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var la=new WeakMap;class ca extends aa{constructor(e){super(),B(this,la,void 0);const{map:t,hash:n,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);V(la,this,{map:s,hash:n,transfer:i})}get print(){Qe("Should not call PrintAnnotationStorage.print")}get serializable(){return U(la,this)}get modifiedIds(){return tt(this,"modifiedIds",{ids:new Set,hash:""})}}var da=new WeakMap;class ua{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;B(this,da,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),U(da,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:i}=e;if(t&&!U(da,this).has(t.loadedName)){if(Je(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:r}=t,a=new FontFace(e,n,r);this.addNativeFontFace(a);try{await a.load(),U(da,this).add(e),null===i||void 0===i||i(t)}catch(s){Ye("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}Qe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw Ye("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return tt(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return tt(this,"isSyncFontLoadingSupported",ce||ut.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(Je(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return tt(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=i(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(s=0,r=c.length-3;s<r;s+=4)h=h-u+n(c,s)|0;var p;s<c.length&&(h=h-u+n(c+"XXX",s)|0),d=i(d,16,4,(p=h,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(d),");"),m='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(m);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,g.append(e)}this._document.body.append(g),function e(t,n){if(++l>30)return Ye("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{g.remove(),t.complete()})}}var ha=new WeakMap;class pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;B(this,ha,void 0),this.compiledGlyphs=Object.create(null),V(ha,this,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(_t(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){var n;if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let s;try{s=e.get(i)}catch(a){Ye('getPathGenerator - ignoring character: "'.concat(a,'".'))}const r=Yt(null===(n=s)||void 0===n?void 0:n.path);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=r}get black(){return U(ha,this).black}get bold(){return U(ha,this).bold}get disableFontFace(){var e;return null!==(e=U(ha,this).disableFontFace)&&void 0!==e&&e}set disableFontFace(e){tt(this,"disableFontFace",!!e)}get fontExtraProperties(){var e;return null!==(e=U(ha,this).fontExtraProperties)&&void 0!==e&&e}get isInvalidPDFjsFont(){return U(ha,this).isInvalidPDFjsFont}get isType3Font(){return U(ha,this).isType3Font}get italic(){return U(ha,this).italic}get missingFile(){return U(ha,this).missingFile}get remeasure(){return U(ha,this).remeasure}get vertical(){return U(ha,this).vertical}get ascent(){return U(ha,this).ascent}get defaultWidth(){return U(ha,this).defaultWidth}get descent(){return U(ha,this).descent}get bbox(){return U(ha,this).bbox}set bbox(e){tt(this,"bbox",e)}get fontMatrix(){return U(ha,this).fontMatrix}get fallbackName(){return U(ha,this).fallbackName}get loadedName(){return U(ha,this).loadedName}get mimetype(){return U(ha,this).mimetype}get name(){return U(ha,this).name}get data(){return U(ha,this).data}clearData(){U(ha,this).clearData()}get cssFontInfo(){return U(ha,this).cssFontInfo}get systemFontInfo(){return U(ha,this).systemFontInfo}get defaultVMetrics(){return U(ha,this).defaultVMetrics}}var fa=new WeakMap,ma=new WeakMap,ga=new WeakMap,va=new WeakSet;class ya{static write(e){const t=new TextEncoder,n={};let i=0;for(const l of ya.strings){const s=t.encode(e[l]);n[l]=s,i+=4+s.length}const s=new ArrayBuffer(i),r=new Uint8Array(s),a=new DataView(s);let o=0;for(const l of ya.strings){const e=n[l],t=e.length;a.setUint32(o,t),r.set(e,o+4),o+=4+t}return Je(o===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}constructor(e){j(this,va),B(this,fa,void 0),B(this,ma,void 0),B(this,ga,void 0),V(fa,this,e),V(ma,this,new DataView(U(fa,this))),V(ga,this,new TextDecoder)}get fontFamily(){return W(va,this,ba).call(this,0)}get fontWeight(){return W(va,this,ba).call(this,1)}get italicAngle(){return W(va,this,ba).call(this,2)}}function ba(e){Je(e<Y.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=U(ma,this).getUint32(t)+4;const n=U(ma,this).getUint32(t);return U(ga,this).decode(new Uint8Array(U(fa,this),t+4,n))}Y=ya,r(ya,"strings",["fontFamily","fontWeight","italicAngle"]);var wa=new WeakMap,_a=new WeakMap,xa=new WeakMap,ka=new WeakSet;class Sa{static write(e){const t=new TextEncoder,n={};let i=0;for(const u of Sa.strings){const s=t.encode(e[u]);n[u]=s,i+=4+s.length}i+=4;let s,r,a=1+i;e.style&&(s=t.encode(e.style.style),r=t.encode(e.style.weight),a+=4+s.length+4+r.length);const o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let d=0;c.setUint8(d++,e.guessFallback?1:0),c.setUint32(d,0),d+=4,i=0;for(const u of Sa.strings){const e=n[u],t=e.length;i+=4+t,c.setUint32(d,t),l.set(e,d+4),d+=4+t}return c.setUint32(d-i-4,i),e.style&&(c.setUint32(d,s.length),l.set(s,d+4),d+=4+s.length,c.setUint32(d,r.length),l.set(r,d+4),d+=4+r.length),Je(d<=o.byteLength,"SubstitionInfo.write: Buffer overflow"),o.transferToFixedLength(d)}constructor(e){j(this,ka),B(this,wa,void 0),B(this,_a,void 0),B(this,xa,void 0),V(wa,this,e),V(_a,this,new DataView(U(wa,this))),V(xa,this,new TextDecoder)}get guessFallback(){return 0!==U(_a,this).getUint8(0)}get css(){return W(ka,this,Aa).call(this,0)}get loadedName(){return W(ka,this,Aa).call(this,1)}get baseFontName(){return W(ka,this,Aa).call(this,2)}get src(){return W(ka,this,Aa).call(this,3)}get style(){let e=1;e+=4+U(_a,this).getUint32(e);const t=U(_a,this).getUint32(e),n=U(xa,this).decode(new Uint8Array(U(wa,this),e+4,t));e+=4+t;const i=U(_a,this).getUint32(e);return{style:n,weight:U(xa,this).decode(new Uint8Array(U(wa,this),e+4,i))}}}function Aa(e){Je(e<Q.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=U(_a,this).getUint32(t)+4;const n=U(_a,this).getUint32(t);return U(xa,this).decode(new Uint8Array(U(wa,this),t+4,n))}Q=Sa,r(Sa,"strings",["css","loadedName","baseFontName","src"]);var Ea=new WeakMap,Ca=new WeakMap,Ma=new WeakMap,Pa=new WeakSet;class Ta{constructor(e){let{data:t,extra:n}=e;j(this,Pa),B(this,Ea,void 0),B(this,Ca,void 0),B(this,Ma,void 0),V(Ea,this,t),V(Ca,this,new TextDecoder),V(Ma,this,new DataView(U(Ea,this))),n&&Object.assign(this,n)}get black(){return W(Pa,this,Da).call(this,0)}get bold(){return W(Pa,this,Da).call(this,1)}get disableFontFace(){return W(Pa,this,Da).call(this,2)}get fontExtraProperties(){return W(Pa,this,Da).call(this,3)}get isInvalidPDFjsFont(){return W(Pa,this,Da).call(this,4)}get isType3Font(){return W(Pa,this,Da).call(this,5)}get italic(){return W(Pa,this,Da).call(this,6)}get missingFile(){return W(Pa,this,Da).call(this,7)}get remeasure(){return W(Pa,this,Da).call(this,8)}get vertical(){return W(Pa,this,Da).call(this,9)}get ascent(){return W(Pa,this,Na).call(this,0)}get defaultWidth(){return W(Pa,this,Na).call(this,1)}get descent(){return W(Pa,this,Na).call(this,2)}get bbox(){let e=Ia._;if(0===U(Ma,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<4;n++)t.push(U(Ma,this).getInt16(e,!0)),e+=2;return t}get fontMatrix(){let e=La._;if(0===U(Ma,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<6;n++)t.push(U(Ma,this).getFloat64(e,!0)),e+=8;return t}get defaultVMetrics(){let e=Oa._;if(0===U(Ma,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<3;n++)t.push(U(Ma,this).getInt16(e,!0)),e+=2;return t}get fallbackName(){return W(Pa,this,Ra).call(this,0)}get loadedName(){return W(Pa,this,Ra).call(this,1)}get mimetype(){return W(Pa,this,Ra).call(this,2)}get name(){return W(Pa,this,Ra).call(this,3)}get data(){let e=ja._;e+=4+U(Ma,this).getUint32(e);e+=4+U(Ma,this).getUint32(e);e+=4+U(Ma,this).getUint32(e);const t=U(Ma,this).getUint32(e);if(0!==t)return new Uint8Array(U(Ea,this),e+4,t)}clearData(){let e=ja._;e+=4+U(Ma,this).getUint32(e);e+=4+U(Ma,this).getUint32(e);e+=4+U(Ma,this).getUint32(e);const t=U(Ma,this).getUint32(e);new Uint8Array(U(Ea,this),e+4,t).fill(0),U(Ma,this).setUint32(e,0)}get cssFontInfo(){let e=ja._;e+=4+U(Ma,this).getUint32(e);e+=4+U(Ma,this).getUint32(e);const t=U(Ma,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(U(Ea,this),e+4,t)),new ya(n.buffer)}get systemFontInfo(){let e=ja._;e+=4+U(Ma,this).getUint32(e);const t=U(Ma,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(U(Ea,this),e+4,t)),new Sa(n.buffer)}static write(e){const t=e.systemFontInfo?Sa.write(e.systemFontInfo):null,n=e.cssFontInfo?ya.write(e.cssFontInfo):null,i=new TextEncoder,s={};let r=0;for(const f of Ta.strings)s[f]=i.encode(e[f]),r+=4+s[f].length;const a=ja._+4+r+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let d=0;const u=Ta.bools.length;let h=0,p=0;for(let f=0;f<u;f++){const t=e[Ta.bools[f]];h|=(void 0===t?0:t?2:1)<<p,p+=2,8!==p&&f!==u-1||(c.setUint8(d++,h),h=0,p=0)}Je(d===Fa._,"FontInfo.write: Boolean properties offset mismatch");for(const f of Ta.numbers)c.setFloat64(d,e[f]),d+=8;if(Je(d===Ia._,"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(d++,4);for(const t of e.bbox)c.setInt16(d,t,!0),d+=2}else c.setUint8(d++,0),d+=8;if(Je(d===La._,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(d++,6);for(const t of e.fontMatrix)c.setFloat64(d,t,!0),d+=8}else c.setUint8(d++,0),d+=48;if(Je(d===Oa._,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(d++,1);for(const t of e.defaultVMetrics)c.setInt16(d,t,!0),d+=2}else c.setUint8(d++,0),d+=6;Je(d===ja._,"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(ja._,0),d+=4;for(const f of Ta.strings){const e=s[f],t=e.length;c.setUint32(d,t),l.set(e,d+4),d+=4+t}if(c.setUint32(ja._,d-ja._-4),t){const e=t.byteLength;c.setUint32(d,e),Je(d+4+e<=o.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),l.set(new Uint8Array(t),d+4),d+=4+e}else c.setUint32(d,0),d+=4;if(n){const e=n.byteLength;c.setUint32(d,e),Je(d+4+e<=o.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),l.set(new Uint8Array(n),d+4),d+=4+e}else c.setUint32(d,0),d+=4;return void 0===e.data?(c.setUint32(d,0),d+=4):(c.setUint32(d,e.data.length),l.set(e.data,d+4),d+=4+e.data.length),Je(d<=o.byteLength,"FontInfo.write: Buffer overflow"),o.transferToFixedLength(d)}}function Da(e){Je(e<J.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=2*e%8,i=U(Ma,this).getUint8(t)>>n&3;return 0===i?void 0:2===i}function Na(e){return Je(e<J.numbers.length,"Invalid number index"),U(Ma,this).getFloat64(Fa._+8*e)}function Ra(e){Je(e<J.strings.length,"Invalid string index");let t=ja._+4;for(let s=0;s<e;s++)t+=U(Ma,this).getUint32(t)+4;const n=U(Ma,this).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(U(Ea,this),t+4,n)),U(Ca,this).decode(i)}J=Ta,r(Ta,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),r(Ta,"numbers",["ascent","defaultWidth","descent"]),r(Ta,"strings",["fallbackName","loadedName","mimetype","name"]);var Fa={_:Math.ceil(2*J.bools.length/8)},Ia={_:W(J,J,Fa)._+8*J.numbers.length},La={_:W(J,J,Ia)._+1+8},Oa={_:W(J,J,La)._+1+48},ja={_:W(J,J,Oa)._+1+6};class Ba{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],s=[],r=[],a=[],o=null,l=null;switch(e[0]){case"RadialAxial":t="axial"===e[1]?1:2,n=e[2],r=e[3],1===t?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,o=e[1],i=e[2],s=e[3],a=e[4]||[],n=e[6],l=e[7];break;default:throw new Error("Unsupported pattern type: ".concat(e[0]))}const c=Math.floor(i.length/2),d=Math.floor(s.length/3),u=r.length,h=a.length;let p=0;for(const y of a)p+=1,p=4*Math.ceil(p/4),p+=4+4*y.coords.length,p+=4+4*y.colors.length,void 0!==y.verticesPerRow&&(p+=4);const f=new ArrayBuffer(20+8*c+3*d+8*u+(n?16:0)+(l?3:0)+p),m=new DataView(f),g=new Uint8Array(f);m.setUint8(Wa._,t),m.setUint8(za._,n?1:0),m.setUint8(Ua._,l?1:0),m.setUint8(Va._,o),m.setUint32(Ha._,c,!0),m.setUint32(qa._,d,!0),m.setUint32(Ga._,u,!0),m.setUint32($a._,h,!0);let v=20;new Float32Array(f,v,2*c).set(i),v+=8*c,g.set(s,v),v+=3*d;for(const[y,b]of r)m.setFloat32(v,y,!0),v+=4,m.setUint32(v,parseInt(b.slice(1),16),!0),v+=4;if(n)for(const y of n)m.setFloat32(v,y,!0),v+=4;l&&(g.set(l,v),v+=3);for(let y=0;y<a.length;y++){const e=a[y];m.setUint8(v,e.type),v+=1,v=4*Math.ceil(v/4),m.setUint32(v,e.coords.length,!0),v+=4;new Int32Array(f,v,e.coords.length).set(e.coords),v+=4*e.coords.length,m.setUint32(v,e.colors.length,!0),v+=4;new Int32Array(f,v,e.colors.length).set(e.colors),v+=4*e.colors.length,void 0!==e.verticesPerRow&&(m.setUint32(v,e.verticesPerRow,!0),v+=4)}return f}getIR(){const e=this.view,t=this.data[Wa._],n=!!this.data[za._],i=!!this.data[Ua._],s=e.getUint32(Ha._,!0),r=e.getUint32(qa._,!0),a=e.getUint32(Ga._,!0),o=e.getUint32($a._,!0);let l=20;const c=new Float32Array(this.buffer,l,2*s);l+=8*s;const d=new Uint8Array(this.buffer,l,3*r);l+=3*r;const u=[];for(let m=0;m<a;++m){const t=e.getFloat32(l,!0);l+=4;const n=e.getUint32(l,!0);l+=4,u.push([t,"#".concat(n.toString(16).padStart(6,"0"))])}let h=null;if(n){h=[];for(let t=0;t<4;++t)h.push(e.getFloat32(l,!0)),l+=4}let p=null;i&&(p=new Uint8Array(this.buffer,l,3),l+=3);const f=[];for(let m=0;m<o;++m){const t=e.getUint8(l);l+=1,l=4*Math.ceil(l/4);const n=e.getUint32(l,!0);l+=4;const i=new Int32Array(this.buffer,l,n);l+=4*n;const s=e.getUint32(l,!0);l+=4;const r=new Int32Array(this.buffer,l,s);l+=4*s;const a={type:t,coords:i,colors:r};t===Ae&&(a.verticesPerRow=e.getUint32(l,!0),l+=4),f.push(a)}if(1===t)return["RadialAxial","axial",h,u,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(2===t)return["RadialAxial","radial",h,u,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(3===t){const e=this.data[Va._];let t=null;if(c.length>0){let e=c[0],n=c[0],i=c[1],s=c[1];for(let t=0;t<c.length;t+=2){const r=c[t],a=c[t+1];e=e>r?r:e,i=i>a?a:i,n=n<r?r:n,s=s<a?a:s}t=[e,i,n,s]}return["Mesh",e,c,d,f,t,h,p]}throw new Error("Unsupported pattern kind: ".concat(t))}}var Wa={_:0},za={_:1},Ua={_:2},Va={_:3},Ha={_:4},qa={_:8},Ga={_:12},$a={_:16},Ka=new WeakMap;class Xa{static write(e){let t,n;return ut.isFloat16ArraySupported?(n=new ArrayBuffer(2*e.length),t=new Float16Array(n)):(n=new ArrayBuffer(4*e.length),t=new Float32Array(n)),t.set(e),n}constructor(e){B(this,Ka,void 0),V(Ka,this,e)}get path(){return ut.isFloat16ArraySupported?new Float16Array(U(Ka,this)):new Float32Array(U(Ka,this))}}function Ya(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const Qa=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,Ja=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,s,...r]=n;if(!e(i)&&!Number.isInteger(i))return!1;if(!t(s))return!1;const a=r.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of r)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,Qa,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var Za=new WeakMap,eo=new WeakMap;class to{constructor(){B(this,Za,new Map),B(this,eo,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};U(eo,this).then(()=>{for(const[e]of U(Za,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted)return void Ye("LoopbackPort - cannot use an `aborted` signal.");const r=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}U(Za,this).set(t,i)}removeEventListener(e,t){const n=U(Za,this).get(t);null===n||void 0===n||n(),U(Za,this).delete(t)}terminate(){for(const[,e]of U(Za,this))null===e||void 0===e||e();U(Za,this).clear()}}const no=1,io=2,so=1,ro=2,ao=3,oo=4,lo=5,co=6,uo=7,ho=8;function po(){}function fo(e){if(e instanceof lt||e instanceof rt||e instanceof it||e instanceof at||e instanceof st)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||Qe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new lt(e.message);case"InvalidPDFException":return new rt(e.message);case"PasswordException":return new it(e.message,e.code);case"ResponseException":return new at(e.message,e.status,e.missing);case"UnknownErrorException":return new st(e.message,e.details)}return new st(e.message,e.toString())}var mo=new WeakMap,go=new WeakSet;class vo{constructor(e,t,n){j(this,go),B(this,mo,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",W(go,this,yo).bind(this),{signal:U(mo,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(r){s.reject(r)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:e,streamId:s,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[s].pullCall=t,o.postMessage({sourceName:r,targetName:a,stream:co,streamId:s,desiredSize:e.desiredSize}),t.promise},cancel:e=>{Je(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[s].cancelCall=t,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:so,streamId:s,reason:fo(e)}),t.promise}},n)}destroy(){var e;null===(e=U(mo,this))||void 0===e||e.abort(),V(mo,this,null)}}function yo(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void W(go,this,wo).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===no)n.resolve(t.data);else{if(t.callback!==io)throw new Error("Unexpected callback case");n.reject(fo(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,s=this.comObj;return void Promise.try(n,t.data).then(function(n){s.postMessage({sourceName:e,targetName:i,callback:no,callbackId:t.callbackId,data:n})},function(n){s.postMessage({sourceName:e,targetName:i,callback:io,callbackId:t.callbackId,reason:fo(n)})})}t.streamId?W(go,this,bo).call(this,t):n(t.data)}function bo(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,r=this,a=this.actionHandler[e.action],o={enqueue(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:oo,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:ao,streamId:t}),delete r.streamSinks[t])},error(e){Je(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:lo,streamId:t,reason:fo(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){s.postMessage({sourceName:n,targetName:i,stream:ho,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:i,stream:ho,streamId:t,reason:fo(e)})})}function wo(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,r=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case ho:e.success?r.startCall.resolve():r.startCall.reject(fo(e.reason));break;case uo:e.success?r.pullCall.resolve():r.pullCall.reject(fo(e.reason));break;case co:if(!a){s.postMessage({sourceName:n,targetName:i,stream:uo,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||po).then(function(){s.postMessage({sourceName:n,targetName:i,stream:uo,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:i,stream:uo,streamId:t,reason:fo(e)})});break;case oo:if(Je(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(e.chunk);break;case ao:if(Je(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),W(go,this,_o).call(this,r,t);break;case lo:Je(r,"error should have stream controller"),r.controller.error(fo(e.reason)),W(go,this,_o).call(this,r,t);break;case ro:e.success?r.cancelCall.resolve():r.cancelCall.reject(fo(e.reason)),W(go,this,_o).call(this,r,t);break;case so:if(!a)break;const o=fo(e.reason);Promise.try(a.onCancel||po,o).then(function(){s.postMessage({sourceName:n,targetName:i,stream:ro,streamId:t,success:!0})},function(e){s.postMessage({sourceName:n,targetName:i,stream:ro,streamId:t,reason:fo(e)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function _o(e,t){var n,i,s;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(s=e.cancelCall)||void 0===s?void 0:s.promise]),delete this.streamControllers[t]}var xo=new WeakMap;class ko{constructor(e){let{enableHWA:t=!1}=e;B(this,xo,!1),V(xo,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!U(xo,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Qe("Abstract method `_createCanvas` called.")}}class So extends ko{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class Ao{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class Eo extends Ao{async _fetch(e){const t=await Et(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):dt(t)}}class Co{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,s){return"none"}destroy(){}}var Mo=new WeakMap,Po=new WeakMap,To=new WeakMap,Do=new WeakMap,No=new WeakMap,Ro=new WeakMap,Fo=new WeakMap,Io=new WeakSet;class Lo extends Co{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),j(this,Io),B(this,Mo,void 0),B(this,Po,void 0),B(this,To,void 0),B(this,Do,void 0),B(this,No,void 0),B(this,Ro,void 0),B(this,Fo,0),V(Do,this,t),V(No,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=z(Io,this,Oo).get(e);if(i)return i;const[s,r,a]=W(Io,this,Wo).call(this,e),o=1===e.length?s:"".concat(s).concat(r).concat(a);if(i=z(Io,this,Oo).get(o),i)return z(Io,this,Oo).set(e,i),i;const l="g_".concat(U(Do,this),"_transfer_map_").concat((V(Fo,this,(t=U(Fo,this),n=t++,t)),n)),c=W(Io,this,zo).call(this,l);z(Io,this,Oo).set(e,c),z(Io,this,Oo).set(o,c);const d=W(Io,this,Ho).call(this,l);return W(Io,this,Go).call(this,s,r,a,d),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),s="base";let r=z(Io,this,jo).get(s);if((null===(n=r)||void 0===n?void 0:n.key)===i)return r.url;var a;r?(null===(a=r.filter)||void 0===a||a.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},z(Io,this,jo).set(s,r));if(!e||!t)return r.url;const o=W(Io,this,Ko).call(this,e);e=pt.makeHexColor(...o);const l=W(Io,this,Ko).call(this,t);if(t=pt.makeHexColor(...l),z(Io,this,Bo).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;const c=new Array(256);for(let f=0;f<=255;f++){const e=f/255;c[f]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),u="g_".concat(U(Do,this),"_hcm_filter"),h=r.filter=W(Io,this,Ho).call(this,u);W(Io,this,Go).call(this,d,d,d,h),W(Io,this,Vo).call(this,h);const p=(e,t)=>{const n=o[e]/255,i=l[e]/255,s=new Array(t+1);for(let r=0;r<=t;r++)s[r]=n+r/t*(i-n);return s.join(",")};return W(Io,this,Go).call(this,p(0,5),p(1,5),p(2,5),h),r.url=W(Io,this,zo).call(this,u),r.url}addAlphaFilter(e){var t,n;let i=z(Io,this,Oo).get(e);if(i)return i;const[s]=W(Io,this,Wo).call(this,[e]),r="alpha_".concat(s);if(i=z(Io,this,Oo).get(r),i)return z(Io,this,Oo).set(e,i),i;const a="g_".concat(U(Do,this),"_alpha_map_").concat((V(Fo,this,(t=U(Fo,this),n=t++,t)),n)),o=W(Io,this,zo).call(this,a);z(Io,this,Oo).set(e,o),z(Io,this,Oo).set(r,o);const l=W(Io,this,Ho).call(this,a);return W(Io,this,$o).call(this,s,l),o}addLuminosityFilter(e){var t,n;let i,s,r=z(Io,this,Oo).get(e||"luminosity");if(r)return r;if(e?([i]=W(Io,this,Wo).call(this,[e]),s="luminosity_".concat(i)):s="luminosity",r=z(Io,this,Oo).get(s),r)return z(Io,this,Oo).set(e,r),r;const a="g_".concat(U(Do,this),"_luminosity_map_").concat((V(Fo,this,(t=U(Fo,this),n=t++,t)),n)),o=W(Io,this,zo).call(this,a);z(Io,this,Oo).set(e,o),z(Io,this,Oo).set(s,o);const l=W(Io,this,Ho).call(this,a);return W(Io,this,Uo).call(this,l),e&&W(Io,this,$o).call(this,i,l),o}addHighlightHCMFilter(e,t,n,i,s){var r;const a="".concat(t,"-").concat(n,"-").concat(i,"-").concat(s);let o=z(Io,this,jo).get(e);if((null===(r=o)||void 0===r?void 0:r.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},z(Io,this,jo).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(W(Io,this,Ko).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,f]=[i,s].map(W(Io,this,Ko).bind(this));h<u&&([u,h,p,f]=[h,u,f,p]),z(Io,this,Bo).style.color="";const m=(e,t,n)=>{const i=new Array(256),s=(h-u)/n,r=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*s),t=r+l*a;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},g="g_".concat(U(Do,this),"_hcm_").concat(e,"_filter"),v=o.filter=W(Io,this,Ho).call(this,g);return W(Io,this,Vo).call(this,v),W(Io,this,Go).call(this,m(p[0],f[0],5),m(p[1],f[1],5),m(p[2],f[2],5),v),o.url=W(Io,this,zo).call(this,g),o.url}destroy(){var e,t,n,i;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=U(Ro,this))&&void 0!==e&&e.size||(null===(t=U(To,this))||void 0===t||t.parentNode.parentNode.remove(),V(To,this,null),null===(n=U(Po,this))||void 0===n||n.clear(),V(Po,this,null),null===(i=U(Ro,this))||void 0===i||i.clear(),V(Ro,this,null),V(Fo,this,0))}}function Oo(e){return U(Po,e)||V(Po,e,new Map)}function jo(e){return U(Ro,e)||V(Ro,e,new Map)}function Bo(e){if(!U(To,e)){const t=U(No,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=U(No,e).createElementNS(St,"svg");i.setAttribute("width",0),i.setAttribute("height",0),V(To,e,U(No,e).createElementNS(St,"defs")),t.append(i),i.append(U(To,e)),U(No,e).body.append(t)}return U(To,e)}function Wo(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,s=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)s[o]=t[o]/255,r[o]=n[o]/255,a[o]=i[o]/255;return[s.join(","),r.join(","),a.join(",")]}function zo(e){if(void 0===U(Mo,this)){V(Mo,this,"");const e=U(No,this).URL;e!==U(No,this).baseURI&&(Pt(e)?Ye('#createUrl: ignore "data:"-URL for performance reasons.'):V(Mo,this,et(e,"")))}return"url(".concat(U(Mo,this),"#").concat(e,")")}function Uo(e){const t=U(No,this).createElementNS(St,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function Vo(e){const t=U(No,this).createElementNS(St,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function Ho(e){const t=U(No,this).createElementNS(St,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),z(Io,this,Bo).append(t),t}function qo(e,t,n){const i=U(No,this).createElementNS(St,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function Go(e,t,n,i){const s=U(No,this).createElementNS(St,"feComponentTransfer");i.append(s),W(Io,this,qo).call(this,s,"feFuncR",e),W(Io,this,qo).call(this,s,"feFuncG",t),W(Io,this,qo).call(this,s,"feFuncB",n)}function $o(e,t){const n=U(No,this).createElementNS(St,"feComponentTransfer");t.append(n),W(Io,this,qo).call(this,n,"feFuncA",e)}function Ko(e){return z(Io,this,Bo).style.color=e,Ot(getComputedStyle(z(Io,this,Bo)).getPropertyValue("color"))}class Xo{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class Yo extends Xo{async _fetch(e){const t=await Et(e,"arraybuffer");return new Uint8Array(t)}}class Qo{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class Jo extends Qo{async _fetch(e){const t=await Et(e,"arraybuffer");return new Uint8Array(t)}}async function Zo(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}ce&&Ye("Please use the `legacy` build in Node.js environments.");class el extends Co{}class tl extends ko{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///workspaces/audesp/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class nl extends Ao{async _fetch(e){return Zo(e)}}class il extends Xo{async _fetch(e){return Zo(e)}}class sl extends Qo{async _fetch(e){return Zo(e)}}const rl="__forcedDependency",{floor:al,ceil:ol}=Math;function ll(e,t,n,i,s,r){e[4*t+0]=Math.min(e[4*t+0],n),e[4*t+1]=Math.min(e[4*t+1],i),e[4*t+2]=Math.max(e[4*t+2],s),e[4*t+3]=Math.max(e[4*t+3],r)}const cl=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var dl=new WeakMap,ul=new WeakMap;class hl{constructor(e,t){B(this,dl,void 0),B(this,ul,void 0),V(dl,this,e),V(ul,this,t)}get length(){return U(dl,this).length}isEmpty(e){return U(dl,this)[e]===cl}minX(e){return U(ul,this)[4*e+0]/256}minY(e){return U(ul,this)[4*e+1]/256}maxX(e){return(U(ul,this)[4*e+2]+1)/256}maxY(e){return(U(ul,this)[4*e+3]+1)/256}}const pl=(e,t)=>{if(!e)return;let n=e.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},e.set(t,n)),n};var fl=new WeakMap,ml=new WeakMap,gl=new WeakMap,vl=new WeakMap,yl=new WeakMap,bl=new WeakMap,wl=new WeakMap,_l=new WeakMap,xl=new WeakMap,kl=new WeakMap,Sl=new WeakMap,Al=new WeakMap,El=new WeakMap,Cl=new WeakMap,Ml=new WeakMap,Pl=new WeakMap,Tl=new WeakMap,Dl=new WeakSet;class Nl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];j(this,Dl),B(this,fl,{__proto__:null}),B(this,ml,{__proto__:null,transform:[],moveText:[],sameLineText:[],[rl]:[]}),B(this,gl,new Map),B(this,vl,[]),B(this,yl,[]),B(this,bl,[[1,0,0,1,0,0]]),B(this,wl,[-1/0,-1/0,1/0,1/0]),B(this,_l,new Float64Array([1/0,1/0,-1/0,-1/0])),B(this,xl,-1),B(this,kl,new Set),B(this,Sl,new Map),B(this,Al,new Map),B(this,El,void 0),B(this,Cl,void 0),B(this,Ml,void 0),B(this,Pl,void 0),B(this,Tl,void 0),V(El,this,e.width),V(Cl,this,e.height),W(Dl,this,Rl).call(this,t),n&&V(Tl,this,new Map)}growOperationsCount(e){e>=U(Pl,this).length&&W(Dl,this,Rl).call(this,e,U(Pl,this))}save(e){return V(fl,this,{__proto__:U(fl,this)}),V(ml,this,{__proto__:U(ml,this),transform:{__proto__:U(ml,this).transform},moveText:{__proto__:U(ml,this).moveText},sameLineText:{__proto__:U(ml,this).sameLineText},[rl]:{__proto__:U(ml,this)[rl]}}),V(wl,this,{__proto__:U(wl,this)}),U(vl,this).push(e),this}restore(e){const t=Object.getPrototypeOf(U(fl,this));if(null===t)return this;V(fl,this,t),V(ml,this,Object.getPrototypeOf(U(ml,this))),V(wl,this,Object.getPrototypeOf(U(wl,this)));const n=U(vl,this).pop();var i;void 0!==n&&(null===(i=pl(U(Tl,this),e))||void 0===i||i.dependencies.add(n),U(Pl,this)[e]=U(Pl,this)[n]);return this}recordOpenMarker(e){return U(vl,this).push(e),this}getOpenMarker(){return 0===U(vl,this).length?null:U(vl,this).at(-1)}recordCloseMarker(e){const t=U(vl,this).pop();var n;void 0!==t&&(null===(n=pl(U(Tl,this),e))||void 0===n||n.dependencies.add(t),U(Pl,this)[e]=U(Pl,this)[t]);return this}beginMarkedContent(e){return U(yl,this).push(e),this}endMarkedContent(e){const t=U(yl,this).pop();var n;void 0!==t&&(null===(n=pl(U(Tl,this),e))||void 0===n||n.dependencies.add(t),U(Pl,this)[e]=U(Pl,this)[t]);return this}pushBaseTransform(e){return U(bl,this).push(pt.multiplyByDOMMatrix(U(bl,this).at(-1),e.getTransform())),this}popBaseTransform(){return U(bl,this).length>1&&U(bl,this).pop(),this}recordSimpleData(e,t){return U(fl,this)[e]=t,this}recordIncrementalData(e,t){return U(ml,this)[e].push(t),this}resetIncrementalData(e,t){return U(ml,this)[e].length=0,this}recordNamedData(e,t){return U(gl,this).set(e,t),this}recordSimpleDataFromNamed(e,t,n){var i;U(fl,this)[e]=null!==(i=U(gl,this).get(t))&&void 0!==i?i:n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(rl,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in U(fl,this)&&this.recordFutureForcedDependency(t,U(fl,this)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of U(kl,this))this.recordFutureForcedDependency(rl,e);return this}resetBBox(e){return U(xl,this)!==e&&(V(xl,this,e),U(_l,this)[0]=1/0,U(_l,this)[1]=1/0,U(_l,this)[2]=-1/0,U(_l,this)[3]=-1/0),this}recordClipBox(e,t,n,i,s,r){const a=pt.multiplyByDOMMatrix(U(bl,this).at(-1),t.getTransform()),o=[1/0,1/0,-1/0,-1/0];pt.axialAlignedBoundingBox([n,s,i,r],a,o);const l=pt.intersect(U(wl,this),o);return l?(U(wl,this)[0]=l[0],U(wl,this)[1]=l[1],U(wl,this)[2]=l[2],U(wl,this)[3]=l[3]):(U(wl,this)[0]=U(wl,this)[1]=1/0,U(wl,this)[2]=U(wl,this)[3]=-1/0),this}recordBBox(e,t,n,i,s,r){const a=U(wl,this);if(a[0]===1/0)return this;const o=pt.multiplyByDOMMatrix(U(bl,this).at(-1),t.getTransform());if(a[0]===-1/0)return pt.axialAlignedBoundingBox([n,s,i,r],o,U(_l,this)),this;const l=[1/0,1/0,-1/0,-1/0];return pt.axialAlignedBoundingBox([n,s,i,r],o,l),U(_l,this)[0]=Math.min(U(_l,this)[0],Math.max(l[0],a[0])),U(_l,this)[1]=Math.min(U(_l,this)[1],Math.max(l[1],a[1])),U(_l,this)[2]=Math.max(U(_l,this)[2],Math.min(l[2],a[2])),U(_l,this)[3]=Math.max(U(_l,this)[3],Math.min(l[3],a[3])),this}recordCharacterBBox(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;const o=n.bbox;let l,c;if(o&&(l=o[2]!==o[0]&&o[3]!==o[1]&&U(Al,this).get(n),!1!==l&&(c=[0,0,0,0],pt.axialAlignedBoundingBox(o,n.fontMatrix,c),1===i&&0===s&&0===r||pt.scaleMinMax([i,0,0,-i,s,r],c),l)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!a)return this.recordFullPageBBox(e);const d=a();return o&&c&&void 0===l&&(l=c[0]<=s-d.actualBoundingBoxLeft&&c[2]>=s+d.actualBoundingBoxRight&&c[1]<=r-d.actualBoundingBoxAscent&&c[3]>=r+d.actualBoundingBoxDescent,U(Al,this).set(n,l),l)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,s-d.actualBoundingBoxLeft,s+d.actualBoundingBoxRight,r-d.actualBoundingBoxAscent,r+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return U(_l,this)[0]=Math.max(0,U(wl,this)[0]),U(_l,this)[1]=Math.max(0,U(wl,this)[1]),U(_l,this)[2]=Math.min(U(El,this),U(wl,this)[2]),U(_l,this)[3]=Math.min(U(Cl,this),U(wl,this)[3]),this}getSimpleIndex(e){return U(fl,this)[e]}recordDependencies(e,t){const n=U(kl,this),i=U(fl,this),s=U(ml,this);for(const r of t)r in U(fl,this)?n.add(i[r]):r in s&&s[r].forEach(n.add,n);return this}recordNamedDependency(e,t){return U(gl,this).has(t)&&U(kl,this).add(U(gl,this).get(t)),this}recordOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.recordDependencies(e,[rl]),U(Tl,this)){const t=pl(U(Tl,this),e),{dependencies:n}=t;U(kl,this).forEach(n.add,n),U(vl,this).forEach(n.add,n),U(yl,this).forEach(n.add,n),n.delete(e),t.isRenderingOperation=!0}if(U(xl,this)===e){const n=al(256*U(_l,this)[0]/U(El,this)),i=al(256*U(_l,this)[1]/U(Cl,this)),s=ol(256*U(_l,this)[2]/U(El,this)),r=ol(256*U(_l,this)[3]/U(Cl,this));ll(U(Ml,this),e,n,i,s,r);for(const t of U(kl,this))t!==e&&ll(U(Ml,this),t,n,i,s,r);for(const t of U(vl,this))t!==e&&ll(U(Ml,this),t,n,i,s,r);for(const t of U(yl,this))t!==e&&ll(U(Ml,this),t,n,i,s,r);t||(U(kl,this).clear(),V(xl,this,-1))}return this}recordShowTextOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Array.from(U(kl,this));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return U(xl,this)===e&&(V(xl,this,-1),U(wl,this)[0]=Math.max(U(wl,this)[0],U(_l,this)[0]),U(wl,this)[1]=Math.max(U(wl,this)[1],U(_l,this)[1]),U(wl,this)[2]=Math.min(U(wl,this)[2],U(_l,this)[2]),U(wl,this)[3]=Math.min(U(wl,this)[3],U(_l,this)[3]),t||U(kl,this).clear()),this}_takePendingDependencies(){const e=U(kl,this);return V(kl,this,new Set),e}_extractOperation(e){const t=U(Sl,this).get(e);return U(Sl,this).delete(e),t}_pushPendingDependencies(e){for(const t of e)U(kl,this).add(t)}take(){return U(Al,this).clear(),new hl(U(Pl,this),U(Ml,this))}takeDebugMetadata(){return U(Tl,this)}}function Rl(e,t){const n=new ArrayBuffer(4*e);V(Ml,this,new Uint8ClampedArray(n)),V(Pl,this,new Uint32Array(n)),t&&t.length>0?(U(Pl,this).set(t),U(Pl,this).fill(cl,t.length)):U(Pl,this).fill(cl)}var Fl=new WeakMap,Il=new WeakMap,Ll=new WeakMap,Ol=new WeakMap,jl=new WeakMap;class Bl{constructor(e,t,n){if(B(this,Fl,void 0),B(this,Il,void 0),B(this,Ll,void 0),B(this,Ol,0),B(this,jl,0),e instanceof Bl&&U(Ll,e)===!!n)return e;V(Fl,this,e),V(Il,this,t),V(Ll,this,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){var t;return V(jl,this,(t=U(jl,this),t++,t)),U(Fl,this).save(U(Il,this)),this}restore(e){var t;U(jl,this)>0&&(U(Fl,this).restore(U(Il,this)),V(jl,this,(t=U(jl,this),t--,t)));return this}recordOpenMarker(e){var t;return V(Ol,this,(t=U(Ol,this),t++,t)),this}getOpenMarker(){return U(Ol,this)>0?U(Il,this):U(Fl,this).getOpenMarker()}recordCloseMarker(e){var t;return V(Ol,this,(t=U(Ol,this),t--,t)),this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return U(Fl,this).pushBaseTransform(e),this}popBaseTransform(){return U(Fl,this).popBaseTransform(),this}recordSimpleData(e,t){return U(Fl,this).recordSimpleData(e,U(Il,this)),this}recordIncrementalData(e,t){return U(Fl,this).recordIncrementalData(e,U(Il,this)),this}resetIncrementalData(e,t){return U(Fl,this).resetIncrementalData(e,U(Il,this)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return U(Fl,this).recordSimpleDataFromNamed(e,t,U(Il,this)),this}recordFutureForcedDependency(e,t){return U(Fl,this).recordFutureForcedDependency(e,U(Il,this)),this}inheritSimpleDataAsFutureForcedDependencies(e){return U(Fl,this).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return U(Fl,this).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return U(Ll,this)||U(Fl,this).resetBBox(U(Il,this)),this}recordClipBox(e,t,n,i,s,r){return U(Ll,this)||U(Fl,this).recordClipBox(U(Il,this),t,n,i,s,r),this}recordBBox(e,t,n,i,s,r){return U(Ll,this)||U(Fl,this).recordBBox(U(Il,this),t,n,i,s,r),this}recordCharacterBBox(e,t,n,i,s,r,a){return U(Ll,this)||U(Fl,this).recordCharacterBBox(U(Il,this),t,n,i,s,r,a),this}recordFullPageBBox(e){return U(Ll,this)||U(Fl,this).recordFullPageBBox(U(Il,this)),this}getSimpleIndex(e){return U(Fl,this).getSimpleIndex(e)}recordDependencies(e,t){return U(Fl,this).recordDependencies(U(Il,this),t),this}recordNamedDependency(e,t){return U(Fl,this).recordNamedDependency(U(Il,this),t),this}recordOperation(e){return U(Fl,this).recordOperation(U(Il,this),!0),this}recordShowTextOperation(e){return U(Fl,this).recordShowTextOperation(U(Il,this),!0),this}bboxToClipBoxDropOperation(e){return U(Ll,this)||U(Fl,this).bboxToClipBoxDropOperation(U(Il,this),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Wl=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],zl=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],Ul=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],Vl=["filter","fillColor","fillAlpha"],Hl=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],ql=["transform"],Gl=["transform","fillColor"],$l="Fill",Kl="Stroke",Xl="Shading";function Yl(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],n,i),e.clip(s)}class Ql{isModifyingCurrentTransform(){return!1}getPattern(){Qe("Abstract method `getPattern` called.")}}class Jl extends Ql{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return 0===this._p0[0]&&0===this._p0[1]&&(!this.isRadial()||0===this._p1[0]&&0===this._p1[1])}isRadial(){return"radial"===this._type}_createGradient(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._p0,s=this._p1;if(n&&(i=i.slice(),s=s.slice(),pt.applyTransform(i,n),pt.applyTransform(s,n)),"axial"===this._type)t=e.createLinearGradient(i[0],i[1],s[0],s[1]);else if("radial"===this._type){let r=this._r0,a=this._r1;if(n){const e=new Float32Array(2);pt.singularValueDecompose2dScale(n,e),r*=e[0],a*=e[0]}t=e.createRadialGradient(i[0],i[1],r,s[0],s[1],a)}for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,n,i){let s;if(i===Kl||i===$l){if(this.isOriginBased()){let i=pt.transform(n,t.baseTransform);this.matrix&&(i=pt.transform(i,this.matrix));const s=.001,r=Math.hypot(i[0],i[1]),a=Math.hypot(i[2],i[3]),o=(i[0]*i[2]+i[1]*i[3])/(r*a);if(Math.abs(o)<s){if(!this.isRadial())return this._createGradient(e,i);if(Math.abs(r-a)<s)return this._createGradient(e,i)}}const r=t.current.getClippedPathBoundingBox(i,jt(e))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-r[0],-r[1]),n=pt.transform(n,[1,0,0,1,r[0],r[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Yl(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);s.setTransform(d)}else Yl(e,this._bbox),s=this._createGradient(e);return s}}function Zl(e,t,n,i,s,r,a,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=r,r=a,a=h),l[i+1]>l[s+1]&&(h=i,i=s,s=h,h=a,a=o,o=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=r,r=a,a=h);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,g=(l[i+1]+t.offsetY)*t.scaleY,v=(l[s]+t.offsetX)*t.scaleX,y=(l[s+1]+t.offsetY)*t.scaleY;if(f>=y)return;const b=c[r],w=c[r+1],_=c[r+2],x=c[a],k=c[a+1],S=c[a+2],A=c[o],E=c[o+1],C=c[o+2],M=Math.round(f),P=Math.round(y);let T,D,N,R,F,I,L,O;for(let j=M;j<=P;j++){if(j<g){const e=j<f?0:(f-j)/(f-g);T=p-(p-m)*e,D=b-(b-x)*e,N=w-(w-k)*e,R=_-(_-S)*e}else{let e;e=j>y?1:g===y?0:(g-j)/(g-y),T=m-(m-v)*e,D=x-(x-A)*e,N=k-(k-E)*e,R=S-(S-C)*e}let e;e=j<f?0:j>y?1:(f-j)/(f-y),F=p-(p-v)*e,I=b-(b-A)*e,L=w-(w-E)*e,O=_-(_-C)*e;const t=Math.round(Math.min(T,F)),n=Math.round(Math.max(T,F));let i=u*j+4*t;for(let s=t;s<=n;s++)e=(T-s)/(T-F),e<0?e=0:e>1&&(e=1),d[i++]=D-(D-I)*e|0,d[i++]=N-(N-L)*e|0,d[i++]=R-(R-O)*e|0,d[i++]=255}}function ec(e,t,n){const i=t.coords,s=t.colors;let r,a;switch(t.type){case Ae:const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(r=0;r<l;r++){let t=r*o;for(let r=0;r<c;r++,t++)Zl(e,n,i[t],i[t+1],i[t+o],s[t],s[t+1],s[t+o]),Zl(e,n,i[t+o+1],i[t+1],i[t+o],s[t+o+1],s[t+1],s[t+o])}break;case Se:for(r=0,a=i.length;r<a;r+=3)Zl(e,n,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class tc extends Ql{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(r*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=r/o,d=a/l,u={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-s,scaleX:1/c,scaleY:1/d},h=o+4,p=l+4,f=n.getCanvas("mesh",h,p),m=f.context,g=m.createImageData(o,l);if(t){const e=g.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)ec(g,v,u);m.putImageData(g,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:s-2*d,scaleX:c,scaleY:d}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Yl(e,this._bbox);const s=new Float32Array(2);if(i===Xl)pt.singularValueDecompose2dScale(jt(e),s);else if(this.matrix){pt.singularValueDecompose2dScale(this.matrix,s);const[e,n]=s;pt.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=e,s[1]*=n}else pt.singularValueDecompose2dScale(t.baseTransform,s);const r=this._createMeshCanvas(s,i===Xl?null:this._background,t.cachedCanvases);return i!==Xl&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(r.offsetX,r.offsetY),e.scale(r.scaleX,r.scaleY),e.createPattern(r.canvas,"no-repeat")}}class nc extends Ql{getPattern(){return"hotpink"}}const ic=1,sc=2;class rc{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){var n,i;const{bbox:s,operatorList:r,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:u}=this;d=Math.abs(d),u=Math.abs(u),Xe("TilingType: "+o);const h=s[0],p=s[1],f=s[2],m=s[3],g=f-h,v=m-p,y=new Float32Array(2);pt.singularValueDecompose2dScale(this.matrix,y);const[b,w]=y;pt.singularValueDecompose2dScale(this.baseTransform,y);const _=b*y[0],x=w*y[1];let k=g,S=v,A=!1,E=!1;const C=Math.ceil(d*_),M=Math.ceil(u*x);C>=Math.ceil(g*_)?k=d:A=!0,M>=Math.ceil(v*x)?S=u:E=!0;const P=this.getSizeAndScale(k,this.ctx.canvas.width,_),T=this.getSizeAndScale(S,this.ctx.canvas.height,x),D=e.cachedCanvases.getCanvas("pattern",P.size,T.size),N=D.context,R=c.createCanvasGraphics(N,t);if(R.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(R,a,l),N.translate(-P.scale*h,-T.scale*p),R.transform(0,P.scale,0,0,T.scale,0,0),N.save(),null===(n=R.dependencyTracker)||void 0===n||n.save(),this.clipBbox(R,h,p,f,m),R.baseTransform=jt(R.ctx),R.executeOperatorList(r),R.endDrawing(),null===(i=R.dependencyTracker)||void 0===i||i.restore(),N.restore(),A||E){const t=D.canvas;A&&(k=d),E&&(S=u);const n=this.getSizeAndScale(k,this.ctx.canvas.width,_),i=this.getSizeAndScale(S,this.ctx.canvas.height,x),s=n.size,r=i.size,a=e.cachedCanvases.getCanvas("pattern-workaround",s,r),o=a.context,l=A?Math.floor(g/d):0,c=E?Math.floor(v/u):0;for(let e=0;e<=l;e++)for(let n=0;n<=c;n++)o.drawImage(t,s*e,r*n,s,r,0,0,s,r);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:h,offsetY:p}}return{canvas:D.canvas,scaleX:P.scale,scaleY:T.scale,offsetX:h,offsetY:p}}getSizeAndScale(e,t,n){const i=Math.max(rc.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,i,s){const r=i-t,a=s-n;e.ctx.rect(t,n,r,a),pt.axialAlignedBoundingBox([t,n,i,s],jt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case ic:const{fillStyle:e,strokeStyle:r}=this.ctx;i.fillStyle=s.fillColor=e,i.strokeStyle=s.strokeColor=r;break;case sc:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new ot("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,s){let r=n;i!==Xl&&(r=pt.transform(r,t.baseTransform),this.matrix&&(r=pt.transform(r,this.matrix)));const a=this.createPatternCanvas(t,s);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function ac(e){let{src:t,srcPos:n=0,dest:i,width:s,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=ut.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],u=s>>3,h=7&s,p=t.length;i=new Uint32Array(i.buffer);let f=0;for(let m=0;m<r;m++){for(const s=n+u;n<s;n++){const e=n<p?t[n]:255;i[f++]=128&e?d:c,i[f++]=64&e?d:c,i[f++]=32&e?d:c,i[f++]=16&e?d:c,i[f++]=8&e?d:c,i[f++]=4&e?d:c,i[f++]=2&e?d:c,i[f++]=1&e?d:c}if(0===h)continue;const e=n<p?t[n++]:255;for(let t=0;t<h;t++)i[f++]=e&1<<7-t?d:c}return{srcPos:n,destPos:f}}r(rc,"MAX_PATTERN_SIZE",3e3);const oc=16,lc=new DOMMatrix,cc=new Float32Array(2),dc=new Float32Array([1/0,1/0,-1/0,-1/0]);class uc{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function hc(e,t,n,i,s,r,a,o,l,c){const[d,u,h,p,f,m]=jt(e);if(0===u&&0===h){const g=a*d+f,v=Math.round(g),y=o*p+m,b=Math.round(y),w=(a+l)*d+f,_=Math.abs(Math.round(w)-v)||1,x=(o+c)*p+m,k=Math.abs(Math.round(x)-b)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(p),v,b),e.drawImage(t,n,i,s,r,0,0,_,k),e.setTransform(d,u,h,p,f,m),[_,k]}if(0===d&&0===p){const g=o*h+f,v=Math.round(g),y=a*u+m,b=Math.round(y),w=(o+c)*h+f,_=Math.abs(Math.round(w)-v)||1,x=(a+l)*u+m,k=Math.abs(Math.round(x)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,b),e.drawImage(t,n,i,s,r,0,0,k,_),e.setTransform(d,u,h,p,f,m),[k,_]}e.drawImage(t,n,i,s,r,a,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,p)*c]}class pc{constructor(e,t,n){r(this,"alphaIsShape",!1),r(this,"fontSize",0),r(this,"fontSizeScale",1),r(this,"textMatrix",null),r(this,"textMatrixScale",1),r(this,"fontMatrix",de),r(this,"leading",0),r(this,"x",0),r(this,"y",0),r(this,"lineX",0),r(this,"lineY",0),r(this,"charSpacing",0),r(this,"wordSpacing",0),r(this,"textHScale",1),r(this,"textRenderingMode",Ee),r(this,"textRise",0),r(this,"fillColor","#000000"),r(this,"strokeColor","#000000"),r(this,"patternFill",!1),r(this,"patternStroke",!1),r(this,"fillAlpha",1),r(this,"strokeAlpha",1),r(this,"lineWidth",1),r(this,"activeSMask",null),r(this,"transferMaps","none"),null===n||void 0===n||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=dc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===Kl){t||Qe("Stroke bounding box must include transform."),pt.singularValueDecompose2dScale(t,cc);const e=cc[0]*this.lineWidth/2,i=cc[1]*this.lineWidth/2;n[0]-=e,n[1]-=i,n[2]+=e,n[3]+=i}return n}updateClipFromPath(){const e=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(dc,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return pt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function fc(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,s=n%oc,r=(n-s)/oc,a=0===s?r:r+1,o=e.createImageData(i,oc);let l,c=0;const d=t.data,u=o.data;let h,p,f,m;if(t.kind===Ne.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),m=n.length,g=i+7>>3,v=4294967295,y=ut.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(f=h<r?oc:s,l=0,p=0;p<f;p++){const e=t-c;let s=0;const r=e>g?i:8*e-7,a=-8&r;let o=0,u=0;for(;s<a;s+=8)u=d[c++],n[l++]=128&u?v:y,n[l++]=64&u?v:y,n[l++]=32&u?v:y,n[l++]=16&u?v:y,n[l++]=8&u?v:y,n[l++]=4&u?v:y,n[l++]=2&u?v:y,n[l++]=1&u?v:y;for(;s<r;s++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:y,o>>=1}for(;l<m;)n[l++]=0;e.putImageData(o,0,h*oc)}}else if(t.kind===Ne.RGBA_32BPP){for(p=0,m=i*oc*4,h=0;h<r;h++)u.set(d.subarray(c,c+m)),c+=m,e.putImageData(o,0,p),p+=oc;h<a&&(m=i*s*4,u.set(d.subarray(c,c+m)),e.putImageData(o,0,p))}else{if(t.kind!==Ne.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=oc,m=i*f,h=0;h<a;h++){for(h>=r&&(f=s,m=i*f),l=0,p=m;p--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*oc)}}}function mc(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,s=n%oc,r=(n-s)/oc,a=0===s?r:r+1,o=e.createImageData(i,oc);let l=0;const c=t.data,d=o.data;for(let u=0;u<a;u++){const t=u<r?oc:s;({srcPos:l}=ac({src:c,srcPos:l,dest:d,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,u*oc)}}function gc(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function vc(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function yc(e,t){if(t)return!0;pt.singularValueDecompose2dScale(e,cc);const n=Math.fround(zt.pixelRatio*At.PDF_TO_CSS_UNITS);return cc[0]<=n&&cc[1]<=n}const bc=["butt","round","square"],wc=["miter","round","bevel"],_c={},xc={};var kc=new WeakSet;class Sc{constructor(e,t,n,i,s,r,a,o,l){let{optionalContentConfig:c,markedContentStack:d=null}=r;j(this,kc),this.ctx=e,this.current=new pc(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=c,this.cachedCanvases=new uc(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=null!==l&&void 0!==l?l:null}getObject(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var i;return"string"===typeof t?(null===(i=this.dependencyTracker)||void 0===i||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:s=null}=e;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...jt(this.compositeCtx))}this.ctx.save(),vc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=jt(this.ctx)}executeOperatorList(e,t,n,i,s){const r=e.argsArray,a=e.fnArray;let o=t||0;const l=r.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,d=c?Date.now()+15:0;let u=0;const h=this.commonObjs,p=this.objs;let f,m;for(;;){if(void 0!==i&&o===i.nextBreakPoint)return i.breakIt(o,n),o;var g;if(!s||s(o))if(f=a[o],m=null!==(g=r[o])&&void 0!==g?g:null,f!==We.dependency)null===m?this[f](o):this[f](o,...m);else for(const e of m){var v;null===(v=this.dependencyTracker)||void 0===v||v.recordNamedData(e,o);const t=e.startsWith("g_")?h:p;if(!t.has(e))return t.get(e,n),o}if(o++,o===l)return o;if(c&&++u>10){if(Date.now()>d)return n(),o;u=0}}}endDrawing(){W(kc,this,Ac).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),W(kc,this,Ec).call(this)}_scaleImage(e,t){var n,i;const s=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,r=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=s,u=r,h="prescale1";for(;l>2&&d>1||c>2&&u>1;){let t=d,n=u;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),a=this.cachedCanvases.getCanvas(h,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,u,0,0,t,n),e=a.canvas,d=t,u=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:u}}_createMaskCanvas(e,t){var n;const i=this.ctx,{width:s,height:r}=t,a=this.current.fillColor,o=this.current.patternFill,l=jt(i);let c,d,u,h;if((t.bitmap||t.data)&&t.count>1){const n=t.bitmap||t.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));const i=c.get(d);if(i&&!o){var p;const t=Math.round(Math.min(l[0],l[2])+l[4]),n=Math.round(Math.min(l[1],l[3])+l[5]);return null===(p=this.dependencyTracker)||void 0===p||p.recordDependencies(e,Gl),{canvas:i,offsetX:t,offsetY:n}}u=i}u||(h=this.cachedCanvases.getCanvas("maskCanvas",s,r),mc(h.context,t));let f=pt.transform(l,[1/s,0,0,-1/r,0,0]);f=pt.transform(f,[1,0,0,1,0,-r]);const m=dc.slice();pt.axialAlignedBoundingBox([0,0,s,r],f,m);const[g,v,y,b]=m,w=Math.round(y-g)||1,_=Math.round(b-v)||1,x=this.cachedCanvases.getCanvas("fillCanvas",w,_),k=x.context,S=g,A=v;k.translate(-S,-A),k.transform(...f),u||(u=this._scaleImage(h.canvas,Bt(k)),u=u.img,c&&o&&c.set(d,u)),k.imageSmoothingEnabled=yc(jt(k),t.interpolate),hc(k,u,0,0,u.width,u.height,0,0,s,r),k.globalCompositeOperation="source-in";const E=pt.transform(Bt(k),[1,0,0,1,-S,-A]);return k.fillStyle=o?a.getPattern(i,this,E,$l,e):a,k.fillRect(0,0,s,r),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,x.canvas)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Gl),{canvas:x.canvas,offsetX:Math.round(S),offsetY:Math.round(A)}}setLineWidth(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineCap",e),this.ctx.lineCap=bc[t]}setLineJoin(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=wc[t]}setMiterLimit(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("dash",e);const s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,s,r,a;for(const[o,l]of t)switch(o){case"LW":this.setLineWidth(e,l);break;case"LC":this.setLineCap(e,l);break;case"LJ":this.setLineJoin(e,l);break;case"ML":this.setMiterLimit(e,l);break;case"D":this.setDash(e,l[0],l[1]);break;case"RI":this.setRenderingIntent(e,l);break;case"FL":this.setFlatness(e,l);break;case"Font":this.setFont(e,l[0],l[1]);break;case"CA":null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=l;break;case"ca":null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null===(s=this.dependencyTracker)||void 0===s||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=l;break;case"SMask":null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("SMask",e),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null===(a=this.dependencyTracker)||void 0===a||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const r=this.ctx=s.context;r.setTransform(this.suspendedCtx.getTransform()),gc(this.suspendedCtx,r),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,s,r,a){t.transform(e,n,i,s,r,a),this.__originalTransform(e,n,i,s,r,a)},e.setTransform=function(e,n,i,s,r,a){t.setTransform(e,n,i,s,r,a),this.__originalSetTransform(e,n,i,s,r,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,s,r,a){t.bezierCurveTo(e,n,i,s,r,a),this.__originalBezierCurveTo(e,n,i,s,r,a)},e.rect=function(e,n,i,s){t.rect(e,n,i,s),this.__originalRect(e,n,i,s)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),gc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const s=i[0],r=i[1],a=i[2]-s,o=i[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,s,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,s,r,a,o,l,c,d){let u=e.canvas,h=o-c,p=l-d;if(r)if(h<0||p<0||h+n>u.width||p+i>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(u,-h,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=r,t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over",u=e.canvas,h=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=r,e.fillRect(h,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,i),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(u,h,p,n,i,o,l,n,i),t.restore()}save(e){var t;this.inSMaskMode&&gc(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null===(t=this.dependencyTracker)||void 0===t||t.save(e)}restore(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.restore(e),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&gc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,i,s,r,a){var o;null===(o=this.dependencyTracker)||void 0===o||o.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[s]=n;if(!i)return s||(s=n[0]=new Path2D),void this[t](e,s);if(null!==this.dependencyTracker){const n=t===We.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-n,i[2]+n,i[1]-n,i[3]+n).recordDependencies(e,["transform"])}s instanceof Path2D||(s=n[0]=Yt(s)),pt.axialAlignedBoundingBox(i,jt(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof r&&null!==r&&void 0!==r&&r.getPattern){const n=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Bt(s),Kl,e),n){const e=new Path2D;e.addPath(t,s.getTransform().invertSelf().multiplySelf(n)),t=e}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Wl),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Kl,jt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=this.ctx,r=this.current.fillColor;let a=!1;if(this.current.patternFill){var o;const n=r.isModifyingCurrentTransform()?s.getTransform():null;if(null===(o=this.dependencyTracker)||void 0===o||o.save(e),s.save(),s.fillStyle=r.getPattern(s,this,Bt(s),$l,e),n){const e=new Path2D;e.addPath(t,s.getTransform().invertSelf().multiplySelf(n)),t=e}a=!0}const l=this.current.getClippedPathBoundingBox();var c;(this.contentVisible&&null!==l&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,zl),a)&&(s.restore(),null===(c=this.dependencyTracker)||void 0===c||c.restore(e));i&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,Vl).recordOperation(e)}clip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=_c}eoClip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=xc}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null===(t=this.dependencyTracker)||void 0===t||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==t&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",e),n.recordCloseMarker(e)}if(void 0!==t){const e=new Path2D,i=n.getTransform().invertSelf();for(const{transform:n,x:s,y:r,fontSize:a,path:o}of t)o&&e.addPath(o,new DOMMatrix(n).preMultiplySelf(i).translate(s,r).scale(a,-a));n.clip(e)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var i,s;null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),a=this.current;if(!r)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=r.fontMatrix||de,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||Ye("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=n,r.isType3Font)return;const o=r.loadedName||"sans-serif",l=(null===(s=r.systemFontInfo)||void 0===s?void 0:s.css)||'"'.concat(o,'", ').concat(r.fallbackName);let c="normal";r.black?c="900":r.bold&&(c="bold");const d=r.italic?"italic":"normal";let u=n;n<16?u=16:n>100&&(u=100),this.current.fontSizeScale=n/u,this.ctx.font="".concat(d," ").concat(c," ").concat(u,"px ").concat(l)}setTextRenderingMode(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){var t,n;this.moveText(e,0,this.current.leading),null===(t=this.dependencyTracker)||void 0===t||t.recordIncrementalData("moveText",null!==(n=this.dependencyTracker.getSimpleIndex("leading"))&&void 0!==n?n:e)}paintChar(e,t,n,i,s,r){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,u=c&Te,h=!!(c&De),p=o.patternFill&&!l.missingFile,f=o.patternStroke&&!l.missingFile;let m;if((l.disableFontFace||h||p||f)&&!l.missingFile&&(m=l.getPathGenerator(this.commonObjs,t)),m&&(l.disableFontFace||p||f)){var g;let t;if(a.save(),a.translate(n,i),a.scale(d,-d),null===(g=this.dependencyTracker)||void 0===g||g.recordCharacterBBox(e,a,l),u===Ee||u===Me)if(s){t=a.getTransform(),a.setTransform(...s);const e=W(kc,this,Cc).call(this,m,t,s);a.fill(e)}else a.fill(m);if(u===Ce||u===Me)if(r){t||(t=a.getTransform()),a.setTransform(...r);const{a:e,b:n,c:i,d:s}=t,o=pt.inverseTransform(r),l=pt.transform([e,n,i,s,0,0],o);pt.singularValueDecompose2dScale(l,cc),a.lineWidth*=Math.max(cc[0],cc[1])/d,a.stroke(W(kc,this,Cc).call(this,m,t,r))}else a.lineWidth/=d,a.stroke(m);a.restore()}else{var v;if(u===Ee||u===Me)a.fillText(t,n,i),null===(v=this.dependencyTracker)||void 0===v||v.recordCharacterBBox(e,a,l,d,n,i,()=>a.measureText(t));if(u===Ce||u===Me){var y;if(this.dependencyTracker)null===(y=this.dependencyTracker)||void 0===y||y.recordCharacterBBox(e,a,l,d,n,i,()=>a.measureText(t)).recordDependencies(e,Wl);a.strokeText(t,n,i)}}if(h){var b;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:jt(a),x:n,y:i,fontSize:d,path:m}),null===(b=this.dependencyTracker)||void 0===b||b.recordCharacterBBox(e,a,l,d,n,i)}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return tt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var n;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Hl).resetBBox(e),this.current.textRenderingMode&De&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;var r;if(s.isType3Font)return this.showType3Text(e,t),void(null===(r=this.dependencyTracker)||void 0===r||r.recordShowTextOperation(e));const a=i.fontSize;var o;if(0===a)return void(null===(o=this.dependencyTracker)||void 0===o||o.recordOperation(e));const l=this.ctx,c=i.fontSizeScale,d=i.charSpacing,u=i.wordSpacing,h=i.fontDirection,p=i.textHScale*h,f=t.length,m=s.vertical,g=m?1:-1,v=s.defaultVMetrics,y=a*i.fontMatrix[0],b=i.textRenderingMode===Ee&&!s.disableFontFace&&!i.patternFill;let w,_;l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),h>0?l.scale(p,-1):l.scale(p,1);const x=i.textRenderingMode&Te,k=x===Ce||x===Me;if((x===Ee||x===Me)&&i.patternFill){l.save();const t=i.fillColor.getPattern(l,this,Bt(l),$l,e);w=jt(l),l.restore(),l.fillStyle=t}if(k&&i.patternStroke){l.save();const t=i.strokeColor.getPattern(l,this,Bt(l),Kl,e);_=jt(l),l.restore(),l.strokeStyle=t}let S=i.lineWidth;const A=i.textMatrixScale;if(0===A||0===S?k&&(S=this.getSinglePixelWidth()):S/=A,1!==c&&(l.scale(c,c),S/=c),l.lineWidth=S,s.isInvalidPDFjsFont){const n=[];let s=0;for(const e of t)n.push(e.unicode),s+=e.width;const r=n.join("");if(l.fillText(r,0,0),null!==this.dependencyTracker){const t=l.measureText(r);this.dependencyTracker.recordBBox(e,this.ctx,-t.actualBoundingBoxLeft,t.actualBoundingBoxRight,-t.actualBoundingBoxAscent,t.actualBoundingBoxDescent).recordShowTextOperation(e)}return i.x+=s*y*p,l.restore(),void this.compose()}let E,C=0;for(E=0;E<f;++E){const n=t[E];if("number"===typeof n){C+=g*n*a/1e3;continue}let i=!1;const r=(n.isSpace?u:0)+d,o=n.fontChar,p=n.accent;let f,x,k,S=n.width;if(m){const e=n.vmetric||v,t=-(n.vmetric?e[1]:.5*S)*y,i=e[2]*y;S=e?-e[0]:S,f=t/c,x=(C+i)/c}else f=C/c,x=0;if(s.remeasure&&S>0){k=l.measureText(o);const e=1e3*k.width/a*c;if(S<e&&this.isFontSubpixelAAEnabled){const t=S/e;i=!0,l.save(),l.scale(t,1),f/=t}else S!==e&&(f+=(S-e)/2e3*a/c)}var M;if(this.contentVisible&&(n.isInFont||s.missingFile))if(b&&!p)l.fillText(o,f,x),null===(M=this.dependencyTracker)||void 0===M||M.recordCharacterBBox(e,l,k?{bbox:null}:s,a/c,f,x,()=>null!==k&&void 0!==k?k:l.measureText(o));else if(this.paintChar(e,o,f,x,w,_),p){const t=f+a*p.offset.x/c,n=x-a*p.offset.y/c;this.paintChar(e,p.fontChar,t,n,w,_)}C+=m?S*y-r*h:S*y+r*h,i&&l.restore()}m?i.y-=C:i.x+=C*p,l.restore(),this.compose(),null===(n=this.dependencyTracker)||void 0===n||n.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,s=i.font,r=i.fontSize,a=i.fontDirection,o=s.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*a,u=i.fontMatrix||de,h=t.length;let p,f,m,g;if(i.textRenderingMode===Pe||0===r)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(d,a);const v=this.dependencyTracker;for(this.dependencyTracker=v?new Bl(v,e):null,p=0;p<h;++p){if(f=t[p],"number"===typeof f){g=o*f*r/1e3,this.ctx.translate(g,0),i.x+=g*d;continue}const e=(f.isSpace?c:0)+l,a=s.charProcOperatorList[f.operatorListId];a?this.contentVisible&&(this.save(),n.scale(r,r),n.transform(...u),this.executeOperatorList(a),this.restore()):Ye('Type3 character "'.concat(f.operatorListId,'" is not available.'));const h=[f.width,0];pt.applyTransform(h,u),m=h[0]*r+e,n.translate(m,0),i.x+=m*d}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,s,r,a){var o;const l=new Path2D;l.rect(i,s,r-i,a-s),this.ctx.clip(l),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,this.ctx,i,r,s,a).recordClipBox(e,this.ctx,i,r,s,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if("TilingPattern"===t[0]){const e=this.baseTransform||jt(this.ctx),i={createCanvasGraphics:(e,t)=>new Sc(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Bl(this.dependencyTracker,t,!0):null)};n=new rc(t,this.ctx,i,e)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];this.current.strokeColor=this.getColorN_Pattern(e,i),this.current.patternStroke=!0}setFillColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];this.current.fillColor=this.getColorN_Pattern(e,i),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=function(e){switch(e[0]){case"RadialAxial":return new Jl(e);case"Mesh":return new tc(e);case"Dummy":return new nc}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e,t)),this.cachedPatterns.set(t,n)),i&&(n.matrix=i),n}shadingFill(e,t){var n;if(!this.contentVisible)return;const i=this.ctx;this.save(e);const s=this._getPattern(e,t);i.fillStyle=s.getPattern(i,this,Bt(i),Xl,e);const r=Bt(i);if(r){const{width:e,height:t}=i.canvas,n=dc.slice();pt.axialAlignedBoundingBox([0,0,e,t],r,n);const[s,a,o,l]=n;this.ctx.fillRect(s,a,o-s,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ql).recordDependencies(e,zl).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Qe("Should not call beginInlineImage")}beginImageData(){Qe("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=jt(this.ctx),n)){var i;pt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[t,s,r,a]=n,o=new Path2D;o.rect(t,s,r-t,a-s),this.ctx.clip(o),null===(i=this.dependencyTracker)||void 0===i||i.recordClipBox(e,this.ctx,t,r,s,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var n;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||Xe("TODO: Support non-isolated groups."),t.knockout&&Ye("Knockout groups not supported.");const s=jt(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=dc.slice();pt.axialAlignedBoundingBox(t.bbox,jt(i),r);const a=[0,0,i.canvas.width,i.canvas.height];r=pt.intersect(r,a)||[0,0,0,0];const o=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-o,1),d=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,c,d),p=h.context;p.translate(-o,-l),p.transform(...s);let f=new Path2D;const[m,g,v,y]=t.bbox;if(f.rect(m,g,v-m,y-g),t.matrix){const e=new Path2D;e.addPath(f,new DOMMatrix(t.matrix)),f=e}p.clip(f),t.smask&&this.smaskStack.push({canvas:h.canvas,context:p,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),t.smask&&!this.dependencyTracker||(i.setTransform(1,0,0,1,0,0),i.translate(o,l),i.save()),gc(i,p),this.ctx=p,null===(n=this.dependencyTracker)||void 0===n||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){var n;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,null===(n=this.dependencyTracker)||void 0===n||n.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const t=jt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...t);const n=dc.slice();pt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],t,n),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,s,r){if(W(kc,this,Ac).call(this),vc(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const s=n[2]-n[0],a=n[3]-n[1];if(r&&this.annotationCanvasMap){(i=i.slice())[4]-=n[0],i[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=s,n[3]=a,pt.singularValueDecompose2dScale(jt(this.ctx),cc);const{viewportScale:e}=this,r=Math.ceil(s*this.outputScaleX*e),o=Math.ceil(a*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(r,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(cc[0],0,0,-cc[1],0,a*cc[1]),vc(this.ctx)}else{vc(this.ctx),this.endPath(e);const t=new Path2D;t.rect(n[0],n[1],s,a),this.ctx.clip(t)}}this.current=new pc(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),W(kc,this,Ec).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var n;if(!this.contentVisible)return;const i=t.count;(t=this.getObject(e,t.data,t)).count=i;const s=this.ctx,r=this._createMaskCanvas(e,t),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+a.width,r.offsetY,r.offsetY+a.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n){var i,s;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const d=jt(c);c.transform(n,r,a,o,0,0);const u=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,u.offsetX-d[4],u.offsetY-d[5]),null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(let p=0,f=l.length;p<f;p+=2){var h;const t=pt.transform(d,[n,r,a,o,l[p],l[p+1]]);c.drawImage(u.canvas,t[4],t[5]),null===(h=this.dependencyTracker)||void 0===h||h.recordBBox(e,this.ctx,t[4],t[4]+u.canvas.width,t[5],t[5]+u.canvas.height)}c.restore(),this.compose(),null===(s=this.dependencyTracker)||void 0===s||s.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var n,i;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,a=this.current.patternFill;null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordDependencies(e,Gl);for(const l of t){var o;const{data:t,width:n,height:i,transform:c}=l,d=this.cachedCanvases.getCanvas("maskCanvas",n,i),u=d.context;u.save();mc(u,this.getObject(e,t,l)),u.globalCompositeOperation="source-in",u.fillStyle=a?r.getPattern(u,this,Bt(s),$l,e):r,u.fillRect(0,0,n,i),u.restore(),s.save(),s.transform(...c),s.scale(1,-1),hc(s,d.canvas,0,0,n,i,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,s,0,n,0,i),s.restore()}this.compose(),null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);n?this.paintInlineImageXObject(e,n):Ye("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i,s){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r)return void Ye("Dependent image isn't ready yet");const a=r.width,o=r.height,l=[];for(let c=0,d=s.length;c<d;c+=2)l.push({transform:[n,0,0,i,s[c],s[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(e,r,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",s.canvas}paintInlineImageXObject(e,t){var n;if(!this.contentVisible)return;const i=t.width,s=t.height,r=this.ctx;this.save(e);const{filter:a}=r;let o;if("none"!==a&&""!==a&&(r.filter="none"),r.scale(1/i,-1/s),t.bitmap)o=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{const e=this.cachedCanvases.getCanvas("inlineImage",i,s).context;fc(e,t),o=this.applyTransferMapsToCanvas(e)}const l=this._scaleImage(o,Bt(r));r.imageSmoothingEnabled=yc(jt(r),t.interpolate),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,r,0,i,-s,0).recordDependencies(e,Ul).recordOperation(e),hc(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,i,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var i,s;if(!this.contentVisible)return;const r=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const e=t.width,n=t.height,i=this.cachedCanvases.getCanvas("inlineImage",e,n).context;fc(i,t),a=this.applyTransferMapsToCanvas(i)}null===(i=this.dependencyTracker)||void 0===i||i.resetBBox(e);for(const l of n){var o;r.save(),r.transform(...l.transform),r.scale(1,-1),hc(r,a,l.x,l.y,l.w,l.h,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,r,0,1,-1,0),r.restore()}null===(s=this.dependencyTracker)||void 0===s||s.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&(null===(t=this.dependencyTracker)||void 0===t||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,zl).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;null===(i=this.dependencyTracker)||void 0===i||i.beginMarkedContent(e),"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;var r,a;this.pendingClip?(i||(this.pendingClip===xc?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,null===(r=this.dependencyTracker)||void 0===r||r.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):null===(a=this.dependencyTracker)||void 0===a||a.recordOperation(e);this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=jt(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:s}=this.ctx.getTransform();let r,a;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(s);if(n===i)if(0===e)r=a=1/n;else{const t=n*e;r=a=t<1?1/t:1}else if(0===e)r=1/n,a=1/i;else{const t=n*e,s=i*e;r=t<1?1/t:1,a=s<1?1/s:1}}else{const o=Math.abs(t*s-n*i),l=Math.hypot(t,n),c=Math.hypot(i,s);if(0===e)r=c/o,a=l/o;else{const t=e*o;r=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[s,r]=this.getScaleForStroking();if(s===r)return n.lineWidth=(i||1)*s,void n.stroke(e);const a=n.getLineDash();t&&n.save(),n.scale(s,r),lc.a=1/s,lc.d=1/r;const o=new Path2D;if(o.addPath(e,lc),a.length>0){const e=Math.max(s,r);n.setLineDash(a.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=i||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function Ac(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Ec(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function Cc(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}for(const n in We)void 0!==Sc.prototype[n]&&(Sc.prototype[We[n]]=Sc.prototype[n]);class Mc{static get workerPort(){return W(Mc,this,Pc)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Pc._=W(Mc,this,e)}static get workerSrc(){return W(Mc,this,Tc)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");Tc._=W(Mc,this,e)}}var Pc={_:null},Tc={_:""},Dc=new WeakMap,Nc=new WeakMap;class Rc{constructor(e){let{parsedData:t,rawData:n}=e;B(this,Dc,void 0),B(this,Nc,void 0),V(Dc,this,t),V(Nc,this,n)}getRaw(){return U(Nc,this)}get(e){var t;return null!==(t=U(Dc,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return U(Dc,this).entries()}}const Fc=Symbol("INTERNAL");var Ic=new WeakMap,Lc=new WeakMap,Oc=new WeakMap,jc=new WeakMap;class Bc{constructor(e,t){let{name:n,intent:i,usage:s,rbGroups:r}=t;B(this,Ic,!1),B(this,Lc,!1),B(this,Oc,!1),B(this,jc,!0),V(Ic,this,!!(e&pe)),V(Lc,this,!!(e&fe)),this.name=n,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(U(Oc,this))return U(jc,this);if(!U(jc,this))return!1;const{print:e,view:t}=this.usage;return U(Ic,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!U(Lc,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Fc&&Qe("Internal method `_setVisible` called."),V(Oc,this,n),V(jc,this,t)}}var Wc=new WeakMap,zc=new WeakMap,Uc=new WeakMap,Vc=new WeakMap,Hc=new WeakSet;class qc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe;if(j(this,Hc),B(this,Wc,null),B(this,zc,new Map),B(this,Uc,null),B(this,Vc,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,V(Vc,this,e.order);for(const n of e.groups)U(zc,this).set(n.id,new Bc(t,n));if("OFF"===e.baseState)for(const e of U(zc,this).values())e._setVisible(Fc,!1);for(const t of e.on)U(zc,this).get(t)._setVisible(Fc,!0);for(const t of e.off)U(zc,this).get(t)._setVisible(Fc,!1);V(Uc,this,this.getHash())}}isVisible(e){if(0===U(zc,this).size)return!0;if(!e)return Xe("Optional content group not defined."),!0;if("OCG"===e.type)return U(zc,this).has(e.id)?U(zc,this).get(e.id).visible:(Ye("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return W(Hc,this,Gc).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!U(zc,this).has(t))return Ye("Optional content group not found: ".concat(t)),!0;if(U(zc,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!U(zc,this).has(t))return Ye("Optional content group not found: ".concat(t)),!0;if(!U(zc,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!U(zc,this).has(t))return Ye("Optional content group not found: ".concat(t)),!0;if(!U(zc,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!U(zc,this).has(t))return Ye("Optional content group not found: ".concat(t)),!0;if(U(zc,this).get(t).visible)return!1}return!0}return Ye("Unknown optional content policy ".concat(e.policy,".")),!0}return Ye("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=U(zc,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var s;if(n!==e)null===(s=U(zc,this).get(n))||void 0===s||s._setVisible(Fc,!1,!0)}i._setVisible(Fc,!!t,!0),V(Wc,this,null)}else Ye("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const s of n){switch(s){case"ON":case"OFF":case"Toggle":t=s;continue}const e=U(zc,this).get(s);if(e)switch(t){case"ON":this.setVisibility(s,!0,i);break;case"OFF":this.setVisibility(s,!1,i);break;case"Toggle":this.setVisibility(s,!e.visible,i)}}V(Wc,this,null)}get hasInitialVisibility(){return null===U(Uc,this)||this.getHash()===U(Uc,this)}getOrder(){return U(zc,this).size?U(Vc,this)?U(Vc,this).slice():[...U(zc,this).keys()]:null}getGroup(e){return U(zc,this).get(e)||null}getHash(){if(null!==U(Wc,this))return U(Wc,this);const e=new Zr;for(const[t,n]of U(zc,this))e.update("".concat(t,":").concat(n.visible));return V(Wc,this,e.hexdigest())}[Symbol.iterator](){return U(zc,this).entries()}}function Gc(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let s;if(Array.isArray(t))s=W(Hc,this,Gc).call(this,t);else{if(!U(zc,this).has(t))return Ye("Optional content group not found: ".concat(t)),!0;s=U(zc,this).get(t).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}class $c{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;Je(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===r||void 0===r?void 0:r.length)>0){const e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{Je(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,s;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(s=i.onProgress)||void 0===s||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Je(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Kc(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Xc(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class Kc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=Tt(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Xc{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Yc(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function Qc(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function Jc(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:s}=e;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return r;if(r.suggestedLength=a,a<=2*i)return r;if(s||!n)return r;if("bytes"!==t.get("Accept-Ranges"))return r;return"identity"!==(t.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function Zc(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),r(e)}if(n=function(e){const t=[];let n;const s=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(e));){let[,e,i,s]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,s]}const r=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=a(n),e&&(n=unescape(n),0===i&&(n=o(n))),r.push(n)}return r.join("")}(e),n)return r(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),r(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),s=dt(n);n=i.decode(s),t=!1}catch(i){}}return n}function r(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,i){if("q"===n||"Q"===n)return s(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{i=atob(i)}catch(r){}return s(t,i)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(Tt(e))return e}return null}function ed(e,t){return new at("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function td(e){return 200===e||206===e}function nd(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function id(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Ye("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class sd{constructor(e){r(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Yc(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Je(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new rd(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ad(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class rd{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,nd(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=Qc(t.url),!td(t.status))throw ed(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:s,suggestedLength:r}=Jc({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=r||this._contentLength,this._filename=Zc(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new lt("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:id(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class ad{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range","bytes=".concat(t,"-").concat(n-1));const r=i.url;fetch(r,nd(s,this._withCredentials,this._abortController)).then(t=>{const n=Qc(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!td(t.status))throw ed(t.status,r);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:id(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class od{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;r(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Yc(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,r]of this.headers)t.setRequestHeader(s,r);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",Je(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError(i.status);const s=i.status||200;if(!(200===s&&206===n.expectedStatus)&&s!==n.expectedStatus)return void n.onError(i.status);const r=function(e){const t=e.response;return"string"!==typeof t?t:dt(t).buffer}(i);if(206===s){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:r}):(Ye('Missing or invalid "Content-Range" header.'),n.onError(0))}else r?n.onDone({begin:0,chunk:r}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ld{constructor(e){this._source=e,this._manager=new od(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Je(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new cd(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new dd(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class cd{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Qc(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:r}=Jc({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Zc(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ed(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class dd{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Qc(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=ed(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ud=/^[a-z][a-z0-9\-+.]+:/i;class hd{constructor(e){this.source=e,this.url=function(e){if(ud.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),Je("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return Je(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new pd(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new fd(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class pd{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=ed(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new lt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fd{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const md=Symbol("INITIAL_DATA");var gd=new WeakMap,vd=new WeakSet;class yd{constructor(){j(this,vd),B(this,gd,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=W(vd,this,bd).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=U(gd,this)[e];if(!n||n.data===md)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=U(gd,this)[e];return!!t&&t.data!==md}delete(e){const t=U(gd,this)[e];return!(!t||t.data===md)&&(delete U(gd,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=W(vd,this,bd).call(this,e);n.data=t,n.resolve()}clear(){for(const t in U(gd,this)){var e;const{data:n}=U(gd,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}V(gd,this,Object.create(null))}*[Symbol.iterator](){for(const e in U(gd,this)){const{data:t}=U(gd,this)[e];t!==md&&(yield[e,t])}}}function bd(e){var t;return(t=U(gd,this))[e]||(t[e]=o(o({},Promise.withResolvers()),{},{data:md}))}var wd=new WeakMap,_d=new WeakMap,xd=new WeakMap,kd=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,Md=new WeakMap,Pd=new WeakMap,Td=new WeakMap,Dd=new WeakMap,Nd=new WeakMap,Rd=new WeakMap,Fd=new WeakMap,Id=new WeakMap,Ld=new WeakMap,Od=new WeakMap,jd=new WeakSet;class Bd{constructor(e){var t;let{textContentSource:n,container:i,viewport:s}=e;if(j(this,jd),B(this,wd,Promise.withResolvers()),B(this,_d,null),B(this,xd,!1),B(this,kd,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),B(this,Sd,null),B(this,Ad,null),B(this,Ed,0),B(this,Cd,0),B(this,Md,null),B(this,Pd,null),B(this,Td,0),B(this,Dd,0),B(this,Nd,Object.create(null)),B(this,Rd,[]),B(this,Fd,null),B(this,Id,[]),B(this,Ld,new WeakMap),B(this,Od,null),n instanceof ReadableStream)V(Fd,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');V(Fd,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}V(_d,this,V(Pd,this,i)),V(Dd,this,s.scale*zt.pixelRatio),V(Td,this,s.rotation),V(Ad,this,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:o,pageY:l}=s.rawDims;V(Od,this,[1,0,0,-1,-o,l+a]),V(Cd,this,r),V(Ed,this,a),qd.call(Bd),i.style.setProperty("--min-font-size",Yd._),Wt(i,s),U(wd,this).promise.finally(()=>{Qd._.delete(this),V(Ad,this,null),V(Nd,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=ut.platform;return tt(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{U(Md,this).read().then(t=>{var n;let{value:i,done:s}=t;s?U(wd,this).resolve():(null!==(n=U(Sd,this))&&void 0!==n||V(Sd,this,i.lang),Object.assign(U(Nd,this),i.styles),W(jd,this,Wd).call(this,i.items),e())},U(wd,this).reject)};return V(Md,this,U(Fd,this).getReader()),Qd._.add(this),e(),U(wd,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*zt.pixelRatio,s=t.rotation;if(s!==U(Td,this)&&(null===n||void 0===n||n(),V(Td,this,s),Wt(U(Pd,this),{rotation:s})),i!==U(Dd,this)){null===n||void 0===n||n(),V(Dd,this,i);const e={div:null,properties:null,ctx:Vd.call(Bd,U(Sd,this))};for(const t of U(Id,this))e.properties=U(Ld,this).get(t),e.div=t,W(jd,this,Ud).call(this,e)}}cancel(){var e;const t=new lt("TextLayer task cancelled.");null===(e=U(Md,this))||void 0===e||e.cancel(t).catch(()=>{}),V(Md,this,null),U(wd,this).reject(t)}get textDivs(){return U(Id,this)}get textContentItemsStr(){return U(Rd,this)}static cleanup(){if(!(W(Bd,this,Qd)._.size>0)){W(Bd,this,$d)._.clear();for(const{canvas:e}of W(Bd,this,Kd)._.values())e.remove();W(Bd,this,Kd)._.clear()}}}function Wd(e){var t,n;if(U(xd,this))return;null!==(n=(t=U(Ad,this)).ctx)&&void 0!==n||(t.ctx=Vd.call(Z,U(Sd,this)));const i=U(Id,this),s=U(Rd,this);for(const r of e){if(i.length>1e5)return Ye("Ignoring additional textDivs for performance reasons."),void V(xd,this,!0);if(void 0!==r.str)s.push(r.str),W(jd,this,zd).call(this,r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const e=U(_d,this);V(_d,this,document.createElement("span")),U(_d,this).classList.add("markedContent"),r.id&&U(_d,this).setAttribute("id","".concat(r.id)),e.append(U(_d,this))}else"endMarkedContent"===r.type&&V(_d,this,U(_d,this).parentNode)}}function zd(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};U(Id,this).push(t);const i=pt.transform(U(Od,this),e.transform);let s=Math.atan2(i[1],i[0]);const r=U(Nd,this)[e.fontName];r.vertical&&(s+=Math.PI/2);let a=U(kd,this)&&r.fontSubstitution||r.fontFamily;a=Z.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*Gd.call(Z,a,r,U(Sd,this));let c,d;0===s?(c=i[4],d=i[5]-l):(c=i[4]+l*Math.sin(s),d=i[5]-l*Math.cos(s));const u=t.style;u.left="".concat((100*c/U(Cd,this)).toFixed(2),"%"),u.top="".concat((100*d/U(Ed,this)).toFixed(2),"%"),u.setProperty("--font-height","".concat(o.toFixed(2),"px")),u.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,U(kd,this)&&(t.dataset.fontName=r.fontSubstitutionLoadedName||e.fontName),0!==s&&(n.angle=s*(180/Math.PI));let h=!1;if(e.str.length>1)h=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(h=!0)}if(h&&(n.canvasWidth=r.vertical?e.height:e.width),U(Ld,this).set(t,n),U(Ad,this).div=t,U(Ad,this).properties=n,W(jd,this,Ud).call(this,U(Ad,this)),n.hasText&&U(_d,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),U(_d,this).append(e)}}function Ud(e){const{div:t,properties:n,ctx:i}=e,{style:s}=t;if(0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=s,{canvasWidth:r,fontSize:a}=n;Hd.call(Z,i,a*U(Dd,this),e);const{width:o}=i.measureText(t.textContent);o>0&&s.setProperty("--scale-x",r*U(Dd,this)/o)}0!==n.angle&&s.setProperty("--rotate","".concat(n.angle,"deg"))}function Vd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=W(Z,this,Kd)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),W(Z,this,Kd)._.set(e,t),W(Z,this,Xd)._.set(t,{size:0,family:""})}return t}function Hd(e,t,n){const i=W(Z,this,Xd)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function qd(){if(null!==W(Z,this,Yd)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),Yd._=W(Z,this,e.getBoundingClientRect().height),e.remove()}function Gd(e,t,n){const i=W(Z,this,$d)._.get(e);if(i)return i;const s=W(Z,this,Vd).call(this,n);s.canvas.width=s.canvas.height=30,W(Z,this,Hd).call(this,s,30,e);const r=s.measureText(""),a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let l=.8;return a?l=a/(a+o):(ut.platform.isFirefox&&Ye("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),W(Z,this,$d)._.set(e,l),l}Z=Bd;var $d={_:new Map},Kd={_:new Map},Xd={_:new WeakMap},Yd={_:null},Qd={_:new Set};function Jd(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const i=new Zd,{docId:s}=i,r=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(ce)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(e){if(ce&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return dt(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,d=n.range instanceof au?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let h=n.worker instanceof vu?n.worker:null;const p=n.verbosity,f="string"!==typeof n.docBaseUrl||Pt(n.docBaseUrl)?null:n.docBaseUrl,m=Ya(n.cMapUrl),g=!1!==n.cMapPacked,v=n.CMapReaderFactory||(ce?nl:Eo),y=Ya(n.iccUrl),b=Ya(n.standardFontDataUrl),w=n.StandardFontDataFactory||(ce?il:Yo),_=Ya(n.wasmUrl),x=n.WasmFactory||(ce?sl:Jo),k=!0!==n.stopAtErrors,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,A=!1!==n.isEvalSupported,E="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!ce,C="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!ce&&(ut.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,P="boolean"===typeof n.disableFontFace?n.disableFontFace:ce,T=!0===n.fontExtraProperties,D=!0===n.enableXfa,N=n.ownerDocument||globalThis.document,R=!0===n.disableRange,F=!0===n.disableStream,I=!0===n.disableAutoFetch,L=!0===n.pdfBug,O=n.CanvasFactory||(ce?tl:So),j=n.FilterFactory||(ce?el:Lo),B=!0===n.enableHWA,W=!1!==n.useWasm,z=d?d.length:null!==(t=n.length)&&void 0!==t?t:NaN,U="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!ce&&!P,V="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===Eo&&w===Yo&&x===Jo&&m&&b&&_&&Nt(m,document.baseURI)&&Nt(b,document.baseURI)&&Nt(_,document.baseURI));$e(p);const H={canvasFactory:new O({ownerDocument:N,enableHWA:B}),filterFactory:new j({docId:s,ownerDocument:N}),cMapReaderFactory:V?null:new v({baseUrl:m,isCompressed:g}),standardFontDataFactory:V?null:new w({baseUrl:b}),wasmFactory:V?null:new x({baseUrl:_})};h||(h=vu.create({verbosity:p,port:Mc.workerPort}),i._worker=h);const q={docId:s,apiVersion:"5.4.530",data:a,password:c,disableAutoFetch:I,rangeChunkSize:u,length:z,docBaseUrl:f,enableXfa:D,evaluatorOptions:{maxImageSize:S,disableFontFace:P,ignoreErrors:k,isEvalSupported:A,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:M,fontExtraProperties:T,useSystemFonts:U,useWasm:W,useWorkerFetch:V,cMapUrl:m,iccUrl:y,standardFontDataUrl:b,wasmUrl:_}},G={ownerDocument:N,pdfBug:L,styleElement:null,loadingParams:{disableAutoFetch:I,enableXfa:D}};return h.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const e=h.messageHandler.sendWithPromise("GetDocRequest",q,a?[a.buffer]:null);let t;if(d)t=new $c(d,{disableRange:R,disableStream:F});else if(!a){if(!r)throw new Error("getDocument - no `url` parameter provided.");const e=Nt(r)?sd:ce?hd:ld;t=new e({url:r,length:z,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:R,disableStream:F})}return e.then(e=>{if(i.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const n=new vo(s,e,h.port),r=new Nu(n,i,t,G,H,B);i._transport=r,n.send("Ready",null)})}).catch(i._capability.reject),i}class Zd{constructor(){r(this,"_capability",Promise.withResolvers()),r(this,"_transport",null),r(this,"_worker",null),r(this,"docId","d".concat((eu._=(ee=eu._,te=ee++,ee),te))),r(this,"destroyed",!1),r(this,"onPassword",null),r(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(s){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var eu={_:0},tu=new WeakMap,nu=new WeakMap,iu=new WeakMap,su=new WeakMap,ru=new WeakMap;class au{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;B(this,tu,Promise.withResolvers()),B(this,nu,[]),B(this,iu,[]),B(this,su,[]),B(this,ru,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){U(ru,this).push(e)}addProgressListener(e){U(su,this).push(e)}addProgressiveReadListener(e){U(iu,this).push(e)}addProgressiveDoneListener(e){U(nu,this).push(e)}onDataRange(e,t){for(const n of U(ru,this))n(e,t)}onDataProgress(e,t){U(tu,this).promise.then(()=>{for(const n of U(su,this))n(e,t)})}onDataProgressiveRead(e){U(tu,this).promise.then(()=>{for(const t of U(iu,this))t(e)})}onDataProgressiveDone(){U(tu,this).promise.then(()=>{for(const e of U(nu,this))e()})}transportReady(){U(tu,this).resolve()}requestDataRange(e,t){Qe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ou{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return tt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var lu=new WeakMap,cu=new WeakSet;class du{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];j(this,cu),B(this,lu,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new Dt:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new yd,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ct({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return tt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n,i;let{canvasContext:s,canvas:r=s.canvas,viewport:a,intent:o="display",annotationMode:l=we.ENABLE,transform:c=null,background:d=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:m=!1,recordOperations:g=!1,operationsFilter:v=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const y=this._transport.getRenderingIntent(o,l,f,m),{renderingIntent:b,cacheKey:w}=y;V(lu,this,!1),u||(u=this._transport.getOptionalContentConfig(b));let _=this._intentStates.get(w);_||(_=Object.create(null),this._intentStates.set(w,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const x=!!(b&fe);var k;_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(k=this._stats)||void 0===k||k.time("Page Request"),this._pumpOperatorList(y));const S=Boolean(this._pdfBug&&(null===(n=globalThis.StepperManager)||void 0===n?void 0:n.enabled)),A=!this.recordedBBoxes&&(g||S),E=e=>{if(_.renderTasks.delete(C),A){var t;const e=null===(t=C.gfx)||void 0===t?void 0:t.dependencyTracker.take();e&&(C.stepper&&C.stepper.setOperatorBBoxes(e,C.gfx.dependencyTracker.takeDebugMetadata()),g&&(this.recordedBBoxes=e))}var n;(x&&V(lu,this,!0),W(cu,this,uu).call(this),e?(C.capability.reject(e),this._abortOperatorList({intentState:_,reason:e instanceof Error?e:new Error(e)})):C.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(n=globalThis.Stats)&&void 0!==n&&n.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new Ou({callback:E,params:{canvas:r,canvasContext:s,dependencyTracker:A?new Nl(r,_.operatorList.length,S):null,viewport:a,transform:c,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:v});((i=_).renderTasks||(i.renderTasks=new Set)).add(C);const M=C.task;return Promise.all([_.displayReadyCapability.promise,u]).then(e=>{var t;let[n,i]=e;if(this.destroyed)E();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:n,optionalContentConfig:i}),C.operatorListChanged()}}).catch(E),M}getOperatorList(){let{intent:e="display",annotationMode:t=we.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this._transport.getRenderingIntent(e,t,n,i,!0);let r,a=this._intentStates.get(s.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a)),a.opListReadCapability)||(r=Object.create(null),r.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(r))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(s));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>xt.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const i=t.getReader(),s={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then(function(n){var i;let{value:r,done:a}=n;a?e(s):(null!==(i=s.lang)&&void 0!==i||(s.lang=r.lang),Object.assign(s.styles,r.styles),s.items.push(...r.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),V(lu,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];V(lu,this,!0);const t=W(cu,this,uu).call(this);return e&&t&&this._stats&&(this._stats=new Dt),t}_startRenderPage(e,t){var n,i;const s=this._intentStates.get(t);s&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=s.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&W(cu,this,uu).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:s}=e;const{map:r,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:r,modifiedIds:s},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();W(cu,this,uu).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof Mt){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new lt(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function uu(){if(!U(lu,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),V(lu,this,!1),!0}var hu=new WeakMap,pu=new WeakMap,fu=new WeakMap,mu=new WeakMap,gu=new WeakSet;class vu{constructor(){let{name:e=null,port:t=null,verbosity:n=Ke()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(j(this,gu),B(this,hu,Promise.withResolvers()),B(this,pu,null),B(this,fu,null),B(this,mu,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Au._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");Au._.set(t,this),W(gu,this,bu).call(this,t)}else W(gu,this,wu).call(this)}get promise(){return U(hu,this).promise}get port(){return U(fu,this)}get messageHandler(){return U(pu,this)}destroy(){var e,t;this.destroyed=!0,null===(e=U(mu,this))||void 0===e||e.terminate(),V(mu,this,null),Au._.delete(U(fu,this)),V(fu,this,null),null===(t=U(pu,this))||void 0===t||t.destroy(),V(pu,this,null)}static create(e){const t=W(vu,this,Au)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new vu(e)}static get workerSrc(){if(Mc.workerSrc)return Mc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return tt(this,"_setupFakeWorkerGlobal",(async()=>{if(z(vu,this,xu))return z(vu,this,xu);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function yu(){U(hu,this).resolve(),U(pu,this).send("configure",{verbosity:this.verbosity})}function bu(e){V(fu,this,e),V(pu,this,new vo("main","worker",e)),U(pu,this).on("ready",()=>{}),W(gu,this,yu).call(this)}function wu(){if(Su._||xu(ne))return void W(gu,this,_u).call(this);let{workerSrc:e}=ne;try{ne._isSameOrigin(window.location,e)||(e=ne._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new vo("main","worker",t),i=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?U(hu,this).reject(new Error("Worker was destroyed")):W(gu,this,_u).call(this)},s=new AbortController;t.addEventListener("error",()=>{U(mu,this)||i()},{signal:s.signal}),n.on("test",e=>{s.abort(),!this.destroyed&&e?(V(pu,this,n),V(fu,this,t),V(mu,this,t),W(gu,this,yu).call(this)):i()}),n.on("ready",e=>{if(s.abort(),this.destroyed)i();else try{r()}catch(t){W(gu,this,_u).call(this)}});const r=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void r()}catch(t){Xe("The worker has been disabled.")}W(gu,this,_u).call(this)}function _u(){Su._||(Ye("Setting up fake worker."),Su._=!0),ne._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void U(hu,this).reject(new Error("Worker was destroyed"));const i=new to;V(fu,this,i);const s="fake".concat((ku._=(t=ku._,n=t++,t),n)),r=new vo(s+"_worker",s,i);e.setup(r,i),V(pu,this,new vo(s,s+"_worker",i)),W(gu,this,yu).call(this)}).catch(e=>{U(hu,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function xu(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}ne=vu;var ku={_:0},Su={_:!1},Au={_:new WeakMap};ce&&(Su._=W(ne,ne,!0),Mc.workerSrc||(Mc.workerSrc="./pdf.worker.mjs")),ne._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const i=new URL(t,n);return n.origin===i.origin},ne._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ne.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return ne.create(e)};var Eu=new WeakMap,Cu=new WeakMap,Mu=new WeakMap,Pu=new WeakMap,Tu=new WeakMap,Du=new WeakSet;class Nu{constructor(e,t,n,i,s,r){j(this,Du),B(this,Eu,new Map),B(this,Cu,new Map),B(this,Mu,new Map),B(this,Pu,new Map),B(this,Tu,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new yd,this.fontLoader=new ua({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=r,this.setupMessageHandler()}get annotationStorage(){return tt(this,"annotationStorage",new aa)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=pe,a=ea;switch(e){case"any":r=he;break;case"display":break;case"print":r=fe;break;default:Ye("getRenderingIntent - invalid intent: ".concat(e))}const o=r&fe&&n instanceof ca?n:this.annotationStorage;switch(t){case we.DISABLE:r+=ve;break;case we.ENABLE:break;case we.ENABLE_FORMS:r+=me;break;case we.ENABLE_STORAGE:r+=ge,a=o.serializable;break;default:Ye("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(r+=ye),s&&(r+=be);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:r,cacheKey:[r,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=U(Tu,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of U(Cu,this).values())t.push(i._destroy());U(Cu,this).clear(),U(Mu,this).clear(),U(Pu,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),U(Eu,this).clear(),this.filterFactory.destroy(),Bd.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new lt("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{Je(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Je(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:s}=this._fullReader;if(!n||!i){var r;if(this._lastProgress)null===(r=t.onProgress)||void 0===r||r.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:s}}),e.on("GetRangeReader",(e,t)=>{Je(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:i}=e;i?t.close():(Je(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new ou(n,this))}),e.on("DocException",e=>{t._capability.reject(fo(e))}),e.on("PasswordRequest",e=>{V(Tu,this,Promise.withResolvers());try{if(!t.onPassword)throw fo(e);const n=e=>{e instanceof Error?U(Tu,this).reject(e):U(Tu,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){U(Tu,this).reject(n)}return U(Tu,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;U(Cu,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[i,s,r]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const e=r.error;Ye("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const t=new Ta(r),a=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new pa(t,a,r.extra,r.charProcOperatorList);this.fontLoader.bind(o).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o.fontExtraProperties&&o.data&&o.clearData(),this.commonObjs.resolve(i,o)});break;case"CopyLocalImage":const{imageRef:l}=r;Je(l,"The imageRef must be defined.");for(const e of U(Cu,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===l)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new Xa(r));break;case"Image":this.commonObjs.resolve(i,r);break;case"Pattern":const c=new Ba(r);this.commonObjs.resolve(i,c.getIR());break;default:throw new Error("Got unknown common object type ".concat(s))}return null}),e.on("obj",e=>{let[t,n,i,s]=e;if(this.destroyed)return;const r=U(Cu,this).get(n);var a;if(!r.objs.has(t))if(0!==r._intentStates.size)switch(i){case"Image":case"Pattern":r.objs.resolve(t,s);break;default:throw new Error("Got unknown object type ".concat(i))}else null===s||void 0===s||null===(a=s.bitmap)||void 0===a||a.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&Ye("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=U(Mu,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&U(Pu,this).set(n.refStr,e);const i=new du(t,n,this,this._params.pdfBug);return U(Cu,this).set(t,i),i});return U(Mu,this).set(t,i),i}getPageIndex(e){return Qa(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return W(Du,this,Ru).call(this,"GetFieldObjects")}hasJSActions(){return W(Du,this,Ru).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return W(Du,this,Ru).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return W(Du,this,Ru).call(this,"GetOptionalContentConfig").then(t=>new qc(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=U(Eu,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,i,s;return{info:e[0],metadata:e[1]?new Rc(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(s=this._fullReader)||void 0===s?void 0:s.contentLength)&&void 0!==i?i:null,hasStructTree:e[2]}});return U(Eu,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of U(Cu,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),U(Eu,this).clear(),this.filterFactory.destroy(!0),Bd.cleanup()}}cachedPageNumber(e){var t;if(!Qa(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=U(Pu,this).get(n))&&void 0!==t?t:null}}function Ru(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=U(Eu,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return U(Eu,this).set(e,i),i}var Fu=new WeakMap;class Iu{constructor(e){B(this,Fu,null),r(this,"onContinue",null),r(this,"onError",null),V(Fu,this,e)}get promise(){return U(Fu,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;U(Fu,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=U(Fu,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=U(Fu,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var Lu=new WeakMap;class Ou{constructor(e){let{callback:t,params:n,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null,enableHWA:p=!1,operationsFilter:f=null}=e;B(this,Lu,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Iu(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=f}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:s}=e;if(this.cancelled)return;if(this._canvas){if(ju._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ju._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Sc(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:r,transparency:i,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),U(Lu,this)&&(window.cancelAnimationFrame(U(Lu,this)),V(Lu,this,null)),ju._.delete(this._canvas),i||(i=new Mt("Rendering cancelled, page ".concat(this._pageIndex+1),s)),this.callback(i),null===(t=(n=this.task).onError)||void 0===t||t.call(n,i)}operatorListChanged(){var e,t;this.graphicsReady?(null===(e=this.gfx.dependencyTracker)||void 0===e||e.growOperationsCount(this.operatorList.fnArray.length),null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?V(Lu,this,window.requestAnimationFrame(()=>{V(Lu,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ju._.delete(this._canvas),this.callback())))}}var ju={_:new WeakSet};const Bu="5.4.530";var Wu=new WeakMap,zu=new WeakMap,Uu=new WeakMap,Vu=new WeakMap,Hu=new WeakMap,qu=new WeakMap,Gu=new WeakMap,$u=new WeakMap,Ku=new WeakMap,Xu=new WeakMap,Yu=new WeakSet;class Qu{static get _keyboardManager(){return tt(this,"_keyboardManager",new Un([[["Escape","mac+Escape"],Qu.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qu.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qu.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qu.prototype._moveToPrevious],[["Home","mac+Home"],Qu.prototype._moveToBeginning],[["End","mac+End"],Qu.prototype._moveToEnd]]))}constructor(e){var t,n;let{editor:i=null,uiManager:s=null}=e;j(this,Yu),B(this,Wu,null),B(this,zu,null),B(this,Uu,void 0),B(this,Vu,null),B(this,Hu,!1),B(this,qu,!1),B(this,Gu,null),B(this,$u,void 0),B(this,Ku,null),B(this,Xu,null),i?(V(qu,this,!1),V(Gu,this,i)):V(qu,this,!0),V(Xu,this,(null===i||void 0===i?void 0:i._uiManager)||s),V($u,this,U(Xu,this)._eventBus),V(Uu,this,(null===i||void 0===i||null===(t=i.color)||void 0===t?void 0:t.toUpperCase())||(null===(n=U(Xu,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),sh._||(sh._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=V(Wu,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",U(Gu,this)&&(e.ariaControls="".concat(U(Gu,this).id,"_colorpicker_dropdown"));const t=U(Xu,this)._signal;e.addEventListener("click",W(Yu,this,th).bind(this),{signal:t}),e.addEventListener("keydown",W(Yu,this,eh).bind(this),{signal:t});const n=V(zu,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=U(Uu,this),e.append(n),e}renderMainDropdown(){const e=V(Vu,this,W(Yu,this,Ju).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===U(Wu,this))return void W(Yu,this,th).call(this,e);const t=e.target.getAttribute("data-color");t&&W(Yu,this,Zu).call(this,t,e)}_moveToNext(e){var t,n;z(Yu,this,ih)?e.target!==U(Wu,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=U(Vu,this).firstElementChild)||void 0===n||n.focus():W(Yu,this,th).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=U(Vu,this))||void 0===t?void 0:t.firstElementChild)&&e.target!==U(Wu,this)?(z(Yu,this,ih)||W(Yu,this,th).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):z(Yu,this,ih)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;z(Yu,this,ih)?null===(t=U(Vu,this).firstElementChild)||void 0===t||t.focus():W(Yu,this,th).call(this,e)}_moveToEnd(e){var t;z(Yu,this,ih)?null===(t=U(Vu,this).lastElementChild)||void 0===t||t.focus():W(Yu,this,th).call(this,e)}hideDropdown(){var e,t;null===(e=U(Vu,this))||void 0===e||e.classList.add("hidden"),U(Wu,this).ariaExpanded="false",null===(t=U(Ku,this))||void 0===t||t.abort(),V(Ku,this,null)}_hideDropdownFromKeyboard(){var e;U(qu,this)||(z(Yu,this,ih)?(this.hideDropdown(),U(Wu,this).focus({preventScroll:!0,focusVisible:U(Hu,this)})):null===(e=U(Gu,this))||void 0===e||e.unselect())}updateColor(e){if(U(zu,this)&&(U(zu,this).style.backgroundColor=e),!U(Vu,this))return;const t=U(Xu,this).highlightColors.values();for(const n of U(Vu,this).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;null===(e=U(Wu,this))||void 0===e||e.remove(),V(Wu,this,null),V(zu,this,null),null===(t=U(Vu,this))||void 0===t||t.remove(),V(Vu,this,null)}}function Ju(){const e=document.createElement("div"),t=U(Xu,this)._signal;e.addEventListener("contextmenu",Rt,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),U(Gu,this)&&(e.id="".concat(U(Gu,this).id,"_colorpicker_dropdown"));for(const[n,i]of U(Xu,this).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",sh._[n]);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=i,s.ariaSelected=i===U(Uu,this),s.addEventListener("click",W(Yu,this,Zu).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",W(Yu,this,eh).bind(this),{signal:t}),e}function Zu(e,t){t.stopPropagation(),U($u,this).dispatch("switchannotationeditorparams",{source:this,type:ke.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}function eh(e){ie._keyboardManager.exec(this,e)}function th(e){if(z(Yu,this,ih))return void this.hideDropdown();if(V(Hu,this,0===e.detail),U(Ku,this)||(V(Ku,this,new AbortController),window.addEventListener("pointerdown",W(Yu,this,nh).bind(this),{signal:U(Xu,this).combinedSignal(U(Ku,this))})),U(Wu,this).ariaExpanded="true",U(Vu,this))return void U(Vu,this).classList.remove("hidden");const t=V(Vu,this,W(Yu,this,Ju).call(this));U(Wu,this).append(t)}function nh(e){var t;null!==(t=U(Vu,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function ih(e){return U(Vu,e)&&!U(Vu,e).classList.contains("hidden")}ie=Qu;var sh={_:null},rh=new WeakMap,ah=new WeakMap,oh=new WeakMap;class lh{constructor(e){B(this,rh,null),B(this,ah,null),B(this,oh,null),V(ah,this,e),V(oh,this,e._uiManager),ch._||(ch._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(U(rh,this))return U(rh,this);const{editorType:e,colorType:t,color:n}=U(ah,this),i=V(rh,this,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",ch._[e]),i.addEventListener("input",()=>{U(oh,this).updateParams(t,i.value)},{signal:U(oh,this)._signal}),i}update(e){U(rh,this)&&(U(rh,this).value=e)}destroy(){var e;null===(e=U(rh,this))||void 0===e||e.remove(),V(rh,this,null)}hideDropdown(){}}var ch={_:null};function dh(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function uh(e){return Math.max(0,Math.min(255,255*e))}class hh{static CMYK_G(e){let[t,n,i,s]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+s)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=uh(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=dh(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(uh)}static RGB_HTML(e){return"#".concat(e.map(dh).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,s]=e;return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,n+s)]}static CMYK_rgb(e){let[t,n,i,s]=e;return[uh(1-Math.min(1,t+s)),uh(1-Math.min(1,i+s)),uh(1-Math.min(1,n+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const s=1-t,r=1-n,a=1-i;return["CMYK",s,r,a,Math.min(s,r,a)]}}class ph{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Qe("Abstract method `_createSVG` called.")}}class fh extends ph{_createSVG(e){return document.createElementNS(St,e)}}const mh=new WeakSet,gh=60*(new Date).getTimezoneOffset()*1e3;class vh{static create(e){switch(e.data.annotationType){case Re.LINK:return new Eh(e);case Re.TEXT:return new Th(e);case Re.WIDGET:switch(e.data.fieldType){case"Tx":return new Nh(e);case"Btn":return e.data.radioButton?new Ih(e):e.data.checkBox?new Fh(e):new Lh(e);case"Ch":return new Oh(e);case"Sig":return new Rh(e)}return new Dh(e);case Re.POPUP:return new Bh(e);case Re.FREETEXT:return new Mp(e);case Re.LINE:return new Tp(e);case Re.SQUARE:return new Np(e);case Re.CIRCLE:return new Fp(e);case Re.POLYLINE:return new Lp(e);case Re.CARET:return new jp(e);case Re.INK:return new Up(e);case Re.POLYGON:return new Op(e);case Re.HIGHLIGHT:return new Hp(e);case Re.UNDERLINE:return new qp(e);case Re.SQUIGGLY:return new Gp(e);case Re.STRIKEOUT:return new $p(e);case Re.STAMP:return new Kp(e);case Re.FILEATTACHMENT:return new Qp(e);default:return new xh(e)}}}var yh=new WeakMap,bh=new WeakMap,wh=new WeakMap,_h=new WeakSet;class xh{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(this,_h),B(this,yh,null),B(this,bh,!1),B(this,wh,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{contentsObj:t,richText:n}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xh._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var e;const{data:t}=this,n=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var e;const t=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:s}=this.data;let r=-1/0,a=-1/0;if((null===n||void 0===n?void 0:n.length)>=8){for(let e=0;e<n.length;e+=8)n[e+1]>a?(a=n[e+1],r=n[e+2]):n[e+1]===a&&(r=Math.max(r,n[e+2]));return[r,a]}if((null===i||void 0===i?void 0:i.length)>=1){for(const e of i)for(let t=0,n=e.length;t<n;t+=2)e[t+1]>a?(a=e[t+1],r=e[t]):e[t+1]===a&&(r=Math.max(r,e[t]));if(r!==1/0)return[r,a]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:r}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-r)/i,e}get commentText(){var e,t;const{data:n}=this;return(null===(e=this.annotationStorage.getRawValue("".concat(_e).concat(n.id)))||void 0===e||null===(e=e.popup)||void 0===e?void 0:e.contents)||(null===(t=n.contentsObj)||void 0===t?void 0:t.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue("".concat(_e).concat(t.id),{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;null===(e=(null===(t=U(wh,this))||void 0===t?void 0:t.popup)||this.popup)||void 0===e||e.remove(),V(wh,this,this.popup=null)}updateEdited(e){var t;if(!this.container)return;e.rect&&(U(yh,this)||V(yh,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:i}=e;n&&W(_h,this,kh).call(this,n);let s=(null===(t=U(wh,this))||void 0===t?void 0:t.popup)||this.popup;!s&&null!==i&&void 0!==i&&i.text&&(this._createPopup(i),s=U(wh,this).popup),s&&(s.updateEdited(e),null!==i&&void 0!==i&&i.deleted&&(s.remove(),V(wh,this,null),this.popup=null))}resetEdited(){var e;U(yh,this)&&(W(_h,this,kh).call(this,U(yh,this).rect),null===(e=U(wh,this))||void 0===e||e.popup.resetEdited(),V(yh,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Dh||this instanceof Eh||(s.tabIndex=0);const{style:r}=s;if(r.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Bh){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,s),s}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){r.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");r.borderRadius=t}else if(this instanceof Ih){const e="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");r.borderRadius=e}switch(t.borderStyle.style){case Fe:r.borderStyle="solid";break;case Ie:r.borderStyle="dashed";break;case Le:Ye("Unimplemented border style: beveled");break;case Oe:Ye("Unimplemented border style: inset");break;case je:r.borderBottomStyle="solid"}const i=t.borderColor||null;i?(V(bh,this,!0),r.borderColor=pt.makeHexColor(0|i[0],0|i[1],0|i[2])):r.borderWidth=0}const l=pt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=i.rawDims;r.left="".concat(100*(l[0]-u)/c,"%"),r.top="".concat(100*(l[1]-h)/d,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(r.width="".concat(100*a/c,"%"),r.height="".concat(100*o/d,"%")):this.setRotation(p,s),s}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:r}=this;e%180!==0&&([s,r]=[r,s]),t.style.width="".concat(100*s/n,"%"),t.style.height="".concat(100*r/i,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],s=i[0],r=i.slice(1);n.target.style[t]=hh["".concat(s,"_HTML")](r),this.annotationStorage.setValue(this.data.id,{[t]:hh["".concat(s,"_rgb")](r)})};return tt(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||n[i];null===s||void 0===s||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,s]of Object.entries(t)){const r=n[i];if(r){r({detail:{[i]:s},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,s]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[r,a,o,l]=e.subarray(2,6);if(i===r&&s===a&&t===o&&n===l)return}const{style:r}=this.container;let a;if(U(bh,this)){const{borderColor:e,borderWidth:t}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=s-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),p="clippath_".concat(this.data.id);h.setAttribute("id",p),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let m=2,g=e.length;m<g;m+=8){var f;const n=e[m],i=e[m+1],r=e[m+2],d=e[m+3],u=c.createElement("rect"),p=(r-t)/o,g=(s-i)/l,v=(n-r)/o,y=(i-d)/l;u.setAttribute("x",p),u.setAttribute("y",g),u.setAttribute("width",v),u.setAttribute("height",y),h.append(u),null===(f=a)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(g,'" width="').concat(v,'" height="').concat(y,'"/>'))}U(bh,this)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),V(wh,this,new Bh({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(U(wh,this)||this.popup||this.data.popupRef)}get extraPopupElement(){return U(wh,this)}render(){Qe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:s,exportValues:r}of i){if(-1===e)continue;if(s===t)continue;const i="string"===typeof r?r:null,a=document.querySelector('[data-element-id="'.concat(s,'"]'));!a||mh.has(a)?n.push({id:s,exportValue:i,domElement:a}):Ye("_getElementsByName - element not allowed: ".concat(s))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,s=i.getAttribute("data-element-id");s!==t&&(mh.has(i)&&n.push({id:s,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function kh(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-a)/s,"%"),t.top="".concat(100*(r-e[3]+o)/r,"%"),0===i?(t.width="".concat(100*(e[2]-e[0])/s,"%"),t.height="".concat(100*(e[3]-e[1])/r,"%")):this.setRotation(i)}class Sh extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Ah=new WeakSet;class Eh extends xh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),j(this,Ah),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(W(Ah,this,Mh).call(this,n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(W(Ah,this,Ph).call(this,n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=n,this.container.append(n)),this.container}_bindLink(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&W(Ah,this,Ch).call(this),n&&(e.title=n)}_bindNamedAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),W(Ah,this,Ch).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=n.get(i);s&&(e[s]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),W(Ah,this,Ch).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),W(Ah,this,Ch).call(this),!this._fieldObjects)return Ye('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:s}=t,r=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===s&&r.push(n)}else for(const t of Object.values(this._fieldObjects))r.push(...t);const a=this.annotationStorage,o=[];for(const t of r){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(mh.has(n)?n.dispatchEvent(new Event("resetform")):Ye("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function Ch(){this.container.setAttribute("data-internal-link","")}function Mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,i),!1},W(Ah,this,Ch).call(this)}function Ph(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),W(Ah,this,Ch).call(this)}class Th extends xh{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Dh extends xh{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ut.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,s){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var r;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}s&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e)}}))})}_setEventListeners(e,t,n,i){for(const[o,l]of n){var s,r,a;if("Action"===l||null!==(s=this.data.actions)&&void 0!==s&&s[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":pt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=e.style;let r;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(ue*i))||1);r=Math.min(i,a(t/ue))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(i,a(e/ue))}s.fontSize="calc(".concat(r,"px * var(--total-scale-factor))"),s.color=pt.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Nh extends Dh{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const s=this.annotationStorage;for(const r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=n),s.setValue(r.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const r=e.getValue(t,{value:this.data.fieldValue});let a=r.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=r.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),mh.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:u,timeStep:h}=this.data,p=!!u&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=i,c.formattedValue=null});let f=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var s;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;if(p&&(n.type=u,h&&(n.step=h)),c.userValue){const e=c.userValue;if(p)if("time"===u){const t=new Date(e),i=[t.getHours(),t.getMinutes(),t.getSeconds()];n.value=i.map(e=>e.toString().padStart(2,"0")).join(":")}else n.value=new Date(e-gh).toISOString().split("date"===u?"T":".",1)[0];else n.value=e}c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",p||e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i);const s={formattedValue:i};p&&(s.value=i),e.setValue(t,s)},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:s}=n.detail,{target:r}=n;if(0===s)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",s);let a=c.userValue;!a||a.length<=s||(a=a.slice(0,s),r.value=c.userValue=a,e.setValue(t,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:s}=e.target;c.lastCommittedValue!==s&&(c.lastCommittedValue=s,c.userValue=s,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const i=f;f=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:s}=e;let{value:r}=s;if(p){if(r&&"time"===u){const e=r.split(":").map(e=>parseInt(e,10));r=new Date(2e3,0,1,e[0],e[1],e[2]||0).valueOf(),s.step=""}else r.includes("T")||(r="".concat(r,"T00:00")),r=new Date(r).valueOf();s.type="text"}var a;(c.userValue=r,c.lastCommittedValue!==r)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)}),null!==(s=this.data.actions)&&void 0!==s&&s.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:i,target:s}=e,{value:r,selectionStart:a,selectionEnd:o}=s;let l=a,d=o;switch(e.inputType){case"deleteWordBackward":{const e=r.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=r.substring(a).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:d}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Rh extends Dh{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Fh extends Dh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return mh.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",i=>{const{name:s,checked:r}=i.target;for(const a of this._getElementsByName(s,n)){const n=r&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:r})}),s.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ih extends Dh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});const s=document.createElement("input");if(mh.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",t=>{const{name:i,checked:s}=t.target;for(const r of this._getElementsByName(i,n))e.setValue(r.id,{value:!1});e.setValue(n,{value:s})}),s.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;s.addEventListener("updatefromsandbox",t=>{const s={value:t=>{const s=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=s&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(s,t)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Lh extends Eh{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class Oh extends Dh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");mh.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),s=!1),i.append(e)}let r=null;if(s){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),r=()=>{e.remove(),i.removeEventListener("input",r),r=null},i.addEventListener("input",r)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:s}=i;return s?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const s={value(n){var s;null===(s=r)||void 0===s||s();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){i.multiple=!0},remove(n){const s=i.options,r=n.detail.remove;if(s[r].selected=!1,i.remove(r),s.length>0){-1===Array.prototype.findIndex.call(s,e=>e.selected)&&(s[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:s,displayValue:r,exportValue:c}=n.detail.insert,d=i.children[s],u=document.createElement("option");u.textContent=r,u.value=c,d?d.before(u):i.append(u),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:s}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of s){const{displayValue:t,exportValue:n}=e,s=document.createElement("option");s.textContent=t,s.value=n,i.append(s)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(s,n)}),i.addEventListener("input",n=>{var i;const s=a(!0),r=a(!1);e.setValue(t,{value:s}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:r,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):i.addEventListener("input",function(n){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var jh=new WeakSet;class Bh extends xh{constructor(e){const{data:t,elements:n,parent:i}=e,s=!!i._commentManager;if(super(e,{isRenderable:!s&&xh._hasPopupData(t)}),j(this,jh),this.elements=n,s&&xh._hasPopupData(t)){const e=this.popup=W(jh,this,Wh).call(this);for(const t of n)t.popup=e}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=W(jh,this,Wh).call(this),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(e=>"".concat(bt).concat(e)).join(",")),this.container}}function Wh(){return new fp({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}var zh=new WeakMap,Uh=new WeakMap,Vh=new WeakMap,Hh=new WeakMap,qh=new WeakMap,Gh=new WeakMap,$h=new WeakMap,Kh=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakMap,ip=new WeakMap,sp=new WeakMap,rp=new WeakMap,ap=new WeakMap,op=new WeakMap,lp=new WeakMap,cp=new WeakMap,dp=new WeakMap,up=new WeakMap,hp=new WeakMap,pp=new WeakSet;class fp{constructor(e){let{container:t,color:n,elements:i,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:u,commentManager:h=null}=e;j(this,pp),B(this,zh,null),B(this,Uh,W(pp,this,kp).bind(this)),B(this,Vh,W(pp,this,Cp).bind(this)),B(this,Hh,W(pp,this,Ep).bind(this)),B(this,qh,W(pp,this,Ap).bind(this)),B(this,Gh,null),B(this,$h,null),B(this,Kh,null),B(this,Xh,null),B(this,Yh,null),B(this,Qh,null),B(this,Jh,null),B(this,Zh,!1),B(this,ep,null),B(this,tp,null),B(this,np,null),B(this,ip,null),B(this,sp,null),B(this,rp,null),B(this,ap,null),B(this,op,null),B(this,lp,null),B(this,cp,null),B(this,dp,!1),B(this,up,null),B(this,hp,null),V($h,this,t),V(lp,this,s),V(Kh,this,a),V(op,this,o),V(Qh,this,l),V(Gh,this,n),V(ap,this,c),V(Jh,this,d),V(Yh,this,i),V(zh,this,h),V(up,this,i[0]),V(Xh,this,It.toDateObject(r)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup()),h||(W(pp,this,mp).call(this),U($h,this).hidden=!0,u&&W(pp,this,Ap).call(this))}renderCommentButton(){if(U(ip,this))return void(U(ip,this).parentNode||U(up,this).container.after(U(ip,this)));if(U(sp,this)||W(pp,this,gp).call(this),!U(sp,this))return;const{signal:e}=V(tp,this,new AbortController),t=U(up,this).hasOwnCommentButton,n=()=>{U(zh,this).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{U(zh,this).toggleCommentPopup(this,!1,!0,!t)},s=()=>{U(zh,this).toggleCommentPopup(this,!1,!1)};if(t){V(ip,this,U(up,this).container);for(const t of this.trigger)t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.addEventListener("keydown",U(Uh,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",i,{signal:e}),t.addEventListener("pointerleave",s,{signal:e}),t.classList.add("popupTriggerArea")}else{const t=V(ip,this,document.createElement("button"));t.className="annotationCommentButton";const r=U(up,this).container;t.style.zIndex=r.style.zIndex+1,t.tabIndex=0,t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button"),W(pp,this,yp).call(this),W(pp,this,vp).call(this),t.addEventListener("keydown",U(Uh,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",i,{signal:e}),t.addEventListener("pointerleave",s,{signal:e}),r.after(t)}}get commentButtonColor(){const{color:e,opacity:t}=U(up,this).commentData;return e?U(Qh,this)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;null===(e=U(ip,this))||void 0===e||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}=U(up,this).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}}get elementBeforePopup(){return U(ip,this)}get comment(){return U(hp,this)||V(hp,this,U(up,this).commentText),U(hp,this)}set comment(e){e!==this.comment&&(U(up,this).commentText=V(hp,this,e))}focus(){var e;null===(e=U(up,this).container)||void 0===e||e.focus()}get parentBoundingClientRect(){return U(up,this).layer.getBoundingClientRect()}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;U(ip,this)&&(U(ip,this).classList.toggle("selected",t),U(ip,this).ariaExpanded=n)}setSelectedCommentButton(e){U(ip,this).classList.toggle("selected",e)}get commentPopupPosition(){if(U(rp,this))return U(rp,this);const{x:e,y:t,height:n}=U(ip,this).getBoundingClientRect(),{x:i,y:s,width:r,height:a}=U(up,this).layer.getBoundingClientRect();return[(e-i)/r,(t+n-s)/a]}set commentPopupPosition(e){V(rp,this,e)}hasDefaultPopupPosition(){return null===U(rp,this)}get commentButtonPosition(){return U(sp,this)}get commentButtonWidth(){return U(ip,this).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=U(rp,this)||this.commentButtonPosition.map(e=>e/100),i=this.parentBoundingClientRect,{x:s,y:r,width:a,height:l}=i;U(zh,this).showDialog(null,this,s+t*a,r+n*l,o(o({},e),{},{parentDimensions:i}))}render(){var e,t;if(U(ep,this))return;const n=V(ep,this,document.createElement("div"));if(n.className="popup",U(Gh,this)){const e=n.style.outlineColor=pt.makeHexColor(...U(Gh,this));n.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)")}const i=document.createElement("span");if(i.className="header",null!==(e=U(lp,this))&&void 0!==e&&e.str){const e=document.createElement("span");e.className="title",i.append(e),({dir:e.dir,str:e.textContent}=U(lp,this))}if(n.append(i),U(Xh,this)){const e=document.createElement("time");e.className="popupDate",e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:U(Xh,this).valueOf()})),e.dateTime=U(Xh,this).toISOString(),i.append(e)}Xt({html:z(pp,this,bp)||U(Kh,this).str,dir:null===(t=U(Kh,this))||void 0===t?void 0:t.dir,className:"popupContent"},n),U($h,this).append(n)}updateEdited(e){var t;let{rect:n,popup:i,deleted:s}=e;if(U(zh,this))return s?(this.remove(),V(hp,this,null)):i&&(i.deleted?this.remove():(W(pp,this,yp).call(this),V(hp,this,i.text))),void(n&&(V(sp,this,null),W(pp,this,gp).call(this),W(pp,this,vp).call(this)));s||null!==i&&void 0!==i&&i.deleted?this.remove():(W(pp,this,mp).call(this),U(cp,this)||V(cp,this,{contentsObj:U(Kh,this),richText:U(op,this)}),n&&V(np,this,null),i&&i.text&&(V(op,this,W(pp,this,xp).call(this,i.text)),V(Xh,this,It.toDateObject(i.date)),V(Kh,this,null)),null===(t=U(ep,this))||void 0===t||t.remove(),V(ep,this,null))}resetEdited(){var e;U(cp,this)&&(({contentsObj:L(V,[Kh,this])._,richText:L(V,[op,this])._}=U(cp,this)),V(cp,this,null),null===(e=U(ep,this))||void 0===e||e.remove(),V(ep,this,null),V(np,this,null))}remove(){var e,t,n;if(null===(e=U(tp,this))||void 0===e||e.abort(),V(tp,this,null),null===(t=U(ep,this))||void 0===t||t.remove(),V(ep,this,null),V(dp,this,!1),V(Zh,this,!1),null===(n=U(ip,this))||void 0===n||n.remove(),V(ip,this,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){V(dp,this,this.isVisible),U(dp,this)&&(U($h,this).hidden=!0)}maybeShow(){U(zh,this)||(W(pp,this,mp).call(this),U(dp,this)&&(U(ep,this)||W(pp,this,Ep).call(this),V(dp,this,!1),U($h,this).hidden=!1))}get isVisible(){return!U(zh,this)&&!1===U($h,this).hidden}}function mp(){if(U(tp,this))return;V(tp,this,new AbortController);const{signal:e}=U(tp,this);for(const n of this.trigger)n.addEventListener("click",U(qh,this),{signal:e}),n.addEventListener("pointerenter",U(Hh,this),{signal:e}),n.addEventListener("pointerleave",U(Vh,this),{signal:e}),n.classList.add("popupTriggerArea");for(const n of U(Yh,this)){var t;null===(t=n.container)||void 0===t||t.addEventListener("keydown",U(Uh,this),{signal:e})}}function gp(){const e=U(Yh,this).find(e=>e.hasCommentButton);e&&V(sp,this,e._normalizePoint(e.commentButtonPosition))}function vp(){if(U(up,this).extraPopupElement&&!U(up,this).editor)return;U(ip,this)||this.renderCommentButton();const[e,t]=U(sp,this),{style:n}=U(ip,this);n.left="calc(".concat(e,"%)"),n.top="calc(".concat(t,"% - var(--comment-button-dim))")}function yp(){U(up,this).extraPopupElement||(U(ip,this)||this.renderCommentButton(),U(ip,this).style.backgroundColor=this.commentButtonColor||"")}function bp(e){const t=U(op,e),n=U(Kh,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:U(op,e).html||null}function wp(e){var t;return(null===(t=z(pp,e,bp))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function _p(e){var t;return(null===(t=z(pp,e,bp))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function xp(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:z(pp,this,_p),fontSize:z(pp,this,wp)?"calc(".concat(z(pp,this,wp),"px * var(--total-scale-factor))"):""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:i});return n}function kp(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&U(Zh,this))&&W(pp,this,Ap).call(this)}function Sp(){if(null!==U(np,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=U(Qh,this);let r=!!U(Jh,this),a=U(r?Jh:ap,this);for(const h of U(Yh,this))if(!a||null!==pt.intersect(h.data.rect,a)){a=h.data.rect,r=!0;break}const o=pt.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=r?a[2]-a[0]+5:0,c=o[0]+l,d=o[1];V(np,this,[100*(c-i)/t,100*(d-s)/n]);const{style:u}=U($h,this);u.left="".concat(U(np,this)[0],"%"),u.top="".concat(U(np,this)[1],"%")}function Ap(){U(zh,this)?U(zh,this).toggleCommentPopup(this,!1):(V(Zh,this,!U(Zh,this)),U(Zh,this)?(W(pp,this,Ep).call(this),U($h,this).addEventListener("click",U(qh,this)),U($h,this).addEventListener("keydown",U(Uh,this))):(W(pp,this,Cp).call(this),U($h,this).removeEventListener("click",U(qh,this)),U($h,this).removeEventListener("keydown",U(Uh,this))))}function Ep(){U(ep,this)||this.render(),this.isVisible?U(Zh,this)&&U($h,this).classList.add("focused"):(W(pp,this,Sp).call(this),U($h,this).hidden=!1,U($h,this).style.zIndex=parseInt(U($h,this).style.zIndex)+1e3)}function Cp(){U($h,this).classList.remove("focused"),!U(Zh,this)&&this.isVisible&&(U($h,this).hidden=!0,U($h,this).style.zIndex=parseInt(U($h,this).style.zIndex)-1e3)}class Mp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Pp=new WeakMap;class Tp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),B(this,Pp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=V(Pp,this,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return U(Pp,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Dp=new WeakMap;class Np extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),B(this,Dp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=V(Dp,this,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",t-s),r.setAttribute("height",n-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return U(Dp,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Rp=new WeakMap;class Fp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),B(this,Rp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=V(Rp,this,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",t/2),r.setAttribute("cy",n/2),r.setAttribute("rx",t/2-s/2),r.setAttribute("ry",n/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return U(Rp,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var Ip=new WeakMap;class Lp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),B(this,Ip,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:s,height:r}=this;if(!t)return this.container;const a=this.svgFactory.create(s,r,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=V(Ip,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return U(Ip,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class Op extends Lp{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class jp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Bp=new WeakMap,Wp=new WeakMap,zp=new WeakSet;class Up extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),j(this,zp),B(this,Bp,null),B(this,Wp,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?xe.HIGHLIGHT:xe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:s}}=this,{transform:r,width:a,height:o}=W(zp,this,Vp).call(this,t,e),l=this.svgFactory.create(a,o,!0),c=V(Bp,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",r);for(let d=0,u=n.length;d<u;d++){const e=this.svgFactory.createElement(this.svgElementName);U(Wp,this).push(e),e.setAttribute("points",n[d].join(",")),c.append(e)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,s=U(Bp,this);if(t>=0&&s.setAttribute("stroke-width",t||1),n)for(let r=0,a=U(Wp,this).length;r<a;r++)U(Wp,this)[r].setAttribute("points",n[r].join(","));if(i){const{transform:e,width:t,height:n}=W(zp,this,Vp).call(this,this.data.rotation,i);s.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),s.setAttribute("transform",e)}}getElementsToTriggerPopup(){return U(Wp,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function Vp(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class Hp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const t=document.createElement("mark");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class qp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Gp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class $p extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const t=document.createElement("s");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class Kp extends xh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Xp=new WeakMap,Yp=new WeakSet;class Qp extends xh{constructor(e){var t;super(e,{isRenderable:!0}),j(this,Yp),B(this,Xp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",o({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",W(Yp,this,Jp).bind(this)),V(Xp,this,n);const{isMac:i}=ut.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&W(Yp,this,Jp).call(this)}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return U(Xp,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function Jp(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var Zp=new WeakMap,ef=new WeakMap,tf=new WeakMap,nf=new WeakMap,sf=new WeakMap,rf=new WeakMap,af=new WeakMap,of=new WeakMap,lf=new WeakSet;class cf{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:d}=e;j(this,lf),B(this,Zp,null),B(this,ef,null),B(this,tf,null),B(this,nf,new Map),B(this,sf,null),B(this,rf,null),B(this,af,[]),B(this,of,!1),this.div=t,V(Zp,this,n),V(ef,this,i),V(sf,this,o||null),V(rf,this,c||null),V(tf,this,d||new aa),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=l||null}hasEditableAnnotations(){return U(nf,this).size>0}async render(e){const{annotations:t}=e,n=this.div;Wt(n,this.viewport);const i=new Map,s=[],r={data:null,layer:n,linkService:U(rf,this),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new fh,annotationStorage:U(tf,this),enableComment:!0===e.enableComment,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const e=o.annotationType===Re.POPUP;if(e){const e=i.get(o.id);if(!e)continue;if(!this._commentManager){s.push(o);continue}r.elements=e}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const t=vh.create(r);if(!t.isRenderable)continue;if(!e&&(U(af,this).push(t),o.popupRef)){const e=i.get(o.popupRef);e?e.push(t):i.set(o.popupRef,[t])}const n=t.render();var a;if(o.hidden&&(n.style.visibility="hidden"),t._isEditable)U(nf,this).set(t.data.id,t),null===(a=this._annotationEditorUIManager)||void 0===a||a.renderAnnotationElement(t)}await W(lf,this,df).call(this);for(const o of s){const e=r.elements=i.get(o.id);r.data=o;const t=vh.create(r);if(!t.isRenderable)continue;const n=t.render();t.contentElement.id="".concat(bt).concat(o.id),o.hidden&&(n.style.visibility="hidden"),e.at(-1).container.after(n)}W(lf,this,uf).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:U(rf,this),svgFactory:new fh,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=cf._defaultBorderStyle),t.data=n;const e=vh.create(t);e.isRenderable&&(e.render(),e.contentElement.id="".concat(bt).concat(n.id),U(af,this).push(e))}await W(lf,this,df).call(this)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Wt(n,{rotation:t.rotation}),W(lf,this,uf).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(U(nf,this).values())}getEditableAnnotation(e){return U(nf,this).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,s=new Sh({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:U(rf,this),annotationStorage:U(tf,this)});return s.render(),s.contentElement.id="".concat(bt).concat(n),s.createOrUpdatePopup(),U(af,this).push(s),s}removeAnnotation(e){var t;const n=U(af,this).findIndex(t=>t.data.id===e);if(n<0)return;const[i]=U(af,this).splice(n,1);null===(t=U(Zp,this))||void 0===t||t.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(0!==e.length){for(const t of e)t.updateFakeAnnotationElement(this);W(lf,this,df).call(this)}}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return tt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Fe,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function df(){if(0===U(af,this).length)return;this.div.replaceChildren();const e=[];if(!U(of,this)){V(of,this,!0);for(const{contentElement:n,data:{id:i}}of U(af,this)){var t;const s=n.id="".concat(bt).concat(i);e.push(null===(t=U(sf,this))||void 0===t?void 0:t.getAriaAttributes(s).then(e=>{if(e)for(const[t,i]of e)n.setAttribute(t,i)}))}}U(af,this).sort((e,t)=>{let{data:{rect:[n,i,s,r]}}=e,{data:{rect:[a,o,l,c]}}=t;if(n===s&&i===r)return 1;if(a===l&&o===c)return-1;const d=(i+r)/2,u=(o+c)/2;if(d>=c&&u<=i)return-1;if(u>=r&&d<=o)return 1;return(n+s)/2-(a+l)/2});const n=document.createDocumentFragment();for(const r of U(af,this)){var i,s;if(n.append(r.container),this._commentManager)null===(i=(null===(s=r.extraPopupElement)||void 0===s?void 0:s.popup)||r.popup)||void 0===i||i.renderCommentButton();else r.extraPopupElement&&n.append(r.extraPopupElement.render())}if(this.div.append(n),await Promise.all(e),U(Zp,this))for(const r of U(af,this))U(Zp,this).addPointerInTextLayer(r.contentElement,!1)}function uf(){if(!U(ef,this))return;const e=this.div;for(const[n,i]of U(ef,this)){const s=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?"CANVAS"===r.nodeName?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i);const a=U(nf,this).get(n);var t;if(a)if(a._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,s.id,i),a._hasNoCanvas=!1;else a.canvas=i}U(ef,this).clear()}const hf=/\r\n?|\n/g;var pf=new WeakMap,ff=new WeakMap,mf=new WeakMap,gf=new WeakMap,vf=new WeakSet;class yf extends Pr{static get _keyboardManager(){const e=yf.prototype,t=e=>e.isEmpty(),n=zi.TRANSLATE_SMALL,i=zi.TRANSLATE_BIG;return tt(this,"_keyboardManager",new Un([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super(o(o({},e),{},{name:"freeTextEditor"})),j(this,vf),B(this,pf,""),B(this,ff,"".concat(this.id,"-editor")),B(this,mf,null),B(this,gf,void 0),r(this,"_colorPicker",null),this.color=e.color||yf._defaultColor||Pr._defaultLineColor,V(gf,this,e.fontSize||yf._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){Pr.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ke.FREETEXT_SIZE:yf._defaultFontSize=t;break;case ke.FREETEXT_COLOR:yf._defaultColor=t}}updateParams(e,t){switch(e){case ke.FREETEXT_SIZE:W(vf,this,bf).call(this,t);break;case ke.FREETEXT_COLOR:W(vf,this,wf).call(this,t)}}static get defaultPropertiesToUpdate(){return[[ke.FREETEXT_SIZE,yf._defaultFontSize],[ke.FREETEXT_COLOR,yf._defaultColor||Pr._defaultLineColor]]}get propertiesToUpdate(){return[[ke.FREETEXT_SIZE,U(gf,this)],[ke.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new lh(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ke.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-yf._internalPadding*e,-(yf._internalPadding+U(gf,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),V(mf,this,new AbortController);const e=this._uiManager.combinedSignal(U(mf,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",U(ff,this)),this._isDraggable=!0,null===(e=U(mf,this))||void 0===e||e.abort(),V(mf,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=U(pf,this),t=V(pf,this,W(vf,this,_f).call(this).trimEnd());if(e===t)return;const n=e=>{V(pf,this,e),e?(W(vf,this,Sf).call(this),this._uiManager.rebuild(this),W(vf,this,xf).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),W(vf,this,xf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){yf._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",U(ff,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(U(gf,this),"px * var(--total-scale-factor))"),n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(s[0]-c)/o,h=t+this.height-(s[1]-d)/l;break;case 90:u=e+(s[0]-c)/o,h=t-(s[1]-d)/l,[r,a]=[a,-r];break;case 180:u=e-this.width+(s[0]-c)/o,h=t-(s[1]-d)/l,[r,a]=[-r,-a];break;case 270:u=e+(s[0]-c-this.height*l)/o,h=t+(s[1]-d-this.width*o)/l,[r,a]=[-a,r]}this.setAt(u*n,h*i,r,a)}else this._moveAfterPaste(e,t);W(vf,this,Sf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=Ef.call(yf,t.getData("text")||"").replaceAll(hf,"\n");if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const r=s.getRangeAt(0);if(!i.includes("\n"))return r.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:o}=r,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(hf,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(kf.call(yf,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(hf,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(kf.call(yf,n))}V(pf,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),W(vf,this,Sf).call(this);const d=new Range;let u=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(u<=e){d.setStart(h,u),d.setEnd(h,u);break}u-=e}s.removeAllRanges(),s.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=yf._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof Mp){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:s,rotation:r,id:a,popupRef:o,richText:l,contentsObj:c,creationDate:d,modificationDate:u},textContent:h,textPosition:p,parent:{page:{pageNumber:f}}}=e;if(!h||0===h.length)return null;i=e={annotationType:xe.FREETEXT,color:Array.from(n),fontSize:t,value:h.join("\n"),position:p,pageIndex:f-1,rect:s.slice(0),rotation:r,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null===c||void 0===c?void 0:c.str)||null,richText:l,creationDate:d,modificationDate:u}}const s=await super.deserialize(e,t,n);return V(gf,s,e.fontSize),s.color=pt.makeHexColor(...e.color),V(pf,s,Ef.call(yf,e.value)),s._initialData=i,e.comment&&s.setCommentData(e),s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Pr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:U(gf,this),value:W(vf,this,Af).call(this)});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!W(vf,this,Cf).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize="calc(".concat(U(gf,this),"px * var(--total-scale-factor))"),n.color=this.color,t.replaceChildren();for(const i of U(pf,this).split("\n")){const e=document.createElement("div");e.append(i?document.createTextNode(i):document.createElement("br")),t.append(e)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:U(pf,this)}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function bf(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-U(gf,this))*this.parentScale),V(gf,this,e),W(vf,this,xf).call(this)},n=U(gf,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function wf(e){const t=e=>{this.color=e,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _f(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(kf.call(se,i)),t=i)}return e.join("\n")}function xf(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,s=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",s)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function kf(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(hf,"")}function Sf(){if(this.editorDiv.replaceChildren(),U(pf,this))for(const e of U(pf,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function Af(){return U(pf,this).replaceAll("\xa0"," ")}function Ef(e){return e.replaceAll(" ","\xa0")}function Cf(e){const{value:t,fontSize:n,color:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==i[t])||e.pageIndex!==s}se=yf,r(yf,"_freeTextDefaultContent",""),r(yf,"_internalPadding",0),r(yf,"_defaultColor",null),r(yf,"_defaultFontSize",10),r(yf,"_type","freetext"),r(yf,"_editorType",xe.FREETEXT);class Mf{toSVGPath(){Qe("Abstract method `toSVGPath` must be implemented.")}get box(){Qe("Abstract getter `box` must be implemented.")}serialize(e,t){Qe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,s,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a]*i,r[a+1]=n+e[a+1]*s;return r}static _rescaleAndSwap(e,t,n,i,s,r){r||(r=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a+1]*i,r[a+1]=n+e[a]*s;return r}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let s=0,r=e.length;s<r;s+=2)i[s]=t+e[s],i[s+1]=n+e[s+1];return i}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,i,s){switch(s){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,s,r){return[(e+5*n)/6,(t+5*i)/6,(5*n+s)/6,(5*i+r)/6,(n+s)/2,(i+r)/2]}}r(Mf,"PRECISION",1e-4);var Pf=new WeakMap,Tf=new WeakMap,Df=new WeakMap,Nf=new WeakMap,Rf=new WeakMap,Ff=new WeakMap,If=new WeakMap,Lf=new WeakMap,Of=new WeakMap,jf=new WeakMap,Bf=new WeakMap,Wf=new WeakMap,zf=new WeakMap,Uf=new WeakSet;class Vf{constructor(e,t,n,i,s){let{x:r,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;j(this,Uf),B(this,Pf,void 0),B(this,Tf,[]),B(this,Df,void 0),B(this,Nf,void 0),B(this,Rf,[]),B(this,Ff,new Float32Array(18)),B(this,If,void 0),B(this,Lf,void 0),B(this,Of,void 0),B(this,jf,void 0),B(this,Bf,void 0),B(this,Wf,void 0),B(this,zf,[]),V(Pf,this,t),V(Wf,this,i*n),V(Nf,this,s),U(Ff,this).set([NaN,NaN,NaN,NaN,r,a],6),V(Df,this,o),V(jf,this,Qf._*n),V(Of,this,Jf._*n),V(Bf,this,n),U(zf,this).push(r,a)}isEmpty(){return isNaN(U(Ff,this)[8])}add(e){var t;let{x:n,y:i}=e;V(If,this,n),V(Lf,this,i);const[s,r,a,o]=U(Pf,this);let[l,c,d,u]=U(Ff,this).subarray(8,12);const h=n-d,p=i-u,f=Math.hypot(h,p);if(f<U(Of,this))return!1;const m=f-U(jf,this),g=m/f,v=g*h,y=g*p;let b=l,w=c;l=d,c=u,d+=v,u+=y,null===(t=U(zf,this))||void 0===t||t.push(n,i);const _=v/m,x=-y/m*U(Wf,this),k=_*U(Wf,this);if(U(Ff,this).set(U(Ff,this).subarray(2,8),0),U(Ff,this).set([d+x,u+k],4),U(Ff,this).set(U(Ff,this).subarray(14,18),12),U(Ff,this).set([d-x,u-k],16),isNaN(U(Ff,this)[6]))return 0===U(Rf,this).length&&(U(Ff,this).set([l+x,c+k],2),U(Rf,this).push(NaN,NaN,NaN,NaN,(l+x-s)/a,(c+k-r)/o),U(Ff,this).set([l-x,c-k],14),U(Tf,this).push(NaN,NaN,NaN,NaN,(l-x-s)/a,(c-k-r)/o)),U(Ff,this).set([b,w,l,c,d,u],6),!this.isEmpty();U(Ff,this).set([b,w,l,c,d,u],6);return Math.abs(Math.atan2(w-c,b-l)-Math.atan2(y,v))<Math.PI/2?([l,c,d,u]=U(Ff,this).subarray(2,6),U(Rf,this).push(NaN,NaN,NaN,NaN,((l+d)/2-s)/a,((c+u)/2-r)/o),[l,c,b,w]=U(Ff,this).subarray(14,18),U(Tf,this).push(NaN,NaN,NaN,NaN,((b+l)/2-s)/a,((w+c)/2-r)/o),!0):([b,w,l,c,d,u]=U(Ff,this).subarray(0,6),U(Rf,this).push(((b+5*l)/6-s)/a,((w+5*c)/6-r)/o,((5*l+d)/6-s)/a,((5*c+u)/6-r)/o,((l+d)/2-s)/a,((c+u)/2-r)/o),[d,u,l,c,b,w]=U(Ff,this).subarray(12,18),U(Tf,this).push(((b+5*l)/6-s)/a,((w+5*c)/6-r)/o,((5*l+d)/6-s)/a,((5*c+u)/6-r)/o,((l+d)/2-s)/a,((c+u)/2-r)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=U(Rf,this),t=U(Tf,this);if(isNaN(U(Ff,this)[6])&&!this.isEmpty())return W(Uf,this,qf).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));W(Uf,this,$f).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return W(Uf,this,Gf).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,s,r){return new om(e,t,n,i,s,r)}getOutlines(){var e,t;const n=U(Rf,this),i=U(Tf,this),s=U(Ff,this),[r,a,o,l]=U(Pf,this),c=new Float32Array((null!==(e=null===(t=U(zf,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let h=0,p=c.length-2;h<p;h+=2)c[h]=(U(zf,this)[h]-r)/o,c[h+1]=(U(zf,this)[h+1]-a)/l;if(c[c.length-2]=(U(If,this)-r)/o,c[c.length-1]=(U(Lf,this)-a)/l,isNaN(s[6])&&!this.isEmpty())return W(Uf,this,Kf).call(this,c);const d=new Float32Array(U(Rf,this).length+24+U(Tf,this).length);let u=n.length;for(let h=0;h<u;h+=2)isNaN(n[h])?d[h]=d[h+1]=NaN:(d[h]=n[h],d[h+1]=n[h+1]);u=W(Uf,this,Yf).call(this,d,u);for(let h=i.length-6;h>=6;h-=6)for(let e=0;e<6;e+=2)isNaN(i[h+e])?(d[u]=d[u+1]=NaN,u+=2):(d[u]=i[h+e],d[u+1]=i[h+e+1],u+=2);return W(Uf,this,Xf).call(this,d,u),this.newFreeDrawOutline(d,c,U(Pf,this),U(Bf,this),U(Df,this),U(Nf,this))}}function Hf(){const e=U(Ff,this).subarray(4,6),t=U(Ff,this).subarray(16,18),[n,i,s,r]=U(Pf,this);return[(U(If,this)+(e[0]-t[0])/2-n)/s,(U(Lf,this)+(e[1]-t[1])/2-i)/r,(U(If,this)+(t[0]-e[0])/2-n)/s,(U(Lf,this)+(t[1]-e[1])/2-i)/r]}function qf(){const[e,t,n,i]=U(Pf,this),[s,r,a,o]=W(Uf,this,Hf).call(this);return"M".concat((U(Ff,this)[2]-e)/n," ").concat((U(Ff,this)[3]-t)/i," L").concat((U(Ff,this)[4]-e)/n," ").concat((U(Ff,this)[5]-t)/i," L").concat(s," ").concat(r," L").concat(a," ").concat(o," L").concat((U(Ff,this)[16]-e)/n," ").concat((U(Ff,this)[17]-t)/i," L").concat((U(Ff,this)[14]-e)/n," ").concat((U(Ff,this)[15]-t)/i," Z")}function Gf(e){const t=U(Tf,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function $f(e){const[t,n,i,s]=U(Pf,this),r=U(Ff,this).subarray(4,6),a=U(Ff,this).subarray(16,18),[o,l,c,d]=W(Uf,this,Hf).call(this);e.push("L".concat((r[0]-t)/i," ").concat((r[1]-n)/s," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((a[0]-t)/i," ").concat((a[1]-n)/s))}function Kf(e){const t=U(Ff,this),[n,i,s,r]=U(Pf,this),[a,o,l,c]=W(Uf,this,Hf).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-i)/r,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-i)/r,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-i)/r,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-i)/r],0),this.newFreeDrawOutline(d,e,U(Pf,this),U(Bf,this),U(Df,this),U(Nf,this))}function Xf(e,t){const n=U(Tf,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function Yf(e,t){const n=U(Ff,this).subarray(4,6),i=U(Ff,this).subarray(16,18),[s,r,a,o]=U(Pf,this),[l,c,d,u]=W(Uf,this,Hf).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/a,(n[1]-r)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-r)/o],t),t+24}var Qf={_:8},Jf={_:Qf._+2},Zf=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,im=new WeakMap,sm=new WeakMap,rm=new WeakMap,am=new WeakSet;class om extends Mf{constructor(e,t,n,i,s,r){super(),j(this,am),B(this,Zf,void 0),B(this,em,new Float32Array(4)),B(this,tm,void 0),B(this,nm,void 0),B(this,im,void 0),B(this,sm,void 0),B(this,rm,void 0),V(rm,this,e),V(im,this,t),V(Zf,this,n),V(sm,this,i),V(tm,this,s),V(nm,this,r),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],W(am,this,lm).call(this,r);const[a,o,l,c]=U(em,this);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-a)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-a)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(U(rm,this)[4]," ").concat(U(rm,this)[5])];for(let t=6,n=U(rm,this).length;t<n;t+=6)isNaN(U(rm,this)[t])?e.push("L".concat(U(rm,this)[t+4]," ").concat(U(rm,this)[t+5])):e.push("C".concat(U(rm,this)[t]," ").concat(U(rm,this)[t+1]," ").concat(U(rm,this)[t+2]," ").concat(U(rm,this)[t+3]," ").concat(U(rm,this)[t+4]," ").concat(U(rm,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,s,r]=e;const a=s-n,o=r-i;let l,c;switch(t){case 0:l=Mf._rescale(U(rm,this),n,r,a,-o),c=Mf._rescale(U(im,this),n,r,a,-o);break;case 90:l=Mf._rescaleAndSwap(U(rm,this),n,i,a,o),c=Mf._rescaleAndSwap(U(im,this),n,i,a,o);break;case 180:l=Mf._rescale(U(rm,this),s,i,-a,o),c=Mf._rescale(U(im,this),s,i,-a,o);break;case 270:l=Mf._rescaleAndSwap(U(rm,this),s,r,-a,-o),c=Mf._rescaleAndSwap(U(im,this),s,r,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return U(em,this)}newOutliner(e,t,n,i,s){return new Vf(e,t,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,i,s,r]=U(em,this),[a,o,l,c]=U(Zf,this),d=s*l,u=r*c,h=n*l+a,p=i*c+o,f=this.newOutliner({x:U(im,this)[0]*d+h,y:U(im,this)[1]*u+p},U(Zf,this),U(sm,this),e,U(nm,this),null!==t&&void 0!==t?t:U(tm,this));for(let m=2;m<U(im,this).length;m+=2)f.add({x:U(im,this)[m]*d+h,y:U(im,this)[m+1]*u+p});return f.getOutlines()}}function lm(e){const t=U(rm,this);let n=t[4],i=t[5];const s=[n,i,n,i];let r=n,a=i,o=n,l=i;const c=e?Math.max:Math.min,d=new Float32Array(4);for(let h=6,p=t.length;h<p;h+=6){const e=t[h+4],u=t[h+5];isNaN(t[h])?(pt.pointBoundingBox(e,u,s),a>u?(r=e,a=u):a===u&&(r=c(r,e)),l<u?(o=e,l=u):l===u&&(o=c(o,e))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,pt.bezierBoundingBox(n,i,...t.slice(h,h+6),d),pt.rectBoundingBox(d[0],d[1],d[2],d[3],s),a>d[1]?(r=d[0],a=d[1]):a===d[1]&&(r=c(r,d[0])),l<d[3]?(o=d[2],l=d[3]):l===d[3]&&(o=c(o,d[2]))),n=e,i=u}const u=U(em,this);u[0]=s[0]-U(tm,this),u[1]=s[1]-U(tm,this),u[2]=s[2]-s[0]+2*U(tm,this),u[3]=s[3]-s[1]+2*U(tm,this),this.firstPoint=[r,a],this.lastPoint=[o,l]}var cm=new WeakMap,dm=new WeakMap,um=new WeakMap,hm=new WeakMap,pm=new WeakMap,fm=new WeakSet;class mm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];j(this,fm),B(this,cm,void 0),B(this,dm,void 0),B(this,um,void 0),B(this,hm,[]),B(this,pm,[]);const s=[1/0,1/0,-1/0,-1/0],r=1e-4;for(const{x:f,y:m,width:g,height:v}of e){const e=Math.floor((f-t)/r)*r,n=Math.ceil((f+g+t)/r)*r,i=Math.floor((m-t)/r)*r,a=Math.ceil((m+v+t)/r)*r,o=[e,i,a,!0],l=[n,i,a,!1];U(hm,this).push(o,l),pt.rectBoundingBox(e,i,n,a,s)}const a=s[2]-s[0]+2*n,o=s[3]-s[1]+2*n,l=s[0]-n,c=s[1]-n;let d=i?-1/0:1/0,u=1/0;const h=U(hm,this).at(i?-1:-2),p=[h[0],h[2]];for(const f of U(hm,this)){const[e,t,n,s]=f;!s&&i?t<u?(u=t,d=e):t===u&&(d=Math.max(d,e)):s&&!i&&(t<u?(u=t,d=e):t===u&&(d=Math.min(d,e))),f[0]=(e-l)/a,f[1]=(t-c)/o,f[2]=(n-c)/o}V(cm,this,new Float32Array([l,c,a,o])),V(dm,this,[d,u]),V(um,this,p)}getOutlines(){U(hm,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of U(hm,this))t[3]?(e.push(...W(fm,this,wm).call(this,t)),W(fm,this,ym).call(this,t)):(W(fm,this,bm).call(this,t),e.push(...W(fm,this,wm).call(this,t)));return W(fm,this,gm).call(this,e)}}function gm(e){const t=[],n=new Set;for(const r of e){const[e,n,i]=r;t.push([e,n,r],[e,i,r])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let r=0,a=t.length;r<a;r+=2){const e=t[r][2],i=t[r+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let s;for(;n.size>0;){const e=n.values().next().value;let[t,r,a,o,l]=e;n.delete(e);let c=t,d=r;for(s=[t,a],i.push(s);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,r,a,o,l]=e,c!==t&&(s.push(c,d,t,d===r?r:a),c=t),d=d===r?a:r}s.push(c,d)}return new km(i,U(cm,this),U(dm,this),U(um,this))}function vm(e){const t=U(pm,this);let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>1,r=t[s][0];if(r===e)return s;r<e?n=s+1:i=s-1}return i+1}function ym(e){let[,t,n]=e;const i=W(fm,this,vm).call(this,t);U(pm,this).splice(i,0,[t,n])}function bm(e){let[,t,n]=e;const i=W(fm,this,vm).call(this,t);for(let s=i;s<U(pm,this).length;s++){const[e,i]=U(pm,this)[s];if(e!==t)break;if(e===t&&i===n)return void U(pm,this).splice(s,1)}for(let s=i-1;s>=0;s--){const[e,i]=U(pm,this)[s];if(e!==t)break;if(e===t&&i===n)return void U(pm,this).splice(s,1)}}function wm(e){const[t,n,i]=e,s=[[t,n,i]],r=W(fm,this,vm).call(this,i);for(let a=0;a<r;a++){const[e,n]=U(pm,this)[a];for(let i=0,r=s.length;i<r;i++){const[,a,o]=s[i];if(!(n<=a||o<=e))if(a>=e)if(o>n)s[i][1]=n;else{if(1===r)return[];s.splice(i,1),i--,r--}else s[i][2]=e,o>n&&s.push([t,n,o])}}return s}var _m=new WeakMap,xm=new WeakMap;class km extends Mf{constructor(e,t,n,i){super(),B(this,_m,void 0),B(this,xm,void 0),V(xm,this,e),V(_m,this,t),this.firstPoint=n,this.lastPoint=i}toSVGPath(){const e=[];for(const t of U(xm,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let s=2;s<t.length;s+=2){const r=t[s],a=t[s+1];r===n?(e.push("V".concat(a)),i=a):a===i&&(e.push("H".concat(r)),n=r)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,s,r]=e;const a=[],o=s-n,l=r-i;for(const c of U(xm,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=r-c[t+1]*l;a.push(e)}return a}get box(){return U(_m,this)}get classNamesForOutlining(){return["highlightOutline"]}}class Sm extends Vf{newFreeDrawOutline(e,t,n,i,s,r){return new Am(e,t,n,i,s,r)}}class Am extends om{newOutliner(e,t,n,i,s){return new Sm(e,t,n,i,s,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var Em=new WeakMap,Cm=new WeakMap,Mm=new WeakMap,Pm=new WeakMap,Tm=new WeakMap,Dm=new WeakMap,Nm=new WeakMap,Rm=new WeakMap,Fm=new WeakMap,Im=new WeakMap,Lm=new WeakMap,Om=new WeakMap,jm=new WeakMap,Bm=new WeakMap,Wm=new WeakMap,zm=new WeakMap,Um=new WeakMap,Vm=new WeakMap,Hm=new WeakSet;class qm extends Pr{static get _keyboardManager(){const e=qm.prototype;return tt(this,"_keyboardManager",new Un([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(o(o({},e),{},{name:"highlightEditor"})),j(this,Hm),B(this,Em,null),B(this,Cm,0),B(this,Mm,void 0),B(this,Pm,null),B(this,Tm,null),B(this,Dm,null),B(this,Nm,null),B(this,Rm,0),B(this,Fm,null),B(this,Im,null),B(this,Lm,null),B(this,Om,!1),B(this,jm,null),B(this,Bm,null),B(this,Wm,null),B(this,zm,""),B(this,Um,void 0),B(this,Vm,""),this.color=e.color||qm._defaultColor,V(Um,this,e.thickness||qm._defaultThickness),this.opacity=e.opacity||qm._defaultOpacity,V(Mm,this,e.boxes||null),V(Vm,this,e.methodOfCreation||""),V(zm,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(V(Om,this,!0),W(Hm,this,$m).call(this,e),W(Hm,this,Jm).call(this)):U(Mm,this)&&(V(Em,this,e.anchorNode),V(Cm,this,e.anchorOffset),V(Nm,this,e.focusNode),V(Rm,this,e.focusOffset),W(Hm,this,Gm).call(this),W(Hm,this,Jm).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:U(Om,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:U(Um,this),methodOfCreation:U(Vm,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;Pr.initialize(e,t),qm._defaultColor||(qm._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case ke.HIGHLIGHT_COLOR:qm._defaultColor=t;break;case ke.HIGHLIGHT_THICKNESS:qm._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return U(Bm,this)}get commentButtonPosition(){return U(jm,this)}updateParams(e,t){switch(e){case ke.HIGHLIGHT_COLOR:W(Hm,this,Km).call(this,t);break;case ke.HIGHLIGHT_THICKNESS:W(Hm,this,Xm).call(this,t)}}static get defaultPropertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,qm._defaultColor],[ke.HIGHLIGHT_THICKNESS,qm._defaultThickness]]}get propertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,this.color||qm._defaultColor],[ke.HIGHLIGHT_THICKNESS,U(Um,this)||qm._defaultThickness],[ke.HIGHLIGHT_FREE,U(Om,this)]]}onUpdatedColor(){var e,t;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(U(Lm,this),{root:{fill:this.color,"fill-opacity":this.opacity}}),null===(t=U(Tm,this))||void 0===t||t.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",V(Tm,this,new Qu({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(W(Hm,this,ng).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,W(Hm,this,ng).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){W(Hm,this,Qm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(W(Hm,this,Jm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)W(Hm,this,Qm).call(this);else if(e){var n;W(Hm,this,Jm).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;U(Om,this)?(e=(e-this.rotation+360)%360,n=Zm.call(qm,U(Im,this).box,e)):n=Zm.call(qm,[this.x,this.y,this.width,this.height],e),t.updateProperties(U(Lm,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(U(Wm,this),{bbox:Zm.call(qm,U(Dm,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();U(zm,this)&&(e.setAttribute("aria-label",U(zm,this)),e.setAttribute("role","mark")),U(Om,this)?e.classList.add("free"):this.div.addEventListener("keydown",W(Hm,this,eg).bind(this),{signal:this._uiManager._signal});const t=V(Fm,this,document.createElement("div"));return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=U(Pm,this),this.setDims(),xn(this,U(Fm,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(U(Wm,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(U(Wm,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:W(Hm,this,tg).call(this,!0);break;case 1:case 3:W(Hm,this,tg).call(this,!1)}}select(){var e;super.select(),U(Wm,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(U(Wm,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),U(Wm,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(U(Wm,this),{rootClass:{selected:!1}}),U(Om,this)||W(Hm,this,tg).call(this,!1))}get _mustFixPosition(){return!U(Om,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(U(Lm,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(U(Wm,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:i,x:s,y:r}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=t=>{d.abort(),W(qm,this,ag).call(this,e,t)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",Ft,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Rt,{signal:u}),i.addEventListener("pointermove",W(qm,this,rg).bind(this,e),{signal:u}),this._freeHighlight=new Sm({x:s,y:r},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof Hp){const{data:{quadPoints:t,rect:n,rotation:s,id:r,color:a,opacity:o,popupRef:l,richText:c,contentsObj:d,creationDate:u,modificationDate:h},parent:{page:{pageNumber:p}}}=e;i=e={annotationType:xe.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:s,annotationElementId:r,id:r,deleted:!1,popupRef:l,richText:c,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:u,modificationDate:h}}else if(e instanceof Up){const{data:{inkLists:t,rect:n,rotation:s,id:r,color:a,borderStyle:{rawWidth:o},popupRef:l,richText:c,contentsObj:d,creationDate:u,modificationDate:h},parent:{page:{pageNumber:p}}}=e;i=e={annotationType:xe.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:s,annotationElementId:r,id:r,deleted:!1,popupRef:l,richText:c,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:u,modificationDate:h}}const{color:s,quadPoints:r,inkLists:a,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=pt.makeHexColor(...s),l.opacity=o||1,a&&V(Um,l,e.thickness),l._initialData=i,e.comment&&l.setCommentData(e);const[c,d]=l.pageDimensions,[u,h]=l.pageTranslation;if(r){const e=V(Mm,l,[]);for(let t=0;t<r.length;t+=8)e.push({x:(r[t]-u)/c,y:1-(r[t+1]-h)/d,width:(r[t+2]-r[t])/c,height:(r[t+1]-r[t+5])/d});W(Hm,l,Gm).call(l),W(Hm,l,Jm).call(l),l.rotate(l.rotation)}else if(a){V(Om,l,!0);const e=a[0],n={x:e[0]-u,y:d-(e[1]-h)},i=new Sm(n,[0,0,c,d],1,U(Um,l)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-u,n.y=d-(e[t+1]-h),i.add(n);const{id:s,clipPathId:r}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);W(Hm,l,$m).call(l,{highlightOutlines:i.getOutlines(),highlightId:s,clipPathId:r}),W(Hm,l,Jm).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Pr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:U(Um,this),quadPoints:W(Hm,this,ig).call(this),outlines:W(Hm,this,sg).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!W(Hm,this,og).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}function Gm(){const e=new mm(U(Mm,this),.001);V(Im,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=U(Im,this).box;const t=new mm(U(Mm,this),.0025,.001,"ltr"===this._uiManager.direction);V(Dm,this,t.getOutlines());const{firstPoint:n}=U(Im,this);V(jm,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:i}=U(Dm,this);V(Bm,this,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])}function $m(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;V(Im,this,t);if(V(Dm,this,t.getNewOutline(U(Um,this)/2+1.5,.0025)),n>=0)V(Lm,this,n),V(Pm,this,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),V(Wm,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:U(Dm,this).box,path:{d:U(Dm,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(U(Lm,this),{bbox:Zm.call(re,U(Im,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(U(Wm,this),{bbox:Zm.call(re,U(Dm,this).box,e),path:{d:U(Dm,this).toSVGPath()}})}const[s,r,a,o]=t.box;switch(this.rotation){case 0:this.x=s,this.y=r,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=r,this.y=1-s,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-s,this.y=1-r,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-r,this.y=s,this.width=a*t/e,this.height=o*e/t;break}}const{firstPoint:l}=t;V(jm,this,[(l[0]-s)/a,(l[1]-r)/o]);const{lastPoint:c}=U(Dm,this);V(Bm,this,[(c[0]-s)/a,(c[1]-r)/o])}function Km(e){const t=(e,t)=>{this.color=e,this.opacity=t,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,re._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}function Xm(e){const t=U(Um,this),n=e=>{V(Um,this,e),W(Hm,this,Ym).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function Ym(e){U(Om,this)&&(W(Hm,this,$m).call(this,{highlightOutlines:U(Im,this).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}function Qm(){null!==U(Lm,this)&&this.parent&&(this.parent.drawLayer.remove(U(Lm,this)),V(Lm,this,null),this.parent.drawLayer.remove(U(Wm,this)),V(Wm,this,null))}function Jm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===U(Lm,this)&&(({id:L(V,[Lm,this])._,clipPathId:L(V,[Pm,this])._}=e.drawLayer.draw({bbox:U(Im,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:U(Om,this)},path:{d:U(Im,this).toSVGPath()}},!1,!0)),V(Wm,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:U(Om,this)},bbox:U(Dm,this).box,path:{d:U(Dm,this).toSVGPath()}},U(Om,this))),U(Fm,this)&&(U(Fm,this).style.clipPath=U(Pm,this)))}function Zm(e,t){let[n,i,s,r]=e;switch(t){case 90:return[1-i-r,n,r,s];case 180:return[1-n-s,1-i-r,s,r];case 270:return[i,1-n-s,r,s]}return[n,i,s,r]}function eg(e){re._keyboardManager.exec(this,e)}function tg(e){if(!U(Em,this))return;const t=window.getSelection();e?t.setPosition(U(Em,this),U(Cm,this)):t.setPosition(U(Nm,this),U(Rm,this))}function ng(){return U(Om,this)?this.rotation:0}function ig(){if(U(Om,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,s=U(Mm,this),r=new Float32Array(8*s.length);let a=0;for(const{x:o,y:l,width:c,height:d}of s){const s=o*e+n,u=(1-l)*t+i;r[a]=r[a+4]=s,r[a+1]=r[a+3]=u,r[a+2]=r[a+6]=s+c*e,r[a+5]=r[a+7]=u-d*t,a+=8}return r}function sg(e){return U(Im,this).serialize(e,W(Hm,this,ng).call(this))}function rg(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function ag(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function og(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((e,n)=>e!==t[n])}re=qm,r(qm,"_defaultColor",null),r(qm,"_defaultOpacity",1),r(qm,"_defaultThickness",12),r(qm,"_type","highlight"),r(qm,"_editorType",xe.HIGHLIGHT),r(qm,"_freeHighlightId",-1),r(qm,"_freeHighlight",null),r(qm,"_freeHighlightClipId","");var lg=new WeakMap;class cg{constructor(){B(this,lg,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){U(lg,this)[e]=t}toSVGProperties(){const e=U(lg,this);return V(lg,this,Object.create(null)),{root:e}}reset(){V(lg,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){Qe("Not implemented")}}var dg=new WeakMap,ug=new WeakMap,hg=new WeakSet;class pg extends Pr{constructor(e){super(e),j(this,hg),B(this,dg,null),B(this,ug,void 0),r(this,"_colorPicker",null),r(this,"_drawId",null),V(ug,this,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(W(hg,this,fg).call(this,e),W(hg,this,vg).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,s]of Object.entries(t))n.has(i)?Object.assign(e[i],s):e[i]=s;return e}static getDefaultDrawingOptions(e){Qe("Not implemented")}static get typesMap(){Qe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(xg._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,s=i[t],r=n=>{var s;i.updateProperty(t,n);const r=U(dg,this).updateProperty(t,n);r&&W(hg,this,wg).call(this,r),null===(s=this.parent)||void 0===s||s.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,pg._mergeSVGProperties(U(dg,this).getPathResizingSVGProperties(W(hg,this,bg).call(this)),{bbox:W(hg,this,_g).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,pg._mergeSVGProperties(U(dg,this).getPathResizedSVGProperties(W(hg,this,bg).call(this)),{bbox:W(hg,this,_g).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:W(hg,this,_g).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,pg._mergeSVGProperties(U(dg,this).getPathTranslatedSVGProperties(W(hg,this,bg).call(this),this.parentDimensions),{bbox:W(hg,this,_g).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,U(ug,this)&&(V(ug,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){W(hg,this,gg).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(W(hg,this,vg).call(this),W(hg,this,wg).call(this,U(dg,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),W(hg,this,gg).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),W(hg,this,vg).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,pg._mergeSVGProperties({bbox:W(hg,this,_g).call(this)},U(dg,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&W(hg,this,wg).call(this,U(dg,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,s){Qe("Not implemented")}static startDrawing(e,t,n,i){var s;const{target:r,offsetX:a,offsetY:o,pointerId:l,pointerType:c}=i;if(kn.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:d}}=e,{width:u,height:h}=r.getBoundingClientRect(),p=kg._=new AbortController,f=e.combinedSignal(p);kn.setPointer(c,l),window.addEventListener("pointerup",e=>{kn.isSamePointerIdOrRemove(e.pointerId)&&this._endDraw(e)},{signal:f}),window.addEventListener("pointercancel",e=>{kn.isSamePointerIdOrRemove(e.pointerId)&&this._currentParent.endDrawingSession()},{signal:f}),window.addEventListener("pointerdown",e=>{kn.isSamePointerType(e.pointerType)&&(kn.initializeAndAddPointerId(e.pointerId),xg._.isCancellable()&&(xg._.removeLastElement(),xg._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Rt,{signal:f}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),r.addEventListener("touchmove",e=>{kn.isSameTimeStamp(e.timeStamp)&&Ft(e)},{signal:f}),e.toggleDrawing(),null===(s=t._editorUndoBar)||void 0===s||s.hide(),xg._?e.drawLayer.updateProperties(this._currentDrawId,xg._.startNew(a,o,u,h,d)):(t.updateUIForDefaultProperties(this),xg._=this.createDrawerInstance(a,o,u,h,d),Sg._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Sg._.toSVGProperties(),xg._.defaultSVGProperties),!0,!1)))}static _drawMove(e){if(kn.isSameTimeStamp(e.timeStamp),!xg._)return;const{offsetX:t,offsetY:n,pointerId:i}=e;kn.isSamePointerId(i)&&(kn.isUsingMultiplePointers()?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,xg._.add(t,n)),kn.setTimeStamp(e.timeStamp),Ft(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,xg._=null,Sg._=null,kn.clearTimeStamp()),kg._&&(kg._.abort(),kg._=null,kn.clearPointerIds())}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,xg._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=xg._,n=this._currentDrawId,i=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(i))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:ke.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(ke.DRAW_STEP),!xg._.isEmpty()){const{pageDimensions:[n,i],scale:s}=t,r=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:xg._.getOutlines(n*s,i*s,s,this._INNER_MARGIN),drawingOptions:Sg._,mustBeCommitted:!e});return this._cleanup(!0),r}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,s,r){Qe("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:a}}=t.viewport,o=this.deserializeDraw(r,a,i,s,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),W(hg,l,fg).call(l,{drawOutlines:o}),W(hg,l,vg).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[i,s]=this.pageDimensions;return U(dg,this).serialize([t,n,i,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}function fg(e){let{drawOutlines:t,drawId:n,drawingOptions:i}=e;V(dg,this,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=W(hg,this,mg).call(this,t,this.parent),W(hg,this,wg).call(this,t.box)}function mg(e,t){const{id:n}=t.drawLayer.draw(ae._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function gg(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function vg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=W(hg,this,mg).call(this,U(dg,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function yg(e){let[t,n,i,s]=e;const{parentDimensions:[r,a],rotation:o}=this;switch(o){case 90:return[n,1-t,i*(a/r),s*(r/a)];case 180:return[1-t,1-n,i,s];case 270:return[1-n,t,i*(a/r),s*(r/a)];default:return[t,n,i,s]}}function bg(){const{x:e,y:t,width:n,height:i,parentDimensions:[s,r],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(s/r),i*(r/s)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(s/r),i*(r/s)];default:return[e,t,n,i]}}function wg(e){[this.x,this.y,this.width,this.height]=W(hg,this,yg).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}function _g(){const{x:e,y:t,width:n,height:i,rotation:s,parentRotation:r,parentDimensions:[a,o]}=this;switch((4*s+r)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(a/o),i*(o/a),n*(a/o)];case 5:return[1-t,e,n*(a/o),i*(o/a)];case 6:return[1-e-i*(o/a),1-t,i*(o/a),n*(a/o)];case 7:return[t-n*(a/o),1-e-i*(o/a),n*(a/o),i*(o/a)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(o/a),t,i*(o/a),n*(a/o)];case 13:return[1-t-n*(a/o),e-i*(o/a),n*(a/o),i*(o/a)];case 14:return[1-e,1-t-n*(a/o),i*(o/a),n*(a/o)];case 15:return[t,1-e,n*(a/o),i*(o/a)];default:return[e,t,n,i]}}ae=pg,r(pg,"_currentDrawId",-1),r(pg,"_currentParent",null);var xg={_:null},kg={_:null},Sg={_:null};r(pg,"_INNER_MARGIN",3);var Ag=new WeakMap,Eg=new WeakMap,Cg=new WeakMap,Mg=new WeakMap,Pg=new WeakMap,Tg=new WeakMap,Dg=new WeakMap,Ng=new WeakMap,Rg=new WeakMap,Fg=new WeakMap,Ig=new WeakMap,Lg=new WeakSet;class Og{constructor(e,t,n,i,s,r){j(this,Lg),B(this,Ag,new Float64Array(6)),B(this,Eg,void 0),B(this,Cg,void 0),B(this,Mg,void 0),B(this,Pg,void 0),B(this,Tg,void 0),B(this,Dg,""),B(this,Ng,0),B(this,Rg,new Xg),B(this,Fg,void 0),B(this,Ig,void 0),V(Fg,this,n),V(Ig,this,i),V(Mg,this,s),V(Pg,this,r),[e,t]=W(Lg,this,jg).call(this,e,t);const a=V(Eg,this,[NaN,NaN,NaN,NaN,e,t]);V(Tg,this,[e,t]),V(Cg,this,[{line:a,points:U(Tg,this)}]),U(Ag,this).set(a,0)}updateProperty(e,t){"stroke-width"===e&&V(Pg,this,t)}isEmpty(){return!U(Cg,this)||0===U(Cg,this).length}isCancellable(){return U(Tg,this).length<=10}add(e,t){[e,t]=W(Lg,this,jg).call(this,e,t);const[n,i,s,r]=U(Ag,this).subarray(2,6),a=e-s,o=t-r;return Math.hypot(U(Fg,this)*a,U(Ig,this)*o)<=2?null:(U(Tg,this).push(e,t),isNaN(n)?(U(Ag,this).set([s,r,e,t],2),U(Eg,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(U(Ag,this)[0])&&U(Eg,this).splice(6,6),U(Ag,this).set([n,i,s,r,e,t],0),U(Eg,this).push(...Mf.createBezierPoints(n,i,s,r,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===U(Tg,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,s){V(Fg,this,n),V(Ig,this,i),V(Mg,this,s),[e,t]=W(Lg,this,jg).call(this,e,t);const r=V(Eg,this,[NaN,NaN,NaN,NaN,e,t]);V(Tg,this,[e,t]);const a=U(Cg,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),U(Cg,this).push({line:r,points:U(Tg,this)}),U(Ag,this).set(r,0),V(Ng,this,0),this.toSVGPath(),null}getLastElement(){return U(Cg,this).at(-1)}setLastElement(e){return U(Cg,this)?(U(Cg,this).push(e),V(Eg,this,e.line),V(Tg,this,e.points),V(Ng,this,0),{path:{d:this.toSVGPath()}}):U(Rg,this).setLastElement(e)}removeLastElement(){if(!U(Cg,this))return U(Rg,this).removeLastElement();U(Cg,this).pop(),V(Dg,this,"");for(let e=0,t=U(Cg,this).length;e<t;e++){const{line:t,points:n}=U(Cg,this)[e];V(Eg,this,t),V(Tg,this,n),V(Ng,this,0),this.toSVGPath()}return{path:{d:U(Dg,this)}}}toSVGPath(){const e=Mf.svgRound(U(Eg,this)[4]),t=Mf.svgRound(U(Eg,this)[5]);if(2===U(Tg,this).length)return V(Dg,this,"".concat(U(Dg,this)," M ").concat(e," ").concat(t," Z")),U(Dg,this);if(U(Tg,this).length<=6){const n=U(Dg,this).lastIndexOf("M");V(Dg,this,"".concat(U(Dg,this).slice(0,n)," M ").concat(e," ").concat(t)),V(Ng,this,6)}if(4===U(Tg,this).length){const e=Mf.svgRound(U(Eg,this)[10]),t=Mf.svgRound(U(Eg,this)[11]);return V(Dg,this,"".concat(U(Dg,this)," L ").concat(e," ").concat(t)),V(Ng,this,12),U(Dg,this)}const n=[];0===U(Ng,this)&&(n.push("M ".concat(e," ").concat(t)),V(Ng,this,6));for(let i=U(Ng,this),s=U(Eg,this).length;i<s;i+=6){const[e,t,s,r,a,o]=U(Eg,this).slice(i,i+6).map(Mf.svgRound);n.push("C".concat(e," ").concat(t," ").concat(s," ").concat(r," ").concat(a," ").concat(o))}return V(Dg,this,U(Dg,this)+n.join(" ")),V(Ng,this,U(Eg,this).length),U(Dg,this)}getOutlines(e,t,n,i){const s=U(Cg,this).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),U(Rg,this).build(U(Cg,this),e,t,n,U(Mg,this),U(Pg,this),i),V(Ag,this,null),V(Eg,this,null),V(Cg,this,null),V(Dg,this,null),U(Rg,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function jg(e,t){return Mf._normalizePoint(e,t,U(Fg,this),U(Ig,this),U(Mg,this))}var Bg=new WeakMap,Wg=new WeakMap,zg=new WeakMap,Ug=new WeakMap,Vg=new WeakMap,Hg=new WeakMap,qg=new WeakMap,Gg=new WeakMap,$g=new WeakMap,Kg=new WeakSet;class Xg extends Mf{constructor(){super(...arguments),j(this,Kg),B(this,Bg,void 0),B(this,Wg,0),B(this,zg,void 0),B(this,Ug,void 0),B(this,Vg,void 0),B(this,Hg,void 0),B(this,qg,void 0),B(this,Gg,void 0),B(this,$g,void 0)}build(e,t,n,i,s,r,a){V(Vg,this,t),V(Hg,this,n),V(qg,this,i),V(Gg,this,s),V($g,this,r),V(zg,this,null!==a&&void 0!==a?a:0),V(Ug,this,e),W(Kg,this,Jg).call(this)}get thickness(){return U($g,this)}setLastElement(e){return U(Ug,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return U(Ug,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of U(Ug,this))if(e.push("M".concat(Mf.svgRound(t[4])," ").concat(Mf.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(Mf.svgRound(t[10])," ").concat(Mf.svgRound(t[11])));else for(let n=6,i=t.length;n<i;n+=6){const[i,s,r,a,o,l]=t.subarray(n,n+6).map(Mf.svgRound);e.push("C".concat(i," ").concat(s," ").concat(r," ").concat(a," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,i,s,r]=e;const a=[],o=[],[l,c,d,u]=W(Kg,this,Qg).call(this);let h,p,f,m,g,v,y,b,w;switch(U(Gg,this)){case 0:w=Mf._rescale,h=n,p=i+r,f=s,m=-r,g=n+l*s,v=i+(1-c-u)*r,y=n+(l+d)*s,b=i+(1-c)*r;break;case 90:w=Mf._rescaleAndSwap,h=n,p=i,f=s,m=r,g=n+c*s,v=i+l*r,y=n+(c+u)*s,b=i+(l+d)*r;break;case 180:w=Mf._rescale,h=n+s,p=i,f=-s,m=r,g=n+(1-l-d)*s,v=i+c*r,y=n+(1-l)*s,b=i+(c+u)*r;break;case 270:w=Mf._rescaleAndSwap,h=n+s,p=i+r,f=-s,m=-r,g=n+(1-c-u)*s,v=i+(1-l-d)*r,y=n+(1-c)*s,b=i+(1-l)*r}for(const{line:_,points:x}of U(Ug,this))a.push(w(_,h,p,f,m,t?new Array(_.length):null)),o.push(w(x,h,p,f,m,t?new Array(x.length):null));return{lines:a,points:o,rect:[g,v,y,b]}}static deserialize(e,t,n,i,s,r){let{paths:{lines:a,points:o},rotation:l,thickness:c}=r;const d=[];let u,h,p,f,m;switch(l){case 0:m=Mf._rescale,u=-e/n,h=t/i+1,p=1/n,f=-1/i;break;case 90:m=Mf._rescaleAndSwap,u=-t/i,h=-e/n,p=1/i,f=1/n;break;case 180:m=Mf._rescale,u=e/n+1,h=-t/i,p=-1/n,f=1/i;break;case 270:m=Mf._rescaleAndSwap,u=t/i+1,h=e/n+1,p=-1/i,f=-1/n}if(!a){a=[];for(const e of o){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[i,s,r,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,i,s],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(Mf.createBezierPoints(i,s,r,o,t,l),3*(a-2)),[i,s,r,o]=[r,o,t,l]}}}for(let v=0,y=a.length;v<y;v++)d.push({line:m(a[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,p,f),points:m(o[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,p,f)});const g=new this.prototype.constructor;return g.build(d,n,i,1,l,c,s),g}get box(){return U(Bg,this)}updateProperty(e,t){return"stroke-width"===e?W(Kg,this,Zg).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e;const[s,r]=W(Kg,this,Yg).call(this);V(Vg,this,n),V(Hg,this,i),V(qg,this,t);const[a,o]=W(Kg,this,Yg).call(this),l=a-s,c=o-r,d=U(Bg,this);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return V(Wg,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return U(Bg,this).map(Mf.svgRound).join(" ")}get defaultProperties(){const[e,t]=U(Bg,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Mf.svgRound(e)," ").concat(Mf.svgRound(t))}}}get rotationTransform(){const[,,e,t]=U(Bg,this);let n=0,i=0,s=0,r=0,a=0,o=0;switch(U(Wg,this)){case 90:i=t/e,s=-e/t,a=e;break;case 180:n=-1,r=-1,a=e,o=t;break;case 270:i=-t/e,s=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(s," ").concat(r," ").concat(Mf.svgRound(a)," ").concat(Mf.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,i,s]=e;const[r,a]=W(Kg,this,Yg).call(this),[o,l,c,d]=U(Bg,this);if(Math.abs(c-r)<=Mf.PRECISION||Math.abs(d-a)<=Mf.PRECISION){const e=t+i/2-(o+c/2),r=n+s/2-(l+d/2);return{path:{"transform-origin":"".concat(Mf.svgRound(t)," ").concat(Mf.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(r,")")}}}const u=(i-2*r)/(c-2*r),h=(s-2*a)/(d-2*a),p=c/i,f=d/s;return{path:{"transform-origin":"".concat(Mf.svgRound(o)," ").concat(Mf.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(f,") ")+"translate(".concat(Mf.svgRound(r)," ").concat(Mf.svgRound(a),") scale(").concat(u," ").concat(h,") ")+"translate(".concat(Mf.svgRound(-r)," ").concat(Mf.svgRound(-a),")")}}}getPathResizedSVGProperties(e){let[t,n,i,s]=e;const[r,a]=W(Kg,this,Yg).call(this),o=U(Bg,this),[l,c,d,u]=o;if(o[0]=t,o[1]=n,o[2]=i,o[3]=s,Math.abs(d-r)<=Mf.PRECISION||Math.abs(u-a)<=Mf.PRECISION){const e=t+i/2-(l+d/2),r=n+s/2-(c+u/2);for(const{line:t,points:n}of U(Ug,this))Mf._translate(t,e,r,t),Mf._translate(n,e,r,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Mf.svgRound(t)," ").concat(Mf.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(i-2*r)/(d-2*r),p=(s-2*a)/(u-2*a),f=-h*(l+r)+t+r,m=-p*(c+a)+n+a;if(1!==h||1!==p||0!==f||0!==m)for(const{line:g,points:v}of U(Ug,this))Mf._rescale(g,f,m,h,p,g),Mf._rescale(v,f,m,h,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(Mf.svgRound(t)," ").concat(Mf.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e;const[s,r]=t,a=U(Bg,this),o=n-a[0],l=i-a[1];if(U(Vg,this)===s&&U(Hg,this)===r)for(const{line:c,points:d}of U(Ug,this))Mf._translate(c,o,l,c),Mf._translate(d,o,l,d);else{const e=U(Vg,this)/s,t=U(Hg,this)/r;V(Vg,this,s),V(Hg,this,r);for(const{line:n,points:i}of U(Ug,this))Mf._rescale(n,o,l,e,t,n),Mf._rescale(i,o,l,e,t,i);a[2]*=e,a[3]*=t}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(Mf.svgRound(n)," ").concat(Mf.svgRound(i))}}}get defaultSVGProperties(){const e=U(Bg,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(Mf.svgRound(e[0])," ").concat(Mf.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function Yg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U($g,this);const t=U(zg,this)+e/2*U(qg,this);return U(Gg,this)%180===0?[t/U(Vg,this),t/U(Hg,this)]:[t/U(Hg,this),t/U(Vg,this)]}function Qg(){const[e,t,n,i]=U(Bg,this),[s,r]=W(Kg,this,Yg).call(this,0);return[e+s,t+r,n-2*s,i-2*r]}function Jg(){const e=V(Bg,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of U(Ug,this)){if(i.length<=12){for(let t=4,n=i.length;t<n;t+=6)pt.pointBoundingBox(i[t],i[t+1],e);continue}let t=i[4],n=i[5];for(let s=6,r=i.length;s<r;s+=6){const[r,a,o,l,c,d]=i.subarray(s,s+6);pt.bezierBoundingBox(t,n,r,a,o,l,c,d,e),t=c,n=d}}const[t,n]=W(Kg,this,Yg).call(this);e[0]=wt(e[0]-t,0,1),e[1]=wt(e[1]-n,0,1),e[2]=wt(e[2]+t,0,1),e[3]=wt(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function Zg(e){const[t,n]=W(Kg,this,Yg).call(this);V($g,this,e);const[i,s]=W(Kg,this,Yg).call(this),[r,a]=[i-t,s-n],o=U(Bg,this);return o[0]-=r,o[1]-=a,o[2]+=2*r,o[3]+=2*a,o}class ev extends cg{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Pr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new ev(this._viewParameters);return e.updateAll(this),e}}var tv=new WeakSet;class nv extends pg{constructor(e){super(o(o({},e),{},{name:"inkEditor"})),j(this,tv),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Pr.initialize(e,t),this._defaultDrawingOptions=new ev(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return tt(this,"typesMap",new Map([[ke.INK_THICKNESS,"stroke-width"],[ke.INK_COLOR,"stroke"],[ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,s){return new Og(e,t,n,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,s,r){return Xg.deserialize(e,t,n,i,s,r)}static async deserialize(e,t,n){let i=null;if(e instanceof Up){const{data:{inkLists:t,rect:n,rotation:s,id:r,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c,richText:d,contentsObj:u,creationDate:h,modificationDate:p},parent:{page:{pageNumber:f}}}=e;i=e={annotationType:xe.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:f-1,rect:n.slice(0),rotation:s,annotationElementId:r,id:r,deleted:!1,popupRef:c,richText:d,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:p}}const s=await super.deserialize(e,t,n);return s._initialData=i,e.comment&&s.setCommentData(e),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new lh(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ke.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:i}=e;this._drawingOptions=nv.getDefaultDrawingOptions({stroke:pt.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":s,"stroke-width":r}}=this,a=Object.assign(super.serialize(e),{color:Pr._colorManager.convert(i),opacity:s,thickness:r,paths:{lines:t,points:n}});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!W(tv,this,iv).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}function iv(e){const{color:t,thickness:n,opacity:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==i||e.pageIndex!==s}r(nv,"_type","ink"),r(nv,"_editorType",xe.INK),r(nv,"_defaultDrawingOptions",null);class sv extends Xg{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class rv{static extractContoursFromText(e,t,n,i,s,r){let{fontFamily:a,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const u=d.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:h,actualBoundingBoxRight:p,actualBoundingBoxAscent:f,actualBoundingBoxDescent:m,fontBoundingBoxAscent:g,fontBoundingBoxDescent:v,width:y}=d.measureText(e),b=1.5,w=Math.ceil(Math.max(Math.abs(h)+Math.abs(p)||0,y)*b),_=Math.ceil(Math.max(Math.abs(f)+Math.abs(m)||200,Math.abs(g)+Math.abs(v)||200)*b);c=new OffscreenCanvas(w,_),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=u,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,w,_),d.fillStyle="black",d.fillText(e,.5*w/2,1.5*_/2);const x=W(rv,this,fv).call(this,d.getImageData(0,0,w,_).data),k=W(rv,this,pv).call(this,x),S=W(rv,this,mv).call(this,k),A=W(rv,this,cv).call(this,x,w,_,S);return this.processDrawnLines({lines:{curves:A,width:w,height:_},pageWidth:n,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,s){const[r,a,o]=W(rv,this,gv).call(this,e),[l,c]=W(rv,this,hv).call(this,r,a,o,Math.hypot(a,o)*W(rv,this,vv)._.sigmaSFactor,W(rv,this,vv)._.sigmaR,W(rv,this,vv)._.kernelSize),d=W(rv,this,mv).call(this,c),u=W(rv,this,cv).call(this,l,a,o,d);return this.processDrawnLines({lines:{curves:u,width:a,height:o},pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:i,pageHeight:s,rotation:r,innerMargin:a,mustSmooth:o,areContours:l}=e;r%180!==0&&([i,s]=[s,i]);const{curves:c,width:d,height:u}=n,h=null!==(t=n.thickness)&&void 0!==t?t:0,p=[],f=Math.min(i/d,s/u),m=f/i,g=f/s,v=[];for(const{points:b}of c){const e=o?W(rv,this,uv).call(this,b):b;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),i=new Float32Array(3*(2===t?2:t-2));if(p.push({line:i,points:n}),2===t){n[0]=e[0]*m,n[1]=e[1]*g,i.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[s,r,a,l]=e;s*=m,r*=g,a*=m,l*=g,n.set([s,r,a,l],0),i.set([NaN,NaN,NaN,NaN,s,r],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*m,c=n[o+1]=e[o+1]*g;i.set(Mf.createBezierPoints(s,r,a,l,t,c),3*(o-2)),[s,r,a,l]=[a,l,t,c]}}if(0===p.length)return null;const y=l?new sv:new Xg;return y.build(p,i,s,1,r,l?0:h,a),{outline:y,newCurves:v,areContours:l,thickness:h,width:d,height:u}}static async compressSignature(e){let t,{outlines:n,areContours:i,thickness:s,width:r,height:a}=e,o=1/0,l=-1/0,c=0;for(const y of n){c+=y.length;for(let e=2,t=y.length;e<t;e++){const t=y[e]-y[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const d=n.length,u=8+3*d,h=new Uint32Array(u);let p=0;h[p++]=u*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*t.BYTES_PER_ELEMENT,h[p++]=0,h[p++]=r,h[p++]=a,h[p++]=i?0:1,h[p++]=Math.max(0,Math.floor(null!==s&&void 0!==s?s:0)),h[p++]=d,h[p++]=t.BYTES_PER_ELEMENT;for(const y of n)h[p++]=y.length-2,h[p++]=y[0],h[p++]=y[1];const f=new CompressionStream("deflate-raw"),m=f.writable.getWriter();await m.ready,m.write(h);const g=t.prototype.constructor;for(const y of n){const e=new g(y.length-2);for(let t=2,n=y.length;t<n;t++)e[t-2]=y[t]-y[t-2];m.write(e)}m.close();const v=await new Response(f.readable).arrayBuffer();return _t(new Uint8Array(v))}static async decompressSignature(e){try{const l=(a=e,Uint8Array.fromBase64?Uint8Array.fromBase64(a):dt(atob(a))),{readable:c,writable:d}=new DecompressionStream("deflate-raw"),u=d.getWriter();await u.ready,u.write(l).then(async()=>{await u.ready,await u.close()}).catch(()=>{});let h=null,p=0;var t,n=!1,i=!1;try{for(var s,r=function(e){var t,n,i,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new H(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(c);n=!(s=await r.next()).done;n=!1){const e=s.value;h||(h=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),h.set(e,p),p+=e.length}}catch(o){i=!0,t=o}finally{try{n&&null!=r.return&&await r.return()}finally{if(i)throw t}}const f=new Uint32Array(h.buffer,0,h.length>>2),m=f[1];if(0!==m)throw new Error("Invalid version: ".concat(m));const g=f[2],v=f[3],y=0===f[4],b=f[5],w=f[6],_=f[7],x=[],k=(8+3*w)*Uint32Array.BYTES_PER_ELEMENT;let S;switch(_){case Int8Array.BYTES_PER_ELEMENT:S=new Int8Array(h.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:S=new Int16Array(h.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:S=new Int32Array(h.buffer,k)}p=0;for(let e=0;e<w;e++){const t=f[3*e+8],n=new Float32Array(t+2);x.push(n);for(let i=0;i<2;i++)n[i]=f[3*e+8+i+1];for(let e=0;e<t;e++)n[e+2]=n[e]+S[p++]}return{areContours:y,thickness:b,outlines:x,width:g,height:v}}catch(l){return Ye("decompressSignature: ".concat(l)),null}var a}}function av(e,t,n,i){return i-=t,0===(n-=e)?i>0?0:4:1===n?i+6:2-i}function ov(e,t,n,i,s,r,a){const o=W(oe,this,av).call(this,n,i,s,r);for(let l=0;l<8;l++){const s=(-l+o-a+16)%8;if(0!==e[(n+W(oe,this,yv)._[2*s])*t+(i+W(oe,this,yv)._[2*s+1])])return s}return-1}function lv(e,t,n,i,s,r,a){const o=W(oe,this,av).call(this,n,i,s,r);for(let l=0;l<8;l++){const s=(l+o+a+16)%8;if(0!==e[(n+W(oe,this,yv)._[2*s])*t+(i+W(oe,this,yv)._[2*s+1])])return s}return-1}function cv(e,t,n,i){const s=e.length,r=new Int32Array(s);for(let c=0;c<s;c++)r[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)r[c*t]=r[c*t+t-1]=0;for(let c=0;c<t;c++)r[c]=r[t*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let e=1;e<t-1;e++){const n=c*t+e,i=r[n];if(0===i)continue;let s=c,d=e;if(1===i&&0===r[n-1])o+=1,d-=1;else{if(!(i>=1&&0===r[n+1])){1!==i&&(a=Math.abs(i));continue}o+=1,d+=1,i>1&&(a=i)}const u=[e,c],h=d===e+1,p={isHole:h,points:u,id:o,parent:0};let f;l.push(p);for(const e of l)if(e.id===a){f=e;break}f?f.isHole?p.parent=h?f.parent:a:p.parent=h?a:f.parent:p.parent=h?a:0;const m=W(oe,this,ov).call(this,r,t,c,e,s,d,0);if(-1===m){r[n]=-o,1!==r[n]&&(a=Math.abs(r[n]));continue}let g=W(oe,this,yv)._[2*m],v=W(oe,this,yv)._[2*m+1];const y=c+g,b=e+v;s=y,d=b;let w=c,_=e;for(;;){const i=W(oe,this,lv).call(this,r,t,w,_,s,d,1);g=W(oe,this,yv)._[2*i],v=W(oe,this,yv)._[2*i+1];const l=w+g,h=_+v;u.push(h,l);const p=w*t+_;if(0===r[p+1]?r[p]=-o:1===r[p]&&(r[p]=o),l===c&&h===e&&w===y&&_===b){1!==r[n]&&(a=Math.abs(r[n]));break}s=w,d=_,w=l,_=h}}}return l}function dv(e,t,n,i){if(n-t<=4){for(let s=t;s<n-2;s+=2)i.push(e[s],e[s+1]);return}const s=e[t],r=e[t+1],a=e[n-4]-s,o=e[n-3]-r,l=Math.hypot(a,o),c=a/l,d=o/l,u=c*r-d*s,h=o/a,p=1/l,f=Math.atan(h),m=Math.cos(f),g=Math.sin(f),v=p*(Math.abs(m)+Math.abs(g)),y=p*(1-v+v**2),b=Math.max(Math.atan(Math.abs(g+m)*y),Math.atan(Math.abs(g-m)*y));let w=0,_=t;for(let x=t+2;x<n-2;x+=2){const t=Math.abs(u-c*e[x+1]+d*e[x]);t>w&&(_=x,w=t)}w>(l*b)**2?(W(oe,this,dv).call(this,e,t,_+2,i),W(oe,this,dv).call(this,e,_,n,i)):i.push(s,r)}function uv(e){const t=[],n=e.length;return W(oe,this,dv).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function hv(e,t,n,i,s,r){const a=new Float32Array(r**2),o=-2*i**2,l=r>>1;for(let f=0;f<r;f++){const e=(f-l)**2;for(let t=0;t<r;t++)a[f*r+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),d=-2*s**2;for(let f=0;f<256;f++)c[f]=Math.exp(f**2/d);const u=e.length,h=new Uint8Array(u),p=new Uint32Array(256);for(let f=0;f<n;f++)for(let i=0;i<t;i++){const s=f*t+i,o=e[s];let d=0,u=0;for(let h=0;h<r;h++){const s=f+h-l;if(!(s<0||s>=n))for(let n=0;n<r;n++){const p=i+n-l;if(p<0||p>=t)continue;const f=e[s*t+p],m=a[h*r+n]*c[Math.abs(f-o)];d+=f*m,u+=m}}p[h[s]=Math.round(d/u)]++}return[h,p]}function pv(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function fv(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let a=0,o=n.length;a<o;a++){const t=n[a]=e[a<<2];i=Math.max(i,t),s=Math.min(s,t)}const r=255/(i-s);for(let a=0,o=n.length;a<o;a++)n[a]=(n[a]-s)*r;return n}function mv(e){let t,n=-1/0,i=-1/0;const s=e.findIndex(e=>0!==e);let r=s,a=s;for(t=s;t<256;t++){const s=e[t];s>n&&(t-r>i&&(i=t-r,a=t-1),n=s,r=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function gv(e){const t=e,{width:n,height:i}=e,{maxDim:s}=W(oe,this,vv)._;let r=n,a=i;if(n>s||i>s){let o=n,l=i,c=Math.log2(Math.max(n,i)/s);const d=Math.floor(c);c=c===d?d-1:d;for(let n=0;n<c;n++){r=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(r,a);n.getContext("2d").drawImage(e,0,0,o,l,0,0,r,a),o=r,l=a,e!==t&&e.close(),e=n.transferToImageBitmap()}const u=Math.min(s/r,s/a);r=Math.round(r*u),a=Math.round(a*u)}const o=new OffscreenCanvas(r,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,r,a),o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,r,a);const l=o.getImageData(0,0,r,a).data;return[W(oe,this,fv).call(this,l),r,a]}oe=rv;var vv={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},yv={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class bv extends cg{constructor(){super(),super.updateProperties({fill:Pr._defaultLineColor,"stroke-width":0})}clone(){const e=new bv;return e.updateAll(this),e}}class wv extends ev{constructor(e){super(e),super.updateProperties({stroke:Pr._defaultLineColor,"stroke-width":1})}clone(){const e=new wv(this._viewParameters);return e.updateAll(this),e}}var _v=new WeakMap,xv=new WeakMap,kv=new WeakMap,Sv=new WeakMap;class Av extends pg{constructor(e){super(o(o({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),B(this,_v,!1),B(this,xv,null),B(this,kv,null),B(this,Sv,null),this._willKeepAspectRatio=!0,V(kv,this,e.signatureData||null),V(xv,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Pr.initialize(e,t),this._defaultDrawingOptions=new bv,this._defaultDrawnSignatureOptions=new wv(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return tt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!U(xv,this)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasDescription");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(U(kv,this)){const{lines:e,mustSmooth:t,areContours:n,description:i,uuid:s,heightInPage:r}=U(kv,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=rv.processDrawnLines({lines:e,pageWidth:a,pageHeight:o,rotation:l,innerMargin:Av._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,r,i,s)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:U(xv,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){V(Sv,this,e),this.addEditToolbar()}getUuid(){return U(Sv,this)}get description(){return U(xv,this)}set description(e){V(xv,this,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:s}=U(kv,this),r=Math.max(i,s);return{areContours:t,outline:rv.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:i,height:s},pageWidth:r,pageHeight:r,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:s,y:r}=this,{outline:a}=V(kv,this,e);let o;V(_v,this,a instanceof sv),this.description=n,U(_v,this)?o=Av.getDefaultDrawingOptions():(o=Av._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[,l]=this.pageDimensions;let c=t/l;c=c>=1?.5:c,this.width*=c/this.height,this.width>=1&&(c*=.9/this.width,this.width=.9),this.height=c,this.setDims(),this.x=s,this.y=r,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return rv.process(e,t,n,i,Av._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return rv.extractContoursFromText(e,t,n,i,s,Av._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return rv.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:Av._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=Av.getDefaultDrawingOptions():(this._drawingOptions=Av._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,s=Object.assign(super.serialize(e),{isSignature:!0,areContours:U(_v,this),color:[0,0,0],thickness:U(_v,this)?0:i});return this.addComment(s),e?(s.paths={lines:t,points:n},s.uuid=U(Sv,this),s.isCopy=!0):s.lines=t,U(xv,this)&&(s.accessibilityData={type:"Figure",alt:U(xv,this)}),s}static deserializeDraw(e,t,n,i,s,r){return r.areContours?sv.deserialize(e,t,n,i,s,r):Xg.deserialize(e,t,n,i,s,r)}static async deserialize(e,t,n){var i;const s=await super.deserialize(e,t,n);return V(_v,s,e.areContours),s.description=(null===(i=e.accessibilityData)||void 0===i?void 0:i.alt)||"",V(Sv,s,e.uuid),s}}r(Av,"_type","signature"),r(Av,"_editorType",xe.SIGNATURE),r(Av,"_defaultDrawingOptions",null);var Ev=new WeakMap,Cv=new WeakMap,Mv=new WeakMap,Pv=new WeakMap,Tv=new WeakMap,Dv=new WeakMap,Nv=new WeakMap,Rv=new WeakMap,Fv=new WeakMap,Iv=new WeakMap,Lv=new WeakMap,Ov=new WeakSet;class jv extends Pr{constructor(e){super(o(o({},e),{},{name:"stampEditor"})),j(this,Ov),B(this,Ev,null),B(this,Cv,null),B(this,Mv,null),B(this,Pv,null),B(this,Tv,null),B(this,Dv,""),B(this,Nv,null),B(this,Rv,!1),B(this,Fv,null),B(this,Iv,!1),B(this,Lv,!1),V(Pv,this,e.bitmapUrl),V(Tv,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Pr.initialize(e,t)}static isHandlingMimeForPasting(e){return Ut.includes(e)}static paste(e,t){t.pasteEditor({mode:xe.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:r}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:s,height:r,channels:i.length/(s*r)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;U(Cv,this)&&(V(Ev,this,null),this._uiManager.imageManager.deleteId(U(Cv,this)),null===(e=U(Nv,this))||void 0===e||e.remove(),V(Nv,this,null),U(Fv,this)&&(clearTimeout(U(Fv,this)),V(Fv,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(U(Cv,this)&&null===U(Nv,this)&&W(Ov,this,zv).call(this),this.isAttachedToDOM||this.parent.add(this))):U(Cv,this)&&W(Ov,this,zv).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(U(Mv,this)||U(Ev,this)||U(Pv,this)||U(Tv,this)||U(Cv,this)||U(Rv,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),U(Rv,this)||(U(Ev,this)?W(Ov,this,Uv).call(this):W(Ov,this,zv).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(V(Cv,this,n),i&&V(Ev,this,i),V(Rv,this,!1),W(Ov,this,Uv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==U(Fv,this)&&clearTimeout(U(Fv,this));V(Fv,this,setTimeout(()=>{V(Fv,this,null),W(Ov,this,Hv).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:s}=U(Ev,this),r=new zt;let a=U(Ev,this),o=i,l=s,c=null;if(t){if(i>t||s>t){const e=Math.min(t/i,t/s);o=Math.floor(i*e),l=Math.floor(s*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*r.sx),n=c.height=Math.ceil(l*r.sy);U(Iv,this)||(a=W(Ov,this,Vv).call(this,e,n));const d=c.getContext("2d");d.filter=this._uiManager.hcmFilter;let u="white",h="#cfcfd8";"none"!==this._uiManager.hcmFilter?h="black":Vt.isDarkMode&&(u="#8f8f9d",h="#42414d");const p=15,f=p*r.sx,m=p*r.sy,g=new OffscreenCanvas(2*f,2*m),v=g.getContext("2d");v.fillStyle=u,v.fillRect(0,0,2*f,2*m),v.fillStyle=h,v.fillRect(0,0,f,m),v.fillRect(f,m,f,m),d.fillStyle=d.createPattern(g,"repeat"),d.fillRect(0,0,e,n),d.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let d=null;if(n){let t,n;if(r.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=U(Ev,this),i>e||s>e){const r=Math.min(e/i,e/s);t=Math.floor(i*r),n=Math.floor(s*r),U(Iv,this)||(a=W(Ov,this,Vv).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),d={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:d}}static async deserialize(e,t,n){let i=null,s=!1;if(e instanceof Kp){var r;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:d,richText:u,contentsObj:h,creationDate:p,modificationDate:f},container:m,parent:{page:{pageNumber:g}},canvas:v}=e;let y,b;v?(delete e.canvas,({id:y,bitmap:b}=n.imageManager.getFromCanvas(m.id,v)),v.remove()):(s=!0,e._hasNoCanvas=!0);const w=(null===(r=await t._structTree.getAriaAttributes("".concat(bt).concat(l)))||void 0===r?void 0:r.get("aria-label"))||"";i=e={annotationType:xe.STAMP,bitmapId:y,bitmap:b,pageIndex:g-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:w},isSvg:!1,structParent:c,popupRef:d,richText:u,comment:(null===h||void 0===h?void 0:h.str)||null,creationDate:p,modificationDate:f}}const a=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:u,accessibilityData:h}=e;s?(n.addMissingCanvas(e.id,a),V(Rv,a,!0)):d&&n.imageManager.isValidId(d)?(V(Cv,a,d),l&&V(Ev,a,l)):V(Pv,a,c),V(Iv,a,u);const[p,f]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/f,h&&(a.altTextData=h),a._initialData=i,e.comment&&a.setCommentData(e),V(Lv,a,!!i),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:U(Cv,this),isSvg:U(Iv,this)});if(this.addComment(n),e)return n.bitmapUrl=W(Ov,this,qv).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const e=W(Ov,this,Gv).call(this,n);if(e.isSame)return null;var r;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(r=this._initialData.structParent)&&void 0!==r?r:-1;return n.id=this.annotationElementId,delete n.bitmapId,n}if(null===t)return n;t.stamps||(t.stamps=new Map);const a=U(Iv,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(U(Cv,this))){if(U(Iv,this)){const e=t.stamps.get(U(Cv,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=W(Ov,this,qv).call(this,!1))}}else t.stamps.set(U(Cv,this),{area:a,serialized:n}),n.bitmap=W(Ov,this,qv).call(this,!1);return n}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}function Bv(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(V(Ev,this,e.bitmap),t||(V(Cv,this,e.id),V(Iv,this,e.isSvg)),e.file&&V(Dv,this,e.file.name),W(Ov,this,Uv).call(this)):this.remove()}function Wv(){if(V(Mv,this,null),this._uiManager.enableWaiting(!1),U(Nv,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&U(Ev,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&U(Ev,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function zv(){if(U(Cv,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(U(Cv,this)).then(e=>W(Ov,this,Bv).call(this,e,!0)).finally(()=>W(Ov,this,Wv).call(this));if(U(Pv,this)){const e=U(Pv,this);return V(Pv,this,null),this._uiManager.enableWaiting(!0),void V(Mv,this,this._uiManager.imageManager.getFromUrl(e).then(e=>W(Ov,this,Bv).call(this,e)).finally(()=>W(Ov,this,Wv).call(this)))}if(U(Tv,this)){const e=U(Tv,this);return V(Tv,this,null),this._uiManager.enableWaiting(!0),void V(Mv,this,this._uiManager.imageManager.getFromFile(e).then(e=>W(Ov,this,Bv).call(this,e)).finally(()=>W(Ov,this,Wv).call(this)))}const e=document.createElement("input");e.type="file",e.accept=Ut.join(",");const t=this._uiManager._signal;V(Mv,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),W(Ov,this,Bv).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>W(Ov,this,Wv).call(this))),e.click()}function Uv(){var e;const{div:t}=this;let{width:n,height:i}=U(Ev,this);const[s,r]=this.pageDimensions,a=.75;if(this.width)n=this.width*s,i=this.height*r;else if(n>a*s||i>a*r){const e=Math.min(a*s/n,a*r/i);n*=e,i*=e}this._uiManager.enableWaiting(!1);const o=V(Nv,this,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=n/s,this.height=i/r,this.setDims(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),W(Ov,this,Hv).call(this),U(Lv,this)||(this.parent.addUndoableEditor(this),V(Lv,this,!0)),this._reportTelemetry({action:"inserted_image"}),U(Dv,this)&&this.div.setAttribute("aria-description",U(Dv,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function Vv(e,t){const{width:n,height:i}=U(Ev,this);let s=n,r=i,a=U(Ev,this);for(;s>2*e||r>2*t;){const n=s,i=r;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(s,r);o.getContext("2d").drawImage(a,0,0,n,i,0,0,s,r),a=o.transferToImageBitmap()}return a}function Hv(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,s=new zt,r=Math.ceil(n*e*s.sx),a=Math.ceil(i*t*s.sy),o=U(Nv,this);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const l=U(Iv,this)?U(Ev,this):W(Ov,this,Vv).call(this,r,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,r,a)}function qv(e){if(e){if(U(Iv,this)){const e=this._uiManager.imageManager.getSvgUrl(U(Cv,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=U(Ev,this));return e.getContext("2d").drawImage(U(Ev,this),0,0),e.toDataURL()}if(U(Iv,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*At.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*At.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,i);return s.getContext("2d").drawImage(U(Ev,this),0,0,U(Ev,this).width,U(Ev,this).height,0,0,n,i),s.transferToImageBitmap()}return structuredClone(U(Ev,this))}function Gv(e){var t;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=e.pageIndex===n,r=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&r,isSameAltText:r}}r(jv,"_type","stamp"),r(jv,"_editorType",xe.STAMP);var $v=new WeakMap,Kv=new WeakMap,Xv=new WeakMap,Yv=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,iy=new WeakMap,sy=new WeakMap,ry=new WeakMap,ay=new WeakMap,oy=new WeakMap,ly=new WeakMap,cy=new WeakSet;class dy{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;j(this,cy),B(this,$v,void 0),B(this,Kv,!1),B(this,Xv,null),B(this,Yv,null),B(this,Qv,null),B(this,Jv,new Map),B(this,Zv,!1),B(this,ey,!1),B(this,ty,!1),B(this,ny,null),B(this,iy,null),B(this,sy,null),B(this,ry,null),B(this,ay,null),B(this,oy,-1),B(this,ly,void 0);const u=[...vy._.values()];if(!dy._initialized){dy._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),V(ly,this,t),this.pageIndex=n,this.div=i,V($v,this,r),V(Xv,this,a),this.viewport=c,V(sy,this,l),this.drawLayer=o,this._structTree=s,U(ly,this).addLayer(this)}get isEmpty(){return 0===U(Jv,this).size}get isInvisible(){return this.isEmpty&&U(ly,this).getMode()===xe.NONE}updateToolbar(e){U(ly,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U(ly,this).getMode();switch(W(cy,this,gy).call(this),e){case xe.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===xe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of vy._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=U(sy,this))||void 0===t?void 0:t.div)}setEditingState(e){U(ly,this).setEditingState(e)}addCommands(e){U(ly,this).addCommands(e)}cleanUndoStack(e){U(ly,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=U(Xv,this))||void 0===e||e.togglePointerEvents(t)}async enable(){var e;V(ty,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),null===(e=U(ay,this))||void 0===e||e.abort(),V(ay,this,null);const t=new Set;for(const i of z(cy,this,uy))i.enableEditing(),i.show(!0),i.annotationElementId&&(U(ly,this).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const n=U(Xv,this);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),U(ly,this).isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=await this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}V(ty,this,!1),U(ly,this)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(V(ey,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),U(sy,this)&&!U(ay,this)){V(ay,this,new AbortController);const e=U(ly,this).combinedSignal(U(ay,this));U(sy,this).div.addEventListener("pointerdown",e=>{const{clientX:t,clientY:n,timeStamp:i}=e;if(i-U(oy,this)>500)return void V(oy,this,i);V(oy,this,-1);const{classList:s}=this.div;s.toggle("getElements",!0);const r=document.elementsFromPoint(t,n);if(s.toggle("getElements",!1),!this.div.contains(r[0]))return;let a;const o=new RegExp("^".concat(_e,"[0-9]+$"));for(const c of r)if(o.test(c.id)){a=c.id;break}if(!a)return;const l=U(Jv,this).get(a);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(e.stopPropagation(),e.preventDefault(),l.dblclick(e))},{signal:e,capture:!0})}const e=U(Xv,this),t=[];if(e){const i=new Map,s=new Map;for(const e of z(cy,this,uy)){var n;e.disableEditing(),e.annotationElementId?null===e.serialize()?(s.set(e.annotationElementId,e),null===(n=this.getEditableAnnotation(e.annotationElementId))||void 0===n||n.show(),e.remove()):i.set(e.annotationElementId,e):t.push(e)}const r=e.getEditableAnnotations();for(const e of r){const{id:t}=e.data;if(U(ly,this).isDeletedAnnotationElement(t)){e.updateEdited({deleted:!0});continue}let n=s.get(t);n?(n.resetAnnotationElement(e),n.show(!1),e.show()):(n=i.get(t),n&&(U(ly,this).addChangedExistingAnnotation(n),n.renderAnnotationElement(e)&&n.show(!1)),e.show())}}W(cy,this,gy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of vy._.values())i.remove("".concat(s._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),null===e||void 0===e||e.updateFakeAnnotations(t),V(ey,this,!1)}getEditableAnnotation(e){var t;return(null===(t=U(Xv,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){U(ly,this).getActive()!==e&&U(ly,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=U(sy,this))&&void 0!==e&&e.div&&!U(ry,this)){V(ry,this,new AbortController);const e=U(ly,this).combinedSignal(U(ry,this));U(sy,this).div.addEventListener("pointerdown",W(cy,this,hy).bind(this),{signal:e}),U(sy,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=U(sy,this))&&void 0!==e&&e.div&&U(ry,this)&&(U(ry,this).abort(),V(ry,this,null),U(sy,this).div.classList.remove("highlighting"))}enableClick(){if(U(Yv,this))return;V(Yv,this,new AbortController);const e=U(ly,this).combinedSignal(U(Yv,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=U(Yv,this))||void 0===e||e.abort(),V(Yv,this,null)}attach(e){U(Jv,this).set(e.id,e);const{annotationElementId:t}=e;t&&U(ly,this).isDeletedAnnotationElement(t)&&U(ly,this).removeDeletedAnnotationElement(e)}detach(e){var t;U(Jv,this).delete(e.id),null===(t=U($v,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!U(ey,this)&&e.annotationElementId&&U(ly,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),U(ly,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(U(ly,this).addDeletedAnnotationElement(e),Pr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),U(ly,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!U(ty,this)),U(ly,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!U(Qv,this)&&(e._focusEventsAllowed=!1,V(Qv,this,setTimeout(()=>{V(Qv,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:U(ly,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=U($v,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getEditorByUID(e){for(const t of U(Jv,this).values())if(t.uid===e)return t;return null}getNextId(){return U(ly,this).getId()}combinedSignal(e){return U(ly,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=z(cy,this,py))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await U(ly,this).updateMode(e.mode);const{offsetX:n,offsetY:i}=W(cy,this,my).call(this),s=this.getNextId(),r=W(cy,this,fy).call(this,o({parent:this,id:s,x:n,y:i,uiManager:U(ly,this),isCentered:!0},t));r&&this.add(r)}async deserialize(e){var t,n;return await(null===(t=vy._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,U(ly,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),s=W(cy,this,fy).call(this,o({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:U(ly,this),isCentered:t},n));return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(W(cy,this,my).call(this),!0,e)}setSelected(e){U(ly,this).setSelected(e)}toggleSelected(e){U(ly,this).toggleSelected(e)}unselect(e){U(ly,this).unselect(e)}pointerup(e){var t;const{isMac:n}=ut.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!U(Zv,this))return;if(V(Zv,this,!1),null!==(t=z(cy,this,py))&&void 0!==t&&t.isDrawer&&z(cy,this,py).supportMultipleDrawings)return;if(!U(Kv,this))return void V(Kv,this,!0);const i=U(ly,this).getMode();i!==xe.STAMP&&i!==xe.SIGNATURE?this.createAndAddNewEditor(e,!1):U(ly,this).unselectAll()}pointerdown(e){var t;if(U(ly,this).getMode()===xe.HIGHLIGHT&&this.enableTextSelection(),U(Zv,this))return void V(Zv,this,!1);const{isMac:n}=ut.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(V(Zv,this,!0),null!==(t=z(cy,this,py))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const i=U(ly,this).getActive();V(Kv,this,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),U(ny,this))return void z(cy,this,py).startDrawing(this,U(ly,this),!1,e);U(ly,this).setCurrentDrawingSession(this),V(ny,this,new AbortController);const t=U(ly,this).combinedSignal(U(ny,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(V(iy,this,null),this.commitOrRemove())},{signal:t}),z(cy,this,py).startDrawing(this,U(ly,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&V(iy,this,e))}U(iy,this)&&setTimeout(()=>{var e;null===(e=U(iy,this))||void 0===e||e.focus(),V(iy,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return U(ny,this)?(U(ly,this).setCurrentDrawingSession(null),U(ny,this).abort(),V(ny,this,null),V(iy,this,null),z(cy,this,py).endDrawing(e)):null}findNewParent(e,t,n){const i=U(ly,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!U(ny,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){U(ny,this)&&z(cy,this,py).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=U(ly,this).getActive())||void 0===e?void 0:e.parent)===this&&(U(ly,this).commitOrRemove(),U(ly,this).setActiveEditor(null)),U(Qv,this)&&(clearTimeout(U(Qv,this)),V(Qv,this,null));for(const n of U(Jv,this).values()){var t;null===(t=U($v,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,U(Jv,this).clear(),U(ly,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Wt(this.div,t);for(const n of U(ly,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;U(ly,this).commitOrRemove(),W(cy,this,gy).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Wt(this.div,{rotation:i}),n!==i)for(const s of U(Jv,this).values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return U(ly,this).viewParameters.realScale}}function uy(e){return 0!==U(Jv,e).size?U(Jv,e).values():U(ly,e).getEditors(e.pageIndex)}function hy(e){U(ly,this).unselectAll();const{target:t}=e;if(t===U(sy,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&U(sy,this).div.contains(t)){const{isMac:t}=ut.platform;if(0!==e.button||e.ctrlKey&&t)return;U(ly,this).showAllEditors("highlight",!0,!0),U(sy,this).div.classList.add("free"),this.toggleDrawing(),qm.startHighlighting(this,"ltr"===U(ly,this).direction,{target:U(sy,this).div,x:e.x,y:e.y}),U(sy,this).div.addEventListener("pointerup",()=>{U(sy,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:U(ly,this)._signal}),e.preventDefault()}}function py(e){return vy._.get(U(ly,e).getMode())}function fy(e){const t=z(cy,this,py);return t?new t.prototype.constructor(e):null}function my(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,s=Math.max(0,e),r=Math.max(0,t),a=(s+Math.min(window.innerWidth,e+n))/2-e,o=(r+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function gy(){for(const e of U(Jv,this).values())e.isEmpty()&&e.remove()}r(dy,"_initialized",!1);var vy={_:new Map([yf,nv,jv,qm,Av].map(e=>[e._editorType,e]))},yy=new WeakMap,by=new WeakMap,wy=new WeakMap,_y=new WeakSet;class xy{constructor(e){let{pageIndex:t}=e;j(this,_y),B(this,yy,null),B(this,by,new Map),B(this,wy,new Map),this.pageIndex=t}setParent(e){if(U(yy,this)){if(U(yy,this)!==e){if(U(by,this).size>0)for(const t of U(by,this).values())t.remove(),e.append(t);V(yy,this,e)}}else V(yy,this,e)}static get _svgFactory(){return tt(this,"_svgFactory",new fh)}draw(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(Cy._=(t=Cy._,n=t++,t),n),a=W(_y,this,Sy).call(this),o=xy._svgFactory.createElement("defs");a.append(o);const l=xy._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(r);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),i&&U(wy,this).set(r,l);const d=s?W(_y,this,Ay).call(this,o,c):null,u=xy._svgFactory.createElement("use");return a.append(u),u.setAttribute("href","#".concat(c)),this.updateProperties(a,e),U(by,this).set(r,a),{id:r,clipPathId:"url(#".concat(d,")")}}drawOutline(e,t){var n,i;const s=(Cy._=(n=Cy._,i=n++,n),i),r=W(_y,this,Sy).call(this),a=xy._svgFactory.createElement("defs");r.append(a);const o=xy._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(s);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=xy._svgFactory.createElement("mask");a.append(e),c="mask_p".concat(this.pageIndex,"_").concat(s),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=xy._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=xy._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const d=xy._svgFactory.createElement("use");r.append(d),d.setAttribute("href","#".concat(l)),c&&d.setAttribute("mask","url(#".concat(c,")"));const u=d.cloneNode();return r.append(u),d.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(r,e),U(by,this).set(s,r),s}finalizeDraw(e,t){U(wy,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:s,path:r}=t,a="number"===typeof e?U(by,this).get(e):e;if(a){if(n&&W(_y,this,Ey).call(this,a,n),i&&ky.call(xy,a,i),s){const{classList:e}=a;for(const[t,n]of Object.entries(s))e.toggle(t,n)}if(r){const e=a.firstElementChild.firstElementChild;W(_y,this,Ey).call(this,e,r)}}}updateParent(e,t){if(t===this)return;const n=U(by,this).get(e);n&&(U(yy,t).append(n),U(by,this).delete(e),U(by,t).set(e,n))}remove(e){U(wy,this).delete(e),null!==U(yy,this)&&(U(by,this).get(e).remove(),U(by,this).delete(e))}destroy(){V(yy,this,null);for(const e of U(by,this).values())e.remove();U(by,this).clear(),U(wy,this).clear()}}function ky(e,t){let[n,i,s,r]=t;const{style:a}=e;a.top="".concat(100*i,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*s,"%"),a.height="".concat(100*r,"%")}function Sy(){const e=le._svgFactory.create(1,1,!0);return U(yy,this).append(e),e.setAttribute("aria-hidden",!0),e}function Ay(e,t){const n=le._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=le._svgFactory.createElement("use");return n.append(s),s.setAttribute("href","#".concat(t)),s.classList.add("clip"),i}function Ey(e,t){for(const[n,i]of Object.entries(t))null===i?e.removeAttribute(n):e.setAttribute(n,i)}le=xy;var Cy={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:mm},globalThis.pdfjsLib={AbortException:lt,AnnotationEditorLayer:dy,AnnotationEditorParamsType:ke,AnnotationEditorType:xe,AnnotationEditorUIManager:zi,AnnotationLayer:cf,AnnotationMode:we,AnnotationType:Re,applyOpacity:function(e,t,n,i){const s=255*(1-(i=Math.min(Math.max(null!==i&&void 0!==i?i:1,0),1)));return[e=Math.round(e*i+s),t=Math.round(t*i+s),n=Math.round(n*i+s)]},build:"50cc4adac",ColorPicker:Qu,createValidAbsoluteUrl:Ze,CSSConstants:class{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),tt(this,"commentForegroundColor",Ot(n))}},DOMSVGFactory:fh,DrawLayer:xy,FeatureTest:ut,fetchData:Et,findContrastColor:function(e,t){const n=e[0]+256*e[1]+65536*e[2]+16777216*t[0]+4294967296*t[1]+1099511627776*t[2];let i=Kt.get(n);if(i)return i;const s=new Float32Array(9),r=s.subarray(0,3),a=s.subarray(3,6);Ht(e,a);const o=s.subarray(6,9);Ht(t,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),$t(a,o,r)<c){let e,t;l?(e=a[2],t=1):(e=0,t=a[2]);const n=.005;for(;t-e>n;){const n=a[2]=(e+t)/2;l===$t(a,o,r)<c?e=n:t=n}a[2]=l?t:e}return qt(a,r),i=pt.makeHexColor(Math.round(255*r[0]),Math.round(255*r[1]),Math.round(255*r[2])),Kt.set(n,i),i},getDocument:Jd,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Pt(e))return Ye('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(e=>{try{return new URL(e)}catch(t){try{return new URL(decodeURIComponent(e))}catch(n){try{return new URL(e,"https://foo.bar")}catch(i){try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch(s){return null}}}}})(e);if(!n)return t;const i=e=>{try{let t=decodeURIComponent(e);return t.includes("/")?(t=t.split("/").at(-1),t.test(/^\.pdf$/i)?t:e):t}catch(t){return e}},s=/\.pdf$/i,r=n.pathname.split("/").at(-1);if(s.test(r))return i(r);if(n.searchParams.size>0){const e=Array.from(n.searchParams.values()).reverse();for(const n of e)if(s.test(n))return i(n);const t=Array.from(n.searchParams.keys()).reverse();for(const n of t)if(s.test(n))return i(n)}if(n.hash){const e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return i(e[0])}return t},getRGB:Ot,getUuid:yt,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:i=0}=t;const{width:s,height:r}=e.attributes.style,a=[0,0,parseInt(s),parseInt(r)];return new Ct({viewBox:a,userUnit:1,scale:n,rotation:i})},GlobalWorkerOptions:Mc,ImageKind:Ne,InvalidPDFException:rt,isDataScheme:Pt,isPdfFile:Tt,isValidExplicitDest:Ja,MathClamp:wt,noContextMenu:Rt,normalizeUnicode:function(e){return gt||(gt=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,vt=new Map([["\ufb05","\u017ft"]])),e.replaceAll(gt,(e,t,n)=>t?t.normalize("NFKC"):vt.get(n))},OPS:We,OutputScale:zt,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:au,PDFDateString:It,PDFWorker:vu,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:At,RenderingCancelledException:Mt,renderRichText:Xt,ResponseException:at,setLayerDimensions:Wt,shadow:tt,SignatureExtractor:rv,stopEvent:Ft,SupportedImageMimeTypes:Ut,TextLayer:Bd,TouchManager:Js,updateUrlHash:et,Util:pt,VerbosityLevel:Be,version:Bu,XfaLayer:kt};var My=n(1257),Py=n.n(My);Mc.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Bu,"/pdf.worker.min.js");const Ty=t=>{let{onExtract:n}=t;const[i,s]=(0,e.useState)(!1),[r,a]=(0,e.useState)(0),o=(0,e.useRef)(null);return(0,D.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 border-2 border-dashed border-blue-300",children:[(0,D.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,D.jsx)(f,{size:32,className:"text-blue-600"})}),(0,D.jsx)("h3",{className:"text-lg font-semibold text-center mb-2",children:"Importador OCR de PDFs"}),(0,D.jsx)("p",{className:"text-sm text-gray-600 text-center mb-4",children:"Carregue PDFs de documentos fiscais, contratos ou comprovantes"}),(0,D.jsx)("input",{type:"file",ref:o,onChange:async e=>{var t;const i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i){s(!0),a(0);try{const e=URL.createObjectURL(i);a(25);let t=await(async e=>{try{const t=await Jd(e).promise;let n="";for(let e=1;e<=Math.min(t.numPages,5);e++){const i=await t.getPage(e);n+=(await i.getTextContent()).items.map(e=>e.str).join(" ")+"\n"}return n}catch(t){return console.error("Erro ao extrair PDF:",t),""}})(e);a(50),t.length<200&&(t=await(async e=>{try{const t=await Jd(e).promise;let n="";for(let e=1;e<=Math.min(t.numPages,3);e++){const i=await t.getPage(e),s=document.createElement("canvas"),r=s.getContext("2d"),a=i.getViewport({scale:2});s.width=a.width,s.height=a.height,await i.render({canvasContext:r,viewport:a}).promise;const{data:{text:o}}=await Py().recognize(s,"por");n+=o+"\n"}return n}catch(t){return console.error("Erro OCR:",t),""}})(e)),a(75);const s=(e=>{var t;const n={nota_fiscal:{regex:/nota fiscal.*?(?:n[\xb0\xba]|n\xfamero)[:\s]+(\d{1,10})|nf.*?(\d{1,10})/i,type:"nota_fiscal"},contrato:{regex:/contrato.*?(?:n[\xb0\xba]|n\xfamero)[:\s]+(\S{1,20})/i,type:"contrato"},comprovante:{regex:/comprovante|recibo/i,type:"comprovante"}};let i="nota_fiscal",s=.5;n.contrato.regex.test(e)?(i="contrato",s=.8):n.comprovante.regex.test(e)&&(i="comprovante",s=.7);const r=e.match(/(?:n[\xb0\xba]|n\xfamero|n\xba)[:\s]+(\d{1,20})/i),a=(null===r||void 0===r?void 0:r[1])||"",o=e.match(/(\d{1,2})[\/\-.](\d{1,2})[\/\-.](20\d{2})/),l=o?"".concat(o[3],"-").concat(String(o[2]).padStart(2,"0"),"-").concat(String(o[1]).padStart(2,"0")):void 0,c=e.match(/(?:r\$|valor|total)[:\s]+(?:r?\$?\s*)?(\d+[.,]\d{2})/i),d=c?parseFloat(c[1].replace(".","").replace(",",".")):void 0,u=e.match(/(?:cpf|cnpj)[:\s]*(\d{3}[.\-]?\d{3}[.\-]?\d{3}[.\-]?\d{2,4})/i),h=(null===u||void 0===u||null===(t=u[1])||void 0===t?void 0:t.replace(/\D/g,""))||void 0;return a?{type:i,numero:a,data:l,valor:d,cpf_cnpj:h,confidence:s,text:e.substring(0,500)}:null})(t);s?n([s]):alert("N\xe3o foi poss\xedvel extrair informa\xe7\xf5es do PDF"),a(100)}catch(r){alert("Erro ao processar PDF: "+r.message)}finally{s(!1),a(0),URL.revokeObjectURL(url)}}},accept:"application/pdf",className:"hidden",disabled:i}),(0,D.jsx)("button",{onClick:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.click()},disabled:i,className:"w-full py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 transition",children:i?"Processando...":"Selecionar PDF"}),i&&(0,D.jsxs)("div",{className:"mt-4",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,D.jsx)(I,{size:16,className:"animate-spin"}),(0,D.jsx)("span",{className:"text-sm",children:"Processando documento..."})]}),(0,D.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,D.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(r,"%")}})})]})]})},Dy={descritor:{},contratos:[],documentos_fiscais:[],pagamentos:[],bens_moveis:[],bens_imoveis:[],empregados:[],resumo_executivo:{}},Ny=()=>{const[t,n]=(0,e.useState)(Dy),[i,s]=(0,e.useState)(!0),[r,a]=(0,e.useState)("form"),[l,c]=(0,e.useState)(!1),[d,y]=(0,e.useState)("idle"),b=(0,e.useMemo)(()=>{return{total_documentos_fiscais:((e=t).documentos_fiscais||[]).length,valor_total_documentos:(e.documentos_fiscais||[]).reduce((e,t)=>e+(t.valor_bruto||0),0),total_pagamentos:(e.pagamentos||[]).length,valor_total_pagamentos:(e.pagamentos||[]).reduce((e,t)=>e+(t.valor_pago||0),0),total_contratos:(e.contratos||[]).length,total_empregados:(e.empregados||[]).length};var e},[t]),w=(0,e.useMemo)(()=>(e=>{var t;const n=[{id:"descritor",name:"Descritor",complete:!(null===(t=e.descritor)||void 0===t||!t.tipo_documento)},{id:"contratos",name:"Contratos",complete:(e.contratos||[]).length>0},{id:"documentos_fiscais",name:"Documentos Fiscais",complete:(e.documentos_fiscais||[]).length>0},{id:"pagamentos",name:"Pagamentos",complete:(e.pagamentos||[]).length>0}],i=n.filter(e=>e.complete).length;return{sections:n,total:n.length,completed:i,percentage:Math.round(i/n.length*100)}})(t),[t]),_=(0,e.useCallback)(()=>{const e=JSON.stringify(t,null,2),n="data:application/json;charset=utf-8,"+encodeURIComponent(e),i="audesp_".concat((new Date).toISOString().split("T")[0],".json"),s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",i),s.click()},[t]),x=(0,e.useCallback)(()=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=e=>{const t=e.target.files[0],i=new FileReader;i.onload=e=>{try{const t=JSON.parse(e.target.result);n(t)}catch(t){alert("Erro ao carregar JSON: "+t.message)}},i.readAsText(t)},e.click()},[]);return(0,D.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[i&&(0,D.jsxs)("div",{className:"w-64 bg-gradient-to-b from-blue-900 to-blue-800 text-white overflow-y-auto",children:[(0,D.jsxs)("div",{className:"p-4 border-b border-blue-700",children:[(0,D.jsx)("h1",{className:"text-xl font-bold",children:"AUDESP v1.9"}),(0,D.jsx)("p",{className:"text-xs text-blue-200",children:"Presta\xe7\xe3o de Contas"})]}),(0,D.jsxs)("div",{className:"p-4 bg-blue-800",children:[(0,D.jsxs)("div",{className:"text-sm font-semibold mb-2",children:["Progresso: ",w.percentage,"%"]}),(0,D.jsx)("div",{className:"w-full bg-blue-700 rounded-full h-2",children:(0,D.jsx)("div",{className:"bg-green-400 h-2 rounded-full transition-all",style:{width:"".concat(w.percentage,"%")}})}),(0,D.jsxs)("div",{className:"text-xs text-blue-200 mt-1",children:[w.completed,"/",w.total," se\xe7\xf5es"]})]}),(0,D.jsxs)("div",{className:"border-b border-blue-700",children:[(0,D.jsx)("button",{onClick:()=>a("form"),className:"w-full text-left px-4 py-3 font-medium transition ".concat("form"===r?"bg-blue-700":"hover:bg-blue-700"),children:"\ud83d\udccb Formul\xe1rio"}),(0,D.jsx)("button",{onClick:()=>a("pdf"),className:"w-full text-left px-4 py-3 font-medium transition ".concat("pdf"===r?"bg-blue-700":"hover:bg-blue-700"),children:"\ud83d\udcc4 OCR/PDF"}),(0,D.jsx)("button",{onClick:()=>a("reports"),className:"w-full text-left px-4 py-3 font-medium transition ".concat("reports"===r?"bg-blue-700":"hover:bg-blue-700"),children:"\ud83d\udcca Relat\xf3rios"}),(0,D.jsx)("button",{onClick:()=>a("summary"),className:"w-full text-left px-4 py-3 font-medium transition ".concat("summary"===r?"bg-blue-700":"hover:bg-blue-700"),children:"\ud83d\udcc8 Resumo"}),(0,D.jsx)("button",{onClick:()=>a("json"),className:"w-full text-left px-4 py-3 font-medium transition ".concat("json"===r?"bg-blue-700":"hover:bg-blue-700"),children:" JSON"})]}),(0,D.jsxs)("div",{className:"p-4 border-b border-blue-700",children:[(0,D.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Status das Se\xe7\xf5es"}),w.sections.map(e=>(0,D.jsxs)("div",{className:"flex items-center gap-2 text-xs mb-2 p-2 bg-blue-700 rounded",children:[e.complete?(0,D.jsx)(u,{size:16,className:"text-green-300"}):(0,D.jsx)(h,{size:16,className:"text-yellow-300"}),(0,D.jsx)("span",{className:"flex-1",children:e.name})]},e.id))]}),(0,D.jsxs)("div",{className:"p-4 space-y-2",children:[(0,D.jsxs)("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white py-2 rounded font-medium transition",children:[(0,D.jsx)(p,{size:18})," Exportar JSON"]}),(0,D.jsxs)("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium transition",children:[(0,D.jsx)(f,{size:18})," Importar JSON"]}),(0,D.jsxs)("button",{onClick:()=>c(!0),disabled:"loading"===d,className:"w-full flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded font-medium transition disabled:bg-gray-400",children:[(0,D.jsx)(m,{size:18})," Transmitir"]})]})]}),(0,D.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,D.jsxs)("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center justify-between",children:[(0,D.jsx)("button",{onClick:()=>s(!i),className:"p-2 hover:bg-gray-100 rounded",children:i?(0,D.jsx)(g,{size:24}):(0,D.jsx)(v,{size:24})}),(0,D.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["form"===r&&"Formul\xe1rio de Presta\xe7\xe3o de Contas","pdf"===r&&"Importador OCR/PDF","reports"===r&&"Gerador de Relat\xf3rios","summary"===r&&"Resumo Executivo","json"===r&&"Visualiza\xe7\xe3o JSON"]}),(0,D.jsx)("div",{className:"w-24"})]}),(0,D.jsxs)("div",{className:"flex-1 overflow-auto",children:["form"===r&&(0,D.jsx)(N,{data:t,onChange:n}),"pdf"===r&&(0,D.jsx)("div",{className:"max-w-2xl mx-auto p-6",children:(0,D.jsx)(Ty,{onExtract:e=>{if(e.length>0){const i=e[0];n(o(o({},t),{},{documentos_fiscais:[...t.documentos_fiscais,{numero:i.numero,tipo:"nota_fiscal"===i.type?"Nota Fiscal":"Outro",data_emissao:i.data,valor_bruto:i.valor||0,fornecedor_cpf:i.cpf_cnpj}]})),alert("Documento importado com sucesso!")}}})}),"reports"===r&&(0,D.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,D.jsx)(F,{data:t})}),"summary"===r&&(0,D.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow m-4",children:[(0,D.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Resumo Executivo"}),(0,D.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[(0,D.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,D.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:"Documentos Fiscais"}),(0,D.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:b.total_documentos_fiscais}),(0,D.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Total: R$ ",b.valor_total_documentos.toFixed(2)]})]}),(0,D.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,D.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:"Pagamentos"}),(0,D.jsx)("div",{className:"text-2xl font-bold text-green-600",children:b.total_pagamentos}),(0,D.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Total: R$ ",b.valor_total_pagamentos.toFixed(2)]})]}),(0,D.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,D.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:"Contratos"}),(0,D.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:b.total_contratos})]}),(0,D.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,D.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:"Bens M\xf3veis"}),(0,D.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:b.total_bens_moveis||0})]}),(0,D.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[(0,D.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:"Bens Im\xf3veis"}),(0,D.jsx)("div",{className:"text-2xl font-bold text-red-600",children:b.total_bens_imoveis||0})]}),(0,D.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[(0,D.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:"Empregados"}),(0,D.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:b.total_empregados})]})]}),(0,D.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,D.jsx)("h3",{className:"font-semibold mb-3",children:"Informa\xe7\xf5es do Descritor"}),t.descritor&&Object.keys(t.descritor).length>0?(0,D.jsx)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:Object.entries(t.descritor).map(e=>{let[t,n]=e;return(0,D.jsxs)("div",{children:[(0,D.jsxs)("span",{className:"font-medium text-gray-700",children:[t,":"]}),(0,D.jsx)("span",{className:"text-gray-600 ml-2",children:String(n)})]},t)})}):(0,D.jsx)("p",{className:"text-gray-500 italic",children:"Nenhuma informa\xe7\xe3o preenchida"})]})]}),"json"===r&&(0,D.jsx)("div",{className:"p-4",children:(0,D.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,D.jsx)("h2",{className:"text-lg font-bold mb-4",children:"JSON Completo"}),(0,D.jsx)("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-xs border border-gray-300",children:JSON.stringify(t,null,2)}),(0,D.jsx)("button",{onClick:()=>navigator.clipboard.writeText(JSON.stringify(t,null,2)),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700",children:"Copiar para Clipboard"})]})})]})]}),l&&(0,D.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,D.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,D.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Transmitir Presta\xe7\xe3o de Contas"}),"idle"===d&&(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium mb-1",children:"CPF"}),(0,D.jsx)("input",{type:"text",placeholder:"Seu CPF",className:"w-full px-3 py-2 border rounded"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Senha"}),(0,D.jsx)("input",{type:"password",placeholder:"Sua senha",className:"w-full px-3 py-2 border rounded"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Ambiente"}),(0,D.jsxs)("select",{className:"w-full px-3 py-2 border rounded",children:[(0,D.jsx)("option",{children:"Piloto"}),(0,D.jsx)("option",{children:"Produ\xe7\xe3o"})]})]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded font-medium hover:bg-gray-400",children:"Cancelar"}),(0,D.jsx)("button",{onClick:async()=>{y("loading");const e=await(async(e,t)=>{try{var n;if(null===(n=e.descritor)||void 0===n||!n.municipio)return{success:!1,message:"Descritor incompleto",errors:["Munic\xedpio n\xe3o informado"],timestamp:(new Date).toISOString()};if(!e.documentos_fiscais||0===e.documentos_fiscais.length)return{success:!1,message:"Nenhum documento fiscal informado",errors:["Pelo menos um documento fiscal \xe9 necess\xe1rio"],timestamp:(new Date).toISOString()};if("undefined"!==typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname))return{success:!0,message:"Transmiss\xe3o simulada com sucesso",receipt:"REC-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(7).toUpperCase()),timestamp:(new Date).toISOString()};const i=await fetch("/api/audesp/transmit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(btoa("".concat(t.cpf,":").concat(t.password)))},body:JSON.stringify({data:e,environment:t.environment})});if(!i.ok){const e=await i.json();return{success:!1,message:e.message||"Erro na transmiss\xe3o",errors:e.errors||[i.statusText],timestamp:(new Date).toISOString()}}const s=await i.json();return{success:!0,message:s.message||"Transmiss\xe3o realizada com sucesso",receipt:s.receipt,timestamp:(new Date).toISOString()}}catch(i){return{success:!1,message:"Erro ao transmitir",errors:[i.message],timestamp:(new Date).toISOString()}}})(t,{cpf:"00000000000",password:"demo",environment:"piloto"});y(e.success?"success":"error")},className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded font-medium hover:bg-purple-700",children:"Transmitir"})]})]}),"loading"===d&&(0,D.jsxs)("div",{className:"text-center py-6",children:[(0,D.jsx)("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full"}),(0,D.jsx)("p",{className:"mt-4 text-gray-600",children:"Transmitindo..."})]}),"success"===d&&(0,D.jsxs)("div",{className:"text-center py-6",children:[(0,D.jsx)(u,{size:48,className:"mx-auto text-green-600 mb-4"}),(0,D.jsx)("p",{className:"font-semibold",children:"Transmiss\xe3o realizada com sucesso!"}),(0,D.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Seu recibo foi gerado"}),(0,D.jsx)("button",{onClick:()=>{c(!1),y("idle")},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700",children:"Fechar"})]}),"error"===d&&(0,D.jsxs)("div",{className:"text-center py-6",children:[(0,D.jsx)(h,{size:48,className:"mx-auto text-red-600 mb-4"}),(0,D.jsx)("p",{className:"font-semibold",children:"Erro na transmiss\xe3o"}),(0,D.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Verifique os dados e tente novamente"}),(0,D.jsx)("button",{onClick:()=>y("idle"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded font-medium hover:bg-blue-700",children:"Voltar"})]})]})})]})},Ry=document.getElementById("root");if(!Ry)throw new Error("Could not find root element to mount to");t.createRoot(Ry).render((0,D.jsx)(e.StrictMode,{children:(0,D.jsx)(Ny,{})}))})()})();
//# sourceMappingURL=main.6b6e14ba.js.map