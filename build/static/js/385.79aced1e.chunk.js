"use strict";(self.webpackChunkaudesp_connect_phase_v=self.webpackChunkaudesp_connect_phase_v||[]).push([[385],{2750(e,s,t){t.d(s,{D0:()=>c,MG:()=>i,T6:()=>d,VR:()=>l,X3:()=>n});var a=t(2555),r=(t(5043),t(3519)),o=t(579);const l={INPUT:"w-full h-10 px-3 rounded-md border border-slate-300 text-sm text-slate-700 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-all placeholder:text-slate-400 disabled:bg-slate-50 disabled:text-slate-500",CHECKBOX:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer transition-colors",LABEL:"block text-xs font-bold text-slate-500 uppercase mb-1.5 tracking-wider",SECTION:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-6 animate-in fade-in slide-in-from-bottom-2 duration-500",BTN_ADD:"h-9 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium shadow-sm transition-colors flex items-center gap-2 cursor-pointer",BTN_REMOVE:"text-red-500 hover:text-red-700 text-xs font-bold uppercase tracking-wide transition-colors px-2 py-1 rounded hover:bg-red-50 cursor-pointer",BTN_SUB:"h-7 px-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-xs font-bold",HEADER_TITLE:"text-xl font-bold text-slate-800",HEADER_DIVIDER:"flex justify-between items-center mb-6 pb-4 border-b border-slate-100",GRID_CONTAINER:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",FLEX_ROW_CENTER:"flex items-center gap-3"},n=e=>{let{title:s,children:t}=e;return(0,o.jsxs)("div",{className:l.HEADER_DIVIDER,children:[(0,o.jsx)("h2",{className:l.HEADER_TITLE,children:s}),(0,o.jsx)("div",{className:"flex gap-2",children:t})]})},i=e=>{let{label:s,error:t,children:a}=e;return(0,o.jsxs)("div",{className:"mb-1",children:[(0,o.jsx)("label",{className:l.LABEL,children:s}),a,t&&(0,o.jsx)("div",{className:"text-red-600 text-[10px] font-bold uppercase mt-1 animate-pulse",children:t})]})};function d(e){let{title:s,items:t,newItemTemplate:i,onAdd:d,onRemove:c,onUpdate:p,renderItem:m,ocrSection:u,onOcrData:x}=e;return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)(n,{title:s,children:(0,o.jsx)("button",{onClick:()=>d(i),className:l.BTN_ADD,children:"+ Adicionar Item"})}),u&&(0,o.jsx)(r.O,{section:u,onDataExtracted:e=>{e&&("relacao_empregados"===u&&e.empregados&&Array.isArray(e.empregados)?e.empregados.forEach(e=>d(e)):x?x(e):d((0,a.A)((0,a.A)({},i),e)))}}),t&&t.length>0?t.map((e,s)=>(0,o.jsxs)("div",{className:l.SECTION+" relative border-l-4 border-l-slate-400",children:[(0,o.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,o.jsx)("button",{onClick:()=>c(s),className:l.BTN_REMOVE,children:"\ud83d\uddd1 Remover"})}),(0,o.jsx)("div",{className:"pt-2",children:m(e,s,(e,t)=>p(s,e,t))})]},s)):(0,o.jsx)("div",{className:"text-center p-8 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50",children:(0,o.jsx)("p",{className:"text-slate-400 text-sm font-medium",children:"Nenhum registro adicionado."})})]})}const c=e=>{let{label:s,value:t,onChange:a,type:r="text",error:n,options:d}=e;return(0,o.jsx)(i,{label:s,error:n,children:d?(0,o.jsx)("select",{className:l.INPUT,value:t,onChange:e=>a(e.target.value),children:d.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,o.jsx)("input",{type:r,className:l.INPUT,value:t,onChange:e=>a("number"===r?Number(e.target.value):e.target.value),step:"number"===r?"0.01":void 0})})}},3424(e,s,t){t.d(s,{Zm:()=>l});const a=e=>{if(!e)return"";return String(e).replace(/\D/g,"")},r=e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const s=e.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);if(s){const e=s[1].padStart(2,"0"),t=s[2].padStart(2,"0"),a=s[3];return"".concat(a,"-").concat(t,"-").concat(e)}return e},o=e=>{if("number"===typeof e)return e;if(!e)return 0;let s=String(e);s.includes(",")&&!s.includes("US")&&(s=s.replace(/\./g,"").replace(",",".")),s=s.replace(/[^\d.-]/g,"");const t=parseFloat(s);return isNaN(t)?0:t};function l(e){if(Array.isArray(e))return e.map(e=>l(e));if("object"===typeof e&&null!==e){const s={};for(const t in e){const n=e[t];t.includes("cpf")||t.includes("cnpj")||t.includes("documento_numero")?s[t]=a(n):t.includes("data")||"vigencia_data_inicial"===t||"vigencia_data_final"===t?s[t]=r(n):t.includes("valor")||t.includes("saldo")||t.includes("remuneracao")||t.includes("montante")?s[t]=o(n):s[t]="object"===typeof n?l(n):n}return s}return e}},3519(e,s,t){t.d(s,{O:()=>i});var a=t(5043),r=t(7756),o=t(3424);const l=new r.M4({apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_KEY});var n=t(579);const i=e=>{let{section:s,onDataExtracted:t}=e;const[i,d]=(0,a.useState)(!1),[c,p]=(0,a.useState)(null);return(0,n.jsxs)("div",{className:"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-sm font-bold text-indigo-800 flex items-center gap-2",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"OCR Inteligente (Gemini 2.0)"]}),(0,n.jsxs)("p",{className:"text-xs text-indigo-600 mt-1",children:["Extra\xe7\xe3o autom\xe1tica para se\xe7\xe3o: ",(0,n.jsx)("strong",{children:s})]})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"file",accept:"image/*,application/pdf",onChange:async e=>{if(e.target.files&&e.target.files[0]){const a=e.target.files[0];d(!0),p(null);const n=new FileReader;n.onloadend=async()=>{try{const e=n.result.split(",")[1],i=a.type,d=await async function(e,s,t){let a="Analyze this document for Audesp Phase V. Extract data strictly to JSON. Dates YYYY-MM-DD. Numbers as floats.",n=r.ZU.OBJECT,i={};switch(t){case"documentos_fiscais":a+=" Extract invoices (Notas Fiscais).",i={documentos_fiscais:{type:r.ZU.ARRAY,items:{type:r.ZU.OBJECT,properties:{numero:{type:r.ZU.STRING},data_emissao:{type:r.ZU.STRING},valor_bruto:{type:r.ZU.NUMBER},credor:{type:r.ZU.OBJECT,properties:{documento_numero:{type:r.ZU.STRING},nome:{type:r.ZU.STRING}}},descricao:{type:r.ZU.STRING}}}}};break;case"contratos":a+=" Extract contracts.",i={contratos:{type:r.ZU.ARRAY,items:{type:r.ZU.OBJECT,properties:{numero:{type:r.ZU.STRING},data_assinatura:{type:r.ZU.STRING},valor_montante:{type:r.ZU.NUMBER},objeto:{type:r.ZU.STRING},credor:{type:r.ZU.OBJECT,properties:{documento_numero:{type:r.ZU.STRING},nome:{type:r.ZU.STRING}}}}}}};break;case"pagamentos":a+=" Extract payments (comprovantes, extratos).",i={pagamentos:{type:r.ZU.ARRAY,items:{type:r.ZU.OBJECT,properties:{pagamento_data:{type:r.ZU.STRING},pagamento_valor:{type:r.ZU.NUMBER},identificacao_documento_fiscal:{type:r.ZU.OBJECT,properties:{numero:{type:r.ZU.STRING}}}}}}};break;case"empenhos":a+=" Extract commitments (Empenhos).",i={empenhos:{type:r.ZU.ARRAY,items:{type:r.ZU.OBJECT,properties:{numero:{type:r.ZU.STRING},data_emissao:{type:r.ZU.STRING},valor:{type:r.ZU.NUMBER},historico:{type:r.ZU.STRING}}}}};break;case"relacao_empregados":a+=" Extract payroll (Folha de Pagamento).",i={relacao_empregados:{type:r.ZU.ARRAY,items:{type:r.ZU.OBJECT,properties:{cpf:{type:r.ZU.STRING},data_admissao:{type:r.ZU.STRING},salario_contratual:{type:r.ZU.NUMBER},cbo:{type:r.ZU.STRING}}}}};break;default:a+=" Extract key fields.",i={info:{type:r.ZU.STRING}}}try{const t=await l.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:s,data:e}},{text:a}]},config:{responseMimeType:"application/json",responseSchema:{type:n,properties:i}}});return t.text?(0,o.Zm)(JSON.parse(t.text)):null}catch(c){throw console.error("OCR Service Error:",c),c}}(e,i,s);d?t(d):p("OCR: N\xe3o foi poss\xedvel identificar dados estruturados neste documento.")}catch(e){p("Erro no processamento IA. Verifique conex\xe3o ou tente outro arquivo."),console.error(e)}finally{d(!1)}},n.readAsDataURL(a)}},disabled:i,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,n.jsx)("button",{disabled:i,className:"px-4 py-2 rounded text-sm font-medium shadow transition-colors ".concat(i?"bg-indigo-300":"bg-indigo-600 hover:bg-indigo-700"," text-white"),children:i?"Lendo Documento...":"Upload PDF/Imagem"})]})]}),c&&(0,n.jsx)("p",{className:"text-red-600 text-xs mt-2 font-medium",children:c})]})}},5385(e,s,t){t.d(s,{Dashboard:()=>o});t(5043);var a=t(2750),r=t(579);const o=e=>{var s,t,o,l,n,i,d,c,p;let{data:m,sectionStatus:u,onNavigate:x}=e;const h=((null===(s=m.receitas)||void 0===s||null===(t=s.repasses_recebidos)||void 0===t?void 0:t.reduce((e,s)=>e+(s.valor||0),0))||0)+(((null===(o=m.receitas)||void 0===o||null===(l=o.outras_receitas)||void 0===l?void 0:l.reduce((e,s)=>e+(s.valor||0),0))||0)+((null===(n=m.receitas)||void 0===n?void 0:n.receitas_aplic_financ_repasses_publicos_municipais)||0)+((null===(i=m.receitas)||void 0===i?void 0:i.receitas_aplic_financ_repasses_publicos_estaduais)||0)+((null===(d=m.receitas)||void 0===d?void 0:d.receitas_aplic_financ_repasses_publicos_federais)||0)),g=((null===(c=m.pagamentos)||void 0===c?void 0:c.reduce((e,s)=>e+(s.pagamento_valor||0),0))||0)+((null===(p=m.devolucoes)||void 0===p?void 0:p.reduce((e,s)=>e+(s.valor||0),0))||0),b=h-g,v=["descritor","codigo_ajuste","dados_gerais","responsaveis","empenhos","contratos","documentos_fiscais","pagamentos","repasses","receitas","glosas","ajustes_saldo","descontos","devolucoes","disponibilidades","relatorio_atividades","relatorio_gov","relacao_empregados","servidores_cedidos","relacao_bens","demonstracoes","publicacoes","declaracoes","transparencia","parecer"],N=v.length,f=Object.values(u).filter(e=>"valid"===e.status).length,_=Math.round(f/N*100);return(0,r.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[(0,r.jsx)("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Progresso do Preenchimento"}),(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsxs)("span",{className:"text-3xl font-bold text-slate-800",children:[_,"%"]}),(0,r.jsxs)("span",{className:"text-sm text-slate-500 mb-1",children:[f,"/",N," Blocos"]})]}),(0,r.jsx)("div",{className:"w-full bg-slate-100 h-2 mt-3 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"bg-blue-600 h-full transition-all duration-1000",style:{width:"".concat(_,"%")}})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[(0,r.jsx)("h3",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2",children:"Total Receitas"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-slate-800",children:h.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),(0,r.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"Repasses + Rendimentos"})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200",children:[(0,r.jsx)("h3",{className:"text-xs font-bold text-red-500 uppercase tracking-wider mb-2",children:"Total Despesas"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-slate-800",children:g.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),(0,r.jsx)("p",{className:"text-[10px] text-slate-400 mt-1",children:"Pagamentos + Devolu\xe7\xf5es"})]}),(0,r.jsxs)("div",{className:"p-6 rounded-lg shadow-sm border ".concat(b>=0?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"),children:[(0,r.jsx)("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Saldo Final Estimado"}),(0,r.jsx)("span",{className:"text-2xl font-bold ".concat(b>=0?"text-blue-700":"text-red-700"),children:b.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),(0,r.jsx)("p",{className:"text-[10px] text-slate-500 mt-1",children:"Calculado automaticamente"})]})]}),(0,r.jsxs)("div",{className:a.VR.SECTION,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:a.VR.HEADER_TITLE,children:"Status dos Blocos"}),(0,r.jsxs)("div",{className:"flex gap-4 text-xs font-medium",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Completo"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Inv\xe1lido/Pendente"]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-slate-300"})," Vazio (Opcional)"]})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:v.map(e=>{const s=u[e];let t="bg-slate-50 border-slate-200 text-slate-400",a="\u26aa";"valid"===(null===s||void 0===s?void 0:s.status)?(t="bg-green-50 border-green-200 text-green-800 hover:bg-green-100",a="\u2705"):"invalid"===(null===s||void 0===s?void 0:s.status)&&(t="bg-red-50 border-red-200 text-red-800 hover:bg-red-100",a="\u26a0\ufe0f");return(0,r.jsxs)("button",{onClick:()=>x(e),className:"p-3 rounded border text-left transition-all ".concat(t," relative group"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("span",{className:"font-bold text-xs uppercase tracking-wide opacity-70",children:"Se\xe7\xe3o"}),(0,r.jsx)("span",{children:a})]}),(0,r.jsx)("div",{className:"font-semibold text-sm mt-1 truncate",children:{descritor:"Descritor",codigo_ajuste:"C\xf3digo Ajuste",dados_gerais:"Dados Gerais",responsaveis:"Respons\xe1veis",empenhos:"Empenhos",contratos:"Contratos",documentos_fiscais:"Docs Fiscais",pagamentos:"Pagamentos",repasses:"Repasses",receitas:"Receitas",glosas:"Glosas",ajustes_saldo:"Ajustes Saldo",descontos:"Descontos",devolucoes:"Devolu\xe7\xf5es",disponibilidades:"Disponibilidades",relatorio_atividades:"Rel. Atividades",relatorio_gov:"Rel. Governo",relacao_empregados:"Empregados",servidores_cedidos:"Cedidos",relacao_bens:"Bens",demonstracoes:"Dem. Cont\xe1beis",publicacoes:"Publica\xe7\xf5es",declaracoes:"Declara\xe7\xf5es",transparencia:"Transpar\xeancia",parecer:"Parecer"}[e]||e}),(null===s||void 0===s?void 0:s.errors.length)>0&&(0,r.jsxs)("div",{className:"hidden group-hover:block absolute bottom-full left-0 w-full bg-slate-800 text-white text-[10px] p-2 rounded mb-2 z-10 shadow-lg",children:[s.errors[0]," ",s.errors.length>1&&"(+".concat(s.errors.length-1,")")]})]},e)})})]})]})}}}]);
//# sourceMappingURL=385.79aced1e.chunk.js.map