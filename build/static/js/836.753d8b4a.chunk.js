"use strict";(self.webpackChunkaudesp_connect_phase_v=self.webpackChunkaudesp_connect_phase_v||[]).push([[836],{836(e,a,s){s.d(a,{FormSections:()=>$});var o=s(5043),t=s(2750),r=s(579);const n=e=>(e||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),i=e=>{if(!e)return"-";const[a,s,o]=e.split("-");return"".concat(o,"/").concat(s,"/").concat(a)},c=e=>{var a,s,o,c,l,d;let{data:m,onDownloadJson:p}=e;const u=(null===(a=m.relacao_empregados)||void 0===a?void 0:a.reduce((e,a)=>{var s;return e+((null===(s=a.periodos_remuneracao)||void 0===s?void 0:s.reduce((e,a)=>e+a.remuneracao_bruta,0))||0)},0))||0,x=(null===(s=m.contratos)||void 0===s?void 0:s.reduce((e,a)=>e+a.valor_montante,0))||0,b=(null===(o=m.documentos_fiscais)||void 0===o?void 0:o.reduce((e,a)=>e+a.valor_bruto,0))||0,h=(null===(c=m.pagamentos)||void 0===c?void 0:c.reduce((e,a)=>e+a.pagamento_valor,0))||0,v=(null===(l=m.receitas)||void 0===l||null===(d=l.repasses_recebidos)||void 0===d?void 0:d.reduce((e,a)=>e+a.valor,0))||0;return(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden animate-in fade-in duration-500 max-w-5xl mx-auto border border-slate-200 print:shadow-none print:border-none",children:[(0,r.jsxs)("div",{className:"bg-slate-800 text-white p-6 flex justify-between items-center print:hidden",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Relat\xf3rio de Confer\xeancia"}),(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"Espelho da Presta\xe7\xe3o de Contas - Audesp Fase V"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>window.print(),className:"bg-slate-600 hover:bg-slate-500 px-4 py-2 rounded text-sm font-bold transition-colors",children:"\ud83d\udda8\ufe0f Imprimir"}),(0,r.jsx)("button",{onClick:p,className:t.VR.BTN_ADD,children:"\u2b07\ufe0f Baixar JSON"})]})]}),(0,r.jsxs)("div",{className:"p-8 print:p-0 font-serif text-slate-900 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center border-b-2 border-slate-800 pb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold uppercase tracking-wide",children:"Presta\xe7\xe3o de Contas"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:m.descritor.tipo_documento}),(0,r.jsxs)("div",{className:"mt-4 flex justify-center gap-8 text-sm",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Entidade:"})," ",m.descritor.entidade]}),(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Munic\xedpio:"})," ",m.descritor.municipio]}),(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Compet\xeancia:"})," ",m.descritor.mes,"/",m.descritor.ano]}),(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"C\xf3digo Ajuste:"})," ",m.codigo_ajuste||"N/A"]})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h4",{className:"bg-slate-100 p-2 font-bold uppercase text-sm border-l-4 border-slate-800 mb-4",children:"1. Resumo Financeiro"}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"p-3 border rounded",children:[(0,r.jsx)("span",{className:"block text-xs uppercase text-slate-500",children:"Repasses Recebidos"}),(0,r.jsx)("span",{className:"block font-bold text-lg",children:n(v)})]}),(0,r.jsxs)("div",{className:"p-3 border rounded",children:[(0,r.jsx)("span",{className:"block text-xs uppercase text-slate-500",children:"Total Contratado"}),(0,r.jsx)("span",{className:"block font-bold text-lg",children:n(x)})]}),(0,r.jsxs)("div",{className:"p-3 border rounded",children:[(0,r.jsx)("span",{className:"block text-xs uppercase text-slate-500",children:"Notas Fiscais"}),(0,r.jsx)("span",{className:"block font-bold text-lg",children:n(b)})]}),(0,r.jsxs)("div",{className:"p-3 border rounded",children:[(0,r.jsx)("span",{className:"block text-xs uppercase text-slate-500",children:"Pagamentos Efetuados"}),(0,r.jsx)("span",{className:"block font-bold text-lg",children:n(h)})]})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("h4",{className:"bg-slate-100 p-2 font-bold uppercase text-sm border-l-4 border-slate-800 mb-2 flex justify-between",children:[(0,r.jsx)("span",{children:"2. Rela\xe7\xe3o de Empregados"}),(0,r.jsxs)("span",{className:"text-xs font-normal",children:["Total Folha: ",n(u)]})]}),m.relacao_empregados&&m.relacao_empregados.length>0?(0,r.jsxs)("table",{className:"w-full text-xs text-left",children:[(0,r.jsx)("thead",{className:"bg-slate-50 border-b",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-2",children:"CPF"}),(0,r.jsx)("th",{className:"p-2",children:"Admiss\xe3o"}),(0,r.jsx)("th",{className:"p-2",children:"CBO"}),(0,r.jsx)("th",{className:"p-2",children:"Sal\xe1rio Contratual"}),(0,r.jsx)("th",{className:"p-2",children:"Per\xedodos (M\xeas/Valor)"})]})}),(0,r.jsx)("tbody",{children:m.relacao_empregados.map((e,a)=>{var s,o;return(0,r.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,r.jsx)("td",{className:"p-2",children:(o=e.cpf,o||"-")}),(0,r.jsx)("td",{className:"p-2",children:i(e.data_admissao)}),(0,r.jsx)("td",{className:"p-2",children:e.cbo}),(0,r.jsx)("td",{className:"p-2",children:n(e.salario_contratual)}),(0,r.jsx)("td",{className:"p-2",children:null===(s=e.periodos_remuneracao)||void 0===s?void 0:s.map((e,a)=>(0,r.jsxs)("div",{children:["M\xeas ",e.mes,": ",n(e.remuneracao_bruta)]},a))})]},a)})})]}):(0,r.jsx)("p",{className:"text-xs text-slate-500 italic p-2",children:"Nenhum registro."})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h4",{className:"bg-slate-100 p-2 font-bold uppercase text-sm border-l-4 border-slate-800 mb-2",children:"3. Documentos Fiscais"}),m.documentos_fiscais&&m.documentos_fiscais.length>0?(0,r.jsxs)("table",{className:"w-full text-xs text-left",children:[(0,r.jsx)("thead",{className:"bg-slate-50 border-b",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-2",children:"N\xfamero"}),(0,r.jsx)("th",{className:"p-2",children:"Emiss\xe3o"}),(0,r.jsx)("th",{className:"p-2",children:"Credor"}),(0,r.jsx)("th",{className:"p-2",children:"Descri\xe7\xe3o"}),(0,r.jsx)("th",{className:"p-2 text-right",children:"Valor"})]})}),(0,r.jsx)("tbody",{children:m.documentos_fiscais.map((e,a)=>{var s,o;return(0,r.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,r.jsx)("td",{className:"p-2 font-bold",children:e.numero}),(0,r.jsx)("td",{className:"p-2",children:i(e.data_emissao)}),(0,r.jsxs)("td",{className:"p-2",children:[null===(s=e.credor)||void 0===s?void 0:s.nome," ",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-[10px] text-slate-500",children:null===(o=e.credor)||void 0===o?void 0:o.documento_numero})]}),(0,r.jsx)("td",{className:"p-2 max-w-[200px] truncate",children:e.descricao}),(0,r.jsx)("td",{className:"p-2 text-right font-mono",children:n(e.valor_bruto)})]},a)})})]}):(0,r.jsx)("p",{className:"text-xs text-slate-500 italic p-2",children:"Nenhum registro."})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h4",{className:"bg-slate-100 p-2 font-bold uppercase text-sm border-l-4 border-slate-800 mb-2",children:"4. Pagamentos"}),m.pagamentos&&m.pagamentos.length>0?(0,r.jsxs)("table",{className:"w-full text-xs text-left",children:[(0,r.jsx)("thead",{className:"bg-slate-50 border-b",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-2",children:"Data"}),(0,r.jsx)("th",{className:"p-2",children:"NF Vinculada"}),(0,r.jsx)("th",{className:"p-2",children:"Meio Pgto"}),(0,r.jsx)("th",{className:"p-2 text-right",children:"Valor Pago"})]})}),(0,r.jsx)("tbody",{children:m.pagamentos.map((e,a)=>{var s;return(0,r.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,r.jsx)("td",{className:"p-2",children:i(e.pagamento_data)}),(0,r.jsx)("td",{className:"p-2",children:(null===(s=e.identificacao_documento_fiscal)||void 0===s?void 0:s.numero)||"N/A"}),(0,r.jsxs)("td",{className:"p-2",children:[1===e.meio_pagamento_tipo?"Cheque":2===e.meio_pagamento_tipo?"Transf/Pix":"Esp\xe9cie",e.numero_transacao&&(0,r.jsxs)("span",{className:"block text-[10px] text-slate-500",children:["Tx: ",e.numero_transacao]})]}),(0,r.jsx)("td",{className:"p-2 text-right font-mono",children:n(e.pagamento_valor)})]},a)})})]}):(0,r.jsx)("p",{className:"text-xs text-slate-500 italic p-2",children:"Nenhum registro."})]}),(0,r.jsx)("section",{className:"mt-12 pt-8 border-t break-inside-avoid",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-16",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"border-b border-black mb-2 h-8"}),(0,r.jsx)("p",{className:"font-bold text-sm",children:"Respons\xe1vel Legal"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Assinatura"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"border-b border-black mb-2 h-8"}),(0,r.jsx)("p",{className:"font-bold text-sm",children:"Contador Respons\xe1vel"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"CRC/Assinatura"})]})]})}),(0,r.jsxs)("div",{className:"text-[10px] text-slate-400 text-center mt-8",children:["Gerado via Audesp Connect Phase V \u2022 ",(new Date).toLocaleString()]})]})]})},l=e=>{let{data:a,updateField:s}=e;return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"1. Descritor da Presta\xe7\xe3o"}),(0,r.jsx)(t.D0,{label:"Tipo de Documento",value:a.descritor.tipo_documento,onChange:e=>s("descritor.tipo_documento",e),options:[{value:"Presta\xe7\xe3o de Contas de Conv\xeanio",label:"Presta\xe7\xe3o de Contas de Conv\xeanio"},{value:"Presta\xe7\xe3o de Contas de Contrato de Gest\xe3o",label:"Presta\xe7\xe3o de Contas de Contrato de Gest\xe3o"},{value:"Presta\xe7\xe3o de Contas de Termo de Parceria",label:"Presta\xe7\xe3o de Contas de Termo de Parceria"},{value:"Presta\xe7\xe3o de Contas de Termo de Fomento",label:"Presta\xe7\xe3o de Contas de Termo de Fomento"},{value:"Presta\xe7\xe3o de Contas de Termo de Colabora\xe7\xe3o",label:"Presta\xe7\xe3o de Contas de Termo de Colabora\xe7\xe3o"},{value:"Declara\xe7\xe3o Negativa",label:"Declara\xe7\xe3o Negativa"}]}),(0,r.jsxs)("div",{className:t.VR.GRID_CONTAINER+" mt-4",children:[(0,r.jsx)(t.D0,{label:"Munic\xedpio (C\xf3digo IBGE)",type:"number",value:a.descritor.municipio,onChange:e=>s("descritor.municipio",e)}),(0,r.jsx)(t.D0,{label:"Entidade (C\xf3digo TCESP)",type:"number",value:a.descritor.entidade,onChange:e=>s("descritor.entidade",e)}),(0,r.jsx)(t.D0,{label:"Ano de Refer\xeancia",type:"number",value:a.descritor.ano,onChange:e=>s("descritor.ano",e)}),(0,r.jsx)(t.D0,{label:"M\xeas de Refer\xeancia",type:"number",value:a.descritor.mes,onChange:e=>s("descritor.mes",e)})]}),(0,r.jsx)("p",{className:"mt-4 text-xs text-slate-500 italic bg-blue-50 p-2 rounded",children:"Certifique-se de que o C\xf3digo da Entidade e o Munic\xedpio correspondam exatamente ao seu cadastro no TCESP para evitar rejei\xe7\xe3o do lote."})]})},d=e=>{let{data:a,updateField:s}=e;return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"2. C\xf3digo do Ajuste"}),(0,r.jsx)("div",{className:"max-w-md",children:(0,r.jsx)(t.D0,{label:"C\xf3digo do Ajuste (Fornecido pelo Tribunal)",value:a.codigo_ajuste,onChange:e=>s("codigo_ajuste",e)})}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Este c\xf3digo identifica unicamente o Conv\xeanio/Parceria no sistema Audesp."})]})},m=e=>{let{data:a,updateField:s}=e;return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"3. Retifica\xe7\xe3o"}),(0,r.jsxs)("div",{className:"bg-orange-50 p-4 rounded border border-orange-200 flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:a.retificacao,onChange:e=>s("retificacao",e.target.checked)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-bold text-slate-800 text-sm",children:"Este envio \xe9 uma RETIFICA\xc7\xc3O?"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Marque apenas se voc\xea j\xe1 enviou uma presta\xe7\xe3o para este m\xeas e deseja corrigir dados."})]})]})]})};var p=s(2332),u=s(1257),x=s.n(u);function b(e){return e.replace(/\D/g,"")}function h(e){try{if(e.match(/\d{4}[-/]\d{2}[-/]\d{2}/)){const[a,s,o]=e.replace(/\//g,"-").split("-");return"".concat(a,"-").concat(s,"-").concat(o)}const[a,s,o]=e.replace(/\//g,"-").split("-");if(parseInt(o)>1900&&parseInt(s)>0&&parseInt(s)<=12&&parseInt(a)>0&&parseInt(a)<=31)return"".concat(o,"-").concat(s.padStart(2,"0"),"-").concat(a.padStart(2,"0"))}catch(a){return null}return null}async function v(e){try{console.log("[OCR] Iniciando processamento de:",e.name);const a=await async function(e){console.log("[OCR] Iniciando extra\xe7\xe3o de PDF:",e.name);const a=await e.arrayBuffer(),s=await p.YE({data:a}).promise;let o="";for(let t=1;t<=Math.min(s.numPages,10);t++){const e=await s.getPage(t),a=e.getViewport({scale:2}),r=document.createElement("canvas"),n=r.getContext("2d");n&&(r.width=a.width,r.height=a.height,await e.render({canvasContext:n,viewport:a}).promise,console.log("[OCR] Processando p\xe1gina ".concat(t,"/").concat(s.numPages,"...")),o+=(await x().recognize(r,"por+eng",{logger:e=>{"recognizing"===e.status&&console.log("[OCR] P\xe1gina ".concat(t,": ").concat(Math.round(100*e.progress),"%"))}})).data.text+"\n")}return console.log("[OCR] Extra\xe7\xe3o completa, tamanho:",o.length),o}(e),s=function(e){var a;const s={confidence:.5,rawText:e,valores:{},responsaveis:[],cpfs:[],datas:[],documentos_fiscais:[],contratos:[]},o=e.match(/(\d{2}\.?\d{3}\.?\d{3}\/?\d{4}-?\d{2})/);o&&(s.cnpj=o[1].replace(/\D/g,""),console.log("[OCR] CNPJ detectado:",s.cnpj));const t=e.matchAll(/(\d{3}\.?\d{3}\.?\d{3}-?\d{2})/g);for(const u of t){const e=b(u[1]);s.cpfs.includes(e)||s.cpfs.push(e)}console.log("[OCR] CPFs detectados:",s.cpfs);const r=e.matchAll(/(\d{1,2}[-/]\d{1,2}[-/]\d{4}|\d{4}[-/]\d{1,2}[-/]\d{1,2})/g);for(const u of r){const e=h(u[1]);e&&!s.datas.includes(e)&&s.datas.push(e)}console.log("[OCR] Datas detectadas:",s.datas);const n=e.match(/R\$[\s]*([\d.,]+)/gi);if(n){const e=n.map(e=>parseFloat(e.replace(/[^\d,]/g,"").replace(",",".")));e.length>0&&(s.valores.despesas=e.reduce((e,a)=>e+a,0)/e.length,console.log("[OCR] Valores detectados:",e))}const i=e.match(/(\d{4})/);i&&(s.ano=parseInt(i[1]),console.log("[OCR] Ano detectado:",s.ano));const c=["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"];for(let u=0;u<c.length;u++)if(e.toLowerCase().includes(c[u])){s.mes=u+1,console.log("[OCR] M\xeas detectado:",s.mes,c[u]);break}(e.toLowerCase().includes("presta\xe7\xe3o")||e.toLowerCase().includes("contas"))&&(s.mes=12,console.log("[OCR] Detectado presta\xe7\xe3o de contas - for\xe7ando m\xeas 12"));const l=e.match(/(35\d{5})/);l&&(s.municipio=parseInt(l[1]),console.log("[OCR] Munic\xedpio detectado:",s.municipio));const d={responsaveis:["respons\xe1vel","diretor","presidente","gestor","ordenador"],documentos:["nf","nota fiscal","recibo","comprovante","fatura"],contratos:["contrato","termo","acordo","licita\xe7\xe3o"]},m=e.split("\n");for(const u of m)for(const[e,a]of Object.entries(d))a.some(e=>u.toLowerCase().includes(e))&&("responsaveis"!==e||s.responsaveis.includes(u.trim())?"documentos"!==e||s.documentos_fiscais.includes(u.trim())?"contratos"!==e||s.contratos.includes(u.trim())||s.contratos.push(u.trim()):s.documentos_fiscais.push(u.trim()):s.responsaveis.push(u.trim()));const p=[s.cnpj,s.ano,s.mes,s.cpfs&&s.cpfs.length>0,s.datas&&s.datas.length>0,null===(a=s.valores)||void 0===a?void 0:a.despesas].filter(Boolean).length;return s.confidence=Math.min(.95,p/6),console.log("[OCR] Confian\xe7a da extra\xe7\xe3o:",Math.round(100*s.confidence)+"%"),s}(a);return s}catch(a){throw console.error("[OCR] Erro ao processar PDF:",a),new Error("Erro ao processar PDF: ".concat(a instanceof Error?a.message:"Desconhecido"))}}function _(e){var a,s;return{descritor:{municipio:e.municipio,entidade:e.entidade||1,ano:e.ano,mes:e.mes||12},dados_gerais_entidade_beneficiaria:{cnpj:e.cnpj,razao_social:e.razao_social},receitas:{repasses_recebidos:(null===(a=e.valores)||void 0===a?void 0:a.repasses)||0},disponibilidades:{saldos:[{saldo_bancario:(null===(s=e.valores)||void 0===s?void 0:s.disponibilidades)||0}]},extraction_metadata:{source:"PDF_OCR",confidence:e.confidence,timestamp:(new Date).toISOString(),extracted_cpfs:e.cpfs,extracted_datas:e.datas,raw_text_preview:e.rawText.substring(0,500)}}}"undefined"!==typeof window&&(p.EA.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@".concat(p.rE,"/build/pdf.worker.min.js"));const g=e=>{var a;let{onDataExtracted:s,onError:t,sectionType:n,label:i="Carregar PDF"}=e;const[c,l]=(0,o.useState)(!1),[d,m]=(0,o.useState)(0),[p,u]=(0,o.useState)(null),x=(0,o.useRef)(null);return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:x,type:"file",accept:".pdf",onChange:async e=>{var a;const o=null===(a=e.target.files)||void 0===a?void 0:a[0];if(o)if(o.type.includes("pdf")){l(!0),m(0);try{console.log("[PDFUploader] Iniciando processamento: ".concat(o.name));const e=setInterval(()=>{m(a=>a>=90?(clearInterval(e),90):a+20*Math.random())},500),a=await v(o);clearInterval(e),m(100);const t=_(a);u(a),s(a,t),console.log("[PDFUploader] Processamento conclu\xeddo:",a),console.log("[PDFUploader] Confian\xe7a: ".concat(Math.round(100*a.confidence),"%")),x.current&&(x.current.value=""),setTimeout(()=>{l(!1),m(0)},3e3)}catch(r){l(!1);const e=r instanceof Error?r.message:"Erro desconhecido ao processar PDF";t(e),console.error("[PDFUploader] Erro:",r)}}else t("Por favor, selecione um arquivo PDF v\xe1lido")},disabled:c,className:"sr-only"}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.click()},disabled:c,className:"w-full px-4 py-3 rounded-lg border-2 border-dashed transition-colors ".concat(c?"border-blue-300 bg-blue-50 text-blue-600":"border-slate-300 bg-slate-50 hover:border-blue-400 hover:bg-blue-50 text-slate-600 hover:text-blue-600"),children:c?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"animate-spin",children:"\u23f3"}),(0,r.jsxs)("span",{children:["Processando PDF... ",Math.round(d),"%"]})]}):p?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{children:"\u2713"}),(0,r.jsx)("span",{children:"PDF Carregado com Sucesso!"})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udcc4"}),(0,r.jsx)("span",{children:i})]})})]}),c&&(0,r.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:(0,r.jsx)("div",{className:"bg-blue-500 h-full transition-all duration-300",style:{width:"".concat(d,"%")}})}),p&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-sm",children:[(0,r.jsxs)("p",{className:"font-semibold text-green-900 mb-2",children:["\u2713 Dados Extra\xeddos (",Math.round(100*p.confidence),"% confian\xe7a)"]}),(0,r.jsxs)("div",{className:"space-y-1 text-green-800 text-xs",children:[p.cnpj&&(0,r.jsxs)("p",{children:["\u2022 CNPJ: ",p.cnpj]}),p.municipio&&(0,r.jsxs)("p",{children:["\u2022 Munic\xedpio: ",p.municipio]}),p.ano&&(0,r.jsxs)("p",{children:["\u2022 Ano: ",p.ano]}),p.mes&&(0,r.jsxs)("p",{children:["\u2022 M\xeas: ",p.mes]}),p.cpfs&&p.cpfs.length>0&&(0,r.jsxs)("p",{children:["\u2022 CPFs encontrados: ",p.cpfs.length]}),p.datas&&p.datas.length>0&&(0,r.jsxs)("p",{children:["\u2022 Datas encontradas: ",p.datas.length]}),(null===(a=p.valores)||void 0===a?void 0:a.despesas)&&(0,r.jsxs)("p",{children:["\u2022 Valor m\xe9dio: R$ ",p.valores.despesas.toFixed(2)]})]}),p.confidence<.6&&(0,r.jsx)("p",{className:"mt-2 text-yellow-700 text-xs bg-yellow-100 p-2 rounded",children:"\u26a0\ufe0f Baixa confian\xe7a na extra\xe7\xe3o. Revise os dados preenchidos."})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2 text-xs text-blue-700",children:[(0,r.jsx)("p",{className:"font-semibold mb-1",children:"\ud83d\udca1 Dica:"}),(0,r.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,r.jsx)("li",{children:"PDF deve estar leg\xedvel e em portugu\xeas"}),(0,r.jsx)("li",{children:"Documentos escaneados funcionam melhor"}),(0,r.jsx)("li",{children:"At\xe9 10 p\xe1ginas ser\xe3o analisadas"}),(0,r.jsx)("li",{children:"Os dados extra\xeddos preencher\xe3o automaticamente o formul\xe1rio"})]})]})]})},j=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6 p-4 bg-purple-50 border-2 border-purple-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-purple-800 mb-2",children:"\ud83d\udcc4 Extrair Contratos de PDF"}),(0,r.jsx)("p",{className:"text-xs text-purple-700 mb-3",children:"Carregue um PDF com dados de contratos para pr\xe9-preenchimento autom\xe1tico:"}),(0,r.jsx)(g,{onDataExtracted:(e,a)=>{const s=_(e);s.contratos&&Array.isArray(s.contratos)&&(s.contratos.forEach(e=>o(e)),console.log("\u2713 ".concat(s.contratos.length," contrato(s) adicionado(s) com ").concat(Math.round(100*a),"% confian\xe7a")))},onError:e=>alert("\u274c Erro: ".concat(e))})]}),(0,r.jsx)(t.T6,{title:"6. Contratos",items:a.contratos||[],newItemTemplate:{numero:"",credor:{documento_numero:"",nome:"",documento_tipo:2},valor_montante:0,data_assinatura:"",objeto:"",natureza_contratacao:[],criterio_selecao:1,valor_tipo:2,vigencia_tipo:1,vigencia_data_inicial:""},onAdd:o,onRemove:n,onUpdate:s,ocrSection:"contratos",renderItem:(e,a,s)=>{var o,n;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(t.D0,{label:"N\xfamero Contrato",value:e.numero,onChange:e=>s("numero",e)}),(0,r.jsx)(t.D0,{label:"Data Assinatura",type:"date",value:e.data_assinatura,onChange:e=>s("data_assinatura",e)}),(0,r.jsx)(t.D0,{label:"Vig\xeancia Inicial",type:"date",value:e.vigencia_data_inicial,onChange:e=>s("vigencia_data_inicial",e)}),(0,r.jsx)(t.D0,{label:"Valor Global (R$)",type:"number",value:e.valor_montante,onChange:e=>s("valor_montante",e)}),(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)(t.D0,{label:"Objeto",value:e.objeto,onChange:e=>s("objeto",e)})}),(0,r.jsxs)("div",{className:"col-span-2 p-3 bg-blue-50/50 border border-blue-100 rounded",children:[(0,r.jsx)("h4",{className:"text-[10px] font-bold uppercase text-blue-800 mb-2",children:"Credor"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(t.D0,{label:"CNPJ/CPF",value:null===(o=e.credor)||void 0===o?void 0:o.documento_numero,onChange:e=>s("credor.documento_numero",e)}),(0,r.jsx)(t.D0,{label:"Nome/Raz\xe3o Social",value:null===(n=e.credor)||void 0===n?void 0:n.nome,onChange:e=>s("credor.nome",e)})]})]})]})}})]})},f=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n,fullData:i}=e;const c=i.contratos||[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6 p-4 bg-cyan-50 border-2 border-cyan-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-cyan-800 mb-2",children:"\ud83d\udcc4 Extrair Documentos Fiscais de PDF"}),(0,r.jsx)("p",{className:"text-xs text-cyan-700 mb-3",children:"Carregue um PDF com notas fiscais para pr\xe9-preenchimento autom\xe1tico:"}),(0,r.jsx)(g,{onDataExtracted:(e,a)=>{const s=_(e);s.documentos_fiscais&&Array.isArray(s.documentos_fiscais)&&(s.documentos_fiscais.forEach(e=>o(e)),console.log("\u2713 ".concat(s.documentos_fiscais.length," documento(s) fiscal(is) adicionado(s)")))},onError:e=>alert("\u274c Erro: ".concat(e))})]}),(0,r.jsx)(t.T6,{title:"7. Documentos Fiscais",items:a.documentos_fiscais||[],newItemTemplate:{numero:"",data_emissao:"",valor_bruto:0,credor:{documento_numero:"",documento_tipo:2},descricao:"",estado_emissor:35,categoria_despesas_tipo:1,rateio_proveniente_tipo:2},onAdd:o,onRemove:n,onUpdate:s,ocrSection:"documentos_fiscais",renderItem:(e,a,s)=>{var o,n,i;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"N\xfamero Nota/Recibo",value:e.numero,onChange:e=>s("numero",e)}),(0,r.jsx)(t.D0,{label:"Data Emiss\xe3o",type:"date",value:e.data_emissao,onChange:e=>s("data_emissao",e)}),(0,r.jsx)(t.D0,{label:"Valor Bruto (R$)",type:"number",value:e.valor_bruto,onChange:e=>s("valor_bruto",e)}),(0,r.jsx)("div",{className:"col-span-3 bg-amber-50 p-3 rounded border border-amber-100",children:(0,r.jsx)(t.MG,{label:"Vincular a Contrato Existente",children:(0,r.jsxs)("select",{className:t.VR.INPUT,value:(null===(o=e.identificacao_contrato)||void 0===o?void 0:o.numero)||"",onChange:a=>{const o=a.target.value,t=c.find(e=>e.numero===o);var r;t?(s("identificacao_contrato",{numero:o,data_assinatura:t.data_assinatura,identificacao_credor:t.credor}),null!==(r=e.credor)&&void 0!==r&&r.documento_numero||s("credor",t.credor)):s("identificacao_contrato",void 0)},children:[(0,r.jsx)("option",{value:"",children:"-- Sem V\xednculo Contratual --"}),c.map(e=>(0,r.jsxs)("option",{value:e.numero,children:["Contrato ",e.numero," - ",e.credor.nome]},e.numero))]})})}),(0,r.jsxs)("div",{className:"col-span-3 grid grid-cols-2 gap-4",children:[(0,r.jsx)(t.D0,{label:"CNPJ/CPF Emitente",value:null===(n=e.credor)||void 0===n?void 0:n.documento_numero,onChange:e=>s("credor.documento_numero",e)}),(0,r.jsx)(t.D0,{label:"Nome Emitente",value:null===(i=e.credor)||void 0===i?void 0:i.nome,onChange:e=>s("credor.nome",e)})]})]})}})]})},N=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n,fullData:i}=e;const c=i.documentos_fiscais||[];return(0,r.jsx)(t.T6,{title:"8. Pagamentos",items:a.pagamentos||[],newItemTemplate:{identificacao_documento_fiscal:{numero:"",identificacao_credor:{documento_numero:"",documento_tipo:2}},pagamento_data:"",pagamento_valor:0,fonte_recurso_tipo:1,meio_pagamento_tipo:2},onAdd:o,onRemove:n,onUpdate:s,ocrSection:"pagamentos",renderItem:(e,a,s)=>{var o;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"col-span-3 bg-emerald-50 p-3 rounded border border-emerald-100",children:(0,r.jsx)(t.MG,{label:"Vincular Documento Fiscal (Nota)",children:(0,r.jsxs)("select",{className:t.VR.INPUT,value:null===(o=e.identificacao_documento_fiscal)||void 0===o?void 0:o.numero,onChange:a=>{const o=a.target.value,t=c.find(e=>e.numero===o);s("identificacao_documento_fiscal.numero",o),t&&(s("identificacao_documento_fiscal.identificacao_credor",t.credor),0===e.pagamento_valor&&s("pagamento_valor",t.valor_bruto))},children:[(0,r.jsx)("option",{value:"",children:"-- Selecione Nota --"}),c.map(e=>(0,r.jsxs)("option",{value:e.numero,children:["NF ",e.numero," (",e.credor.nome,") - R$",e.valor_bruto]},e.numero))]})})}),(0,r.jsx)(t.D0,{label:"Data Pagamento",type:"date",value:e.pagamento_data,onChange:e=>s("pagamento_data",e)}),(0,r.jsx)(t.D0,{label:"Valor Pago (R$)",type:"number",value:e.pagamento_valor,onChange:e=>s("pagamento_valor",e)}),(0,r.jsx)(t.D0,{label:"Meio Pagamento",value:e.meio_pagamento_tipo,onChange:e=>s("meio_pagamento_tipo",Number(e)),options:[{value:1,label:"Cheque"},{value:2,label:"Transfer\xeancia/DOC/TED/Pix"},{value:3,label:"Esp\xe9cie"}]}),2===e.meio_pagamento_tipo&&(0,r.jsx)(t.D0,{label:"ID Transa\xe7\xe3o / Autentica\xe7\xe3o",value:e.numero_transacao,onChange:e=>s("numero_transacao",e)})]})}})},C=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;return(0,r.jsx)(t.T6,{title:"4. Rela\xe7\xe3o de Empregados",items:a.relacao_empregados||[],newItemTemplate:{cpf:"",data_admissao:"",salario_contratual:0,cbo:"",cns:"",data_demissao:"",periodos_remuneracao:[]},onAdd:o,onRemove:n,onUpdate:s,ocrSection:"relacao_empregados",renderItem:(e,a,s)=>{var o;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsx)(t.D0,{label:"CPF",value:e.cpf,onChange:e=>s("cpf",e)}),(0,r.jsx)(t.D0,{label:"Data Admiss\xe3o",type:"date",value:e.data_admissao,onChange:e=>s("data_admissao",e)}),(0,r.jsx)(t.D0,{label:"Data Demiss\xe3o",type:"date",value:e.data_demissao||"",onChange:e=>s("data_demissao",e)}),(0,r.jsx)(t.D0,{label:"CBO",value:e.cbo,onChange:e=>s("cbo",e)}),(0,r.jsx)(t.D0,{label:"CNS (Cart\xe3o SUS)",value:e.cns||"",onChange:e=>s("cns",e)}),(0,r.jsx)(t.D0,{label:"Sal\xe1rio Contratual",type:"number",value:e.salario_contratual,onChange:e=>s("salario_contratual",e)})]}),(0,r.jsxs)("div",{className:"bg-slate-50 p-3 rounded border border-slate-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h5",{className:"text-xs font-bold uppercase text-slate-500",children:"Holerites / Remunera\xe7\xf5es"}),(0,r.jsx)("button",{onClick:()=>{const a=[...e.periodos_remuneracao||[],{mes:1,carga_horaria:160,remuneracao_bruta:e.salario_contratual}];s("periodos_remuneracao",a)},className:"text-[10px] text-blue-600 font-bold hover:underline",children:"+ Adicionar Per\xedodo"})]}),null===(o=e.periodos_remuneracao)||void 0===o?void 0:o.map((a,o)=>(0,r.jsxs)("div",{className:"flex gap-2 items-end mb-2 border-b border-slate-100 pb-2",children:[(0,r.jsxs)("div",{className:"w-16",children:[(0,r.jsx)("label",{className:"text-[9px] font-bold text-slate-400",children:"M\xeas"}),(0,r.jsx)("input",{type:"number",min:"1",max:"12",className:t.VR.INPUT+" h-8 py-0 text-xs",value:a.mes,onChange:a=>{const t=[...e.periodos_remuneracao];t[o].mes=Number(a.target.value),s("periodos_remuneracao",t)}})]}),(0,r.jsxs)("div",{className:"w-20",children:[(0,r.jsx)("label",{className:"text-[9px] font-bold text-slate-400",children:"C. Hor\xe1ria"}),(0,r.jsx)("input",{type:"number",className:t.VR.INPUT+" h-8 py-0 text-xs",value:a.carga_horaria,onChange:a=>{const t=[...e.periodos_remuneracao];t[o].carga_horaria=Number(a.target.value),s("periodos_remuneracao",t)}})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-[9px] font-bold text-slate-400",children:"Bruto (R$)"}),(0,r.jsx)("input",{type:"number",className:t.VR.INPUT+" h-8 py-0 text-xs",value:a.remuneracao_bruta,onChange:a=>{const t=[...e.periodos_remuneracao];t[o].remuneracao_bruta=Number(a.target.value),s("periodos_remuneracao",t)}})]}),(0,r.jsx)("button",{onClick:()=>{const a=[...e.periodos_remuneracao];a.splice(o,1),s("periodos_remuneracao",a)},className:"text-red-400 font-bold text-xs pb-1 hover:text-red-600",children:"\u2715"})]},o))]})]})}})},R=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;return(0,r.jsx)(t.T6,{title:"12. Servidores Cedidos",items:a.servidores_cedidos||[],newItemTemplate:{cpf:"",cargo_publico_ocupado:"",funcao_desempenhada_entidade_beneficiaria:"",data_inicial_cessao:"",onus_pagamento:1,periodos_cessao:[]},onAdd:o,onRemove:n,onUpdate:s,ocrSection:"servidores_cedidos",renderItem:(e,a,s)=>(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(t.D0,{label:"CPF",value:e.cpf,onChange:e=>s("cpf",e)}),(0,r.jsx)(t.D0,{label:"Data In\xedcio Cess\xe3o",type:"date",value:e.data_inicial_cessao,onChange:e=>s("data_inicial_cessao",e)}),(0,r.jsx)(t.D0,{label:"Cargo Origem",value:e.cargo_publico_ocupado,onChange:e=>s("cargo_publico_ocupado",e)}),(0,r.jsx)(t.D0,{label:"Fun\xe7\xe3o Entidade",value:e.funcao_desempenhada_entidade_beneficiaria,onChange:e=>s("funcao_desempenhada_entidade_beneficiaria",e)}),(0,r.jsx)(t.D0,{label:"\xd4nus Pagamento",value:e.onus_pagamento,onChange:e=>s("onus_pagamento",Number(e)),options:[{value:1,label:"Origem"},{value:2,label:"Destino"},{value:3,label:"Parcial"}]})]})})})};var D=s(9379);const y=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;const i=a.ajustes_saldo||{};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"11. Ajustes de Saldo"}),(0,r.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Utilize esta se\xe7\xe3o apenas para corrigir diverg\xeancias de saldo conciliado banc\xe1rio x cont\xe1bil."})]}),(0,r.jsx)(t.T6,{title:"11.1 Retifica\xe7\xe3o de Repasses",items:i.retificacao_repasses||[],newItemTemplate:{data_prevista:"",data_repasse:"",valor_retificado:0,fonte_recurso_tipo:1},onAdd:e=>o((0,D.A)((0,D.A)({},i),{},{retificacao_repasses:[...i.retificacao_repasses||[],e]}),"ajustes_saldo"),onRemove:e=>{const a=[...i.retificacao_repasses||[]];a.splice(e,1),s("ajustes_saldo.retificacao_repasses",a)},onUpdate:(e,a,o)=>{const t=[...i.retificacao_repasses||[]];t[e]=(0,D.A)((0,D.A)({},t[e]),{},{[a]:o}),s("ajustes_saldo.retificacao_repasses",t)},renderItem:(e,a,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"Data Repasse",type:"date",value:e.data_repasse,onChange:e=>s("data_repasse",e)}),(0,r.jsx)(t.D0,{label:"Valor Retificado",type:"number",value:e.valor_retificado,onChange:e=>s("valor_retificado",e)}),(0,r.jsx)(t.D0,{label:"Fonte Recurso",type:"number",value:e.fonte_recurso_tipo,onChange:e=>s("fonte_recurso_tipo",e)})]})}),(0,r.jsx)(t.T6,{title:"11.3 Retifica\xe7\xe3o de Pagamentos",items:i.retificacao_pagamentos||[],newItemTemplate:{identificacao_documento_fiscal:{numero:"",identificacao_credor:{documento_numero:"",documento_tipo:2}},pagamento_data:"",pagamento_valor:0,fonte_recurso_tipo:1,valor_retificado:0},onAdd:e=>o((0,D.A)((0,D.A)({},i),{},{retificacao_pagamentos:[...i.retificacao_pagamentos||[],e]}),"ajustes_saldo"),onRemove:e=>{const a=[...i.retificacao_pagamentos||[]];a.splice(e,1),s("ajustes_saldo.retificacao_pagamentos",a)},onUpdate:(e,a,o)=>{const t=[...i.retificacao_pagamentos||[]];t[e]=(0,D.A)((0,D.A)({},t[e]),{},{[a]:o}),s("ajustes_saldo.retificacao_pagamentos",t)},renderItem:(e,a,s)=>{var o;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(t.D0,{label:"N\xfamero NF Original",value:null===(o=e.identificacao_documento_fiscal)||void 0===o?void 0:o.numero,onChange:e=>s("identificacao_documento_fiscal.numero",e)}),(0,r.jsx)(t.D0,{label:"Valor Retificado (Correto)",type:"number",value:e.valor_retificado,onChange:e=>s("valor_retificado",e)})]})}})]})},E=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n,fullData:i}=e;const c=i.empenhos||[];return(0,r.jsx)(t.T6,{title:"17. Repasses Recebidos (Financeiro)",items:a.repasses||[],newItemTemplate:{identificacao_empenho:{numero:"",data_emissao:""},data_prevista:"",data_repasse:"",valor_previsto:0,valor_repasse:0,tipo_documento_bancario:1,numero_documento:"",banco:0,agencia:0,conta:""},onAdd:o,onRemove:n,onUpdate:s,ocrSection:"repasses",renderItem:(e,a,s)=>{var o;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"col-span-3 bg-indigo-50 p-3 rounded border border-indigo-100 mb-2",children:[(0,r.jsx)("label",{className:t.VR.LABEL,children:"Vincular a Empenho"}),(0,r.jsxs)("select",{className:t.VR.INPUT,value:null===(o=e.identificacao_empenho)||void 0===o?void 0:o.numero,onChange:a=>{const o=a.target.value,t=c.find(e=>e.numero===o);t&&(s("identificacao_empenho",{numero:t.numero,data_emissao:t.data_emissao}),0===e.valor_repasse&&s("valor_repasse",t.valor))},children:[(0,r.jsx)("option",{value:"",children:"-- Selecione Empenho --"}),c.map(e=>(0,r.jsxs)("option",{value:e.numero,children:["Empenho ",e.numero," (",e.data_emissao,") - R$",e.valor]},e.numero))]})]}),(0,r.jsx)(t.D0,{label:"Data Repasse",type:"date",value:e.data_repasse,onChange:e=>s("data_repasse",e)}),(0,r.jsx)(t.D0,{label:"Valor Recebido (R$)",type:"number",value:e.valor_repasse,onChange:e=>s("valor_repasse",e)}),(0,r.jsx)(t.D0,{label:"Nr. Doc Banc\xe1rio",value:e.numero_documento,onChange:e=>s("numero_documento",e)}),(0,r.jsx)(t.D0,{label:"Banco",type:"number",value:e.banco,onChange:e=>s("banco",e)}),(0,r.jsx)(t.D0,{label:"Ag\xeancia",type:"number",value:e.agencia,onChange:e=>s("agencia",e)}),(0,r.jsx)(t.D0,{label:"Conta",value:e.conta,onChange:e=>s("conta",e)})]})}})},A=e=>{var a;let{data:s,onUpdate:o,onAdd:n,onRemove:i}=e;return(0,r.jsx)(t.T6,{title:"5. Rela\xe7\xe3o de Bens (M\xf3veis Adquiridos)",items:(null===(a=s.relacao_bens)||void 0===a?void 0:a.relacao_bens_moveis_adquiridos)||[],newItemTemplate:{numero_patrimonio:"",descricao:"",valor_aquisicao:0,data_aquisicao:""},onAdd:e=>{const a=s.relacao_bens||{},o=a.relacao_bens_moveis_adquiridos||[];n((0,D.A)((0,D.A)({},a),{},{relacao_bens_moveis_adquiridos:[...o,e]}),"relacao_bens")},onRemove:e=>{var a;const t=[...(null===(a=s.relacao_bens)||void 0===a?void 0:a.relacao_bens_moveis_adquiridos)||[]];t.splice(e,1),o("relacao_bens.relacao_bens_moveis_adquiridos",t)},onUpdate:(e,a,t)=>{var r;const n=[...(null===(r=s.relacao_bens)||void 0===r?void 0:r.relacao_bens_moveis_adquiridos)||[]];n[e]=(0,D.A)((0,D.A)({},n[e]),{},{[a]:t}),o("relacao_bens.relacao_bens_moveis_adquiridos",n)},ocrSection:"relacao_bens",renderItem:(e,a,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(t.D0,{label:"Patrim\xf4nio",value:e.numero_patrimonio,onChange:e=>s("numero_patrimonio",e)}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)(t.D0,{label:"Descri\xe7\xe3o",value:e.descricao,onChange:e=>s("descricao",e)})}),(0,r.jsx)(t.D0,{label:"Data Aquisi\xe7\xe3o",type:"date",value:e.data_aquisicao,onChange:e=>s("data_aquisicao",e)}),(0,r.jsx)(t.D0,{label:"Valor (R$)",type:"number",value:e.valor_aquisicao,onChange:e=>s("valor_aquisicao",e)})]})})},w=e=>{var a,s;let{data:o,onUpdate:n,onAdd:i,onRemove:c}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(t.T6,{title:"9. Disponibilidades (Saldos Banc\xe1rios)",items:(null===(a=o.disponibilidades)||void 0===a?void 0:a.saldos)||[],newItemTemplate:{banco:0,agencia:0,conta:"",saldo_bancario:0,saldo_contabil:0,conta_tipo:1},onAdd:e=>{const a=o.disponibilidades||{saldo_fundo_fixo:0,saldos:[]},s=a.saldos||[];i((0,D.A)((0,D.A)({},a),{},{saldos:[...s,e]}),"disponibilidades")},onRemove:e=>{var a;const s=[...(null===(a=o.disponibilidades)||void 0===a?void 0:a.saldos)||[]];s.splice(e,1),n("disponibilidades.saldos",s)},onUpdate:(e,a,s)=>{var t;const r=[...(null===(t=o.disponibilidades)||void 0===t?void 0:t.saldos)||[]];r[e]=(0,D.A)((0,D.A)({},r[e]),{},{[a]:s}),n("disponibilidades.saldos",r)},ocrSection:"disponibilidades",renderItem:(e,a,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsx)(t.D0,{label:"Banco",type:"number",value:e.banco,onChange:e=>s("banco",e)}),(0,r.jsx)(t.D0,{label:"Ag\xeancia",type:"number",value:e.agencia,onChange:e=>s("agencia",e)}),(0,r.jsx)(t.D0,{label:"Conta",value:e.conta,onChange:e=>s("conta",e)}),(0,r.jsx)(t.D0,{label:"Saldo Banco (R$)",type:"number",value:e.saldo_bancario,onChange:e=>s("saldo_bancario",e)}),(0,r.jsx)(t.D0,{label:"Saldo Cont\xe1bil (R$)",type:"number",value:e.saldo_contabil,onChange:e=>s("saldo_contabil",e)})]})}),(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)("h4",{className:"text-sm font-bold text-slate-700 uppercase mb-4",children:"Outros Saldos"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3",children:(0,r.jsx)(t.D0,{label:"Saldo Fundo Fixo (Caixa)",type:"number",value:(null===(s=o.disponibilidades)||void 0===s?void 0:s.saldo_fundo_fixo)||0,onChange:e=>n("disponibilidades.saldo_fundo_fixo",e)})})]})]})},P=e=>{var a,s,o,n;let{data:i,onUpdate:c,onAdd:l,onRemove:d}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(t.T6,{title:"10.1 Repasses Recebidos",items:(null===(a=i.receitas)||void 0===a?void 0:a.repasses_recebidos)||[],newItemTemplate:{data_repasse:"",valor:0,fonte_recurso_tipo:1,data_prevista:""},onAdd:e=>{const a=i.receitas||{},s=a.repasses_recebidos||[];l((0,D.A)((0,D.A)({},a),{},{repasses_recebidos:[...s,e]}),"receitas")},onRemove:e=>{var a;const s=[...(null===(a=i.receitas)||void 0===a?void 0:a.repasses_recebidos)||[]];s.splice(e,1),c("receitas.repasses_recebidos",s)},onUpdate:(e,a,s)=>{var o;const t=[...(null===(o=i.receitas)||void 0===o?void 0:o.repasses_recebidos)||[]];t[e]=(0,D.A)((0,D.A)({},t[e]),{},{[a]:s}),c("receitas.repasses_recebidos",t)},ocrSection:"receitas",renderItem:(e,a,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"Data Prevista",type:"date",value:e.data_prevista,onChange:e=>s("data_prevista",e)}),(0,r.jsx)(t.D0,{label:"Data Efetiva",type:"date",value:e.data_repasse,onChange:e=>s("data_repasse",e)}),(0,r.jsx)(t.D0,{label:"Valor (R$)",type:"number",value:e.valor,onChange:e=>s("valor",e)})]})}),(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"10.2 Rendimentos de Aplica\xe7\xe3o Financeira"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"Rend. Municipal (R$)",type:"number",value:(null===(s=i.receitas)||void 0===s?void 0:s.receitas_aplic_financ_repasses_publicos_municipais)||0,onChange:e=>c("receitas.receitas_aplic_financ_repasses_publicos_municipais",e)}),(0,r.jsx)(t.D0,{label:"Rend. Estadual (R$)",type:"number",value:(null===(o=i.receitas)||void 0===o?void 0:o.receitas_aplic_financ_repasses_publicos_estaduais)||0,onChange:e=>c("receitas.receitas_aplic_financ_repasses_publicos_estaduais",e)}),(0,r.jsx)(t.D0,{label:"Rend. Federal (R$)",type:"number",value:(null===(n=i.receitas)||void 0===n?void 0:n.receitas_aplic_financ_repasses_publicos_federais)||0,onChange:e=>c("receitas.receitas_aplic_financ_repasses_publicos_federais",e)})]})]})]})},T=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;return(0,r.jsx)(t.T6,{title:"13. Descontos",items:a.descontos||[],newItemTemplate:{data:"",descricao:"",valor:0},onAdd:o,onRemove:n,onUpdate:s,renderItem:(e,a,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)(t.D0,{label:"Descri\xe7\xe3o",value:e.descricao,onChange:e=>s("descricao",e)})}),(0,r.jsx)(t.D0,{label:"Data",type:"date",value:e.data,onChange:e=>s("data",e)}),(0,r.jsx)(t.D0,{label:"Valor (R$)",type:"number",value:e.valor,onChange:e=>s("valor",e)})]})})},I=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;return(0,r.jsx)(t.T6,{title:"14. Devolu\xe7\xf5es de Saldo",items:a.devolucoes||[],newItemTemplate:{data:"",natureza_devolucao_tipo:1,valor:0},onAdd:o,onRemove:n,onUpdate:s,renderItem:(e,a,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"Data",type:"date",value:e.data,onChange:e=>s("data",e)}),(0,r.jsx)(t.D0,{label:"Valor (R$)",type:"number",value:e.valor,onChange:e=>s("valor",e)}),(0,r.jsx)(t.D0,{label:"Natureza",value:e.natureza_devolucao_tipo,onChange:e=>s("natureza_devolucao_tipo",Number(e)),options:[{value:1,label:"Saldo de Recursos n\xe3o Utilizados"},{value:2,label:"Glosas"},{value:3,label:"Rendimentos de Aplica\xe7\xe3o"}]})]})})},F=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;return(0,r.jsx)(t.T6,{title:"15. Glosas",items:a.glosas||[],newItemTemplate:{identificacao_documento_fiscal:{numero:"",identificacao_credor:{documento_numero:"",documento_tipo:2}},resultado_analise:1,valor_glosa:0},onAdd:o,onRemove:n,onUpdate:s,renderItem:(e,a,s)=>{var o;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"N\xfamero Nota Fiscal",value:null===(o=e.identificacao_documento_fiscal)||void 0===o?void 0:o.numero,onChange:e=>s("identificacao_documento_fiscal.numero",e)}),(0,r.jsx)(t.D0,{label:"Valor Glosado (R$)",type:"number",value:e.valor_glosa,onChange:e=>s("valor_glosa",e)}),(0,r.jsx)(t.D0,{label:"Tipo Glosa",value:e.resultado_analise,onChange:e=>s("resultado_analise",Number(e)),options:[{value:1,label:"Total"},{value:2,label:"Parcial"}]})]})}})},V=e=>{let{data:a,onUpdate:s,onAdd:o,onRemove:n}=e;return(0,r.jsx)(t.T6,{title:"16. Empenhos",items:a.empenhos||[],newItemTemplate:{numero:"",data_emissao:"",valor:0,historico:"",classificacao_economica_tipo:"",fonte_recurso_tipo:1,cpf_ordenador_despesa:""},onAdd:o,onRemove:n,onUpdate:s,ocrSection:"empenhos",renderItem:(e,a,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"N\xfamero Empenho",value:e.numero,onChange:e=>s("numero",e)}),(0,r.jsx)(t.D0,{label:"Data Emiss\xe3o",type:"date",value:e.data_emissao,onChange:e=>s("data_emissao",e)}),(0,r.jsx)(t.D0,{label:"Valor (R$)",type:"number",value:e.valor,onChange:e=>s("valor",e)}),(0,r.jsx)("div",{className:"md:col-span-3",children:(0,r.jsx)(t.D0,{label:"Hist\xf3rico",value:e.historico,onChange:e=>s("historico",e)})})]})})};var O=s(4516);const S=e=>{var a;let{data:s,updateField:o}=e;const n=s.relatorio_atividades||{programas:[]},i=e=>{o("relatorio_atividades.programas",e)};return(0,r.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"18. Relat\xf3rio de Atividades",children:(0,r.jsx)("button",{onClick:()=>i([...n.programas||[],{nome_programa:"",metas:[]}]),className:t.VR.BTN_ADD,children:"+ Novo Programa"})}),(0,r.jsx)(O.O,{section:"relatorio_atividades",onDataExtracted:e=>{if(e&&Array.isArray(e.programas)){const a=[...n.programas||[]];i([...a,...e.programas])}}}),(!n.programas||0===n.programas.length)&&(0,r.jsx)("p",{className:"text-slate-400 text-sm text-center py-8 border-2 border-dashed border-slate-200 rounded",children:"Nenhum programa cadastrado. Adicione manualmente ou use o OCR."})]}),null===(a=n.programas)||void 0===a?void 0:a.map((e,a)=>(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-l-indigo-500 border-y border-r border-slate-200 relative",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,r.jsxs)("div",{className:"w-full mr-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-bold uppercase text-indigo-600 mb-2",children:["Programa #",a+1]}),(0,r.jsx)(t.D0,{label:"Nome do Programa",value:e.nome_programa,onChange:e=>{const s=[...n.programas];s[a].nome_programa=e,i(s)}})]}),(0,r.jsx)("button",{onClick:()=>{const e=[...n.programas];e.splice(a,1),i(e)},className:t.VR.BTN_REMOVE+" mt-6",children:"Remover Programa"})]}),(0,r.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b border-slate-200 pb-2",children:[(0,r.jsx)("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Metas do Programa"}),(0,r.jsx)("button",{onClick:()=>{const e=[...n.programas];e[a].metas.push({codigo_meta:"",periodicidades:[],meta_atendida:!1,justificativa:""}),i(e)},className:t.VR.BTN_SUB,children:"+ Adicionar Meta"})]}),e.metas.map((e,s)=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded border border-slate-200 mb-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mb-4",children:[(0,r.jsx)("div",{className:"md:col-span-3",children:(0,r.jsx)(t.D0,{label:"C\xf3digo Meta",value:e.codigo_meta,onChange:e=>{const o=[...n.programas];o[a].metas[s].codigo_meta=e,i(o)}})}),(0,r.jsx)("div",{className:"md:col-span-7",children:(0,r.jsx)(t.D0,{label:"Descri\xe7\xe3o (Opcional)",value:e.descricao||"",onChange:e=>{const o=[...n.programas];o[a].metas[s].descricao=e,i(o)}})}),(0,r.jsx)("div",{className:"md:col-span-2 flex items-center justify-end",children:(0,r.jsx)("button",{onClick:()=>{const e=[...n.programas];e[a].metas.splice(s,1),i(e)},className:"text-red-500 hover:bg-red-50 p-2 rounded",title:"Remover Meta",children:"\u2715"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4 bg-indigo-50 p-2 rounded w-fit",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:e.meta_atendida,onChange:e=>{const o=[...n.programas];o[a].metas[s].meta_atendida=e.target.checked,i(o)}}),(0,r.jsx)("label",{className:"text-xs font-bold text-indigo-900 cursor-pointer",children:"A Meta foi plenamente atendida?"})]}),!e.meta_atendida&&(0,r.jsx)("div",{className:"mb-4 animate-in fade-in",children:(0,r.jsx)(t.D0,{label:"Justificativa do N\xe3o Atendimento",value:e.justificativa||"",onChange:e=>{const o=[...n.programas];o[a].metas[s].justificativa=e,i(o)}})}),(0,r.jsxs)("div",{className:"pl-4 border-l-2 border-indigo-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h5",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Execu\xe7\xe3o F\xedsica (Periodicidade)"}),(0,r.jsx)("button",{onClick:()=>{const e=[...n.programas];e[a].metas[s].periodicidades.push({periodo:1,quantidade_realizada:0}),i(e)},className:"text-[10px] text-blue-600 font-bold hover:underline",children:"+ Adicionar Per\xedodo"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:e.periodicidades.map((e,o)=>(0,r.jsxs)("div",{className:"flex gap-2 items-center bg-slate-50 p-2 rounded border border-slate-100",children:[(0,r.jsx)("div",{className:"w-24",children:(0,r.jsx)("select",{className:t.VR.INPUT+" h-8 py-0 text-xs",value:e.periodo,onChange:e=>{const t=[...n.programas];t[a].metas[s].periodicidades[o].periodo=Number(e.target.value),i(t)},children:Array.from({length:12},(e,a)=>(0,r.jsx)("option",{value:a+1,children:new Date(0,a).toLocaleString("pt-BR",{month:"long"})},a+1))})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"number",placeholder:"Qtd.",className:t.VR.INPUT+" h-8 py-0 text-xs",value:e.quantidade_realizada,onChange:e=>{const t=[...n.programas];t[a].metas[s].periodicidades[o].quantidade_realizada=Number(e.target.value),i(t)}})}),(0,r.jsx)("button",{onClick:()=>{const e=[...n.programas];e[a].metas[s].periodicidades.splice(o,1),i(e)},className:"text-red-400 hover:text-red-600 text-xs font-bold px-1",children:"\u2715"})]},o))})]})]},s))]})]},a))]})},k=e=>{let{data:a,updateField:s}=e;const o=a.parecer_conclusivo||{};return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"26. Parecer Conclusivo"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[(0,r.jsx)(t.D0,{label:"Identifica\xe7\xe3o do Parecer (ID/N\xfamero)",value:o.identificacao_parecer,onChange:e=>s("parecer_conclusivo.identificacao_parecer",e)}),(0,r.jsx)(t.D0,{label:"Conclus\xe3o",value:o.conclusao_parecer,onChange:e=>s("parecer_conclusivo.conclusao_parecer",Number(e)),options:[{value:1,label:"Aprovado"},{value:2,label:"Aprovado com Ressalvas"},{value:3,label:"Rejeitado"}]}),(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)("label",{className:t.VR.LABEL,children:"Considera\xe7\xf5es do Conselho Fiscal"}),(0,r.jsx)("textarea",{className:t.VR.INPUT+" h-24 py-2",value:o.consideracoes_parecer,onChange:e=>s("parecer_conclusivo.consideracoes_parecer",e.target.value)})]})]}),(0,r.jsxs)("div",{className:"bg-slate-50 p-4 rounded border border-slate-200",children:[(0,r.jsx)("h4",{className:"font-bold text-slate-700 mb-4",children:"Declara\xe7\xf5es do Parecer"}),(0,r.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>{var a,t,n,i;return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center border-b border-slate-100 pb-2",children:[(0,r.jsxs)("div",{className:"flex-1 text-sm font-medium text-slate-600",children:[1===e&&"A entidade aplicou os recursos conforme o plano de trabalho?",2===e&&"As despesas est\xe3o comprovadas por documentos fiscais?",3===e&&"Houve cumprimento das metas estabelecidas?"]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"radio",name:"dec_".concat(e),checked:1===(null===(a=o.declaracoes)||void 0===a||null===(t=a.find(a=>a.tipo_declaracao===e))||void 0===t?void 0:t.declaracao),onChange:()=>{const a=[...o.declaracoes||[]],t=a.findIndex(a=>a.tipo_declaracao===e);t>=0?a[t].declaracao=1:a.push({tipo_declaracao:e,declaracao:1}),s("parecer_conclusivo.declaracoes",a)}})," Sim"]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"radio",name:"dec_".concat(e),checked:2===(null===(n=o.declaracoes)||void 0===n||null===(i=n.find(a=>a.tipo_declaracao===e))||void 0===i?void 0:i.declaracao),onChange:()=>{const a=[...o.declaracoes||[]],t=a.findIndex(a=>a.tipo_declaracao===e);t>=0?a[t].declaracao=2:a.push({tipo_declaracao:e,declaracao:2}),s("parecer_conclusivo.declaracoes",a)}})," N\xe3o"]})]})]},e)})})]})]})},U=e=>{var a,s,o;let{data:n,updateField:i}=e;const c=n.demonstracoes_contabeis||{};return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"23. Demonstra\xe7\xf5es Cont\xe1beis"}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded border border-blue-100 mb-6",children:[(0,r.jsx)("h4",{className:"text-xs font-bold uppercase text-blue-800 mb-2",children:"Respons\xe1vel T\xe9cnico (Contador)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(t.D0,{label:"Nome",value:null===(a=c.responsavel)||void 0===a?void 0:a.numero_crc,onChange:e=>i("demonstracoes_contabeis.responsavel.numero_crc",e)})," ",(0,r.jsx)(t.D0,{label:"CPF",value:null===(s=c.responsavel)||void 0===s?void 0:s.cpf,onChange:e=>i("demonstracoes_contabeis.responsavel.cpf",e)}),(0,r.jsxs)("div",{className:t.VR.FLEX_ROW_CENTER+" h-10 mt-5",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:null===(o=c.responsavel)||void 0===o?void 0:o.situacao_regular_crc,onChange:e=>i("demonstracoes_contabeis.responsavel.situacao_regular_crc",e.target.checked)}),(0,r.jsx)("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Regular no CRC?"})]})]})]}),(0,r.jsx)("h4",{className:t.VR.LABEL,children:"Publica\xe7\xf5es das Demonstra\xe7\xf5es"}),(c.publicacoes||[]).map((e,a)=>(0,r.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[(0,r.jsx)("input",{className:t.VR.INPUT,placeholder:"Ve\xedculo",value:e.nome_veiculo,onChange:e=>{const s=[...c.publicacoes||[]];s[a].nome_veiculo=e.target.value,i("demonstracoes_contabeis.publicacoes",s)}}),(0,r.jsx)("input",{type:"date",className:t.VR.INPUT,value:e.data_publicacao,onChange:e=>{const s=[...c.publicacoes||[]];s[a].data_publicacao=e.target.value,i("demonstracoes_contabeis.publicacoes",s)}}),(0,r.jsx)("button",{className:t.VR.BTN_REMOVE,onClick:()=>{const e=[...c.publicacoes||[]];e.splice(a,1),i("demonstracoes_contabeis.publicacoes",e)},children:"X"})]},a)),(0,r.jsx)("button",{onClick:()=>{const e=[...c.publicacoes||[]];e.push({tipo_veiculo_publicacao:1,data_publicacao:"",nome_veiculo:""}),i("demonstracoes_contabeis.publicacoes",e)},className:t.VR.BTN_ADD,children:"+ Publica\xe7\xe3o"})]})},B=e=>{let{data:a,updateField:s}=e;const o=a.relatorio_governamental_analise_execucao||{};return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"22. Relat\xf3rio Governamental (An\xe1lise Execu\xe7\xe3o)"}),(0,r.jsxs)("div",{className:"mb-6 bg-yellow-50 p-4 rounded border border-yellow-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:o.houve_emissao_relatorio_final,onChange:e=>s("relatorio_governamental_analise_execucao.houve_emissao_relatorio_final",e.target.checked)}),(0,r.jsx)("label",{className:"font-bold text-slate-800 text-sm",children:"Houve emiss\xe3o de Relat\xf3rio Final pelo \xd3rg\xe3o P\xfablico?"})]}),o.houve_emissao_relatorio_final&&(0,r.jsxs)("div",{className:"animate-in fade-in space-y-4",children:[(0,r.jsx)(t.D0,{label:"Conclus\xe3o do Relat\xf3rio",value:o.conclusao_relatorio,onChange:e=>s("relatorio_governamental_analise_execucao.conclusao_relatorio",Number(e)),options:[{value:1,label:"Favor\xe1vel"},{value:2,label:"Favor\xe1vel com Ressalvas"},{value:3,label:"Desfavor\xe1vel"}]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:t.VR.LABEL,children:"Justificativa / Considera\xe7\xf5es"}),(0,r.jsx)("textarea",{className:t.VR.INPUT+" h-24 py-2",value:o.justificativa,onChange:e=>s("relatorio_governamental_analise_execucao.justificativa",e.target.value)})]})]})]})]})},q=e=>{let{data:a,updateField:s}=e;const o=a.publicacoes_parecer_ata||[],n=(e,a,t)=>{const r=[...o];"root"===a?r[e]=(0,D.A)((0,D.A)({},r[e]),t):r[e][a]=t,s("publicacoes_parecer_ata",r)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:t.VR.SECTION,children:(0,r.jsx)(t.X3,{title:"24. Publica\xe7\xf5es de Pareceres e Atas",children:(0,r.jsx)("button",{onClick:()=>{s("publicacoes_parecer_ata",[...o,{tipo_parecer_ata:1,houve_publicacao:!1,conclusao_parecer:1,publicacoes:[]}])},className:t.VR.BTN_ADD,children:"+ Adicionar Registro"})})}),o.map((e,a)=>(0,r.jsxs)("div",{className:t.VR.SECTION+" border-l-4 border-purple-400",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)(t.D0,{label:"Tipo de Documento",value:e.tipo_parecer_ata,onChange:e=>n(a,"tipo_parecer_ata",Number(e)),options:[{value:1,label:"Parecer do Conselho Fiscal"},{value:2,label:"Ata da Assembleia Geral"},{value:3,label:"Ata do Conselho de Administra\xe7\xe3o"}]}),(0,r.jsx)("button",{onClick:()=>(e=>{const a=[...o];a.splice(e,1),s("publicacoes_parecer_ata",a)})(a),className:t.VR.BTN_REMOVE+" mt-4",children:"Remover"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 h-10 mt-5 bg-slate-50 px-3 rounded border",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:e.houve_publicacao,onChange:e=>n(a,"houve_publicacao",e.target.checked)}),(0,r.jsx)("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Houve Publica\xe7\xe3o?"})]}),(0,r.jsx)(t.D0,{label:"Conclus\xe3o",value:e.conclusao_parecer,onChange:e=>n(a,"conclusao_parecer",Number(e)),options:[{value:1,label:"Aprova\xe7\xe3o"},{value:2,label:"Aprova\xe7\xe3o com Ressalvas"},{value:3,label:"Rejei\xe7\xe3o"}]})]}),e.houve_publicacao&&(0,r.jsxs)("div",{className:"pl-4 border-l-2 border-purple-100 mt-4",children:[(0,r.jsx)("label",{className:t.VR.LABEL+" text-purple-700",children:"Ve\xedculos de Publica\xe7\xe3o"}),(e.publicacoes||[]).map((s,o)=>(0,r.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,r.jsx)("input",{className:t.VR.INPUT,placeholder:"Nome Ve\xedculo",value:s.nome_veiculo,onChange:s=>{const t=[...e.publicacoes||[]];t[o]=(0,D.A)((0,D.A)({},t[o]),{},{nome_veiculo:s.target.value}),n(a,"publicacoes",t)}}),(0,r.jsx)("input",{type:"date",className:t.VR.INPUT,value:s.data_publicacao,onChange:s=>{const t=[...e.publicacoes||[]];t[o]=(0,D.A)((0,D.A)({},t[o]),{},{data_publicacao:s.target.value}),n(a,"publicacoes",t)}}),(0,r.jsx)("button",{onClick:()=>{const s=[...e.publicacoes||[]];s.splice(o,1),n(a,"publicacoes",s)},className:"text-red-500 font-bold px-2",children:"X"})]},o)),(0,r.jsx)("button",{onClick:()=>{const s=[...e.publicacoes||[]];s.push({tipo_veiculo_publicacao:1,nome_veiculo:"",data_publicacao:""}),n(a,"publicacoes",s)},className:"text-xs font-bold text-blue-600 hover:underline",children:"+ Adicionar Publica\xe7\xe3o"})]})]},a))]})},M=e=>{let{data:a,updateField:s}=e;const o=a.prestacao_contas_entidade_beneficiaria||{};return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"25. Dados da Presta\xe7\xe3o (Entidade)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)(t.D0,{label:"Data da Presta\xe7\xe3o",type:"date",value:o.data_prestacao,onChange:e=>s("prestacao_contas_entidade_beneficiaria.data_prestacao",e)}),(0,r.jsx)(t.D0,{label:"Per\xedodo Ref. In\xedcio",type:"date",value:o.periodo_referencia_data_inicial,onChange:e=>s("prestacao_contas_entidade_beneficiaria.periodo_referencia_data_inicial",e)}),(0,r.jsx)(t.D0,{label:"Per\xedodo Ref. Final",type:"date",value:o.periodo_referencia_data_final,onChange:e=>s("prestacao_contas_entidade_beneficiaria.periodo_referencia_data_final",e)})]}),(0,r.jsx)("p",{className:"mt-4 text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100",children:"Estes dados referem-se ao per\xedodo de execu\xe7\xe3o e \xe0 data em que a entidade finalizou internamente a presta\xe7\xe3o de contas."})]})},X=e=>{let{data:a,updateField:s}=e;const o=a.dados_gerais_entidade_beneficiaria||{};return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"19. Dados Gerais da Entidade"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsx)(t.D0,{label:"Certid\xe3o de Dados Gerais (C\xf3digo/Hash)",value:o.identificacao_certidao_dados_gerais,onChange:e=>s("dados_gerais_entidade_beneficiaria.identificacao_certidao_dados_gerais",e)}),(0,r.jsx)(t.D0,{label:"Certid\xe3o Corpo Diretivo (C\xf3digo/Hash)",value:o.identificacao_certidao_corpo_diretivo,onChange:e=>s("dados_gerais_entidade_beneficiaria.identificacao_certidao_corpo_diretivo",e)}),(0,r.jsx)(t.D0,{label:"Certid\xe3o Membros Conselho (C\xf3digo/Hash)",value:o.identificacao_certidao_membros_conselho,onChange:e=>s("dados_gerais_entidade_beneficiaria.identificacao_certidao_membros_conselho",e)})]}),(0,r.jsx)("p",{className:"mt-4 text-xs text-slate-500 italic",children:"* Informe o c\xf3digo de autentica\xe7\xe3o das certid\xf5es emitidas no cadastro do TCESP."})]})},L=e=>{let{data:a,updateField:s}=e;const o=a.responsaveis_membros_orgao_concessor||{};return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"20. Respons\xe1veis (\xd3rg\xe3o Concessor)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsx)(t.D0,{label:"Certid\xe3o Respons\xe1veis (C\xf3digo)",value:o.identificacao_certidao_responsaveis,onChange:e=>s("responsaveis_membros_orgao_concessor.identificacao_certidao_responsaveis",e)}),(0,r.jsx)(t.D0,{label:"Certid\xe3o Comiss\xe3o Avalia\xe7\xe3o (C\xf3digo)",value:o.identificacao_certidao_membros_comissao_avaliacao,onChange:e=>s("responsaveis_membros_orgao_concessor.identificacao_certidao_membros_comissao_avaliacao",e)}),(0,r.jsx)(t.D0,{label:"Certid\xe3o Controle Interno (C\xf3digo)",value:o.identificacao_certidao_membros_controle_interno,onChange:e=>s("responsaveis_membros_orgao_concessor.identificacao_certidao_membros_controle_interno",e)})]})]})},H=e=>{let{data:a,updateField:s}=e;const o=a.declaracoes||{},n=(e,a)=>{s("declaracoes.".concat(e),a)};return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"21. Declara\xe7\xf5es Obrigat\xf3rias"}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-blue-800 mb-2",children:"\ud83d\udcc4 Pr\xe9-preenchimento Autom\xe1tico"}),(0,r.jsx)("p",{className:"text-xs text-blue-700 mb-3",children:"Carregue um PDF com dados de empresas e respons\xe1veis para pr\xe9-preenchimento autom\xe1tico:"}),(0,r.jsx)(g,{onDataExtracted:(e,a)=>{const o=_(e);o.dados_gerais_entidade_beneficiaria&&s("dados_gerais_entidade_beneficiaria",o.dados_gerais_entidade_beneficiaria),o.descritor&&s("descritor",o.descritor);const t="\u2713 Dados extra\xeddos com ".concat(Math.round(100*a),"% confian\xe7a!");console.log(t,o)},onError:e=>{console.error("OCR Error:",e),alert("\u274c Erro na extra\xe7\xe3o: ".concat(e))}})]}),(0,r.jsxs)("div",{className:"mb-6 border-b border-slate-100 pb-6",children:[(0,r.jsxs)("div",{className:t.VR.FLEX_ROW_CENTER+" mb-4",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:o.houve_contratacao_empresas_pertencentes,onChange:e=>n("houve_contratacao_empresas_pertencentes",e.target.checked)}),(0,r.jsx)("label",{className:"font-bold text-slate-700",children:"Houve contrata\xe7\xe3o de empresas pertencentes a dirigentes?"})]}),o.houve_contratacao_empresas_pertencentes&&(0,r.jsxs)("div",{className:"pl-6 bg-red-50 p-4 rounded border border-red-100",children:[(0,r.jsx)("h4",{className:"text-sm font-bold text-red-800 mb-2",children:"Relacionar Empresas"}),(o.empresas_pertencentes||[]).map((e,a)=>(0,r.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-1/2",children:(0,r.jsx)("input",{className:t.VR.INPUT,placeholder:"CNPJ",value:e.cnpj,onChange:e=>{const s=[...o.empresas_pertencentes||[]];s[a].cnpj=e.target.value,n("empresas_pertencentes",s)}})}),(0,r.jsx)("div",{className:"w-1/2",children:(0,r.jsx)("input",{className:t.VR.INPUT,placeholder:"CPF Dirigente",value:e.cpf,onChange:e=>{const s=[...o.empresas_pertencentes||[]];s[a].cpf=e.target.value,n("empresas_pertencentes",s)}})}),(0,r.jsx)("button",{onClick:()=>{const e=[...o.empresas_pertencentes||[]];e.splice(a,1),n("empresas_pertencentes",e)},className:t.VR.BTN_REMOVE,children:"X"})]},a)),(0,r.jsx)("button",{onClick:()=>{const e=[...o.empresas_pertencentes||[]];e.push({cnpj:"",cpf:""}),n("empresas_pertencentes",e)},className:t.VR.BTN_ADD+" mt-2",children:"+ Adicionar Empresa"})]})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:t.VR.FLEX_ROW_CENTER+" mb-4",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:o.houve_participacao_quadro_diretivo_administrativo,onChange:e=>n("houve_participacao_quadro_diretivo_administrativo",e.target.checked)}),(0,r.jsx)("label",{className:"font-bold text-slate-700",children:"Houve participa\xe7\xe3o do quadro diretivo em contrata\xe7\xf5es?"})]})})]})})},z=e=>{let{title:a,items:s,onChange:o}=e;return(0,r.jsxs)("div",{className:"mb-6 border border-slate-200 rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-slate-50 p-3 border-b border-slate-200",children:(0,r.jsx)("h4",{className:"font-bold text-slate-700 text-sm uppercase",children:a})}),(0,r.jsx)("div",{className:"p-4 space-y-3 bg-white",children:[{id:1,label:"Registro das compet\xeancias e estrutura organizacional"},{id:2,label:"Endere\xe7os, telefones e hor\xe1rios de atendimento"},{id:3,label:"Registros de repasses ou transfer\xeancias de recursos financeiros"},{id:4,label:"Registros das despesas"},{id:5,label:"Informa\xe7\xf5es sobre procedimentos licitat\xf3rios/compras"},{id:6,label:"Disponibiliza\xe7\xe3o de dados para acompanhamento de programas"}].map(e=>{const a=s.find(a=>a.requisito===e.id),n=!0===(null===a||void 0===a?void 0:a.atende);return(0,r.jsxs)("div",{className:"flex items-start gap-3 p-2 hover:bg-slate-50 rounded transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX+" mt-1",checked:n,onChange:a=>((e,a)=>{let t=[...s];const r=t.find(a=>a.requisito===e);a?r?r.atende=!0:t.push({requisito:e,atende:!0}):r?r.atende=!1:t.push({requisito:e,atende:!1}),o(t)})(e.id,a.target.checked)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-slate-700 font-medium block",children:e.label}),(0,r.jsxs)("span",{className:"text-[10px] text-slate-400 font-mono",children:["C\xf3digo Requisito: ",e.id]})]})]},e.id)})})]})},G=e=>{let{data:a,updateField:s}=e;const o=a.transparencia||{entidade_beneficiaria_mantem_sitio_internet:!1,sitios_internet:[],requisitos_artigos_7o_8o_paragrafo_1o:[],requisitos_sitio_artigo_8o_paragrafo_3o:[],requisitos_divulgacao_informacoes:[]};return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"27. Transpar\xeancia e Acesso \xe0 Informa\xe7\xe3o"}),(0,r.jsx)("div",{className:"mb-6 bg-blue-50 p-4 rounded border border-blue-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",className:t.VR.CHECKBOX,checked:o.entidade_beneficiaria_mantem_sitio_internet,onChange:e=>s("transparencia.entidade_beneficiaria_mantem_sitio_internet",e.target.checked)}),(0,r.jsx)("label",{className:"font-bold text-blue-900",children:"Entidade benefici\xe1ria mant\xe9m S\xedtio na Internet?"})]})}),o.entidade_beneficiaria_mantem_sitio_internet&&(0,r.jsxs)("div",{className:"animate-in fade-in space-y-6",children:[(0,r.jsx)(t.T6,{title:"Endere\xe7os dos S\xedtios Eletr\xf4nicos",items:o.sitios_internet||[],newItemTemplate:"",onAdd:()=>s("transparencia.sitios_internet",[...o.sitios_internet||[],""]),onRemove:e=>{const a=[...o.sitios_internet||[]];a.splice(e,1),s("transparencia.sitios_internet",a)},onUpdate:(e,a,t)=>{const r=[...o.sitios_internet||[]];r[e]=t,s("transparencia.sitios_internet",r)},renderItem:(e,a,s)=>(0,r.jsx)(t.D0,{label:"URL do S\xedtio",value:e,onChange:e=>s("",e)})}),(0,r.jsx)("hr",{className:"border-slate-200"}),(0,r.jsx)(z,{title:"Requisitos Art. 7\xba e 8\xba, \xa7 1\xba (Conte\xfado M\xednimo)",items:o.requisitos_artigos_7o_8o_paragrafo_1o||[],onChange:e=>s("transparencia.requisitos_artigos_7o_8o_paragrafo_1o",e)}),(0,r.jsx)(z,{title:"Requisitos Art. 8\xba, \xa7 3\xba (Ferramentas do S\xedtio)",items:o.requisitos_sitio_artigo_8o_paragrafo_3o||[],onChange:e=>s("transparencia.requisitos_sitio_artigo_8o_paragrafo_3o",e)}),(0,r.jsx)(z,{title:"Requisitos de Divulga\xe7\xe3o de Informa\xe7\xf5es (Prazos e Formatos)",items:o.requisitos_divulgacao_informacoes||[],onChange:e=>s("transparencia.requisitos_divulgacao_informacoes",e)})]})]})})},$=e=>{let{activeSection:a,formData:s,updateField:o,updateItem:n,addItem:i,removeItem:p,handleDownload:u}=e;const x=(e,a)=>{"string"===typeof a?o(a,e):console.error("Critical: handleComplexAdd received invalid path:",a)};switch(a){case"descritor":case"1":return(0,r.jsx)(l,{data:s,updateField:o});case"codigo_ajuste":case"2":return(0,r.jsx)(d,{data:s,updateField:o});case"retificacao":case"3":return(0,r.jsx)(m,{data:s,updateField:o});case"dados_gerais":case"19":return(0,r.jsx)(X,{data:s,updateField:o});case"prestacao_benef":case"25":return(0,r.jsx)(M,{data:s,updateField:o});case"responsaveis":case"20":return(0,r.jsx)(L,{data:s,updateField:o});case"empenhos":case"16":return(0,r.jsx)(V,{data:s,onUpdate:(e,a,s)=>n("empenhos",e,a,s),onAdd:e=>i("empenhos",e),onRemove:e=>p("empenhos",e)});case"repasses":case"17":return(0,r.jsx)(E,{data:s,fullData:s,onUpdate:(e,a,s)=>n("repasses",e,a,s),onAdd:e=>i("repasses",e),onRemove:e=>p("repasses",e)});case"receitas":case"10":return(0,r.jsx)(P,{data:s,onUpdate:o,onAdd:x,onRemove:()=>{}});case"contratos":case"6":return(0,r.jsx)(j,{data:s,onUpdate:(e,a,s)=>n("contratos",e,a,s),onAdd:e=>i("contratos",e),onRemove:e=>p("contratos",e)});case"documentos_fiscais":case"7":return(0,r.jsx)(f,{data:s,fullData:s,onUpdate:(e,a,s)=>n("documentos_fiscais",e,a,s),onAdd:e=>i("documentos_fiscais",e),onRemove:e=>p("documentos_fiscais",e)});case"pagamentos":case"8":return(0,r.jsx)(N,{data:s,fullData:s,onUpdate:(e,a,s)=>n("pagamentos",e,a,s),onAdd:e=>i("pagamentos",e),onRemove:e=>p("pagamentos",e)});case"glosas":case"15":return(0,r.jsx)(F,{data:s,onUpdate:(e,a,s)=>n("glosas",e,a,s),onAdd:e=>i("glosas",e),onRemove:e=>p("glosas",e)});case"ajustes_saldo":case"11":return(0,r.jsx)(y,{data:s,onUpdate:o,onAdd:x,onRemove:()=>{}});case"descontos":case"13":return(0,r.jsx)(T,{data:s,onUpdate:(e,a,s)=>n("descontos",e,a,s),onAdd:e=>i("descontos",e),onRemove:e=>p("descontos",e)});case"devolucoes":case"14":return(0,r.jsx)(I,{data:s,onUpdate:(e,a,s)=>n("devolucoes",e,a,s),onAdd:e=>i("devolucoes",e),onRemove:e=>p("devolucoes",e)});case"disponibilidades":case"9":return(0,r.jsx)(w,{data:s,onUpdate:o,onAdd:x,onRemove:()=>{}});case"relatorio_atividades":case"18":return(0,r.jsx)(S,{data:s,updateField:o});case"relatorio_gov":case"22":return(0,r.jsx)(B,{data:s,updateField:o});case"relacao_empregados":case"4":return(0,r.jsx)(C,{data:s,onUpdate:(e,a,s)=>n("relacao_empregados",e,a,s),onAdd:e=>i("relacao_empregados",e),onRemove:e=>p("relacao_empregados",e)});case"servidores_cedidos":case"12":return(0,r.jsx)(R,{data:s,onUpdate:(e,a,s)=>n("servidores_cedidos",e,a,s),onAdd:e=>i("servidores_cedidos",e),onRemove:e=>p("servidores_cedidos",e)});case"relacao_bens":case"5":return(0,r.jsx)(A,{data:s,onUpdate:o,onAdd:x,onRemove:()=>{}});case"demonstracoes":case"23":return(0,r.jsx)(U,{data:s,updateField:o});case"publicacoes":case"24":return(0,r.jsx)(q,{data:s,updateField:o});case"declaracoes":case"21":return(0,r.jsx)(H,{data:s,updateField:o});case"transparencia":case"27":return(0,r.jsx)(G,{data:s,updateField:o});case"parecer":case"26":return(0,r.jsx)(k,{data:s,updateField:o});case"preview":return(0,r.jsx)(c,{data:s,onDownloadJson:u});case"dashboard":return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"Dashboard"}),(0,r.jsx)("p",{className:"text-slate-500",children:"Vis\xe3o geral do preenchimento."})]});default:return(0,r.jsxs)("div",{className:t.VR.SECTION,children:[(0,r.jsx)(t.X3,{title:"Se\xe7\xe3o ".concat(a)}),(0,r.jsx)("p",{className:"text-slate-500",children:"Selecione uma se\xe7\xe3o no menu lateral."})]})}}},2750(e,a,s){s.d(a,{D0:()=>d,MG:()=>c,T6:()=>l,VR:()=>n,X3:()=>i});var o=s(9379),t=(s(5043),s(4516)),r=s(579);const n={INPUT:"w-full h-10 px-3 rounded-md border border-slate-300 text-sm text-slate-700 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-all placeholder:text-slate-400 disabled:bg-slate-50 disabled:text-slate-500",CHECKBOX:"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer transition-colors",LABEL:"block text-xs font-bold text-slate-500 uppercase mb-1.5 tracking-wider",SECTION:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-6 animate-in fade-in slide-in-from-bottom-2 duration-500",BTN_ADD:"h-9 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium shadow-sm transition-colors flex items-center gap-2 cursor-pointer",BTN_REMOVE:"text-red-500 hover:text-red-700 text-xs font-bold uppercase tracking-wide transition-colors px-2 py-1 rounded hover:bg-red-50 cursor-pointer",BTN_SUB:"h-7 px-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-xs font-bold",HEADER_TITLE:"text-xl font-bold text-slate-800",HEADER_DIVIDER:"flex justify-between items-center mb-6 pb-4 border-b border-slate-100",GRID_CONTAINER:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",FLEX_ROW_CENTER:"flex items-center gap-3"},i=e=>{let{title:a,children:s}=e;return(0,r.jsxs)("div",{className:n.HEADER_DIVIDER,children:[(0,r.jsx)("h2",{className:n.HEADER_TITLE,children:a}),(0,r.jsx)("div",{className:"flex gap-2",children:s})]})},c=e=>{let{label:a,error:s,children:o}=e;return(0,r.jsxs)("div",{className:"mb-1",children:[(0,r.jsx)("label",{className:n.LABEL,children:a}),o,s&&(0,r.jsx)("div",{className:"text-red-600 text-[10px] font-bold uppercase mt-1 animate-pulse",children:s})]})};function l(e){let{title:a,items:s,newItemTemplate:c,onAdd:l,onRemove:d,onUpdate:m,renderItem:p,ocrSection:u,onOcrData:x}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(i,{title:a,children:(0,r.jsx)("button",{onClick:()=>l(c),className:n.BTN_ADD,children:"+ Adicionar Item"})}),u&&(0,r.jsx)(t.O,{section:u,onDataExtracted:e=>{e&&("relacao_empregados"===u&&e.empregados&&Array.isArray(e.empregados)?e.empregados.forEach(e=>l(e)):x?x(e):l((0,o.A)((0,o.A)({},c),e)))}}),s&&s.length>0?s.map((e,a)=>(0,r.jsxs)("div",{className:n.SECTION+" relative border-l-4 border-l-slate-400",children:[(0,r.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,r.jsx)("button",{onClick:()=>d(a),className:n.BTN_REMOVE,children:"\ud83d\uddd1 Remover"})}),(0,r.jsx)("div",{className:"pt-2",children:p(e,a,(e,s)=>m(a,e,s))})]},a)):(0,r.jsx)("div",{className:"text-center p-8 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50",children:(0,r.jsx)("p",{className:"text-slate-400 text-sm font-medium",children:"Nenhum registro adicionado."})})]})}const d=e=>{let{label:a,value:s,onChange:o,type:t="text",error:i,options:l}=e;return(0,r.jsx)(c,{label:a,error:i,children:l?(0,r.jsx)("select",{className:n.INPUT,value:s,onChange:e=>o(e.target.value),children:l.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,r.jsx)("input",{type:t,className:n.INPUT,value:s,onChange:e=>o("number"===t?Number(e.target.value):e.target.value),step:"number"===t?"0.01":void 0})})}},4516(e,a,s){s.d(a,{O:()=>n});var o=s(5043);const t="http://localhost:8000";var r=s(579);const n=e=>{let{section:a,onDataExtracted:s}=e;const[n,i]=(0,o.useState)(!1),[c,l]=(0,o.useState)(null),[d,m]=(0,o.useState)(!0);o.useEffect(()=>{(async function(){try{return(await fetch("".concat(t,"/health"))).ok}catch(c){return console.warn("[OCRService] Backend n\xe3o dispon\xedvel:",c),!1}})().then(m)},[]);return(0,r.jsxs)("div",{className:"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-sm font-bold text-indigo-800 flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"OCR Inteligente (Gemini 2.0)"]}),(0,r.jsxs)("p",{className:"text-xs text-indigo-600 mt-1",children:["Extra\xe7\xe3o autom\xe1tica para se\xe7\xe3o: ",(0,r.jsx)("strong",{children:a})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"file",accept:"application/pdf",onChange:async e=>{if(e.target.files&&e.target.files[0]){const o=e.target.files[0];if(!o.type.includes("pdf"))return void l("\u274c Apenas PDF \xe9 suportado. Recebido: ".concat(o.type||"tipo desconhecido"));i(!0),l(null);try{console.log("[GeminiUploader] Enviando PDF para backend: ".concat(o.name));const e=await async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";if(!e.type.includes("pdf"))throw new Error("\u274c Apenas PDF \xe9 suportado");const s=new FormData;s.append("file",e);try{console.log("[OCRService] Extraindo dados de bloco:",a);const e=await fetch("".concat(t,"/api/ocr/extract-block?block_type=").concat(a),{method:"POST",body:s});if(!e.ok){const a=await e.json();throw new Error(a.detail||"HTTP ".concat(e.status))}return function(e,a){const s={};switch(a){case"general":e.cnpj&&e.cnpj.length>0&&(s.cnpj=e.cnpj[0]),e.cpf&&e.cpf.length>0&&(s.cpf=e.cpf[0]),e.dates&&e.dates.length>0&&(s.dates=e.dates),e.phones&&e.phones.length>0&&(s.phone=e.phones[0]),e.emails&&e.emails.length>0&&(s.email=e.emails[0]);break;case"finance":if(e.currency&&e.currency.length>0){s.values=e.currency;const a=e.currency[0].match(/[\d.,]+/);a&&(s.primary_value=a[0])}e.percentages&&e.percentages.length>0&&(s.percentages=e.percentages);break;default:s.patterns=e}return s}((await e.json()).patterns,a)}catch(c){const a=c.message||"Erro ao extrair dados de bloco";throw console.error("[OCRService] Erro ao extrair bloco:",a),new Error("\u274c Erro na extra\xe7\xe3o: ".concat(a))}}(o,"general");console.log("[GeminiUploader] Dados extra\xeddos com sucesso:",e),s(e)}catch(a){console.error("[GeminiUploader] Erro ao processar arquivo:",a);const e=(null===a||void 0===a?void 0:a.message)||"Erro ao processar PDF";l(e)}finally{i(!1)}}},disabled:n,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"Selecione um arquivo PDF"}),(0,r.jsx)("button",{disabled:n,className:"px-4 py-2 rounded text-sm font-medium shadow transition-colors ".concat(n?"bg-indigo-300":"bg-indigo-600 hover:bg-indigo-700"," text-white"),children:n?"Lendo Documento...":"Upload PDF/Imagem"})]})]}),c&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-2 font-medium",children:c})]})}}}]);
//# sourceMappingURL=836.753d8b4a.chunk.js.map