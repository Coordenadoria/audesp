{"version":3,"file":"static/js/385.bb846add.chunk.js","mappings":"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","sources":["components/ui/BlockBase.tsx","services/ocrService.ts","components/Dashboard.tsx","components/GeminiUploader.tsx"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport { GeminiUploader } from '../GeminiUploader';\n\n// --- Shared Styles ---\nexport const CLS = {\n    INPUT: \"w-full h-10 px-3 rounded-md border border-slate-300 text-sm text-slate-700 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-all placeholder:text-slate-400 disabled:bg-slate-50 disabled:text-slate-500\",\n    CHECKBOX: \"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer transition-colors\",\n    LABEL: \"block text-xs font-bold text-slate-500 uppercase mb-1.5 tracking-wider\",\n    SECTION: \"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-6 animate-in fade-in slide-in-from-bottom-2 duration-500\",\n    BTN_ADD: \"h-9 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium shadow-sm transition-colors flex items-center gap-2 cursor-pointer\",\n    BTN_REMOVE: \"text-red-500 hover:text-red-700 text-xs font-bold uppercase tracking-wide transition-colors px-2 py-1 rounded hover:bg-red-50 cursor-pointer\",\n    BTN_SUB: \"h-7 px-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-xs font-bold\",\n    HEADER_TITLE: \"text-xl font-bold text-slate-800\",\n    HEADER_DIVIDER: \"flex justify-between items-center mb-6 pb-4 border-b border-slate-100\",\n    GRID_CONTAINER: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\",\n    FLEX_ROW_CENTER: \"flex items-center gap-3\",\n};\n\nexport const SectionHeader = ({ title, children }: { title: string, children?: React.ReactNode }) => (\n    <div className={CLS.HEADER_DIVIDER}>\n        <h2 className={CLS.HEADER_TITLE}>{title}</h2>\n        <div className=\"flex gap-2\">{children}</div>\n    </div>\n);\n\nexport const InputGroup = ({ label, error, children }: { label: string, error?: string, children?: React.ReactNode }) => (\n    <div className=\"mb-1\">\n        <label className={CLS.LABEL}>{label}</label>\n        {children}\n        {error && <div className=\"text-red-600 text-[10px] font-bold uppercase mt-1 animate-pulse\">{error}</div>}\n    </div>\n);\n\n// --- Block Factory Props ---\ninterface ArrayBlockProps<T> {\n    title: string;\n    items: T[];\n    newItemTemplate: T;\n    onAdd: (item: T) => void;\n    onRemove: (index: number) => void;\n    onUpdate: (index: number, field: string, value: any) => void;\n    renderItem: (item: T, index: number, update: (field: string, val: any) => void) => React.ReactNode;\n    ocrSection?: string;\n    onOcrData?: (data: any) => void;\n    errors?: string[]; // Errors passed from parent validation logic\n}\n\nexport function ArrayBlock<T>({ \n    title, \n    items, \n    newItemTemplate, \n    onAdd, \n    onRemove, \n    onUpdate, \n    renderItem, \n    ocrSection,\n    onOcrData\n}: ArrayBlockProps<T>) {\n\n    const handleOcr = (data: any) => {\n        if (!data) return;\n        \n        // Strategy: if data is array, add all. if object, add one.\n        if (ocrSection === 'relacao_empregados' && data.empregados && Array.isArray(data.empregados)) {\n            data.empregados.forEach((emp: any) => onAdd(emp));\n        } else if (onOcrData) {\n            onOcrData(data); // Custom handler\n        } else {\n            // Default generic merge\n            onAdd({ ...newItemTemplate, ...data });\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <SectionHeader title={title}>\n                <button onClick={() => onAdd(newItemTemplate)} className={CLS.BTN_ADD}>+ Adicionar Item</button>\n            </SectionHeader>\n            \n            {ocrSection && <GeminiUploader section={ocrSection as any} onDataExtracted={handleOcr} />}\n            \n            {items && items.length > 0 ? (\n                items.map((item, idx) => (\n                    <div key={idx} className={CLS.SECTION + \" relative border-l-4 border-l-slate-400\"}>\n                        <div className=\"absolute top-4 right-4 z-10\">\n                            <button onClick={() => onRemove(idx)} className={CLS.BTN_REMOVE}>üóë Remover</button>\n                        </div>\n                        <div className=\"pt-2\">\n                             {renderItem(item, idx, (field, val) => onUpdate(idx, field, val))}\n                        </div>\n                    </div>\n                ))\n            ) : (\n                <div className=\"text-center p-8 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50\">\n                    <p className=\"text-slate-400 text-sm font-medium\">Nenhum registro adicionado.</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n// --- Simple Field Wrapper ---\nexport const Field = ({ label, value, onChange, type = \"text\", error, options }: any) => (\n    <InputGroup label={label} error={error}>\n        {options ? (\n            <select className={CLS.INPUT} value={value} onChange={e => onChange(e.target.value)}>\n                {options.map((opt: any) => (\n                    <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n            </select>\n        ) : (\n            <input \n                type={type} \n                className={CLS.INPUT} \n                value={value} \n                onChange={e => onChange(type === 'number' ? Number(e.target.value) : e.target.value)} \n                step={type === 'number' ? \"0.01\" : undefined}\n            />\n        )}\n    </InputGroup>\n);\n","\n/**\n * OCR SERVICE - VERS√ÉO 2.0\n * Extrai texto de PDFs usando Tesseract.js com detec√ß√£o avan√ßada\n * Identifica padr√µes de dados (CNPJ, CPF, datas, valores monet√°rios, etc)\n */\n\nimport * as pdfjsLib from 'pdfjs-dist';\nimport Tesseract from 'tesseract.js';\n\n// Configurar worker do PDF.js\nif (typeof window !== 'undefined') {\n  pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdn.jsdelivr.net/npm/pdfjs-dist@${pdfjsLib.version}/build/pdf.worker.min.js`;\n}\n\nexport interface ExtractedData {\n  cnpj?: string;\n  razao_social?: string;\n  municipio?: number;\n  entidade?: number;\n  ano?: number;\n  mes?: number;\n  \n  // Valores monet√°rios\n  valores?: {\n    repasses?: number;\n    receitas?: number;\n    despesas?: number;\n    disponibilidades?: number;\n  };\n  \n  // Pessoas\n  responsaveis?: string[];\n  cpfs?: string[];\n  \n  // Datas\n  datas?: string[];\n  \n  // Documentos\n  documentos_fiscais?: string[];\n  contratos?: string[];\n  \n  // Confian√ßa da extra√ß√£o (0-1)\n  confidence: number;\n  \n  // Raw text extra√≠do\n  rawText: string;\n}\n\n/**\n * Extrai texto de um PDF usando OCR\n */\nexport async function extractTextFromPDF(file: File): Promise<string> {\n  console.log('[OCR] Iniciando extra√ß√£o de PDF:', file.name);\n  \n  const arrayBuffer = await file.arrayBuffer();\n  const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\n  \n  let fullText = '';\n  \n  for (let pageNum = 1; pageNum <= Math.min(pdf.numPages, 10); pageNum++) {\n    const page = await pdf.getPage(pageNum);\n    \n    // Renderizar p√°gina como imagem para OCR\n    const viewport = page.getViewport({ scale: 2 });\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    \n    if (!context) continue;\n    \n    canvas.width = viewport.width;\n    canvas.height = viewport.height;\n    \n    // Renderizar p√°gina no canvas\n    await page.render({\n      canvasContext: context,\n      viewport: viewport\n    }).promise;\n    \n    // Usar OCR no canvas\n    console.log(`[OCR] Processando p√°gina ${pageNum}/${pdf.numPages}...`);\n    const result = await Tesseract.recognize(canvas, 'por+eng', {\n      logger: m => {\n        if (m.status === 'recognizing') {\n          console.log(`[OCR] P√°gina ${pageNum}: ${Math.round(m.progress * 100)}%`);\n        }\n      }\n    });\n    \n    fullText += result.data.text + '\\n';\n  }\n  \n  console.log('[OCR] Extra√ß√£o completa, tamanho:', fullText.length);\n  return fullText;\n}\n\n/**\n * Detecta e extrai padr√µes de dados do texto\n */\nexport function detectPatterns(text: string): ExtractedData {\n  const data: ExtractedData = {\n    confidence: 0.5,\n    rawText: text,\n    valores: {},\n    responsaveis: [],\n    cpfs: [],\n    datas: [],\n    documentos_fiscais: [],\n    contratos: []\n  };\n  \n  // Padr√£o: CNPJ (14 d√≠gitos)\n  const cnpjMatch = text.match(/(\\d{2}\\.?\\d{3}\\.?\\d{3}\\/?\\d{4}-?\\d{2})/);\n  if (cnpjMatch) {\n    data.cnpj = cleanCNPJ(cnpjMatch[1]);\n    console.log('[OCR] CNPJ detectado:', data.cnpj);\n  }\n  \n  // Padr√£o: CPF (11 d√≠gitos)\n  const cpfMatches = text.matchAll(/(\\d{3}\\.?\\d{3}\\.?\\d{3}-?\\d{2})/g);\n  for (const match of cpfMatches) {\n    const cpf = cleanCPF(match[1]);\n    if (!data.cpfs!.includes(cpf)) {\n      data.cpfs!.push(cpf);\n    }\n  }\n  console.log('[OCR] CPFs detectados:', data.cpfs);\n  \n  // Padr√£o: Datas (DD/MM/YYYY ou YYYY-MM-DD)\n  const dataMatches = text.matchAll(/(\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{4}|\\d{4}[\\/\\-]\\d{1,2}[\\/\\-]\\d{1,2})/g);\n  for (const match of dataMatches) {\n    const data_formatada = parseDate(match[1]);\n    if (data_formatada && !data.datas!.includes(data_formatada)) {\n      data.datas!.push(data_formatada);\n    }\n  }\n  console.log('[OCR] Datas detectadas:', data.datas);\n  \n  // Padr√£o: Valores monet√°rios (R$ XXX.XXX,XX)\n  const valoresMatch = text.match(/R\\$[\\s]*([\\d.,]+)/gi);\n  if (valoresMatch) {\n    const valores = valoresMatch.map(v => parseFloat(v.replace(/[^\\d,]/g, '').replace(',', '.')));\n    if (valores.length > 0) {\n      data.valores!.despesas = valores.reduce((a, b) => a + b, 0) / valores.length;\n      console.log('[OCR] Valores detectados:', valores);\n    }\n  }\n  \n  // Padr√£o: M√™s e Ano\n  const anoMatch = text.match(/(\\d{4})/);\n  if (anoMatch) {\n    data.ano = parseInt(anoMatch[1]);\n    console.log('[OCR] Ano detectado:', data.ano);\n  }\n  \n  // Detectar m√™s (se em portugu√™s)\n  const meses = ['janeiro', 'fevereiro', 'mar√ßo', 'abril', 'maio', 'junho', \n                 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];\n  for (let i = 0; i < meses.length; i++) {\n    if (text.toLowerCase().includes(meses[i])) {\n      data.mes = i + 1;\n      console.log('[OCR] M√™s detectado:', data.mes, meses[i]);\n      break;\n    }\n  }\n  \n  // For√ßa m√™s 12 para presta√ß√£o de contas\n  if (text.toLowerCase().includes('presta√ß√£o') || text.toLowerCase().includes('contas')) {\n    data.mes = 12;\n    console.log('[OCR] Detectado presta√ß√£o de contas - for√ßando m√™s 12');\n  }\n  \n  // Padr√£o: Munic√≠pio (c√≥digo IBGE 7 d√≠gitos come√ßando com 35 para SP)\n  const municipioMatch = text.match(/(35\\d{5})/);\n  if (municipioMatch) {\n    data.municipio = parseInt(municipioMatch[1]);\n    console.log('[OCR] Munic√≠pio detectado:', data.municipio);\n  }\n  \n  // Detec√ß√£o de palavras-chave\n  const keywords: { [key: string]: string[] } = {\n    responsaveis: ['respons√°vel', 'diretor', 'presidente', 'gestor', 'ordenador'],\n    documentos: ['nf', 'nota fiscal', 'recibo', 'comprovante', 'fatura'],\n    contratos: ['contrato', 'termo', 'acordo', 'licita√ß√£o']\n  };\n  \n  // Extrair linhas com palavras-chave\n  const linhas = text.split('\\n');\n  for (const linha of linhas) {\n    for (const [tipo, palavras] of Object.entries(keywords)) {\n      if (palavras.some(p => linha.toLowerCase().includes(p))) {\n        if (tipo === 'responsaveis' && !data.responsaveis!.includes(linha.trim())) {\n          data.responsaveis!.push(linha.trim());\n        } else if (tipo === 'documentos' && !data.documentos_fiscais!.includes(linha.trim())) {\n          data.documentos_fiscais!.push(linha.trim());\n        } else if (tipo === 'contratos' && !data.contratos!.includes(linha.trim())) {\n          data.contratos!.push(linha.trim());\n        }\n      }\n    }\n  }\n  \n  // Calcular confian√ßa (baseado em quantos campos foram encontrados)\n  const camposPreenchidos = [\n    data.cnpj,\n    data.ano,\n    data.mes,\n    data.cpfs && data.cpfs.length > 0,\n    data.datas && data.datas.length > 0,\n    data.valores?.despesas\n  ].filter(Boolean).length;\n  \n  data.confidence = Math.min(0.95, camposPreenchidos / 6);\n  \n  console.log('[OCR] Confian√ßa da extra√ß√£o:', Math.round(data.confidence * 100) + '%');\n  \n  return data;\n}\n\n/**\n * Fun√ß√£o auxiliar para limpar e validar CNPJ\n */\nfunction cleanCNPJ(cnpj: string): string {\n  return cnpj.replace(/\\D/g, '');\n}\n\n/**\n * Fun√ß√£o auxiliar para limpar e validar CPF\n */\nfunction cleanCPF(cpf: string): string {\n  return cpf.replace(/\\D/g, '');\n}\n\n/**\n * Fun√ß√£o auxiliar para parse de data (converte para YYYY-MM-DD)\n */\nfunction parseDate(dateStr: string): string | null {\n  try {\n    // Tenta YYYY-MM-DD\n    if (dateStr.match(/\\d{4}[\\/\\-]\\d{2}[\\/\\-]\\d{2}/)) {\n      const [year, month, day] = dateStr.replace(/\\//g, '-').split('-');\n      return `${year}-${month}-${day}`;\n    }\n    \n    // Tenta DD/MM/YYYY\n    const [day, month, year] = dateStr.replace(/\\//g, '-').split('-');\n    if (parseInt(year) > 1900 && parseInt(month) > 0 && parseInt(month) <= 12 && parseInt(day) > 0 && parseInt(day) <= 31) {\n      return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;\n    }\n  } catch (e) {\n    return null;\n  }\n  return null;\n}\n\n/**\n * Processa arquivo PDF e retorna dados extra√≠dos\n */\nexport async function processPDFFile(file: File): Promise<ExtractedData> {\n  try {\n    console.log('[OCR] Iniciando processamento de:', file.name);\n    \n    // Extrair texto do PDF\n    const text = await extractTextFromPDF(file);\n    \n    // Detectar padr√µes\n    const data = detectPatterns(text);\n    \n    return data;\n  } catch (error) {\n    console.error('[OCR] Erro ao processar PDF:', error);\n    throw new Error(`Erro ao processar PDF: ${error instanceof Error ? error.message : 'Desconhecido'}`);\n  }\n}\n\n/**\n * Mapeia dados extra√≠dos para o formato do formul√°rio\n */\nexport function mapExtractedDataToForm(extracted: ExtractedData): Partial<any> {\n  return {\n    descritor: {\n      municipio: extracted.municipio,\n      entidade: extracted.entidade || 1,\n      ano: extracted.ano,\n      mes: extracted.mes || 12\n    },\n    dados_gerais_entidade_beneficiaria: {\n      cnpj: extracted.cnpj,\n      razao_social: extracted.razao_social\n    },\n    receitas: {\n      repasses_recebidos: extracted.valores?.repasses || 0\n    },\n    disponibilidades: {\n      saldos: [\n        {\n          saldo_bancario: extracted.valores?.disponibilidades || 0\n        }\n      ]\n    },\n    extraction_metadata: {\n      source: 'PDF_OCR',\n      confidence: extracted.confidence,\n      timestamp: new Date().toISOString(),\n      extracted_cpfs: extracted.cpfs,\n      extracted_datas: extracted.datas,\n      raw_text_preview: extracted.rawText.substring(0, 500)\n    }\n  };\n}\n/**\n * Extrai dados estruturados de documentos (base64) para um bloco espec√≠fico\n * Fun√ß√£o auxiliar para compatibilidade com GeminiUploader\n */\nexport async function extractBlockData(base64String: string, mimeType: string, section: string): Promise<any> {\n  // Esta fun√ß√£o ser√° chamada pelo GeminiUploader para extrair dados por se√ß√£o\n  // Para PDFs, usa OCR; para outros formatos, seria Gemini\n  \n  console.log(`[OCR] Extracting block data for section: ${section}`);\n  console.log(`[OCR] Mime type: ${mimeType}`);\n  \n  try {\n    // Se √© PDF, usa OCR\n    if (mimeType === 'application/pdf') {\n      // Converter base64 para Blob/File\n      const binaryString = atob(base64String);\n      const bytes = new Uint8Array(binaryString.length);\n      for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n      }\n      const blob = new Blob([bytes], { type: mimeType });\n      const file = new File([blob], 'document.pdf', { type: mimeType });\n      \n      // Processar PDF com OCR\n      const extracted = await processPDFFile(file);\n      \n      // Mapear para a se√ß√£o especificada\n      const mapped = mapExtractedDataToForm(extracted);\n      \n      console.log(`[OCR] Extraction complete for section ${section}. Confidence: ${extracted.confidence}`);\n      \n      return {\n        success: true,\n        source: 'PDF_OCR',\n        confidence: extracted.confidence,\n        data: mapped,\n        section: section\n      };\n    }\n    \n    // Para outros tipos de documento, retorna erro (apenas PDF suportado por enquanto)\n    throw new Error(`Apenas PDF √© suportado. Recebido: ${mimeType}`);\n  } catch (error: any) {\n    console.error(`[OCR] Error in extractBlockData:`, error);\n    throw new Error(`Erro ao processar PDF: ${error.message}`);\n  }\n}","\nimport React from 'react';\nimport { PrestacaoContas } from '../schemas/type-definitions';\nimport { SectionStatus } from '../services/validationService';\nimport { CLS } from './ui/BlockBase';\n\ninterface DashboardProps {\n    data: PrestacaoContas;\n    sectionStatus: Record<string, SectionStatus>;\n    onNavigate: (sectionId: string) => void;\n}\n\nexport const Dashboard: React.FC<DashboardProps> = ({ data, sectionStatus, onNavigate }) => {\n    \n    // Calculate Financial Totals\n    const totalRepasses = data.receitas?.repasses_recebidos?.reduce((acc, cur) => acc + (cur.valor || 0), 0) || 0;\n    const totalOutrasReceitas = (data.receitas?.outras_receitas?.reduce((acc, cur) => acc + (cur.valor || 0), 0) || 0) +\n                                (data.receitas?.receitas_aplic_financ_repasses_publicos_municipais || 0) +\n                                (data.receitas?.receitas_aplic_financ_repasses_publicos_estaduais || 0) +\n                                (data.receitas?.receitas_aplic_financ_repasses_publicos_federais || 0);\n    \n    const totalReceitas = totalRepasses + totalOutrasReceitas;\n\n    const totalPagamentos = data.pagamentos?.reduce((acc, cur) => acc + (cur.pagamento_valor || 0), 0) || 0;\n    const totalDevolucoes = data.devolucoes?.reduce((acc, cur) => acc + (cur.valor || 0), 0) || 0;\n    const totalDespesas = totalPagamentos + totalDevolucoes;\n\n    const saldo = totalReceitas - totalDespesas;\n\n    // Calculate Completion\n    // Uses the semantic keys now\n    const sectionKeys = [\n        'descritor', 'codigo_ajuste', 'dados_gerais', 'responsaveis',\n        'empenhos', 'contratos', 'documentos_fiscais', 'pagamentos', 'repasses', 'receitas', 'glosas', 'ajustes_saldo', 'descontos', 'devolucoes', 'disponibilidades',\n        'relatorio_atividades', 'relatorio_gov',\n        'relacao_empregados', 'servidores_cedidos', 'relacao_bens',\n        'demonstracoes', 'publicacoes',\n        'declaracoes', 'transparencia', 'parecer'\n    ];\n    \n    const totalSections = sectionKeys.length;\n    const validSections = (Object.values(sectionStatus) as SectionStatus[]).filter(s => s.status === 'valid').length;\n    const progress = Math.round((validSections / totalSections) * 100);\n\n    return (\n        <div className=\"space-y-8 animate-in fade-in duration-500\">\n            {/* Header / Summary */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                <div className=\"bg-white p-6 rounded-lg shadow-sm border border-slate-200\">\n                    <h3 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">Progresso do Preenchimento</h3>\n                    <div className=\"flex items-end gap-2\">\n                        <span className=\"text-3xl font-bold text-slate-800\">{progress}%</span>\n                        <span className=\"text-sm text-slate-500 mb-1\">{validSections}/{totalSections} Blocos</span>\n                    </div>\n                    <div className=\"w-full bg-slate-100 h-2 mt-3 rounded-full overflow-hidden\">\n                        <div className=\"bg-blue-600 h-full transition-all duration-1000\" style={{ width: `${progress}%` }}></div>\n                    </div>\n                </div>\n\n                <div className=\"bg-white p-6 rounded-lg shadow-sm border border-slate-200\">\n                    <h3 className=\"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2\">Total Receitas</h3>\n                    <span className=\"text-2xl font-bold text-slate-800\">\n                        {totalReceitas.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n                    </span>\n                    <p className=\"text-[10px] text-slate-400 mt-1\">Repasses + Rendimentos</p>\n                </div>\n\n                <div className=\"bg-white p-6 rounded-lg shadow-sm border border-slate-200\">\n                    <h3 className=\"text-xs font-bold text-red-500 uppercase tracking-wider mb-2\">Total Despesas</h3>\n                    <span className=\"text-2xl font-bold text-slate-800\">\n                        {totalDespesas.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n                    </span>\n                    <p className=\"text-[10px] text-slate-400 mt-1\">Pagamentos + Devolu√ß√µes</p>\n                </div>\n\n                <div className={`p-6 rounded-lg shadow-sm border ${saldo >= 0 ? 'bg-blue-50 border-blue-200' : 'bg-red-50 border-red-200'}`}>\n                    <h3 className=\"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2\">Saldo Final Estimado</h3>\n                    <span className={`text-2xl font-bold ${saldo >= 0 ? 'text-blue-700' : 'text-red-700'}`}>\n                        {saldo.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n                    </span>\n                    <p className=\"text-[10px] text-slate-500 mt-1\">Calculado automaticamente</p>\n                </div>\n            </div>\n\n            {/* Sections Grid */}\n            <div className={CLS.SECTION}>\n                <div className=\"flex justify-between items-center mb-6\">\n                    <h2 className={CLS.HEADER_TITLE}>Status dos Blocos</h2>\n                    <div className=\"flex gap-4 text-xs font-medium\">\n                        <span className=\"flex items-center gap-1\"><span className=\"w-2 h-2 rounded-full bg-green-500\"></span> Completo</span>\n                        <span className=\"flex items-center gap-1\"><span className=\"w-2 h-2 rounded-full bg-red-500\"></span> Inv√°lido/Pendente</span>\n                        <span className=\"flex items-center gap-1\"><span className=\"w-2 h-2 rounded-full bg-slate-300\"></span> Vazio (Opcional)</span>\n                    </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                    {sectionKeys.map(id => {\n                        const status = sectionStatus[id];\n                        let statusColor = 'bg-slate-50 border-slate-200 text-slate-400';\n                        let icon = '‚ö™';\n\n                        if (status?.status === 'valid') {\n                            statusColor = 'bg-green-50 border-green-200 text-green-800 hover:bg-green-100';\n                            icon = '‚úÖ';\n                        } else if (status?.status === 'invalid') {\n                            statusColor = 'bg-red-50 border-red-200 text-red-800 hover:bg-red-100';\n                            icon = '‚ö†Ô∏è';\n                        }\n\n                        // Human Readable Labels for Semantic Keys\n                        const labels: Record<string, string> = {\n                            'descritor': 'Descritor', 'codigo_ajuste': 'C√≥digo Ajuste', 'dados_gerais': 'Dados Gerais', 'responsaveis': 'Respons√°veis',\n                            'empenhos': 'Empenhos', 'contratos': 'Contratos', 'documentos_fiscais': 'Docs Fiscais', 'pagamentos': 'Pagamentos', 'repasses': 'Repasses', 'receitas': 'Receitas', 'glosas': 'Glosas', 'ajustes_saldo': 'Ajustes Saldo', 'descontos': 'Descontos', 'devolucoes': 'Devolu√ß√µes', 'disponibilidades': 'Disponibilidades',\n                            'relatorio_atividades': 'Rel. Atividades', 'relatorio_gov': 'Rel. Governo',\n                            'relacao_empregados': 'Empregados', 'servidores_cedidos': 'Cedidos', 'relacao_bens': 'Bens',\n                            'demonstracoes': 'Dem. Cont√°beis', 'publicacoes': 'Publica√ß√µes',\n                            'declaracoes': 'Declara√ß√µes', 'transparencia': 'Transpar√™ncia', 'parecer': 'Parecer'\n                        };\n\n                        return (\n                            <button \n                                key={id}\n                                onClick={() => onNavigate(id)}\n                                className={`p-3 rounded border text-left transition-all ${statusColor} relative group`}\n                            >\n                                <div className=\"flex justify-between items-start\">\n                                    <span className=\"font-bold text-xs uppercase tracking-wide opacity-70\">Se√ß√£o</span>\n                                    <span>{icon}</span>\n                                </div>\n                                <div className=\"font-semibold text-sm mt-1 truncate\">\n                                    {labels[id] || id}\n                                </div>\n                                {status?.errors.length > 0 && (\n                                    <div className=\"hidden group-hover:block absolute bottom-full left-0 w-full bg-slate-800 text-white text-[10px] p-2 rounded mb-2 z-10 shadow-lg\">\n                                        {status.errors[0]} {status.errors.length > 1 && `(+${status.errors.length - 1})`}\n                                    </div>\n                                )}\n                            </button>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n};\n","\nimport React, { useState } from 'react';\nimport { extractBlockData } from '../services/ocrService';\n\ninterface GeminiUploaderProps {\n  section: string; // Chave sem√¢ntica (ex: 'contratos', 'empenhos')\n  onDataExtracted: (data: any) => void;\n}\n\nexport const GeminiUploader: React.FC<GeminiUploaderProps> = ({ section, onDataExtracted }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setLoading(true);\n      setError(null);\n\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        try {\n          const base64String = (reader.result as string).split(',')[1];\n          const mimeType = file.type;\n          \n          console.log(`[GeminiUploader] Processing file: ${file.name}, type: ${mimeType}`);\n          \n          // Using the new OCR Service\n          const extractedData = await extractBlockData(base64String, mimeType, section);\n          \n          if (extractedData && extractedData.success) {\n             console.log(`[GeminiUploader] Data extracted successfully:`, extractedData);\n             onDataExtracted(extractedData);\n          } else {\n             console.warn(`[GeminiUploader] No data extracted from document`);\n             setError(\"OCR: N√£o foi poss√≠vel identificar dados estruturados neste documento.\");\n          }\n        } catch (err: any) {\n          console.error(`[GeminiUploader] Error processing file:`, err);\n          const errorMsg = err?.message || \"Erro desconhecido\";\n          setError(`‚ùå ${errorMsg}. Tente um PDF com melhor qualidade.`);\n        } finally {\n          setLoading(false);\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div className=\"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-sm\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n            <h3 className=\"text-sm font-bold text-indigo-800 flex items-center gap-2\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\" clipRule=\"evenodd\" />\n                </svg>\n                OCR Inteligente (Gemini 2.0)\n            </h3>\n            <p className=\"text-xs text-indigo-600 mt-1\">\n                Extra√ß√£o autom√°tica para se√ß√£o: <strong>{section}</strong>\n            </p>\n        </div>\n        <div className=\"relative\">\n             <input\n                type=\"file\"\n                accept=\"application/pdf\"\n                onChange={handleFileChange}\n                disabled={loading}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                title=\"Selecione um arquivo PDF\"\n            />\n            <button disabled={loading} className={`px-4 py-2 rounded text-sm font-medium shadow transition-colors ${loading ? 'bg-indigo-300' : 'bg-indigo-600 hover:bg-indigo-700'} text-white`}>\n                {loading ? 'Lendo Documento...' : 'Upload PDF/Imagem'}\n            </button>\n        </div>\n      </div>\n      {error && <p className=\"text-red-600 text-xs mt-2 font-medium\">{error}</p>}\n    </div>\n  );\n};\n"],"names":["CLS","INPUT","CHECKBOX","LABEL","SECTION","BTN_ADD","BTN_REMOVE","BTN_SUB","HEADER_TITLE","HEADER_DIVIDER","GRID_CONTAINER","FLEX_ROW_CENTER","SectionHeader","_ref","title","children","_jsxs","className","_jsx","InputGroup","_ref2","label","error","ArrayBlock","_ref3","items","newItemTemplate","onAdd","onRemove","onUpdate","renderItem","ocrSection","onOcrData","onClick","GeminiUploader","section","onDataExtracted","data","empregados","Array","isArray","forEach","emp","_objectSpread","length","map","item","idx","field","val","Field","_ref4","value","onChange","type","options","e","target","opt","Number","step","undefined","cleanCPF","cpf","replace","parseDate","dateStr","match","year","month","day","split","concat","parseInt","padStart","async","processPDFFile","file","console","log","name","text","arrayBuffer","pdf","pdfjsLib","promise","fullText","pageNum","Math","min","numPages","page","getPage","viewport","getViewport","scale","canvas","document","createElement","context","getContext","width","height","render","canvasContext","Tesseract","logger","m","status","round","progress","extractTextFromPDF","_data$valores","confidence","rawText","valores","responsaveis","cpfs","datas","documentos_fiscais","contratos","cnpjMatch","cnpj","cpfMatches","matchAll","includes","push","dataMatches","data_formatada","valoresMatch","v","parseFloat","despesas","reduce","a","b","anoMatch","ano","meses","i","toLowerCase","mes","municipioMatch","municipio","keywords","documentos","linhas","linha","tipo","palavras","Object","entries","some","p","trim","camposPreenchidos","filter","Boolean","detectPatterns","Error","message","mapExtractedDataToForm","extracted","_extracted$valores","_extracted$valores2","descritor","entidade","dados_gerais_entidade_beneficiaria","razao_social","receitas","repasses_recebidos","repasses","disponibilidades","saldos","saldo_bancario","extraction_metadata","source","timestamp","Date","toISOString","extracted_cpfs","extracted_datas","raw_text_preview","substring","extractBlockData","base64String","mimeType","binaryString","atob","bytes","Uint8Array","charCodeAt","blob","Blob","File","mapped","success","window","workerSrc","Dashboard","_data$receitas","_data$receitas$repass","_data$receitas2","_data$receitas2$outra","_data$receitas3","_data$receitas4","_data$receitas5","_data$pagamentos","_data$devolucoes","sectionStatus","onNavigate","totalReceitas","acc","cur","valor","outras_receitas","receitas_aplic_financ_repasses_publicos_municipais","receitas_aplic_financ_repasses_publicos_estaduais","receitas_aplic_financ_repasses_publicos_federais","totalDespesas","pagamentos","pagamento_valor","devolucoes","saldo","sectionKeys","totalSections","validSections","values","s","style","toLocaleString","currency","id","statusColor","icon","errors","loading","setLoading","useState","setError","xmlns","viewBox","fill","fillRule","d","clipRule","accept","files","reader","FileReader","onloadend","result","extractedData","warn","err","errorMsg","readAsDataURL","disabled"],"ignoreList":[],"sourceRoot":""}