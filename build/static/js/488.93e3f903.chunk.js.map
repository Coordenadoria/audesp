{"version":3,"file":"static/js/488.93e3f903.chunk.js","mappings":"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","sources":["components/ui/BlockBase.tsx","services/dataSanitizer.ts","services/ocrService.ts","components/GeminiUploader.tsx","services/geminiService.ts","components/FullReportImporter.tsx"],"sourcesContent":["\nimport React, { useState } from 'react';\nimport { GeminiUploader } from '../GeminiUploader';\n\n// --- Shared Styles ---\nexport const CLS = {\n    INPUT: \"w-full h-10 px-3 rounded-md border border-slate-300 text-sm text-slate-700 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none transition-all placeholder:text-slate-400 disabled:bg-slate-50 disabled:text-slate-500\",\n    CHECKBOX: \"w-5 h-5 rounded border-slate-300 text-blue-600 focus:ring-blue-500 cursor-pointer transition-colors\",\n    LABEL: \"block text-xs font-bold text-slate-500 uppercase mb-1.5 tracking-wider\",\n    SECTION: \"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-6 animate-in fade-in slide-in-from-bottom-2 duration-500\",\n    BTN_ADD: \"h-9 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium shadow-sm transition-colors flex items-center gap-2 cursor-pointer\",\n    BTN_REMOVE: \"text-red-500 hover:text-red-700 text-xs font-bold uppercase tracking-wide transition-colors px-2 py-1 rounded hover:bg-red-50 cursor-pointer\",\n    BTN_SUB: \"h-7 px-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-xs font-bold\",\n    HEADER_TITLE: \"text-xl font-bold text-slate-800\",\n    HEADER_DIVIDER: \"flex justify-between items-center mb-6 pb-4 border-b border-slate-100\",\n    GRID_CONTAINER: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\",\n    FLEX_ROW_CENTER: \"flex items-center gap-3\",\n};\n\nexport const SectionHeader = ({ title, children }: { title: string, children?: React.ReactNode }) => (\n    <div className={CLS.HEADER_DIVIDER}>\n        <h2 className={CLS.HEADER_TITLE}>{title}</h2>\n        <div className=\"flex gap-2\">{children}</div>\n    </div>\n);\n\nexport const InputGroup = ({ label, error, children }: { label: string, error?: string, children?: React.ReactNode }) => (\n    <div className=\"mb-1\">\n        <label className={CLS.LABEL}>{label}</label>\n        {children}\n        {error && <div className=\"text-red-600 text-[10px] font-bold uppercase mt-1 animate-pulse\">{error}</div>}\n    </div>\n);\n\n// --- Block Factory Props ---\ninterface ArrayBlockProps<T> {\n    title: string;\n    items: T[];\n    newItemTemplate: T;\n    onAdd: (item: T) => void;\n    onRemove: (index: number) => void;\n    onUpdate: (index: number, field: string, value: any) => void;\n    renderItem: (item: T, index: number, update: (field: string, val: any) => void) => React.ReactNode;\n    ocrSection?: string;\n    onOcrData?: (data: any) => void;\n    errors?: string[]; // Errors passed from parent validation logic\n}\n\nexport function ArrayBlock<T>({ \n    title, \n    items, \n    newItemTemplate, \n    onAdd, \n    onRemove, \n    onUpdate, \n    renderItem, \n    ocrSection,\n    onOcrData\n}: ArrayBlockProps<T>) {\n\n    const handleOcr = (data: any) => {\n        if (!data) return;\n        \n        // Strategy: if data is array, add all. if object, add one.\n        if (ocrSection === 'relacao_empregados' && data.empregados && Array.isArray(data.empregados)) {\n            data.empregados.forEach((emp: any) => onAdd(emp));\n        } else if (onOcrData) {\n            onOcrData(data); // Custom handler\n        } else {\n            // Default generic merge\n            onAdd({ ...newItemTemplate, ...data });\n        }\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <SectionHeader title={title}>\n                <button onClick={() => onAdd(newItemTemplate)} className={CLS.BTN_ADD}>+ Adicionar Item</button>\n            </SectionHeader>\n            \n            {ocrSection && <GeminiUploader section={ocrSection as any} onDataExtracted={handleOcr} />}\n            \n            {items && items.length > 0 ? (\n                items.map((item, idx) => (\n                    <div key={idx} className={CLS.SECTION + \" relative border-l-4 border-l-slate-400\"}>\n                        <div className=\"absolute top-4 right-4 z-10\">\n                            <button onClick={() => onRemove(idx)} className={CLS.BTN_REMOVE}>üóë Remover</button>\n                        </div>\n                        <div className=\"pt-2\">\n                             {renderItem(item, idx, (field, val) => onUpdate(idx, field, val))}\n                        </div>\n                    </div>\n                ))\n            ) : (\n                <div className=\"text-center p-8 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50\">\n                    <p className=\"text-slate-400 text-sm font-medium\">Nenhum registro adicionado.</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n// --- Simple Field Wrapper ---\nexport const Field = ({ label, value, onChange, type = \"text\", error, options }: any) => (\n    <InputGroup label={label} error={error}>\n        {options ? (\n            <select className={CLS.INPUT} value={value} onChange={e => onChange(e.target.value)}>\n                {options.map((opt: any) => (\n                    <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n            </select>\n        ) : (\n            <input \n                type={type} \n                className={CLS.INPUT} \n                value={value} \n                onChange={e => onChange(type === 'number' ? Number(e.target.value) : e.target.value)} \n                step={type === 'number' ? \"0.01\" : undefined}\n            />\n        )}\n    </InputGroup>\n);\n","\n/**\n * DATA SANITIZER SERVICE\n * Normalizes AI/OCR output into strict Audesp formats.\n */\n\nexport const Patterns = {\n    CPF: /(\\d{3})\\.?(\\d{3})\\.?(\\d{3})-?(\\d{2})/g,\n    CNPJ: /(\\d{2})\\.?(\\d{3})\\.?(\\d{3})\\/?(\\d{4})-?(\\d{2})/g,\n    DATE_BR: /(\\d{1,2})\\/(\\d{1,2})\\/(\\d{2,4})/g,\n    MONEY: /R\\$\\s?([\\d.,]+)/g\n};\n\nexport const Sanitizers = {\n    /**\n     * Removes non-digits. Returns 11 chars for CPF or 14 for CNPJ.\n     */\n    cleanDoc: (value: string | number | undefined): string => {\n        if (!value) return \"\";\n        const str = String(value).replace(/\\D/g, \"\");\n        return str;\n    },\n\n    /**\n     * Tries to parse date from DD/MM/YYYY or YYYY-MM-DD to YYYY-MM-DD\n     */\n    cleanDate: (value: string | undefined): string => {\n        if (!value) return \"\";\n        \n        // If already YYYY-MM-DD\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(value)) return value;\n\n        // Try DD/MM/YYYY\n        const matchBR = value.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/);\n        if (matchBR) {\n            const day = matchBR[1].padStart(2, '0');\n            const month = matchBR[2].padStart(2, '0');\n            const year = matchBR[3];\n            return `${year}-${month}-${day}`;\n        }\n\n        return value; // Return original if unknown format (let validation catch it)\n    },\n\n    /**\n     * Converts \"R$ 1.234,56\" or \"1234.56\" to float\n     */\n    cleanNumber: (value: string | number | undefined): number => {\n        if (typeof value === 'number') return value;\n        if (!value) return 0;\n\n        let str = String(value);\n        \n        // If format is Brazilian (1.234,56)\n        if (str.includes(',') && !str.includes('US')) {\n            str = str.replace(/\\./g, '').replace(',', '.');\n        } \n        // If contains currency symbol\n        str = str.replace(/[^\\d.-]/g, '');\n\n        const num = parseFloat(str);\n        return isNaN(num) ? 0 : num;\n    }\n};\n\n/**\n * Recursive function to traverse the object and sanitize specific keys\n */\nexport function sanitizeObject(obj: any): any {\n    if (Array.isArray(obj)) {\n        return obj.map(item => sanitizeObject(item));\n    } else if (typeof obj === 'object' && obj !== null) {\n        const newObj: any = {};\n        for (const key in obj) {\n            const value = obj[key];\n            \n            if (key.includes('cpf') || key.includes('cnpj') || key.includes('documento_numero')) {\n                newObj[key] = Sanitizers.cleanDoc(value);\n            } else if (key.includes('data') || key === 'vigencia_data_inicial' || key === 'vigencia_data_final') {\n                newObj[key] = Sanitizers.cleanDate(value);\n            } else if (key.includes('valor') || key.includes('saldo') || key.includes('remuneracao') || key.includes('montante')) {\n                newObj[key] = Sanitizers.cleanNumber(value);\n            } else if (typeof value === 'object') {\n                newObj[key] = sanitizeObject(value);\n            } else {\n                newObj[key] = value;\n            }\n        }\n        return newObj;\n    }\n    return obj;\n}\n","\nimport { GoogleGenAI, Type } from \"@google/genai\";\nimport { sanitizeObject } from './dataSanitizer';\n\n// Ensure usage of process.env.API_KEY\n// NOTE: Gemini API calls should be made from backend only\nlet ai: any = null;\n\nif (typeof window === 'undefined' && process.env.API_KEY) {\n    ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\n}\n\n/**\n * OCR SERVICE (Gemini 2.0)\n * Maps uploaded documents to specific Audesp blocks.\n */\n\nexport async function extractBlockData(\n  base64Data: string, \n  mimeType: string, \n  blockType: string\n): Promise<any> {\n  \n  let prompt = \"Analyze this document for Audesp Phase V. Extract data strictly to JSON. Dates YYYY-MM-DD. Numbers as floats.\";\n  let schemaType = Type.OBJECT;\n  let schemaProps: any = {};\n\n  // Mapeamento baseado nas novas Se√ß√µes Oficiais\n  switch (blockType) {\n    // SE√á√ÉO 2: FINANCEIRO\n    case 'documentos_fiscais':\n        prompt += \" Extract invoices (Notas Fiscais).\";\n        schemaProps = {\n            documentos_fiscais: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        numero: { type: Type.STRING },\n                        data_emissao: { type: Type.STRING },\n                        valor_bruto: { type: Type.NUMBER },\n                        credor: { \n                            type: Type.OBJECT, \n                            properties: { documento_numero: { type: Type.STRING }, nome: { type: Type.STRING } } \n                        },\n                        descricao: { type: Type.STRING }\n                    }\n                }\n            }\n        };\n        break;\n\n    case 'contratos':\n        prompt += \" Extract contracts.\";\n        schemaProps = {\n            contratos: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        numero: { type: Type.STRING },\n                        data_assinatura: { type: Type.STRING },\n                        valor_montante: { type: Type.NUMBER },\n                        objeto: { type: Type.STRING },\n                        credor: {\n                            type: Type.OBJECT,\n                            properties: { documento_numero: { type: Type.STRING }, nome: { type: Type.STRING } }\n                        }\n                    }\n                }\n            }\n        };\n        break;\n\n    case 'pagamentos':\n        prompt += \" Extract payments (comprovantes, extratos).\";\n        schemaProps = {\n            pagamentos: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        pagamento_data: { type: Type.STRING },\n                        pagamento_valor: { type: Type.NUMBER },\n                        identificacao_documento_fiscal: { type: Type.OBJECT, properties: { numero: { type: Type.STRING } } }\n                    }\n                }\n            }\n        };\n        break;\n\n    case 'empenhos':\n        prompt += \" Extract commitments (Empenhos).\";\n        schemaProps = {\n            empenhos: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        numero: { type: Type.STRING },\n                        data_emissao: { type: Type.STRING },\n                        valor: { type: Type.NUMBER },\n                        historico: { type: Type.STRING }\n                    }\n                }\n            }\n        };\n        break;\n\n    // SE√á√ÉO 4: EMPREGADOS\n    case 'relacao_empregados':\n        prompt += \" Extract payroll (Folha de Pagamento).\";\n        schemaProps = {\n            relacao_empregados: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        cpf: { type: Type.STRING },\n                        data_admissao: { type: Type.STRING },\n                        salario_contratual: { type: Type.NUMBER },\n                        cbo: { type: Type.STRING }\n                    }\n                }\n            }\n        };\n        break;\n\n    default:\n        prompt += \" Extract key fields.\";\n        schemaProps = { info: { type: Type.STRING } };\n        break;\n  }\n\n  try {\n    const response = await ai.models.generateContent({\n      model: 'gemini-2.5-flash',\n      contents: {\n        parts: [\n          { inlineData: { mimeType: mimeType, data: base64Data } },\n          { text: prompt }\n        ]\n      },\n      config: {\n        responseMimeType: \"application/json\",\n        responseSchema: { type: schemaType, properties: schemaProps }\n      }\n    });\n\n    if (response.text) {\n        return sanitizeObject(JSON.parse(response.text));\n    }\n    return null;\n\n  } catch (error) {\n    console.error(\"OCR Service Error:\", error);\n    throw error;\n  }\n}\n","\nimport React, { useState } from 'react';\nimport { extractBlockData } from '../services/ocrService';\n\ninterface GeminiUploaderProps {\n  section: string; // Chave sem√¢ntica (ex: 'contratos', 'empenhos')\n  onDataExtracted: (data: any) => void;\n}\n\nexport const GeminiUploader: React.FC<GeminiUploaderProps> = ({ section, onDataExtracted }) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setLoading(true);\n      setError(null);\n\n      const reader = new FileReader();\n      reader.onloadend = async () => {\n        try {\n          const base64String = (reader.result as string).split(',')[1];\n          const mimeType = file.type;\n          \n          // Using the new OCR Service\n          const extractedData = await extractBlockData(base64String, mimeType, section);\n          \n          if (extractedData) {\n             onDataExtracted(extractedData);\n          } else {\n             setError(\"OCR: N√£o foi poss√≠vel identificar dados estruturados neste documento.\");\n          }\n        } catch (err) {\n          setError(\"Erro no processamento IA. Verifique conex√£o ou tente outro arquivo.\");\n          console.error(err);\n        } finally {\n          setLoading(false);\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div className=\"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-sm\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n            <h3 className=\"text-sm font-bold text-indigo-800 flex items-center gap-2\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\" clipRule=\"evenodd\" />\n                </svg>\n                OCR Inteligente (Gemini 2.0)\n            </h3>\n            <p className=\"text-xs text-indigo-600 mt-1\">\n                Extra√ß√£o autom√°tica para se√ß√£o: <strong>{section}</strong>\n            </p>\n        </div>\n        <div className=\"relative\">\n             <input\n                type=\"file\"\n                accept=\"image/*,application/pdf\"\n                onChange={handleFileChange}\n                disabled={loading}\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n            />\n            <button disabled={loading} className={`px-4 py-2 rounded text-sm font-medium shadow transition-colors ${loading ? 'bg-indigo-300' : 'bg-indigo-600 hover:bg-indigo-700'} text-white`}>\n                {loading ? 'Lendo Documento...' : 'Upload PDF/Imagem'}\n            </button>\n        </div>\n      </div>\n      {error && <p className=\"text-red-600 text-xs mt-2 font-medium\">{error}</p>}\n    </div>\n  );\n};\n","\nimport { GoogleGenAI, Type, Schema } from \"@google/genai\";\nimport { sanitizeObject } from \"./dataSanitizer\";\n\n// Ensure usage of process.env.API_KEY\n// NOTE: Gemini API calls should be made from backend only\n// This is a frontend placeholder that requires a backend proxy\nlet ai: any = null;\n\nif (typeof window === 'undefined' && process.env.API_KEY) {\n    ai = new GoogleGenAI({ apiKey: process.env.API_KEY });\n}\n\n// --- SCHEMAS DEFINITIONS (Reusable) ---\n\nconst CREDOR_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        documento_numero: { type: Type.STRING, description: \"CNPJ or CPF numbers only\" },\n        nome: { type: Type.STRING },\n        documento_tipo: { type: Type.NUMBER, description: \"2 for CNPJ, 1 for CPF\" }\n    }\n};\n\nconst DOC_FISCAL_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero: { type: Type.STRING },\n        data_emissao: { type: Type.STRING, description: \"YYYY-MM-DD\" },\n        valor_bruto: { type: Type.NUMBER },\n        credor: CREDOR_SCHEMA,\n        descricao: { type: Type.STRING },\n        categoria_despesas_tipo: { type: Type.NUMBER }\n    }\n};\n\nconst EMPREGADO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        cpf: { type: Type.STRING },\n        data_admissao: { type: Type.STRING },\n        salario_contratual: { type: Type.NUMBER },\n        cbo: { type: Type.STRING },\n        periodos_remuneracao: {\n            type: Type.ARRAY,\n            items: {\n                type: Type.OBJECT,\n                properties: {\n                    mes: { type: Type.NUMBER },\n                    carga_horaria: { type: Type.NUMBER },\n                    remuneracao_bruta: { type: Type.NUMBER }\n                }\n            }\n        }\n    }\n};\n\nconst CONTRATO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero: { type: Type.STRING },\n        objeto: { type: Type.STRING },\n        data_assinatura: { type: Type.STRING },\n        valor_montante: { type: Type.NUMBER },\n        vigencia_data_inicial: { type: Type.STRING },\n        credor: CREDOR_SCHEMA\n    }\n};\n\nconst PAGAMENTO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        pagamento_data: { type: Type.STRING },\n        pagamento_valor: { type: Type.NUMBER },\n        numero_transacao: { type: Type.STRING },\n        identificacao_documento_fiscal: {\n            type: Type.OBJECT,\n            properties: { numero: { type: Type.STRING } }\n        },\n        meio_pagamento_tipo: { type: Type.NUMBER }\n    }\n};\n\nconst BEM_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        numero_patrimonio: { type: Type.STRING },\n        descricao: { type: Type.STRING },\n        data_aquisicao: { type: Type.STRING },\n        valor_aquisicao: { type: Type.NUMBER }\n    }\n};\n\nconst SALDO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        banco: { type: Type.NUMBER },\n        agencia: { type: Type.NUMBER },\n        conta: { type: Type.STRING },\n        saldo_bancario: { type: Type.NUMBER },\n        saldo_contabil: { type: Type.NUMBER }\n    }\n};\n\nconst RECEITA_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        data_repasse: { type: Type.STRING },\n        valor: { type: Type.NUMBER },\n        data_prevista: { type: Type.STRING }\n    }\n};\n\nconst CEDIDO_SCHEMA: Schema = {\n    type: Type.OBJECT,\n    properties: {\n        cpf: { type: Type.STRING },\n        cargo_publico_ocupado: { type: Type.STRING },\n        data_inicial_cessao: { type: Type.STRING },\n        onus_pagamento: { type: Type.NUMBER }\n    }\n};\n\n// --- MAIN EXTRACTOR FUNCTIONS ---\n\n/**\n * Extracts data from a single image or PDF page for a specific section.\n */\nexport async function extractDataFromImage(\n  base64Data: string, \n  mimeType: string, \n  section: string\n): Promise<any> {\n  \n  let prompt = \"Analyze this document. Extract the data strictly into the specified JSON structure. Normalize dates to YYYY-MM-DD and numbers to floats. Ignore currency symbols.\";\n  let schema: any = {};\n\n  switch (section) {\n    case 'documentos_fiscais':\n      prompt += \" Extract invoices/receipts.\";\n      schema = { type: Type.OBJECT, properties: { documentos_fiscais: { type: Type.ARRAY, items: DOC_FISCAL_SCHEMA } } };\n      break;\n    case 'relacao_empregados':\n      prompt += \" Extract payroll/employee list.\";\n      schema = { type: Type.OBJECT, properties: { empregados: { type: Type.ARRAY, items: EMPREGADO_SCHEMA } } };\n      break;\n    case 'contratos':\n      prompt += \" Extract contracts.\";\n      schema = { type: Type.OBJECT, properties: { contratos: { type: Type.ARRAY, items: CONTRATO_SCHEMA } } };\n      break;\n    case 'pagamentos':\n      prompt += \" Extract payments/bank transfers.\";\n      schema = { type: Type.OBJECT, properties: { pagamentos: { type: Type.ARRAY, items: PAGAMENTO_SCHEMA } } };\n      break;\n    case 'empenhos':\n        schema = {\n            type: Type.OBJECT,\n            properties: {\n                empenhos: {\n                    type: Type.ARRAY,\n                    items: {\n                        type: Type.OBJECT,\n                        properties: {\n                            numero: { type: Type.STRING },\n                            data_emissao: { type: Type.STRING },\n                            valor: { type: Type.NUMBER },\n                            historico: { type: Type.STRING }\n                        }\n                    }\n                }\n            }\n        };\n        break;\n    case 'relacao_bens':\n        prompt += \" Extract asset list (bens patrimoniais).\";\n        schema = { type: Type.OBJECT, properties: { relacao_bens_moveis_adquiridos: { type: Type.ARRAY, items: BEM_SCHEMA } } };\n        break;\n    case 'disponibilidades':\n        prompt += \" Extract bank balances (extrato banc√°rio/concilia√ß√£o).\";\n        schema = { type: Type.OBJECT, properties: { saldos: { type: Type.ARRAY, items: SALDO_SCHEMA } } };\n        break;\n    case 'receitas':\n        prompt += \" Extract revenue/transfers received.\";\n        schema = { type: Type.OBJECT, properties: { repasses_recebidos: { type: Type.ARRAY, items: RECEITA_SCHEMA } } };\n        break;\n    case 'servidores_cedidos':\n        prompt += \" Extract list of ceded public servants.\";\n        schema = { type: Type.OBJECT, properties: { servidores_cedidos: { type: Type.ARRAY, items: CEDIDO_SCHEMA } } };\n        break;\n    default:\n        // Fallback for simple fields\n        prompt += \" Extract key information.\";\n        schema = { type: Type.OBJECT, properties: { info: { type: Type.STRING } } };\n        break;\n  }\n\n  try {\n    const response = await ai.models.generateContent({\n      model: 'gemini-2.5-flash',\n      contents: {\n        parts: [\n          { inlineData: { mimeType: mimeType, data: base64Data } },\n          { text: prompt }\n        ]\n      },\n      config: {\n        responseMimeType: \"application/json\",\n        responseSchema: schema\n      }\n    });\n\n    if (response.text) {\n        const raw = JSON.parse(response.text);\n        // If the schema wrapped in a root property, check logic\n        const keys = Object.keys(raw);\n        if (keys.length === 1 && Array.isArray(raw[keys[0]])) {\n            return sanitizeObject(raw[keys[0]]); // Return the array directly if needed by logic\n        }\n        // Special Case: relacao_bens needs nested object structure\n        if(section === 'relacao_bens' && raw.relacao_bens_moveis_adquiridos) {\n            return sanitizeObject(raw);\n        }\n        \n        return sanitizeObject(raw);\n    }\n    return null;\n\n  } catch (error) {\n    console.error(\"Gemini Extraction Error:\", error);\n    throw error;\n  }\n}\n\n/**\n * MASSIVE EXTRACTION: Reads a full PDF and maps to the entire Audesp Schema.\n * This is Module 2 of the requirement.\n */\nexport async function extractFullReport(base64Data: string, mimeType: string): Promise<any> {\n    const prompt = `\n    You are an expert accountant and auditor for TCESP Audesp Phase V.\n    Analyze this ENTIRE document (Accountability Report / Presta√ß√£o de Contas).\n    \n    Your task is to identify and extract ALL relevant sections into a single JSON structure.\n    \n    1. Identify the 'Descritor' (Year, Month, Entity, City).\n    2. Identify 'Empregados' (Payroll).\n    3. Identify 'Contratos' (Contracts).\n    4. Identify 'Documentos Fiscais' (Invoices, Receipts).\n    5. Identify 'Pagamentos' (Bank transfers, checks).\n    6. Identify 'Empenhos' (Commitments).\n    7. Identify 'Repasses' (Transfers received).\n    \n    If a section is not found, return an empty array for it.\n    Normalize all dates to YYYY-MM-DD.\n    Normalize all values to float (e.g. 1250.50).\n    Clean CPF/CNPJ (numbers only).\n    `;\n\n    // A monolithic schema covering the main arrays\n    const FULL_SCHEMA: Schema = {\n        type: Type.OBJECT,\n        properties: {\n            descritor: {\n                type: Type.OBJECT,\n                properties: {\n                    ano: { type: Type.NUMBER },\n                    mes: { type: Type.NUMBER },\n                    entidade: { type: Type.NUMBER },\n                    municipio: { type: Type.NUMBER }\n                }\n            },\n            relacao_empregados: { type: Type.ARRAY, items: EMPREGADO_SCHEMA },\n            contratos: { type: Type.ARRAY, items: CONTRATO_SCHEMA },\n            documentos_fiscais: { type: Type.ARRAY, items: DOC_FISCAL_SCHEMA },\n            pagamentos: { type: Type.ARRAY, items: PAGAMENTO_SCHEMA },\n            empenhos: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        numero: { type: Type.STRING },\n                        data_emissao: { type: Type.STRING },\n                        valor: { type: Type.NUMBER },\n                        historico: { type: Type.STRING }\n                    }\n                }\n            },\n            repasses: {\n                type: Type.ARRAY,\n                items: {\n                    type: Type.OBJECT,\n                    properties: {\n                        data_repasse: { type: Type.STRING },\n                        valor_repasse: { type: Type.NUMBER },\n                        numero_documento: { type: Type.STRING }\n                    }\n                }\n            }\n        }\n    };\n\n    try {\n        const response = await ai.models.generateContent({\n            model: 'gemini-2.5-flash',\n            contents: {\n                parts: [\n                    { inlineData: { mimeType: mimeType, data: base64Data } },\n                    { text: prompt }\n                ]\n            },\n            config: {\n                responseMimeType: \"application/json\",\n                responseSchema: FULL_SCHEMA\n            }\n        });\n\n        if (response.text) {\n            const raw = JSON.parse(response.text);\n            return sanitizeObject(raw);\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Full Report Extraction Error:\", error);\n        throw error;\n    }\n}\n","\nimport React, { useState } from 'react';\nimport { extractFullReport } from '../services/geminiService';\nimport { PrestacaoContas } from '../types';\nimport { CLS } from './ui/BlockBase';\n\ninterface FullReportImporterProps {\n    onDataMerge: (data: Partial<PrestacaoContas>) => void;\n    onCancel: () => void;\n}\n\nexport const FullReportImporter: React.FC<FullReportImporterProps> = ({ onDataMerge, onCancel }) => {\n    const [loading, setLoading] = useState(false);\n    const [status, setStatus] = useState<string>('');\n    const [extractedData, setExtractedData] = useState<any>(null);\n\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            const file = e.target.files[0];\n            setLoading(true);\n            setStatus('Lendo arquivo (Isso pode levar alguns segundos)...');\n\n            const reader = new FileReader();\n            reader.onloadend = async () => {\n                try {\n                    const base64String = (reader.result as string).split(',')[1];\n                    \n                    setStatus('Enviando para IA (Gemini 2.0)...');\n                    const data = await extractFullReport(base64String, file.type);\n                    \n                    if (data) {\n                        setExtractedData(data);\n                        setStatus('An√°lise conclu√≠da. Revise os dados abaixo.');\n                    } else {\n                        setStatus('Falha: Nenhum dado estruturado encontrado.');\n                    }\n                } catch (err: any) {\n                    setStatus(`Erro: ${err.message}`);\n                } finally {\n                    setLoading(false);\n                }\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n\n    const handleAccept = () => {\n        if (extractedData) {\n            onDataMerge(extractedData);\n        }\n    };\n\n    if (extractedData) {\n        return (\n            <div className=\"fixed inset-0 bg-slate-900/80 z-50 flex items-center justify-center p-4\">\n                <div className=\"bg-white w-full max-w-4xl h-[90vh] rounded-lg shadow-2xl flex flex-col\">\n                    <div className=\"p-6 border-b border-slate-200 flex justify-between items-center bg-slate-50\">\n                        <div>\n                            <h2 className=\"text-xl font-bold text-slate-800\">Revis√£o da Importa√ß√£o Inteligente</h2>\n                            <p className=\"text-sm text-slate-500\">O OCR identificou os seguintes registros no seu documento.</p>\n                        </div>\n                        <div className=\"flex gap-3\">\n                            <button onClick={onCancel} className=\"text-slate-500 hover:text-slate-800 font-bold text-sm px-4\">\n                                Cancelar\n                            </button>\n                            <button onClick={handleAccept} className={CLS.BTN_ADD}>\n                                Confirmar e Importar Tudo\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <div className=\"flex-1 overflow-y-auto p-6 bg-slate-100 space-y-6\">\n                        {/* Summary Cards */}\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                            <StatCard label=\"Empregados\" count={extractedData.relacao_empregados?.length || 0} />\n                            <StatCard label=\"Contratos\" count={extractedData.contratos?.length || 0} />\n                            <StatCard label=\"Notas Fiscais\" count={extractedData.documentos_fiscais?.length || 0} />\n                            <StatCard label=\"Pagamentos\" count={extractedData.pagamentos?.length || 0} />\n                        </div>\n\n                        {/* Raw JSON Preview (for now, better than nothing) */}\n                        <div className=\"bg-white p-4 rounded border border-slate-200\">\n                             <h3 className=\"font-bold text-sm mb-2 text-slate-700\">Pr√©-visualiza√ß√£o dos Dados Estruturados</h3>\n                             <pre className=\"text-xs font-mono bg-slate-900 text-green-400 p-4 rounded overflow-auto max-h-96\">\n                                {JSON.stringify(extractedData, null, 2)}\n                             </pre>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"fixed inset-0 bg-slate-900/80 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white w-full max-w-lg rounded-lg shadow-2xl p-8 text-center\">\n                <div className=\"mb-6\">\n                    <div className=\"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l4.414 4.414a1 1 0 01.586 1.414V19a2 2 0 01-2 2z\" />\n                        </svg>\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-slate-800\">Importar Presta√ß√£o Completa</h2>\n                    <p className=\"text-slate-500 mt-2 text-sm\">\n                        Fa√ßa upload de um PDF contendo m√∫ltiplos documentos (Notas, Extratos, Folha). \n                        A IA ir√° separar e classificar tudo automaticamente.\n                    </p>\n                </div>\n\n                <div className=\"border-2 border-dashed border-slate-300 rounded-lg p-8 hover:bg-slate-50 transition-colors relative cursor-pointer\">\n                    <input \n                        type=\"file\" \n                        accept=\"application/pdf\"\n                        onChange={handleFileChange}\n                        disabled={loading}\n                        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                    />\n                    {loading ? (\n                        <div className=\"space-y-3\">\n                            <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto\"></div>\n                            <p className=\"text-sm font-bold text-blue-600\">{status}</p>\n                        </div>\n                    ) : (\n                        <div>\n                            <p className=\"font-bold text-slate-700\">Clique ou arraste o PDF aqui</p>\n                            <p className=\"text-xs text-slate-400 mt-1\">Suporta arquivos PDF digitalizados (OCR via Gemini)</p>\n                        </div>\n                    )}\n                </div>\n\n                <button onClick={onCancel} className=\"mt-6 text-slate-400 hover:text-slate-600 text-sm font-medium\">\n                    Cancelar\n                </button>\n            </div>\n        </div>\n    );\n};\n\nconst StatCard = ({ label, count }: { label: string, count: number }) => (\n    <div className=\"bg-white p-4 rounded border border-slate-200 shadow-sm text-center\">\n        <div className=\"text-2xl font-bold text-blue-600\">{count}</div>\n        <div className=\"text-xs text-slate-500 uppercase font-bold\">{label}</div>\n    </div>\n);\n"],"names":["CLS","INPUT","CHECKBOX","LABEL","SECTION","BTN_ADD","BTN_REMOVE","BTN_SUB","HEADER_TITLE","HEADER_DIVIDER","GRID_CONTAINER","FLEX_ROW_CENTER","SectionHeader","_ref","title","children","_jsxs","className","_jsx","InputGroup","_ref2","label","error","ArrayBlock","_ref3","items","newItemTemplate","onAdd","onRemove","onUpdate","renderItem","ocrSection","onOcrData","onClick","GeminiUploader","section","onDataExtracted","data","empregados","Array","isArray","forEach","emp","_objectSpread","length","map","item","idx","field","val","Field","_ref4","value","onChange","type","options","e","target","opt","Number","step","undefined","Sanitizers","String","replace","test","matchBR","match","day","padStart","month","year","concat","str","includes","num","parseFloat","isNaN","sanitizeObject","obj","newObj","key","ai","window","process","API_KEY","GoogleGenAI","apiKey","loading","setLoading","useState","setError","xmlns","viewBox","fill","fillRule","d","clipRule","accept","async","files","file","reader","FileReader","onloadend","base64String","result","split","mimeType","extractedData","base64Data","blockType","prompt","schemaType","Type","OBJECT","schemaProps","documentos_fiscais","ARRAY","properties","numero","STRING","data_emissao","valor_bruto","NUMBER","credor","documento_numero","nome","descricao","contratos","data_assinatura","valor_montante","objeto","pagamentos","pagamento_data","pagamento_valor","identificacao_documento_fiscal","empenhos","valor","historico","relacao_empregados","cpf","data_admissao","salario_contratual","cbo","info","response","models","generateContent","model","contents","parts","inlineData","text","config","responseMimeType","responseSchema","JSON","parse","console","extractBlockData","err","readAsDataURL","disabled","CREDOR_SCHEMA","description","documento_tipo","DOC_FISCAL_SCHEMA","categoria_despesas_tipo","EMPREGADO_SCHEMA","periodos_remuneracao","mes","carga_horaria","remuneracao_bruta","CONTRATO_SCHEMA","vigencia_data_inicial","PAGAMENTO_SCHEMA","numero_transacao","meio_pagamento_tipo","FullReportImporter","onDataMerge","onCancel","status","setStatus","setExtractedData","handleAccept","_extractedData$relaca","_extractedData$contra","_extractedData$docume","_extractedData$pagame","StatCard","count","stringify","stroke","strokeLinecap","strokeLinejoin","strokeWidth","FULL_SCHEMA","descritor","ano","entidade","municipio","repasses","data_repasse","valor_repasse","numero_documento","raw","extractFullReport","message"],"ignoreList":[],"sourceRoot":""}